var $parcel$global="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{};function $parcel$export(e,t,i,r){Object.defineProperty(e,t,{get:i,set:r,enumerable:!0,configurable:!0})}var $parcel$modules={},$parcel$inits={},parcelRequire=$parcel$global.parcelRequire3a43;null==parcelRequire&&(parcelRequire=function(e){if(e in $parcel$modules)return $parcel$modules[e].exports;if(e in $parcel$inits){var t=$parcel$inits[e];delete $parcel$inits[e];var i={id:e,exports:{}};return $parcel$modules[e]=i,t.call(i.exports,i,i.exports),i.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r},parcelRequire.register=function(e,t){$parcel$inits[e]=t},$parcel$global.parcelRequire3a43=parcelRequire),parcelRequire.register("lTI0F",(function(module,exports){function $parcel$export(e,t,i,r){Object.defineProperty(e,t,{get:i,set:r,enumerable:!0,configurable:!0})}$parcel$export(module.exports,"Rinn",(function(){return $07eb01cb16db42c1$export$eefcfe56efaaa57d})),$parcel$export(module.exports,"Class",(function(){return $07eb01cb16db42c1$export$4c85e640eb41c31b})),$parcel$export(module.exports,"Schema",(function(){return $07eb01cb16db42c1$export$19342e026b58ebb7})),$parcel$export(module.exports,"Template",(function(){return $07eb01cb16db42c1$export$14416b8d99d47caa}));var $parcel$global="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==$parcel$global?$parcel$global:{},$parcel$modules={},$parcel$inits={},parcelRequire=$parcel$global.parcelRequire25d2;null==parcelRequire&&(parcelRequire=function(e){if(e in $parcel$modules)return $parcel$modules[e].exports;if(e in $parcel$inits){var t=$parcel$inits[e];delete $parcel$inits[e];var i={id:e,exports:{}};return $parcel$modules[e]=i,t.call(i.exports,i,i.exports),i.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r},parcelRequire.register=function(e,t){$parcel$inits[e]=t},$parcel$global.parcelRequire25d2=parcelRequire),parcelRequire.register("91JQY",(function(module,exports){$parcel$export(module.exports,"default",(function(){return $6927c693ce3dd189$export$2e2bcd8739ae039}));var $8ogo9=parcelRequire("8ogo9"),$6927c693ce3dd189$export$2e2bcd8739ae039={_getref:function(value,obj){return"string"==typeof value?("#"==value.substr(0,1)?value=obj.get(value.substr(1)):"@"==value.substr(0,1)&&(value=obj[value.substr(1)]),"string"==typeof value?eval(value):value):value},type:function(e,t,i,r){switch(t){case"int":if(r=parseInt(r),isNaN(r))throw new Error(t);break;case"float":if(r=parseFloat(r),isNaN(r))throw new Error(t);break;case"string":r=null==r?"":r.toString();break;case"bit":if(!0===r||!1===r){r=r?1:0;break}if(r=parseInt(r),isNaN(r))throw new Error(t);r=r?1:0;break;case"array":if("array"==$0bc52734b49fc041$export$2e2bcd8739ae039.typeOf(r))break;if(null==r){r=[];break}throw new Error(t);case"bool":if("true"===r||!0===r){r=!0;break}if("false"===r||!1===r){r=!1;break}throw new Error(t)}return r},model:function(e,t,i,r){var n=this._getref(t,e);if(!n)throw new Error(t);return r?n.ensure(r):new n},cls:function(e,t,i,r){var n=this._getref(t,e);return r?$0bc52734b49fc041$export$2e2bcd8739ae039.ensureTypeOf(n,r):new n},arrayof:function(e,t,i,r){var n=this._getref(t,e);if(r||(r=[]),!n||"array"!=$0bc52734b49fc041$export$2e2bcd8739ae039.typeOf(r))throw new Error(t);for(var a=0;a<r.length;a++)r[a]=$0bc52734b49fc041$export$2e2bcd8739ae039.ensureTypeOf(n,r[a]);return r},arraynull:function(e,t,i,r){var n=!1;if("object"==$0bc52734b49fc041$export$2e2bcd8739ae039.typeOf(t)&&(t.remove&&(n=t.remove),t=t.value),t)return r;if("array"!=$0bc52734b49fc041$export$2e2bcd8739ae039.typeOf(r))throw new Error(t);for(var a=0;a<r.length;a++)if(null==r[a]){if(!n)throw new Error(t);r.splice(a--,1)}return r},arraycompliant:function(e,t,i,r){var n=!1;if("object"==$0bc52734b49fc041$export$2e2bcd8739ae039.typeOf(t)&&(t.remove&&(n=t.remove),t=t.value),!t)return r;if("array"!=$0bc52734b49fc041$export$2e2bcd8739ae039.typeOf(r))throw new Error(t);for(var a=0;a<r.length;a++)if(null!=r[a]&&!r[a].isCompliant()){if(!n)throw new Error(t);r.splice(a--,1)}return r},required:function(e,t,i,r){if(null==r)throw new Error(t?"":"null");if("array"===$0bc52734b49fc041$export$2e2bcd8739ae039.typeOf(r)){if(0==r.length)throw new Error(t?"":"null")}else if(0==r.toString().length)throw new Error(t?"":"null");return r},minlen:function(e,t,i,r){if(r.toString().length<t)throw new Error(t);return r},maxlen:function(e,t,i,r){if(r.toString().length>t)throw new Error(t);return r},minval:function(e,t,i,r){if(parseFloat(r)<t)throw new Error(t);return r},maxval:function(e,t,i,r){if(parseFloat(r)>t)throw new Error(t);return r},mincount:function(e,t,i,r){if("array"!=$0bc52734b49fc041$export$2e2bcd8739ae039.typeOf(r)||r.length<t)throw new Error(t);return r},maxcount:function(e,t,i,r){if("array"!=$0bc52734b49fc041$export$2e2bcd8739ae039.typeOf(r)||r.length>t)throw new Error(t);return r},pattern:function(e,t,i,r){if(!$8ogo9.default[t].test(r.toString()))throw new Error(t);return r},inset:function(e,t,i,r){if("array"!=$0bc52734b49fc041$export$2e2bcd8739ae039.typeOf(t)){if(!new RegExp("^("+t.toString()+")$").test(r.toString()))throw new Error(t);return r}if(-1==t.indexOf(r.toString()))throw new Error(t.join("|"));return r},upper:function(e,t,i,r){return t?r.toString().toUpperCase():r},lower:function(e,t,i,r){return t?r.toString().toLowerCase():r}}}));let $0bc52734b49fc041$var$Rinn={};var $0bc52734b49fc041$export$2e2bcd8739ae039=$0bc52734b49fc041$var$Rinn;$0bc52734b49fc041$var$Rinn.invokeLater=function(e){e&&setTimeout((function(){e()}),10)},$0bc52734b49fc041$var$Rinn.wait=function(e){return new Promise((function(t,i){setTimeout(t,e)}))},$0bc52734b49fc041$var$Rinn.typeOf=function(e){return e instanceof Array?"array":null===e?"null":(typeof e).toString().toLowerCase()},$0bc52734b49fc041$var$Rinn.isArrayOrObject=function(e){switch($0bc52734b49fc041$var$Rinn.typeOf(e)){case"array":case"object":return!0}return!1},$0bc52734b49fc041$var$Rinn.clone=function(e){let t=$0bc52734b49fc041$var$Rinn.typeOf(e);if("array"===t){t=[];for(let i=0;i<e.length;i++)t.push($0bc52734b49fc041$var$Rinn.clone(e[i]))}else if("object"===t){if("clone"in e&&"function"==typeof e.clone)return e.clone();t={};for(let i in e)t[i]=$0bc52734b49fc041$var$Rinn.clone(e[i])}else t=e;return t},$0bc52734b49fc041$var$Rinn.merge=function(e,...t){if("array"==$0bc52734b49fc041$var$Rinn.typeOf(e))for(let i=0;i<t.length;i++){let r=t[i];if("array"!=$0bc52734b49fc041$var$Rinn.typeOf(r))e.push(r);else for(let t=0;t<r.length;t++)e.push($0bc52734b49fc041$var$Rinn.clone(r[t]))}else if("object"==$0bc52734b49fc041$var$Rinn.typeOf(e))for(let i=0;i<t.length;i++){let r=t[i];if("object"==$0bc52734b49fc041$var$Rinn.typeOf(r))for(let t in r)$0bc52734b49fc041$var$Rinn.isArrayOrObject(r[t])?t in e?$0bc52734b49fc041$var$Rinn.merge(e[t],r[t]):e[t]=$0bc52734b49fc041$var$Rinn.clone(r[t]):e[t]=r[t]}return e},$0bc52734b49fc041$var$Rinn.override=function(e,...t){for(let i=0;i<t.length;i++)for(let r in t[i])e[r]=t[i][r];return e},$0bc52734b49fc041$var$Rinn.partialCompare=function(e,t){if(null==e||null==t)return!1;if(e===t)return!0;for(var i in t)if(e[i]!=t[i])return!1;return!0},$0bc52734b49fc041$var$Rinn.arrayFind=function(e,t,i){for(var r=0;e&&r<e.length;r++)if(this.partialCompare(e[r],t))return i?e[r]:r;return!!i&&null},$0bc52734b49fc041$var$Rinn.isInstanceOf=function(e,t){return!(!e||!t||"object"!=typeof e)&&(e instanceof t||"isInstanceOf"in e&&e.isInstanceOf(t))},$0bc52734b49fc041$var$Rinn.indexOf=function(e,t,i=!1){if(i){for(let i=0;i<e.length;i++)if(e[i]===t)return i;return-1}for(let i in e)if(e[i]===t)return i;return-1},$0bc52734b49fc041$var$Rinn.escape=function(e){return(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},$0bc52734b49fc041$var$Rinn.ensureTypeOf=function(e,t){return!t||!e||t instanceof e||t.isInstanceOf&&e.prototype.className&&t.isInstanceOf(e.prototype.className)?t:new e(t)},$0bc52734b49fc041$var$Rinn.serialize=function(e){return JSON.stringify(e)},$0bc52734b49fc041$var$Rinn.deserialize=function(e){return JSON.parse(e)},$0bc52734b49fc041$var$Rinn.hookAppend=function(e,t,i,r=!0){const n=e[t];return e[t]=r?function(...e){if(!1!==n.apply(this,e))return i.apply(this,e)}:function(...e){return n.apply(this,e),i.apply(this,e)},{unhook:function(){e[t]=n}}},$0bc52734b49fc041$var$Rinn.hookPrepend=function(e,t,i,r=!0){const n=e[t];return e[t]=r?function(...e){if(!1!==i.apply(this,e))return n.apply(this,e)}:function(...e){return i.apply(this,e),n.apply(this,e)},{unhook:function(){e[t]=n}}},parcelRequire.register("8ogo9",(function(e,t){$parcel$export(e.exports,"default",(function(){return i}));var i={email:/^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)+$/i,url:/^[\w-]+:\/\/[\w-]+(\.\w+)+.*$/,urlNoProt:/^[\w-]+(\.\w+)+.*$/,name:/^[-A-Za-z0-9_.]+$/,uname:/^['\pL\pN ]+$/,text:/^[^&<>{}]*$/,utext:/^([\r\n\pL\pN\pS &!@#$%*\[\]()_+=;',.\/?:"~-]+)$/}}));
//!class Class
const $8651ccc8e7e5ec23$var$Class=function(){};$8651ccc8e7e5ec23$var$Class._class=$8651ccc8e7e5ec23$var$Class,$8651ccc8e7e5ec23$var$Class._super={},$8651ccc8e7e5ec23$var$Class.prototype.className="Class",$8651ccc8e7e5ec23$var$Class.prototype.__ctor=function(){},$8651ccc8e7e5ec23$var$Class.prototype.__dtor=function(){},$8651ccc8e7e5ec23$var$Class.prototype.isInstanceOf=function(e){return null!==e&&("function"==typeof e?e=e.prototype.className:"string"!=typeof e&&(e=e.__proto__.className),this.className===e||this._super.hasOwnProperty(e))},$8651ccc8e7e5ec23$var$Class.instanceOf=function(e,t){return null!==e&&null!==t&&e.isInstanceOf(t)},$8651ccc8e7e5ec23$var$Class.prototype._initSuperRefs=function(){let e=this.constructor._super,t={};const i=this;for(let r in e){let n={},a=e[r].prototype;for(let e in a)"function"===$0bc52734b49fc041$export$2e2bcd8739ae039.typeOf(a[e])&&(n[e]=function(e){return function(t,r,n,a,s,o,l,c,h,u,d){return e.call(i,t,r,n,a,s,o,l,c,h,u,d)}}(a[e]));t[r]=n}this._super=t},$8651ccc8e7e5ec23$var$Class.inherit=function(e){let t=this._class,i=t._super,r=t._class;if("function"===$0bc52734b49fc041$export$2e2bcd8739ae039.typeOf(e)){for(let i in e._class)/^[A-Z]/.test(i)||(t[i]=e._class[i]);$0bc52734b49fc041$export$2e2bcd8739ae039.override(t.prototype,e._class.prototype),$0bc52734b49fc041$export$2e2bcd8739ae039.override(i,e._class._super),e._class.prototype.className&&(i[e._class.prototype.className]=e._class)}else $0bc52734b49fc041$export$2e2bcd8739ae039.override(t.prototype,e);return t._super=i,t._class=r,t},$8651ccc8e7e5ec23$var$Class.prototype._extend=function(e,t){if(0===t.length)return e;const i=function(...e){this._initSuperRefs(),this.__ctor.apply(this,e)};i._class=i,i._super={},$8651ccc8e7e5ec23$var$Class.inherit.call(i,e),delete i.prototype.className;for(let e=0;e<t.length;e++)i.inherit(t[e]);return delete i._super.Class,"classInit"in i.prototype&&i.prototype.classInit(),i.isInstance=function(e){return $0bc52734b49fc041$export$2e2bcd8739ae039.isInstanceOf(e,i)},i},$8651ccc8e7e5ec23$var$Class.extend=function(...e){return this._class.prototype._extend(this,e)},$8651ccc8e7e5ec23$var$Class.create=function(e){return new(this.extend(e))};var $8651ccc8e7e5ec23$export$2e2bcd8739ae039=$8651ccc8e7e5ec23$var$Class,$b6677aaba4a0e4e9$export$2e2bcd8739ae039=$8651ccc8e7e5ec23$export$2e2bcd8739ae039.extend({className:"Event",source:null,name:null,args:null,_async:!1,list:null,next:null,ret:null,original:null,i:-1,__ctor:function(e,t,i,r,n,a){this.source=e,this.name=i,this.args=r,this.cbHandler=n,this.cbContext=a,this.list=t,this.reset()},reset:function(){return this.next=null,this.ret=[],this._async=!1,this.i=-1,this},setSource:function(e){return this.source=e,this},wait:function(){return this._async=!0,this},resume:function(){for(this._async=!1;!(this._async||++this.i>=this.list.length);)if(!this.list[this.i].silent)if("string"==$0bc52734b49fc041$export$2e2bcd8739ae039.typeOf(this.list[this.i].handler)){if(this.list[this.i].context){if(!this.list[this.i].context[this.list[this.i].handler])continue;if(!1===this.list[this.i].context[this.list[this.i].handler](this,this.args,this.list[this.i].data))break}else if(!1===$parcel$global[this.list[this.i].handler].call(null,this,this.args,this.list[this.i].data))break}else if(!1===this.list[this.i].handler.call(this.list[this.i].context,this,this.args,this.list[this.i].data))break;return this._async||(this.i>=this.list.length&&this.next&&this.next.resume(),this.cbHandler&&this.cbHandler.call(this.cbContext)),this},from:function(e){return this.original=e,this},enqueue:function(e){if(!e)return this;var t;for(t=this;null!=t.next;t=t.next);return t.next=e,e.from(this),this}}),$cb9168e99253fb00$export$2e2bcd8739ae039=$8651ccc8e7e5ec23$export$2e2bcd8739ae039.extend({className:"EventDispatcher",listeners:null,namespace:null,__ctor:function(){this.listeners={}},setNamespace:function(e){return this.namespace=e,this},addEventListener:function(e,t,i,r){var n=(e=e.split(":"))[e.length-1],a=e.length>1?e[0]:null;return this.listeners[n]||(this.listeners[n]=[]),this.listeners[n].push({ns:a,handler:t,context:i,data:r,silent:0}),this},removeEventListener:function(e,t,i){var r=(e=e.split(":"))[e.length-1],n=e.length>1?e[0]:null;if("*"==r)for(var a in this.listeners)for(var s=this.listeners[a],o=0;o<s.length;o++){var l=!0;t&&(l=l&&s[o].handler===t),i&&(l=l&&s[o].context===i),n&&(l=l&&s[o].ns==n),l&&s.splice(o--,1)}else{if(!this.listeners[r])return this;for(s=this.listeners[r],o=0;o<s.length;o++)l=!0,t&&(l=l&&s[o].handler===t),i&&(l=l&&s[o].context===i),n&&(l=l&&s[o].ns==n),l&&s.splice(o--,1)}return this},prepareEvent:function(e,t,i,r){var n=[],a=(e=e.split(":"))[e.length-1],s=e.length>1?e[0]:null;this.listeners[a]&&(n=n.concat(this.listeners[a])),this.listeners["*"]&&(n=n.concat(this.listeners["*"]));for(var o=0;o<n.length;o++)n[o].silent&&n.splice(o--,1);if(s)for(o=0;o<n.length;o++)n[o].ns!=s&&n.splice(o--,1);return new $b6677aaba4a0e4e9$export$2e2bcd8739ae039(this,n,a,t,i,r)},silence:function(e,t){var i=(e=e.split(":"))[e.length-1],r=e.length>1?e[0]:null;if(t=!1===t?-1:1,"*"==i)for(var n in this.listeners)for(var a=this.listeners[n],s=0;s<a.length;s++)r&&a[s].ns!=r||(a[s].silent+=t);else{if(!this.listeners[i])return this;for(a=this.listeners[i],s=0;s<a.length;s++)r&&a[s].ns!=r||(a[s].silent+=t)}return this},dispatchEvent:function(e,t,i,r){return this.prepareEvent(this.namespace?this.namespace+":"+e:e,t,i,r).resume()}}),$91JQY=parcelRequire("91JQY");let $4d78f9734f64a4b0$var$_Model=$cb9168e99253fb00$export$2e2bcd8739ae039.extend({className:"Model",defaults:null,constraints:null,data:null,changedList:null,_silent:0,_level:0,__ctor:function(e,t){if(this._super.EventDispatcher.__ctor(),this.data={},null!=t)this.reset(t,!1);else{let e=null;if(!this.defaults&&this.constraints){e={};for(let t in this.constraints){let i=this.constraints[t];null!==i.def&&void 0!==i.def?"function"==typeof i.def?e[t]=i.def():e[t]=i.def:e[t]=null}}this.reset(e)}this.init(),null!=e&&this.set(e,!0),this.constraints&&this.update(),this.ready()},reset:function(e,t){if(!this.defaults){if(!e||"object"!==$0bc52734b49fc041$export$2e2bcd8739ae039.typeOf(e)&&"function"!==$0bc52734b49fc041$export$2e2bcd8739ae039.typeOf(e))return this;this.defaults=e}return"function"===$0bc52734b49fc041$export$2e2bcd8739ae039.typeOf(this.defaults)?this.data=this.defaults():this.data=$0bc52734b49fc041$export$2e2bcd8739ae039.clone(this.defaults),!1===t||!1===e?this:this.update(null,!0)},init:function(){},ready:function(){},silent:function(e){return this._silent+=e?1:-1,this},_validate:function(e,t){if(!this.constraints||!this.constraints[e])return t;var i=this.constraints[e],r=t;for(var n in i)if($4d78f9734f64a4b0$var$_Model.Constraints[n])try{r=$4d78f9734f64a4b0$var$_Model.Constraints[n](this,i[n],e,r)}catch(t){if("null"==t.message)break;throw new Error(`Constraint [${n}:${i[n]}] failed on property '${e}'.`)}return r},_set:function(e,t){if(!this.constraints||!this.constraints[e])return this.data[e]=t,t;var i=this.constraints[e],r=(this.data[e],t);for(var n in i)if($4d78f9734f64a4b0$var$_Model.Constraints[n])try{r=$4d78f9734f64a4b0$var$_Model.Constraints[n](this,i[n],e,r)}catch(i){if("null"==i.message)break;this._silent||this.dispatchEvent("constraintError",{constraint:n,message:i.message,name:e,value:t});break}return this.data[e]=r},_propertyEvent:function(e,t,i,r){var n={name:e,old:t,value:i,level:this._level},a=this.dispatchEvent("propertyChanging",n);r?this.data[e]=n.value:n.value=this._set(e,n.value),null!=a&&a.ret.length&&!1===a.ret[0]||(this.dispatchEvent("propertyChanged."+e,n),this.dispatchEvent("propertyChanged",n),this.changedList.push(e))},set:function(){var e=arguments.length,t=!1,i=!1;if((e>2||2==e&&"object"==$0bc52734b49fc041$export$2e2bcd8739ae039.typeOf(arguments[0]))&&"boolean"==$0bc52734b49fc041$export$2e2bcd8739ae039.typeOf(arguments[e-1])&&!1===(t=arguments[--e])&&(i=!0),0==this._level&&(this.changedList=[]),this._level++,2==e)(this.data[arguments[0]]!=arguments[1]||t)&&(this._silent||i?this._set(arguments[0],arguments[1]):this._propertyEvent(arguments[0],this.data[arguments[0]],this._validate(arguments[0],arguments[1])));else for(var r in arguments[0])(this.data[r]!=arguments[0][r]||t)&&(this._silent||i?this._set(r,arguments[0][r]):this._propertyEvent(r,this.data[r],this._validate(r,arguments[0][r])));return--this._level||!this.changedList.length||i||this._silent||this.dispatchEvent("modelChanged",{fields:this.changedList}),this},has:function(e){return e in this.data},get:function(e,t){return 0==arguments.length||!1===e?this.data:1==arguments.length&&!0===e?this.flatten():2==arguments.length&&void 0===this.data[e]?t:this.data[e]},getInt:function(e,t){return 2==arguments.length&&void 0===this.data[e]?t:parseInt(this.data[e])},getFloat:function(e,t){return 2==arguments.length&&void 0===this.data[e]?t:parseFloat(this.data[e])},getBool:function(e,t){return"true"===(e=2==arguments.length&&void 0===this.data[e]?t:this.data[e])||!0===e||"false"!==e&&!1!==e&&!!parseInt(e)},getReference:function(e){var t=this;return{get:function(){return t.get(e)},set:function(i){t.set(e,i)}}},constraint:function(e,t,i){if(3==arguments.length||2==arguments.length||1==arguments.length&&"object"==$0bc52734b49fc041$export$2e2bcd8739ae039.typeOf(e)){switch(this.constraints===this.constructor.prototype.constraints&&(this.constraints=$0bc52734b49fc041$export$2e2bcd8739ae039.clone(this.constraints)),arguments.length){case 1:$0bc52734b49fc041$export$2e2bcd8739ae039.override(this.constraints,e);break;case 2:$0bc52734b49fc041$export$2e2bcd8739ae039.override(this.constraints[e],t);break;case 3:this.constraints[e][t]=i}return this}return e?this.constraints[e]:this},flatten:function(e,t){if(e)return null==(n=this.flatten(!1,!0))?null:(n.class=this.classPath,n);if(!this.constraints&&!this.defaults)return this.data;if(!this.isCompliant())return{};var i=this.constraints,r=this.defaults?"function"==$0bc52734b49fc041$export$2e2bcd8739ae039.typeOf(this.defaults)?this.defaults():this.defaults:this.constraints,n={};for(var a in this.data)if(a in r){if(i&&i[a]){var s=i[a];if(s.model){n[a]=this.data[a]?this.data[a].flatten(t):null;continue}if(s.arrayof){n[a]=[];for(var o=0;o<this.data[a].length;o++)n[a][o]=this.data[a][o]?this.data[a][o].flatten(t):null;continue}if(s.cls){n[a]=this.data[a]?this.data[a].flatten():null;continue}}n[a]=this.data[a]}return n},remove:function(e,t){if("array"==$0bc52734b49fc041$export$2e2bcd8739ae039.typeOf(e)){for(var i=0;i<e.length;i++)delete this.data[e[i]];!1===t||this._silent||this.dispatchEvent("propertyRemoved",{fields:e})}else delete this.data[e],!1===t||this._silent||this.dispatchEvent("propertyRemoved",{fields:[e]})},update:function(e,t){if(this._silent)return this;if(0==this._level&&(this.changedList=[]),this._level++,e&&"string"==$0bc52734b49fc041$export$2e2bcd8739ae039.typeOf(e))this._propertyEvent(e,this.data[e],this.data[e],t);else if(e&&"array"==$0bc52734b49fc041$export$2e2bcd8739ae039.typeOf(e))for(var i of e)this._propertyEvent(i,this.data[i],this.data[i],t);else for(var i in this.data)this._propertyEvent(i,this.data[i],this.data[i],t);return--this._level||this._silent||0==this.changedList.length&&!0!==e||this.dispatchEvent("modelChanged",{fields:this.changedList}),this},validate:function(e){if(!this.constraints)return this;if(e&&"string"==$0bc52734b49fc041$export$2e2bcd8739ae039.typeOf(e))this._set(e,this.data[e]);else for(var t in this.data)e&&-1==$0bc52734b49fc041$export$2e2bcd8739ae039.indexOf(e,t)||this._set(t,this.data[t]);return this},isCompliant:function(){if(!this.constraints)return!0;try{for(var e in this.data)this._validate(e,this.data[e]);return!0}catch(e){}return!1},observe:function(e,t,i){this.addEventListener("propertyChanged."+e,t,i)},unobserve:function(e,t,i){this.removeEventListener("propertyChanged."+e,t,i)},watch:function(e,t){1==(e=e.split(":")).length&&(e[1]=e[0],e[0]="watch"),this.addEventListener(e[0]+":propertyChanged."+e[1],(function(e,i){t(i.value,i,e)}))},unwatch:function(e){1==(e=e.split(":")).length&&(e[1]=e[0],e[0]="watch"),this.removeEventListener(e[0]+":propertyChanged."+e[1])},toString:function(){return $0bc52734b49fc041$export$2e2bcd8739ae039.serialize(this.get(!0))}});$4d78f9734f64a4b0$var$_Model.Constraints=$91JQY.default;var $4d78f9734f64a4b0$export$2e2bcd8739ae039=$4d78f9734f64a4b0$var$_Model,$e1ecb91f5a3e913e$export$2e2bcd8739ae039=$4d78f9734f64a4b0$export$2e2bcd8739ae039.extend({className:"ModelList",itemt:$4d78f9734f64a4b0$export$2e2bcd8739ae039,contents:null,itemId:null,nextId:null,defaults:{contents:null},constraints:{contents:{type:"array",arrayof:"@itemt"}},__ctor:function(...e){this.itemId=[],this.nextId=0,this._super.Model.__ctor(...e)},ready:function(){this._eventGroup="ModelList_"+Date.now()+":modelChanged",this.contents=this.data.contents},_bind:function(e,t){return t&&t.addEventListener&&t.addEventListener(this._eventGroup,this._onItemEvent,this,e),t},_unbind:function(e){return e&&e.removeEventListener&&e.removeEventListener(this._eventGroup),e},_onItemEvent:function(e,t,i){this.prepareEvent("itemChanged",{id:i,item:e.source}).from(e).enqueue(this.prepareEvent("modelChanged",{fields:["contents"]})).resume()},length:function(){return this.data.contents.length},clear:function(){for(var e=0;e<this.data.contents;e++)this._unbind(this.data.contents[e]);return this.itemId=[],this.nextId=0,this.contents=this.data.contents=[],this.prepareEvent("itemsCleared").enqueue(this.prepareEvent("modelChanged",{fields:["contents"]})).resume(),this},setData:function(e){if(this.clear(),!e)return this;for(var t=0;t<e.length;t++){var i=$0bc52734b49fc041$export$2e2bcd8739ae039.ensureTypeOf(this.itemt,e[t]);this.itemId.push(this.nextId++),this.data.contents.push(i),this._bind(this.nextId-1,i)}return this.prepareEvent("itemsChanged").enqueue(this.prepareEvent("modelChanged",{fields:["contents"]})).resume(),this},getData:function(){return this.data.contents},getAt:function(e){return e<0||e>=this.data.contents.length?null:this.data.contents[e]},removeAt:function(e){if(e<0||e>=this.data.contents.length)return null;let t=this.data.contents.splice(e,1)[0],i=this.itemId.splice(e,1)[0];return this._unbind(t),this.prepareEvent("itemRemoved",{id:i,item:t}).enqueue(this.prepareEvent("modelChanged",{fields:["contents"]})).resume(),t},setAt:function(e,t){return!(e<0||e>=this.data.contents.length||(t=$0bc52734b49fc041$export$2e2bcd8739ae039.ensureTypeOf(this.itemt,t),this._unbind(this.data.contents[e]),this.data.contents[e]=t,this._bind(this.itemId[e],t),this.prepareEvent("itemChanged",{id:this.itemId[e],item:t}).enqueue(this.prepareEvent("modelChanged",{fields:["contents"]})).resume(),0))},updateAt:function(e){return!(e<0||e>=this.data.contents.length||(this.prepareEvent("itemChanged",{id:this.itemId[e],item:this.data.contents[e]}).enqueue(this.prepareEvent("modelChanged",{fields:["contents"]})).resume(),0))},push:function(e){return e&&"object"!=$0bc52734b49fc041$export$2e2bcd8739ae039.typeOf(e)?null:(e=$0bc52734b49fc041$export$2e2bcd8739ae039.ensureTypeOf(this.itemt,e),this.itemId.push(this.nextId++),this.data.contents.push(e),this._bind(this.nextId-1,e),this.prepareEvent("itemAdded",{id:this.itemId[this.itemId.length-1],item:e,position:"tail"}).enqueue(this.prepareEvent("modelChanged",{fields:["contents"]})).resume(),e)},pop:function(){return this._unbind(this.data.contents.pop())},unshift:function(e){return e&&"object"!=$0bc52734b49fc041$export$2e2bcd8739ae039.typeOf(e)?null:(e=$0bc52734b49fc041$export$2e2bcd8739ae039.ensureTypeOf(this.itemt,e),this.itemId.unshift(this.nextId++),this.data.contents.unshift(e),this._bind(this.nextId-1,e),this.prepareEvent("itemAdded",{id:this.itemId[0],item:e,position:"head"}).enqueue(this.prepareEvent("modelChanged",{fields:["contents"]})).resume(),e)},shift:function(){return this._unbind(this.data.contents.shift())},find:function(e,t=!1){for(var i=this.data.contents,r=0;r<i.length;r++)if($0bc52734b49fc041$export$2e2bcd8739ae039.partialCompare(i[r].data,e))return t?i[r]:r;return t?null:-1}});let $ab6fe0a06ccbea8c$var$Schema={Type:function(e){let t={flatten:function(e,t){return e},unflatten:function(e,t){return e}};return e?$0bc52734b49fc041$export$2e2bcd8739ae039.override(t,e):t},String:function(){return $ab6fe0a06ccbea8c$var$Schema.Type({flatten:function(e,t){return null!=e?e.toString():null},unflatten:function(e,t){return null!=e?e.toString():null}})},Integer:function(){return $ab6fe0a06ccbea8c$var$Schema.Type({flatten:function(e,t){return~~e},unflatten:function(e,t){return~~e}})},Number:function(e){return $ab6fe0a06ccbea8c$var$Schema.Type({_precision:e,_round:!1,precision:function(e){return this._precision=~~e,this},flatten:function(e,t){return e=parseFloat(e),this._precision>0&&(e=~~(e*Math.pow(10,this._precision))/Math.pow(10,this._precision)),e},unflatten:function(e,t){return parseFloat(e)}})},Bool:function(e){return $ab6fe0a06ccbea8c$var$Schema.Type({_compact:e,compact:function(e){return this._compact=e,this},flatten:function(e,t){return e=~~e,this._compact?e>0?1:0:e>0},unflatten:function(e,t){return!!~~e}})},SharedString:function(){return $ab6fe0a06ccbea8c$var$Schema.Type({flatten:function(e,t){return null==e?0:(e=e.toString(),"strings"in t||(t.index={},t.strings=[]),e in t.index||(t.strings.push(e),t.index[e]=t.strings.length),t.index[e])},unflatten:function(e,t){return null==e||0==e?null:t.strings[~~e-1]}})},Array:function(e){return $ab6fe0a06ccbea8c$var$Schema.Type({itemType:e,_debug:!1,_filter:null,debug:function(e){return this._debug=e,this},of:function(e){return this.itemType=e,this},filter:function(e){return this._filter=e,this},flatten:function(e,t){if(null==e)return null;let i=[];for(let r=0;r<e.length;r++)this._filter&&!this._filter(e[r],r)||i.push(this.itemType.flatten(e[r],t));return i},unflatten:async function(e,t){if(null==e)return null;let i=[];for(let r=0;r<e.length;r++)i.push(await this.itemType.unflatten(e[r],t));return i}})},Object:function(){return $ab6fe0a06ccbea8c$var$Schema.Type({properties:[],property:function(e,t,i=null){return this.properties.push({name:e,source:e,type:t,defvalue:i}),this},propertyAlias:function(e,t,i,r=null){return this.properties.push({name:e,source:t,type:i,defvalue:r}),this},flatten:function(e,t){if(null==e)return null;let i;if(!0===t.symbolic){i={};for(let r=0;r<this.properties.length;r++)this.properties[r].source in e?i[this.properties[r].name]=this.properties[r].type.flatten(e[this.properties[r].source],t):i[this.properties[r].name]=this.properties[r].type.flatten(this.properties[r].defvalue,t)}else{i=[];for(let r=0;r<this.properties.length;r++)this.properties[r].source in e?i.push(this.properties[r].type.flatten(e[this.properties[r].source],t)):i.push(this.properties[r].type.flatten(this.properties[r].defvalue,t))}return i},unflatten:async function(e,t){if(null==e)return null;let i={};if(!0===t.symbolic)for(let r=0;r<this.properties.length;r++)i[this.properties[r].name]=await this.properties[r].type.unflatten(this.properties[r].name in e?e[this.properties[r].name]:this.properties[r].defvalue,t);else for(let r=0;r<this.properties.length;r++)i[this.properties[r].name]=await this.properties[r].type.unflatten(r in e?e[r]:this.properties[r].defvalue,t);return i}})},Class:function(e){return $ab6fe0a06ccbea8c$var$Schema.Type({_constructor:e,constructor:function(e){return this._constructor=e,this},flatten:function(e,t){return null==e?null:e.flatten(t)},unflatten:async function(e,t){return null==e?null:await(new this._constructor).unflatten(e,t)}})},Property:function(e,t){return $ab6fe0a06ccbea8c$var$Schema.Type({property:e,type:t,name:function(e){return this.property=e,this},is:function(e){return this.type=e,this},flatten:function(e,t){if(null==e)return null;let i;return!0===t.symbolic?(i={},i[this.property]=this.type.flatten(e[this.property],t)):i=this.type.flatten(e[this.property],t),i},unflatten:async function(e,t){if(null==e)return null;let i={};return!0===t.symbolic?i[this.property]=await this.type.unflatten(e[this.property],t):i[this.property]=await this.type.unflatten(e,t),i}})},Map:function(){return $ab6fe0a06ccbea8c$var$Schema.Type({flatten:function(e,t){if(null==e)return null;if(!0===t.symbolic)return e;let i=[];for(let t in e)i.push(t),i.push(e[t]);return i},unflatten:function(e,t){if(null==e)return null;if(!0===t.symbolic)return e;let i={};for(let t=0;t<e.length;t+=2)i[e[t]]=e[t+1];return i}})},Selector:function(){return $ab6fe0a06ccbea8c$var$Schema.Type({conditions:[],value:null,when:function(e,t){return this.conditions.push([t=>t===e,t]),this},with:function(e){return this.value=e,this},flatten:function(e,t){if(null==e)return null;for(let i of this.conditions)if(!0===i[0](this.value))return i[1].flatten(e,t);return null},unflatten:async function(e,t){if(null==e)return null;for(let i of this.conditions)if(!0===i[0](this.value))return await i[1].unflatten(e,t);return null}})}};var $ab6fe0a06ccbea8c$export$2e2bcd8739ae039=$ab6fe0a06ccbea8c$var$Schema,$65a911499be22e32$export$2e2bcd8739ae039=$8651ccc8e7e5ec23$export$2e2bcd8739ae039.extend({className:"Flattenable",typeSchema:null,flatten:function(e){return this.typeSchema.flatten(this,e)},unflatten:async function(e,t){return Object.assign(this,await this.typeSchema.unflatten(e,t)),await this.onUnflattened(),this},onUnflattened:async function(){}}),$ac94ca3ce7f52d5a$export$2e2bcd8739ae039=$65a911499be22e32$export$2e2bcd8739ae039.extend({className:"Collection",itemTypeSchema:null,items:null,__ctor:function(e){e||(e=this.itemTypeSchema),e&&(this.typeSchema=$ab6fe0a06ccbea8c$export$2e2bcd8739ae039.Property("items").is($ab6fe0a06ccbea8c$export$2e2bcd8739ae039.Array().of(e))),this.reset()},onUnflattened:function(){let e=this.items;this.reset();for(let t of e)this.add(t)},itemsReferenceChanged:function(){},reset:function(){return this.items=[],this.itemsReferenceChanged(),this},clear:function(){var e=this.items;this.reset();for(var t=0;t<e.length;t++)this.onItemRemoved(e[t],0);return this},sort:function(e,t){return"function"!=typeof e?this.items.sort((function(i,r){return(i[e]<=r[e]?-1:1)*(!0===t?-1:1)})):this.items.sort(e),this},findItem:function(e,t){if(!this.items)return null;for(var i=0;i<this.items.length;i++)if((!t||!$0bc52734b49fc041$export$2e2bcd8739ae039.partialCompare(this.items[i],t))&&$0bc52734b49fc041$export$2e2bcd8739ae039.partialCompare(this.items[i],e))return this.items[i];return null},getItems:function(){return this.items},length:function(){return this.items.length},isEmpty:function(){return!this.items.length},indexOf:function(e){return this.items.indexOf(e)},getAt:function(e,t=!1){return e<0&&1==t&&(e+=this.items.length),e>=0&&e<this.items.length?this.items[e]:null},first:function(){return this.getAt(0)},last:function(){return this.getAt(-1,!0)},addAt:function(e,t){if(!t||!this.onBeforeItemAdded(t))return this;if(e<0&&(e=0),e>this.items.length&&(e=this.items.length),0==e)this.items.unshift(t);else if(e==this.items.length)this.items.push(t);else{var i=this.items.splice(0,e);i.push(t),this.items=i.concat(this.items),this.itemsReferenceChanged()}return this.onItemAdded(t),this},unshift:function(e){return this.addAt(0,e)},push:function(e){return this.addAt(this.items.length,e)},add:function(e){return this.push(e)},removeAt:function(e,t=!1){if(e<0&&1==t&&(e+=this.items.length),e<0||e>=this.items.length)return null;var i=this.items[e];return this.items.splice(e,1),this.onItemRemoved(i,e),i},pop:function(e){return this.removeAt(-1,!0)},shift:function(e){return this.removeAt(0)},remove:function(e){return this.removeAt(this.indexOf(e))},forEach:function(e){if(this.isEmpty())return this;for(var t=0;t<this.items.length&&!1!==e(this.items[t],t,this);t++);return this},forEachCall:function(e,...t){if(this.isEmpty())return this;for(var i=0;i<this.items.length&&!1!==this.items[i][e](...t);i++);return this},forEachRev:function(e){if(this.isEmpty())return this;for(var t=this.items.length-1;t>=0&&!1!==e(this.items[t],t,this);t--);return this},forEachRevCall:function(e,...t){if(this.isEmpty())return this;for(var i=this.items.length-1;i>=0&&!1!==this.items[i][e](...t);i--);return this},onBeforeItemAdded:function(e){return!0},onItemAdded:function(e){},onItemRemoved:function(e){}});let $87679206ec041316$var$Template={strict:!1,parseTemplate:function(e,t,i,r=!1,n=1){let a="string",s=null,o=0,l=0,c="",h=[],u=h,d=!1;function f(e,r){if("template"==e?r=$87679206ec041316$var$Template.parseTemplate(r,t,i,!0,0):"parse"==e?(r=$87679206ec041316$var$Template.parseTemplate(r,t,i,!1,0),e="base-string","array"==$0bc52734b49fc041$export$2e2bcd8739ae039.typeOf(r)&&(e=r[0].type,r=r[0].data)):"parse-trim-merge"==e?r=$87679206ec041316$var$Template.parseTemplate(r.trim().split("\n").map((e=>e.trim())).join("\n"),t,i,!1,0):"parse-merge"==e?r=$87679206ec041316$var$Template.parseTemplate(r,t,i,!1,0):"parse-merge-alt"==e&&(r=$87679206ec041316$var$Template.parseTemplate(r,"{","}",!1,0)),"parse-merge"==e||"parse-merge-alt"==e||"parse-trim-merge"==e)for(let e=0;e<r.length;e++)h.push(r[e]);else h.push({type:e,data:r});d&&(u.push(h=[]),d=!1)}!0===r&&(e=e.trim(),a="identifier",o=10,u.push(h=[])),e+="\0";for(let r=0;r<e.length;r++)if("\\"!=e[r]){switch(o){case 0:"\0"==e[r]?s="string":e[r]==t&&"<"==e[r+1]?(o=1,l=1,s="string",a="parse-merge"):e[r]==t&&"@"==e[r+1]?(o=1,l=1,s="string",a="parse-trim-merge",r++):e[r]==t&&":"==e[r+1]?(o=12,l=1,s="string",a="string",r++):e[r]==t?(o=1,l=1,s="string",a="template"):c+=e[r];break;case 1:if("\0"==e[r])throw new Error("Parse error: Unexpected end of template");if(e[r]==i){if(l--,l<0)throw new Error("Parse error: Unmatched "+i);if(0==l){o=0,s=a;break}}else e[r]==t&&l++;c+=e[r];break;case 10:if("\0"==e[r]){s=a;break}if("."==e[r]){f(a,c),f("access","."),a="identifier",c="";break}if(null!=e[r].match(/[\t\n\r\f\v ]/)){for(s=a,a="identifier",d=!0;null!=e[r].match(/[\t\n\r\f\v ]/);)r++;r--;break}if(e[r]==t&&"<"==e[r+1]){c&&(s=a),o=11,l=1,a="parse-merge";break}if(e[r]==t&&"@"==e[r+1]){c&&(s=a),o=11,l=1,a="parse-trim-merge",r++;break}if('"'==e[r]){c&&(s=a),o=14,l=1,a="parse-merge";break}if("'"==e[r]){c&&(s=a),o=15,l=1,a="parse-merge";break}if("`"==e[r]){c&&(s=a),o=16,l=1,a="parse-merge-alt";break}if(e[r]==t&&":"==e[r+1]){c&&(s=a),o=13,l=1,a="string",r++;break}if(e[r]==t){c&&f(a,c),o=11,l=1,c="",a="parse",c+=e[r];break}"identifier"!=a&&(f(a,c),c="",a="identifier"),c+=e[r];break;case 11:if("\0"==e[r])throw new Error("Parse error: Unexpected end of template");if(e[r]==i){if(l--,l<0)throw new Error("Parse error: Unmatched "+i);if(0==l&&(o=10,"parse-merge"==a||"parse-merge-alt"==a||"parse-trim-merge"==a))break}else e[r]==t&&l++;c+=e[r];break;case 12:if("\0"==e[r])throw new Error("Parse error: Unexpected end of template");if(e[r]==i){if(l--,l<0)throw new Error("Parse error: Unmatched "+i);if(0==l){0!=c.length&&"<"!=c[0]&&"["!=c[0]&&" "!=c[0]&&(c=t+c+i),o=0,s=a;break}}else e[r]==t&&l++;c+=e[r];break;case 13:if("\0"==e[r])throw new Error("Parse error: Unexpected end of template");if(e[r]==i){if(l--,l<0)throw new Error("Parse error: Unmatched "+i);if(0==l){"<"!=c[0]&&"["!=c[0]&&" "!=c[0]&&(c=t+c+i),o=10;break}}else e[r]==t&&l++;c+=e[r];break;case 14:if("\0"==e[r])throw new Error("Parse error: Unexpected end of template");if('"'==e[r]){if(l--,l<0)throw new Error('Parse error: Unmatched "');if(0==l&&(o=10,"parse-merge"==a||"parse-merge-alt"==a||"parse-trim-merge"==a))break}c+=e[r];break;case 15:if("\0"==e[r])throw new Error("Parse error: Unexpected end of template");if("'"==e[r]){if(l--,l<0)throw new Error("Parse error: Unmatched '");if(0==l&&(o=10,"parse-merge"==a||"parse-merge-alt"==a||"parse-trim-merge"==a))break}c+=e[r];break;case 16:if("\0"==e[r])throw new Error("Parse error: Unexpected end of template");if("`"==e[r]){if(l--,l<0)throw new Error("Parse error: Unmatched `");if(0==l&&(o=10,"parse-merge"==a||"parse-merge-alt"==a||"parse-trim-merge"==a))break}c+=e[r]}s&&(f(s,c),s=c="")}else c+="\\",c+=e[++r];if(!r){let e=0;for(;e<u.length&&"string"==u[e].type&&""==u[e].data;)u.splice(e,1);for(e=u.length-1;e>0&&"string"==u[e].type&&""==u[e].data;)u.splice(e--,1);0==u.length&&u.push({type:"string",data:""})}return n&&function e(t){if("object"==typeof t){if(t instanceof Array)for(let i=0;i<t.length;i++)e(t[i]);else t.data=e(t.data);return t}for(let e=0;e<t.length;e++)if("\\"==t[e]){let i=t[e+1];switch(i){case"n":i="\n";break;case"r":i="\r";break;case"f":i="\f";break;case"v":i="\v";break;case"t":i="\t";break;case"s":i="s";break;case'"':i='"';break;case"'":i="'"}t=t.substr(0,e)+i+t.substr(e+2)}return t}(u),u},parse:function(e){return this.parseTemplate(e.trim(),"[","]",!1)},clean:function(e){for(let t=0;t<e.length;t++)"template"!=e[t].type&&(e.splice(t,1),t--);return e},expand:function(e,t,i="text",r="base-string"){let n=[];if("var"==r){let i=!0,r=!1,a=t,s=null,o=!0,l="";for(let n=0;n<e.length&&null!=t;n++)switch(e[n].type){case"identifier":case"string":l+=e[n].data,s=null;break;case"template":s=this.expand(e[n].data,a,"arg","template"),l+="object"!=typeof s?s:"";break;case"base-string":l+=this.expand(e[n].data,a,"arg","base-string"),s=null;break;case"access":if(s&&"object"==typeof s)t=s;else{for(""==l&&(l="this");;)if("!"==l[0])l=l.substr(1),i=!1;else{if("$"!=l[0])break;l=l.substr(1),r=!0}if("this"!=l&&null!=t){let e=t;null===(t=l in t?t[l]:null)&&o&&l in $87679206ec041316$var$Template.functions&&(t=$87679206ec041316$var$Template.functions[l](null,null,e)),o=!1}}l=""}for(;""!=l;)if("!"==l[0])l=l.substr(1),i=!1;else{if("$"!=l[0])break;l=l.substr(1),r=!0}if("this"!=l){let i=!1;if(null!=t?l in t?t=t[l]:(i=!0,t=null):i=!0,i&&1==e.length&&1==$87679206ec041316$var$Template.strict)throw new Error("Expression function `"+l+"` not found.")}"string"==typeof t&&(i&&(t=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),r&&(t='"'+t+'"')),n.push(t)}if("varref"==i){let i=t,r=null,n=!0,a="";for(let s=0;s<e.length&&null!=t;s++)switch(e[s].type){case"identifier":case"string":a+=e[s].data,r=null;break;case"template":r=this.expand(e[s].data,i,"arg","template"),a+="object"!=typeof r?r:"";break;case"base-string":a+=this.expand(e[s].data,i,"arg","base-string"),r=null;break;case"access":if(r&&"object"==typeof r)t=r;else{for(""==a&&(a="this");;)if("!"==a[0])a=a.substr(1);else{if("$"!=a[0])break;a=a.substr(1)}if("this"!=a&&null!=t){let e=t;null===(t=a in t?t[a]:null)&&n&&a in $87679206ec041316$var$Template.functions&&(t=$87679206ec041316$var$Template.functions[a](null,null,e)),n=!1}}a=""}for(;""!=a;)if("!"==a[0])a=a.substr(1);else{if("$"!=a[0])break;a=a.substr(1)}return"this"!=a?[t,a]:null}if("fn"==r){var a=[];if(a.push($87679206ec041316$var$Template.expand(e[0],t,"text","base-string")),"_"+a[0]in $87679206ec041316$var$Template.functions&&(a[0]="_"+a[0]),!(a[0]in $87679206ec041316$var$Template.functions)){if(1==$87679206ec041316$var$Template.strict)throw new Error("Expression function `"+a[0]+"` not found.");return`(Unknown: ${a[0]})`}if("_"==a[0][0])return $87679206ec041316$var$Template.functions[a[0]](e,t);for(let i=1;i<e.length;i++)a.push($87679206ec041316$var$Template.expand(e[i],t,"arg","base-string"));n.push($87679206ec041316$var$Template.functions[a[0]](a,e,t))}if("template"==r){if(1==e.length){if(1==e[0].length&&"string"==e[0][0].type)return e[0][0].data;if(1==e[0].length&&"identifier"==e[0][0].type){let r=e[0][0].data;if(r in $87679206ec041316$var$Template.functions||"_"+r in $87679206ec041316$var$Template.functions)return $87679206ec041316$var$Template.expand(e,t,i,"fn")}return $87679206ec041316$var$Template.expand(e[0],t,i,"var")}return $87679206ec041316$var$Template.expand(e,t,i,"fn")}if("base-string"==r){let r=-1;for(let a of e){let s=null;switch(r++,a.type){case"template":s=$87679206ec041316$var$Template.expand(a.data,t,i,"template");break;case"string":case"identifier":s=a.data;break;case"base-string":s=$87679206ec041316$var$Template.expand(a.data,t,i,"base-string")}"void"!=i&&("last"==i&&r!=e.length-1||n.push(s))}}if("obj"==i)return n;if("last"==i)return"Rose\\Arry"==typeOf(n)&&(n=n[0]),n;if("void"==i)return null;if("arg"==i)return"array"==$0bc52734b49fc041$export$2e2bcd8739ae039.typeOf(n)?1!=n.length?n.join(""):n[0]:n;if("text"==i&&"array"==$0bc52734b49fc041$export$2e2bcd8739ae039.typeOf(n)){let e=t=>null!=t&&"object"==typeof t?"map"in t?t.map(e).join(""):"join"in t?t.join(""):t.toString():t;n=n.map(e).join("")}return n},compile:function(e){return e=$87679206ec041316$var$Template.parse(e),function(t=null,i="text"){return $87679206ec041316$var$Template.expand(e,t||{},i)}},eval:function(e,t=null,i="text"){return e=$87679206ec041316$var$Template.parse(e),$87679206ec041316$var$Template.expand(e,t||{},i)},value:function(e,t=null){return"array"!=$0bc52734b49fc041$export$2e2bcd8739ae039.typeOf(e)?e:$87679206ec041316$var$Template.expand(e,t||{},"arg")},register:function(e,t){$87679206ec041316$var$Template.functions[e]=t},call:function(e,t,i=null){return e in $87679206ec041316$var$Template.functions?$87679206ec041316$var$Template.functions[e](t,null,i):null},getNamedValues:function(e,t,i=1,r=!0){let n={},a=0;for(;i<e.length;i+=2){let s=$87679206ec041316$var$Template.expand(e[i],t,"arg");a||(a=s.startsWith(":")?1:s.endsWith(":")?2:3),1==a?s=s.substr(1):2==a&&(s=s.substr(0,s.length-1)),n[s]=r?$87679206ec041316$var$Template.expand(e[i+1],t,"arg"):e[i+1]}return n}};$87679206ec041316$var$Template.functions={global:function(e){return globalThis},null:function(e){return null},true:function(e){return!0},false:function(e){return!1},len:function(e){return e[1].toString().length},int:function(e){return~~e[1]},str:function(e){return e[1].toString()},float:function(e){return parseFloat(e[1])},chr:function(e){return String.fromCharCode(e[1])},ord:function(e){return e[1].toString().charCodeAt(0)},not:function(e){return!e[1]},neg:function(e){return-e[1]},abs:function(e){return Math.abs(e[1])},and:function(e){for(let t=1;t<e.length;t++)if(!e[t])return!1;return!0},or:function(e){for(let t=1;t<e.length;t++)if(~~e[t])return!0;return!1},eq:function(e){return e[1]==e[2]},ne:function(e){return e[1]!=e[2]},lt:function(e){return e[1]<e[2]},le:function(e){return e[1]<=e[2]},gt:function(e){return e[1]>e[2]},ge:function(e){return e[1]>=e[2]},isnotnull:function(e){return!!e[1]},isnull:function(e){return!e[1]},iszero:function(e){return 0==parseInt(e[1])},"eq?":function(e){return e[1]==e[2]},"ne?":function(e){return e[1]!=e[2]},"lt?":function(e){return e[1]<e[2]},"le?":function(e){return e[1]<=e[2]},"gt?":function(e){return e[1]>e[2]},"ge?":function(e){return e[1]>=e[2]},"notnull?":function(e){return!!e[1]},"null?":function(e){return!e[1]},"zero?":function(e){return 0==parseInt(e[1])},typeof:function(e){return $0bc52734b49fc041$export$2e2bcd8739ae039.typeOf(e[1])},"*":function(e){let t=e[1];for(let i=2;i<e.length;i++)t*=e[i];return t},"/":function(e){let t=e[1];for(let i=2;i<e.length;i++)t/=e[i];return t},"+":function(e){let t=e[1];for(let i=2;i<e.length;i++)t-=-e[i];return t},"-":function(e){let t=e[1];for(let i=2;i<e.length;i++)t-=e[i];return t},mul:function(e){let t=e[1];for(let i=2;i<e.length;i++)t*=e[i];return t},div:function(e){let t=e[1];for(let i=2;i<e.length;i++)t/=e[i];return t},sum:function(e){let t=e[1];for(let i=2;i<e.length;i++)t-=-e[i];return t},sub:function(e){let t=e[1];for(let i=2;i<e.length;i++)t-=e[i];return t},mod:function(e){let t=e[1];for(let i=2;i<e.length;i++)t%=e[i];return t},pow:function(e){let t=e[1];for(let i=2;i<e.length;i++)t=Math.pow(t,e[i]);return t},dump:function(e){return JSON.stringify(e[1])},_set:function(e,t){for(let i=1;i+1<e.length;i+=2){let r=$87679206ec041316$var$Template.value(e[i+1],t);if(e[i].length>1){let n=$87679206ec041316$var$Template.expand(e[i],t,"varref");null!=n&&(n[0][n[1]]=r)}else t[$87679206ec041316$var$Template.value(e[i],t)]=r}return""},_unset:function(e,t){for(let i=1;i<e.length;i++)if(e[i].length>1){let r=$87679206ec041316$var$Template.expand(e[i],t,"varref");null!=r&&delete r[0][r[1]]}else delete t[$87679206ec041316$var$Template.value(e[i],t)];return null},trim:function(e){return e[1]?"object"==typeof e[1]?e[1].map((e=>e.trim())):e[1].trim():""},upper:function(e){return e[1]?"object"==typeof e[1]?e[1].map((e=>e.toUpperCase())):e[1].toUpperCase():""},lower:function(e){return e[1]?"object"==typeof e[1]?e[1].map((e=>e.toLowerCase())):e[1].toLowerCase():""},substr:function(e){let t=e[e.length-1].toString(),i=0,r=null;return 4==e.length?(i=~~e[1],r=~~e[2]):(i=~~e[1],r=null),i<0&&(i+=t.length),r<0&&(r+=t.length),null===r&&(r=t.length-i),t.substr(i,r)},replace:function(e){return e[3].split(e[1]).join(e[2])},nl2br:function(e){return e[1]?"object"==typeof e[1]?e[1].map((e=>e.replace(/\n/g,"<br/>"))):e[1].replace(/\n/g,"<br/>"):""},"%":function(e){e.shift();var t=e.shift();let i="";for(let r=0;r<e.length;r++)if("array"==$0bc52734b49fc041$export$2e2bcd8739ae039.typeOf(e[r])){i+=`<${t}>`;for(let t=0;t<e[r].length;t++)i+=e[r][t];i+=`</${t}>`}else i+=`<${t}>${e[r]}</${t}>`;return i},"%%":function(e){e.shift();var t=e.shift();let i="",r="";for(let t=0;t<e.length;t+=2)t+1<e.length?i+=` ${e[t]}="${e[t+1]}"`:r=e[t];return r?`<${t}${i}>${r}</${t}>`:`<${t}${i}/>`},join:function(e){return e[2]&&"array"==$0bc52734b49fc041$export$2e2bcd8739ae039.typeOf(e[2])?e[2].join(e[1]):""},split:function(e){return e[2]&&"string"==typeof e[2]?e[2].split(e[1]):[]},keys:function(e){return e[1]&&"object"==typeof e[1]?Object.keys(e[1]):[]},values:function(e){return e[1]&&"object"==typeof e[1]?Object.values(e[1]):[]},_each:function(e,t){let i=$87679206ec041316$var$Template.expand(e[1],t,"arg"),r=$87679206ec041316$var$Template.expand(e[2],t,"arg"),n="",a=0;if(!r)return n;for(let s in r)t[i]=r[s],t[i+"##"]=a++,t[i+"#"]=s,n+=$87679206ec041316$var$Template.expand(e[3],t,"text");return delete t[i],delete t[i+"##"],delete t[i+"#"],n},_foreach:function(e,t){let i=$87679206ec041316$var$Template.expand(e[1],t,"arg"),r=$87679206ec041316$var$Template.expand(e[2],t,"arg"),n=0;if(!r)return null;for(let a in r)t[i]=r[a],t[i+"##"]=n++,t[i+"#"]=a,$87679206ec041316$var$Template.expand(e[3],t,"text");return delete t[i],delete t[i+"##"],delete t[i+"#"],null},"_?":function(e,t){return $87679206ec041316$var$Template.expand(e[1],t,"arg")?$87679206ec041316$var$Template.expand(e[2],t,"arg"):e.length>3?$87679206ec041316$var$Template.expand(e[3],t,"arg"):""},"_??":function(e,t){return $87679206ec041316$var$Template.expand(e[1],t,"arg")||$87679206ec041316$var$Template.expand(e[2],t,"arg")},_if:function(e,t){for(let i=0;i<e.length;i+=3){if("else"==$87679206ec041316$var$Template.expand(e[i],t,"arg"))return $87679206ec041316$var$Template.expand(e[i+1],t,"text");if($87679206ec041316$var$Template.expand(e[i+1],t,"arg"))return $87679206ec041316$var$Template.expand(e[i+2],t,"text")}return""},_switch:function(e,t){let i=$87679206ec041316$var$Template.expand(e[1],t,"arg");for(let r=2;r<e.length;r+=2){let n=$87679206ec041316$var$Template.expand(e[r],t,"arg");if(n==i||"default"==n)return $87679206ec041316$var$Template.expand(e[r+1],t,"text")}return""},_break:function(e,t){throw new Error("EXC_BREAK")},_continue:function(e,t){throw new Error("EXC_CONTINUE")},_repeat:function(e,t){if(e.length<3||1!=(1&e.length))return"(`repeat`: Wrong number of parameters)";let i=$87679206ec041316$var$Template.value(e[1],t),r=null,n=0,a=null,s=null;for(let i=2;i<e.length-1;i+=2)switch($87679206ec041316$var$Template.value(e[i],t).toLowerCase()){case"from":n=parseFloat($87679206ec041316$var$Template.value(e[i+1],t));break;case"to":a=parseFloat($87679206ec041316$var$Template.value(e[i+1],t));break;case"count":r=parseFloat($87679206ec041316$var$Template.value(e[i+1],t));break;case"step":s=parseFloat($87679206ec041316$var$Template.value(e[i+1],t))}let o=e[e.length-1],l=[];if(null!==a)if(null===s&&(s=n>a?-1:1),s<0)for(let e=n;e>=a;e+=s)try{t[i]=e,l.push($87679206ec041316$var$Template.value(o,t))}catch(e){let t=e.message;if("EXC_BREAK"==t)break;if("EXC_CONTINUE"==t)continue;throw e}else for(let e=n;e<=a;e+=s)try{t[i]=e,l.push($87679206ec041316$var$Template.value(o,t))}catch(e){let t=e.message;if("EXC_BREAK"==t)break;if("EXC_CONTINUE"==t)continue;throw e}else if(null!==r){null===s&&(s=1);for(let e=n;r>0;r--,e+=s)try{t[i]=e,l.push($87679206ec041316$var$Template.value(o,t))}catch(e){let t=e.message;if("EXC_BREAK"==t)break;if("EXC_CONTINUE"==t)continue;throw e}}else{null===s&&(s=1);for(let e=n;;e+=s)try{t[i]=e,l.push($87679206ec041316$var$Template.value(o,t))}catch(e){let t=e.message;if("EXC_BREAK"==t)break;if("EXC_CONTINUE"==t)continue;throw e}}return delete t[i],l},_for:function(e,t){if(e.length<3||1!=(1&e.length))return"(`for`: Wrong number of parameters)";let i=$87679206ec041316$var$Template.value(e[1],t),r=null,n=0;to=null;let a=null;for(let i=2;i<e.length-1;i+=2)switch(value=$87679206ec041316$var$Template.value(e[i],t),value.toLowerCase()){case"from":n=parseFloat($87679206ec041316$var$Template.value(e[i+1],t));break;case"to":to=parseFloat($87679206ec041316$var$Template.value(e[i+1],t));break;case"count":r=parseFloat($87679206ec041316$var$Template.value(e[i+1],t));break;case"step":a=parseFloat($87679206ec041316$var$Template.value(e[i+1],t))}let s=e[e.length-1];if(null!==to)if(null===a&&(a=n>to?-1:1),a<0)for(let e=n;e>=to;e+=a)try{t[i]=e,$87679206ec041316$var$Template.value(s,t)}catch(e){let t=e.message;if("EXC_BREAK"==t)break;if("EXC_CONTINUE"==t)continue;throw e}else for(let e=n;e<=to;e+=a)try{t[i]=e,$87679206ec041316$var$Template.value(s,t)}catch(e){let t=e.message;if("EXC_BREAK"==t)break;if("EXC_CONTINUE"==t)continue;throw e}else if(null!==r){null===a&&(a=1);for(let e=n;r>0;r--,e+=a)try{t[i]=e,$87679206ec041316$var$Template.value(s,t)}catch(e){let t=e.message;if("EXC_BREAK"==t)break;if("EXC_CONTINUE"==t)continue;throw e}}else{null===a&&(a=1);for(let e=n;;e+=a)try{t[i]=e,$87679206ec041316$var$Template.value(s,t)}catch(e){let t=e.message;if("EXC_BREAK"==t)break;if("EXC_CONTINUE"==t)continue;throw e}}return delete t[i],null},_loop:function(e,t){if(e.length<2)return"(`loop`: Wrong number of parameters)";let i=e[1];for(;;)try{$87679206ec041316$var$Template.value(i,t)}catch(e){let t=e.message;if("EXC_BREAK"==t)break;if("EXC_CONTINUE"==t)continue;throw e}return null},_echo:function(e,t){let i="";for(let r=1;r<e.length;r++)i+=$87679206ec041316$var$Template.expand(e[r],t,"arg");return console.log(i),""},"_#":function(e,t){let i=[];for(let r=1;r<e.length;r++)i.push($87679206ec041316$var$Template.expand(e[r],t,"arg"));return i},"_##":function(e,t){let i=[];for(let t=1;t<e.length;t++)i.push(e[t]);return i},"_&":function(e,t){return $87679206ec041316$var$Template.getNamedValues(e,t,1,!0)},"_&&":function(e,t){return $87679206ec041316$var$Template.getNamedValues(e,t,1,!1)},contains:function(e,t,i){let r=e[1];if("object"!=typeof r)return i.err="Argument is not a Map",!1;let n="";for(let t=2;t<e.length;t++)e[t]in r||(n+=", "+e[t]);return""==n||(i.err=n.substr(1),!1)},has:function(e,t,i){let r=e[2];return"object"==$0bc52734b49fc041$export$2e2bcd8739ae039.typeOf(r)&&e[1]in r},_map:function(e,t){let i=$87679206ec041316$var$Template.expand(e[1],t,"arg"),r=$87679206ec041316$var$Template.expand(e[2],t,"arg");if(!r)return r;let n="array"==$0bc52734b49fc041$export$2e2bcd8739ae039.typeOf(r),a=n?[]:{},s=0;for(let o in r)t[i]=r[o],t[i+"##"]=s++,t[i+"#"]=o,n?a.push($87679206ec041316$var$Template.expand(e[3],t,"arg")):a[o]=$87679206ec041316$var$Template.expand(e[3],t,"arg");return delete t[i],delete t[i+"##"],delete t[i+"#"],a},_filter:function(e,t){let i=$87679206ec041316$var$Template.expand(e[1],t,"arg"),r=$87679206ec041316$var$Template.expand(e[2],t,"arg");if(!r)return r;let n="array"==$0bc52734b49fc041$export$2e2bcd8739ae039.typeOf(r),a=n?[]:{},s=0;for(let o in r)t[i]=r[o],t[i+"##"]=s++,t[i+"#"]=o,~~$87679206ec041316$var$Template.expand(e[3],t,"arg")&&(n?a.push(r[o]):a[o]=r[o]);return delete t[i],delete t[i+"##"],delete t[i+"#"],a},expand:function(e,t,i){return $87679206ec041316$var$Template.expand($87679206ec041316$var$Template.parseTemplate(e[1],"{","}"),3==e.length?e[2]:i)},_call:function(e,t){let i=$87679206ec041316$var$Template.expand(e[1],t,"varref");if(!i||"function"!=typeof i[0][i[1]])throw new Error("Expression is not a function: "+$87679206ec041316$var$Template.expand(e[1],t,"obj").map((e=>null==e?".":e)).join(""));let r=[];for(let i=2;i<e.length;i++)r.push($87679206ec041316$var$Template.value(e[i],t));return i[0][i[1]](...r)}};var $87679206ec041316$export$2e2bcd8739ae039=$87679206ec041316$var$Template;const $07eb01cb16db42c1$export$eefcfe56efaaa57d=$0bc52734b49fc041$export$2e2bcd8739ae039,$07eb01cb16db42c1$export$4c85e640eb41c31b=$8651ccc8e7e5ec23$export$2e2bcd8739ae039,$07eb01cb16db42c1$export$d61e24a684f9e51=$b6677aaba4a0e4e9$export$2e2bcd8739ae039,$07eb01cb16db42c1$export$ec8b666c5fe2c75a=$cb9168e99253fb00$export$2e2bcd8739ae039,$07eb01cb16db42c1$export$a1edc412be3e1841=$4d78f9734f64a4b0$export$2e2bcd8739ae039,$07eb01cb16db42c1$export$59eced47f477f85a=$e1ecb91f5a3e913e$export$2e2bcd8739ae039,$07eb01cb16db42c1$export$19342e026b58ebb7=$ab6fe0a06ccbea8c$export$2e2bcd8739ae039,$07eb01cb16db42c1$export$3a9581c9ade29768=$65a911499be22e32$export$2e2bcd8739ae039,$07eb01cb16db42c1$export$fb8073518f34e6ec=$ac94ca3ce7f52d5a$export$2e2bcd8739ae039,$07eb01cb16db42c1$export$14416b8d99d47caa=$87679206ec041316$export$2e2bcd8739ae039}));var $lTI0F=parcelRequire("lTI0F"),$lTI0F=parcelRequire("lTI0F");const $09cb358c2aa81294$var$XOR=(e,t)=>2147483647&(e^t),$09cb358c2aa81294$var$SHR=(e,t)=>e>>>t&2147483647,$09cb358c2aa81294$var$SHL=(e,t)=>e<<t&2147483647
//!class Random
,$09cb358c2aa81294$var$Random=$lTI0F.Class.extend({state:null,index:0,seed:0,__ctor:function(e=3672614355){this.state=[2784440588,4017298675,4202185506,2016738353,3652155411,3732450579,2017408024,2853319030,2266821841,1933651883,3135686416,116864129,2299580181,2457663507,3170337615,1945506195],this.index=0,this.setSeed(e)},setSeed:function(e){this.seed=e,this.state=[2784440588,4017298675,4202185506,2016738353,3652155411,3732450579,2017408024,2853319030,2266821841,1933651883,3135686416,116864129,2299580181,2457663507,3170337615,1945506195];for(let e=0;e<this.state.length;e++)this.state[e]=$09cb358c2aa81294$var$XOR(this.state[e],this.seed);return this},nextInt32:function(){let e,t,i,r;return e=this.state[this.index],i=this.state[this.index+13&15],t=$09cb358c2aa81294$var$XOR($09cb358c2aa81294$var$XOR($09cb358c2aa81294$var$XOR(e,i),$09cb358c2aa81294$var$SHL(e,16)),$09cb358c2aa81294$var$SHL(i,15)),i=this.state[this.index+9&15],i=$09cb358c2aa81294$var$XOR(i,$09cb358c2aa81294$var$SHR(i,11)),e=this.state[this.index]=$09cb358c2aa81294$var$XOR(t,i),r=$09cb358c2aa81294$var$XOR(e,3661901092&$09cb358c2aa81294$var$SHL(e,5)),this.index=this.index+15&15,e=this.state[this.index],this.state[this.index]=$09cb358c2aa81294$var$XOR($09cb358c2aa81294$var$XOR($09cb358c2aa81294$var$XOR($09cb358c2aa81294$var$XOR($09cb358c2aa81294$var$XOR(e,t),r),$09cb358c2aa81294$var$SHL(e,2)),$09cb358c2aa81294$var$SHL(t,18)),$09cb358c2aa81294$var$SHL(i,28)),34359738367&this.state[this.index]},nextInt16:function(){return 65535&this.nextInt32()},nextInt8:function(){return 255&this.nextInt32()},nextFloat:function(){return this.nextInt32()/2147483647}});var $09cb358c2aa81294$export$2e2bcd8739ae039=$09cb358c2aa81294$var$Random,
//!enum KeyCode
$6fd473ea64d5e91a$export$2e2bcd8739ae039={BACKSPACE:8,
//!BACKSPACE
TAB:9,
//!TAB
ENTER:13,
//!ENTER
SHIFT:16,
//!SHIFT
CTRL:17,
//!CTRL
ESC:27,
//!ESC
SPACE:32,
//!SPACE
PGUP:33,
//!PGUP
PGDN:34,
//!PGDN
END:35,
//!END
HOME:36,
//!HOME
INS:45,
//!INS
DEL:46,
//!DEL
LEFT:37,
//!LEFT
UP:38,
//!UP
RIGHT:39,
//!RIGHT
DOWN:40,
//!DOWN
NUM_PLUS:107,
//!NUM_PLUS
NUM_MINUS:109,
//!NUM_MINUS
NUM_ASTERISK:106,
//!NUM_ASTERISK
NUM_SLASH:111,
//!NUM_SLASH
NUM_DOT:110,
//!NUM_DOT
NUM_0:96,
//!NUM_0
NUM_1:97,
//!NUM_1
NUM_2:98,
//!NUM_2
NUM_3:99,
//!NUM_3
NUM_4:100,
//!NUM_4
NUM_5:101,
//!NUM_5
NUM_6:102,
//!NUM_6
NUM_7:103,
//!NUM_7
NUM_8:104,
//!NUM_8
NUM_9:105,
//!NUM_9
D0:48,
//!D0
D1:49,
//!D1
D2:50,
//!D2
D3:51,
//!D3
D4:52,
//!D4
D5:53,
//!D5
D6:54,
//!D6
D7:55,
//!D7
D8:56,
//!D8
D9:57,
//!D9
A:65,
//!A
B:66,
//!B
C:67,
//!C
D:68,
//!D
E:69,
//!E
F:70,
//!F
G:71,
//!G
H:72,
//!H
I:73,
//!I
J:74,
//!J
K:75,
//!K
L:76,
//!L
M:77,
//!M
N:78,
//!N
O:79,
//!O
P:80,
//!P
Q:81,
//!Q
R:82,
//!R
S:83,
//!S
T:84,
//!T
U:85,
//!U
V:86,
//!V
W:87,
//!W
X:88,
//!X
Y:89,
//!Y
Z:90},$lTI0F=parcelRequire("lTI0F"),$lTI0F=parcelRequire("lTI0F");const $3755e11d40ee463d$var$recyclingFacilities={};let $3755e11d40ee463d$var$totalPreallocated=0;const $3755e11d40ee463d$var$Recycler={};$parcel$global.Recycler=$3755e11d40ee463d$var$Recycler;var $3755e11d40ee463d$export$2e2bcd8739ae039=$3755e11d40ee463d$var$Recycler;
//!namespace Recycler
$3755e11d40ee463d$var$Recycler.attachTo=function(e,t=8192,i=null){if(!e.prototype.className)throw new Error("Unable to attach recycler methods to an unnamed class.");if(!("__dtor"in e.prototype))throw new Error("Recycler: Class "+e.prototype.className+" requires `__dtor` method.");if(!("init"in e.prototype))throw new Error("Recycler: Class "+e.prototype.className+" requires `init` method.");null===i&&(i=int(.375*t)),$3755e11d40ee463d$var$recyclingFacilities[e.prototype.className]=e,e.recyclerPool=[],e.recyclerPoolMax=t,e.prototype.objectId=0,e.recyclerNextObjectId=0,e.recyclerCreated=0,e.recyclerRecycled=0,e.recyclerMissed=0,e.recyclerLength=0,e.recyclerActive=0;let r=!1;e.preallocate=function(t=null){if(r)return;let n=null===t?i:Math.min(t,i);for(let t=0;t<n;t++)e.recyclerPool.push(new e),e.recyclerLength++,$3755e11d40ee463d$var$totalPreallocated++;r=!0},e.allocate=function(){let t;return this.recyclerLength?(t=this.recyclerPool[--this.recyclerLength],e.recyclerRecycled++):(t=new e,e.recyclerCreated++),e.recyclerActive++,t.objectId=++this.recyclerNextObjectId,this.recyclerNextObjectId&=2147483647,t},e.alloc=function(t=null,i=null,r=null,n=null,a=null,s=null,o=null,l=null,c=null,h=null){return e.allocate().init(t,i,r,n,a,s,o,l,c,h)},e.prototype.free=function(){return this.objectId<0?this:0==this.objectId?(console.error("ERROR: Already released instance of "+e.prototype.className),this):(this.__dtor(),this.objectId=0,e.recyclerLength>=t?e.recyclerMissed++:e.recyclerPool[e.recyclerLength++]=this,e.recyclerActive--,this)},e.prototype.lockInstance=function(e){return this.objectId=Math.abs(this.objectId),e&&(this.objectId=-this.objectId),this}},$3755e11d40ee463d$var$Recycler.showStats=function(e=null){let t=$3755e11d40ee463d$var$recyclingFacilities;if(console.log("Total Preallocated: "+$3755e11d40ee463d$var$totalPreallocated),!0!==e){if(null!==e){if("string"==typeof e){let t=$3755e11d40ee463d$var$recyclingFacilities[e];return void console.debug(e+": "+(t.recyclerCreated/t.recyclerPoolMax*100).toFixed(1)+"%  =>  overhead="+t.recyclerCreated+", active="+t.recyclerActive+", array="+t.recyclerPool.length+", recycled="+t.recyclerRecycled+", in-recycler="+t.recyclerLength+", missed="+t.recyclerMissed+", space="+(t.recyclerPoolMax-t.recyclerLength))}t=e}console.group("Recycling Facilities");for(let e in t){let i=t[e];console.debug(e+": "+(i.recyclerCreated/i.recyclerPoolMax*100).toFixed(1)+"%  =>  overhead="+i.recyclerCreated+", active="+i.recyclerActive+", array="+i.recyclerPool.length+", recycled="+i.recyclerRecycled+", in-recycler="+i.recyclerLength+", missed="+i.recyclerMissed+", space="+(i.recyclerPoolMax-i.recyclerLength))}console.groupEnd()}else{console.group("Recycling Facilities");for(let e in t){let i=t[e];i.recyclerCreated&&console.debug(e+": "+(i.recyclerCreated/i.recyclerPoolMax*100).toFixed(1)+"%  =>  overhead="+i.recyclerCreated+", active="+i.recyclerActive+", array="+i.recyclerPool.length+", recycled="+i.recyclerRecycled+", in-recycler="+i.recyclerLength+", missed="+i.recyclerMissed+", space="+(i.recyclerPoolMax-i.recyclerLength))}console.groupEnd()}},$3755e11d40ee463d$var$Recycler.createPool=function(e,t=8192,i=null){const r=e.prototype.className;if(!r)throw new Error("Unable to create pool sub-class on an unnamed class.");const n=e.extend({className:e.prototype.className,__ctor:function(){},init:function(e=null,t=null,i=null,n=null,a=null,s=null,o=null,l=null,c=null,h=null){return this._super[r].__ctor(e,t,i,n,a,s,o,l,c,h),this}});return $3755e11d40ee463d$var$Recycler.attachTo(n,t,i),e.Pool=n,e},$3755e11d40ee463d$var$Recycler.preallocate=function(e=null){$3755e11d40ee463d$var$totalPreallocated=0;for(let t in $3755e11d40ee463d$var$recyclingFacilities)$3755e11d40ee463d$var$recyclingFacilities[t].preallocate(e);return $3755e11d40ee463d$var$totalPreallocated};
//![import "./recycler"]
//!class Linkable
const $284173a7f016deff$var$Linkable=$lTI0F.Class.extend({className:"Linkable",prev:null,next:null,value:null,__ctor:function(e){this.value=e,this.clear()},__dtor:function(){this.unlink()},clear:function(){return this.next=this.prev=null,this},linkAfter:function(e){this.prev=e,this.next=e?e.next:null,e&&(e.next&&(e.next.prev=this),e.next=this)},linkBefore:function(e){this.prev=e?e.prev:null,this.next=e,e&&(e.prev&&(e.prev.next=this),e.prev=this)},unlink:function(){return this.prev&&(this.prev.next=this.next),this.next&&(this.next.prev=this.prev),this.clear()}});
//!/class
//!namespace Linkable
//!namespace Pool
$3755e11d40ee463d$export$2e2bcd8739ae039.createPool($284173a7f016deff$var$Linkable,16384,6144);var $284173a7f016deff$export$2e2bcd8739ae039=$284173a7f016deff$var$Linkable;
//![import "./linkable"]
//![import "./recycler"]
//!class List
const $5ffbe5e8d10cd81c$var$List=$lTI0F.Class.extend({className:"List",top:null,bottom:null,length:0,__ctor:function(){this.top=null,this.bottom=null,this.length=0},__dtor:function(){this.reset()},clone:function(){let e=$5ffbe5e8d10cd81c$var$List.Pool.alloc();for(let t=this.top;t;t=t.next)e.push($lTI0F.Rinn.clone(t.value));return e},clear:function(){let e,t;for(e=this.top;e;e=t)t=e.next,dispose(e.free().value);return this.top=this.bottom=null,this.length=0,this},reset:function(){let e,t;for(e=this.top;null!=e;e=t)t=e.next,e.free();return this.top=this.bottom=null,this.length=0,this},first:function(){return null!==this.top?this.top.value:null},last:function(){return null!==this.bottom?this.bottom.value:null},getAt:function(e){let t=null;for(t=this.top;t&&e-- >0;t=t.next);return null!=t?t.value:null},getNodeAt:function(e){let t=null;for(t=this.top;t&&e--;t=t.next);return t},sgetNode:function(e){for(let t=this.top;t;t=t.next)if(t.value===e)return t;return null},remove:function(e){return null==e||$284173a7f016deff$export$2e2bcd8739ae039.isInstance(e)||(e=this.sgetNode(e)),e?(e.prev||(this.top=e.next),e.next||(this.bottom=e.prev),this.length--,e.free().value):null},insertBefore:function(e,t){if(!e)return this;let i=$284173a7f016deff$export$2e2bcd8739ae039.Pool.alloc(t);return i.linkBefore(e),e==this.top&&(this.top=i),this.length++,t},insertAfter:function(e,t){if(!e)return this;let i=$284173a7f016deff$export$2e2bcd8739ae039.Pool.alloc(t);return i.linkAfter(e),e==this.bottom&&(this.bottom=i),this.length++,t},unshift:function(e){let t=$284173a7f016deff$export$2e2bcd8739ae039.Pool.alloc(e);return t.linkBefore(this.top),this.bottom||(this.bottom=t),this.top=t,this.length++,e},shift:function(){let e=this.top;return e?((this.top=e.next)||(this.bottom=null),this.length--,e.free().value):null},push:function(e){let t=$284173a7f016deff$export$2e2bcd8739ae039.Pool.alloc(e);return t.linkAfter(this.bottom),this.top||(this.top=t),this.bottom=t,this.length++,e},pop:function(){let e=this.bottom;return e?((this.bottom=e.prev)||(this.top=null),this.length--,e.free().value):null},append:function(e){for(let t=e.top;t;t=t.next)this.push(t.value);return this},forEach:function(e,t=null){let i;for(let r=this.top;r;r=i)if(i=r.next,!1===e(r.value,r,this,t))return!1;return!0},forEachRev:function(e,t=null){let i;for(let r=this.bottom;r;r=i)if(i=r.prev,!1===e(r.value,r,this,t))return!1;return!0},find:function(e,t=null){for(let i=this.top;i;i=i.next)if(e(i.value,t))return i.value;return null},filter:function(e,t=null){let i=$5ffbe5e8d10cd81c$var$List.Pool.alloc();for(let r=this.top;r;r=r.next)e(r.value,t)&&i.push(r.value);return i},toArray:function(){let e=[];for(let t=this.top;t;t=t.next)e.push(t.value);return e}});
//!/class
//!namespace List
//!namespace Pool
$3755e11d40ee463d$export$2e2bcd8739ae039.createPool($5ffbe5e8d10cd81c$var$List,16384,6144);var $5ffbe5e8d10cd81c$export$2e2bcd8739ae039=$5ffbe5e8d10cd81c$var$List;
//!class Timer
const $aa13d5a33a29523b$var$Timer=function(e,t,i){this.callback=i,this.interval=t,this.vsync=e,this.handle=null,this.isRunning=!1,this.startTime=0,this.rTime=0,this.sTime=0,this.lTime=0,this.tDelta=0,this._onTimeout=()=>{this.onTimeout()},this._onTimeout_b=()=>{this.runNow()}};$aa13d5a33a29523b$var$Timer.prototype.onTimeout=function(){if(!this.isRunning)return;this.rTime=hrnow()-this.startTime;let e=this.rTime-(this.sTime+this.interval);e<0?this.runAfter(-e):(this.sTime+=this.interval*(1+int(e/this.interval)),this.tDelta=e<0?this.interval:this.rTime-this.lTime,this.lTime=this.rTime,this.runAfter(this.sTime+this.interval-(hrnow()-this.startTime)),this.callback(this.tDelta,this))},$aa13d5a33a29523b$var$Timer.prototype.start=function(e=!1,t=1){this.isRunning||(this.startTime=hrnow(),this.isRunning=!0,this.sTime=0,this.lTime=0,this.onStarted(),e&&this.callback(0,this),this.runAfter(this.interval*t))},$aa13d5a33a29523b$var$Timer.prototype.runAfter=function(e){this.vsync?requestAnimationFrame(this._onTimeout_b):(this.handle&&clearTimeout(this.handle),this.handle=setTimeout(this._onTimeout,e))},$aa13d5a33a29523b$var$Timer.prototype.runNow=function(){this.handle&&clearTimeout(this.handle),this.handle=setTimeout(this._onTimeout,0)},$aa13d5a33a29523b$var$Timer.prototype.stop=function(){this.isRunning&&(this.handle&&(clearTimeout(this.handle),this.handle=null),this.isRunning=!1,this.onStopped())},$aa13d5a33a29523b$var$Timer.prototype.onStarted=function(){},$aa13d5a33a29523b$var$Timer.prototype.onStopped=function(){};var $aa13d5a33a29523b$export$2e2bcd8739ae039=$aa13d5a33a29523b$var$Timer,$lTI0F=parcelRequire("lTI0F"),$lTI0F=parcelRequire("lTI0F"),$lTI0F=parcelRequire("lTI0F");
//![import "../utils/recycler"]
//!class Vec2
const $81cb9504fb4d2922$var$Vec2=$lTI0F.Class.extend({className:"Vec2",x:0,y:0,__ctor:function(e=null,t=null){return this.set(e,t)},clone:function(){return $81cb9504fb4d2922$var$Vec2.Pool.alloc(this)},set:function(e,t=null){if(null===e)e=0,t=0;else if(null===t){let i=e;e=i.x,t=i.y}return this.x=e,this.y=t,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},zero:function(){return this.set(0,0)},isZero:function(){return 0==this.x&&0==this.y},equals:function(e,t=null){if(null===t){let i=e;e=i.x,t=i.y}return this.x==e&&this.y==t},neg:function(){return this.x=-this.x,this.y=-this.y,this},inv:function(){return this.x=1/this.x,this.y=1/this.y,this},abs:function(){return this.x=this.x<0?-this.x:this.x,this.y=this.y<0?-this.y:this.y,this},translate:function(e,t=null){if(null===t){let i=e;e=i.x,t=i.y}return this.x+=e,this.y+=t,this},rotate:function(e){let t=this.x*Math.cos(e)+this.y*Math.sin(e),i=this.y*Math.cos(e)-this.x*Math.sin(e);return this.x=t,this.y=i,this},add:function(e,t=null){if(null===t){let i=e;e=i.x,t=i.y}return this.x+=e,this.y+=t,this},sub:function(e,t=null){if(null===t){let i=e;e=i.x,t=i.y}return this.x-=e,this.y-=t,this},scale:function(e,t=null){if(null===t)if($81cb9504fb4d2922$var$Vec2.isInstance(e)){let i=e;e=i.x,t=i.y}else t=e;return this.x*=e,this.y*=t,this},floor:function(){return this.x=int(this.x),this.y=int(this.y),this},fract:function(){return this.x=this.x-int(this.x),this.y=this.y-int(this.y),this},dot:function(e,t=null){if(null===t){let i=e;e=i.x,t=i.y}return this.x*e+this.y*t},magnitude:function(e=!1){return e?this.x*this.x+this.y*this.y:Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){return this.isZero()?this:this.scale(1/this.magnitude())},majorAxis:function(){return Math.abs(this.x)>Math.abs(this.y)?this.y=0:this.x=0,this},minorAxis:function(){return Math.abs(this.x)<Math.abs(this.y)?this.y=0:this.x=0,this},sign:function(){return this.x=this.x?this.x<0?-1:1:0,this.y=this.y?this.y<0?-1:1:0,this},toString:function(){return`(${this.x}, ${this.y})`}});
//!/class
//!namespace Vec2
//!namespace Pool
$3755e11d40ee463d$export$2e2bcd8739ae039.createPool($81cb9504fb4d2922$var$Vec2,4096,2048);var $81cb9504fb4d2922$export$2e2bcd8739ae039=$81cb9504fb4d2922$var$Vec2;
//![import "../utils/recycler"]
//![import "./vec2"]
const $828cb24954f75093$var$temp=new Float32Array(9).fill(0),$828cb24954f75093$var$temp2=new Float32Array(9).fill(0),$828cb24954f75093$var$Matrix=$lTI0F.Class.extend({className:"Matrix",data:null,__ctor:function(e=null){null===this.data&&(this.data=new Float32Array(9)),null!==e?this.set(e):this.identity()},zero:function(){return this.data.fill(0),this},fill:function(e){return this.data.fill(e),this},set:function(e){if($828cb24954f75093$var$Matrix.isInstance(e))for(let t=0;t<9;t++)this.data[t]=e.data[t];else for(let t=0;t<9;t++)this.data[t]=e[t];return this},identity:function(e=null){return null===e&&(e=this.data),e.fill(0),e[0]=e[4]=e[8]=1,this},scalef:function(e){for(let t=0;t<9;t++)this.data[t]*=e;return this},clone:function(){return $828cb24954f75093$var$Matrix.Pool.alloc(this)},append:function(e){e instanceof $828cb24954f75093$var$Matrix&&(e=e.data);for(let e=0;e<9;e++)$828cb24954f75093$var$temp[e]=this.data[e];return this.data[0]=e[0]*$828cb24954f75093$var$temp[0]+e[1]*$828cb24954f75093$var$temp[3]+e[2]*$828cb24954f75093$var$temp[6],this.data[1]=e[0]*$828cb24954f75093$var$temp[1]+e[1]*$828cb24954f75093$var$temp[4]+e[2]*$828cb24954f75093$var$temp[7],this.data[2]=e[0]*$828cb24954f75093$var$temp[2]+e[1]*$828cb24954f75093$var$temp[5]+e[2]*$828cb24954f75093$var$temp[8],this.data[3]=e[3]*$828cb24954f75093$var$temp[0]+e[4]*$828cb24954f75093$var$temp[3]+e[5]*$828cb24954f75093$var$temp[6],this.data[4]=e[3]*$828cb24954f75093$var$temp[1]+e[4]*$828cb24954f75093$var$temp[4]+e[5]*$828cb24954f75093$var$temp[7],this.data[5]=e[3]*$828cb24954f75093$var$temp[2]+e[4]*$828cb24954f75093$var$temp[5]+e[5]*$828cb24954f75093$var$temp[8],this.data[6]=e[6]*$828cb24954f75093$var$temp[0]+e[7]*$828cb24954f75093$var$temp[3]+e[8]*$828cb24954f75093$var$temp[6],this.data[7]=e[6]*$828cb24954f75093$var$temp[1]+e[7]*$828cb24954f75093$var$temp[4]+e[8]*$828cb24954f75093$var$temp[7],this.data[8]=e[6]*$828cb24954f75093$var$temp[2]+e[7]*$828cb24954f75093$var$temp[5]+e[8]*$828cb24954f75093$var$temp[8],this},translate:function(e,t){if(0==e&&0==t)return this;for(let e=0;e<9;e++)$828cb24954f75093$var$temp[e]=this.data[e];return this.data[6]=e*$828cb24954f75093$var$temp[0]+t*$828cb24954f75093$var$temp[3]+$828cb24954f75093$var$temp[6],this.data[7]=e*$828cb24954f75093$var$temp[1]+t*$828cb24954f75093$var$temp[4]+$828cb24954f75093$var$temp[7],this.data[8]=e*$828cb24954f75093$var$temp[2]+t*$828cb24954f75093$var$temp[5]+$828cb24954f75093$var$temp[8],this},rotate:function(e){if(0==e)return this;this.identity($828cb24954f75093$var$temp2);let t=Math.cos(e),i=Math.sin(e);return $828cb24954f75093$var$temp2[0]=t,$828cb24954f75093$var$temp2[1]=-i,$828cb24954f75093$var$temp2[3]=i,$828cb24954f75093$var$temp2[4]=t,this.append($828cb24954f75093$var$temp2)},scale:function(e,t){return 1==e&&1==t?this:(this.identity($828cb24954f75093$var$temp2),$828cb24954f75093$var$temp2[0]=e,$828cb24954f75093$var$temp2[4]=t,this.append($828cb24954f75093$var$temp2))},applyTo:function(e,t=null){if(null===t){const i=e;e=i.x,t=i.y}let i=this.data[0]*e+this.data[3]*t+this.data[6],r=this.data[1]*e+this.data[4]*t+this.data[7];return $81cb9504fb4d2922$export$2e2bcd8739ae039.Pool.alloc(i,r)},transpose:function(){$828cb24954f75093$var$temp.fill(0);for(let e=0;e<3;e++)for(let t=0;t<3;t++)$828cb24954f75093$var$temp[3*e+t]=this.data[3*t+e];for(let e=0;e<9;e++)this.data[e]=$828cb24954f75093$var$temp[e];return this},det:function(){return this.data[0]*(this.data[4]*this.data[8]-this.data[5]*this.data[7])-this.data[1]*(this.data[3]*this.data[8]-this.data[5]*this.data[6])+this.data[2]*(this.data[3]*this.data[7]-this.data[4]*this.data[6])},adj:function(){throw new Error("NOT IMPLEMENTED")},inverse:function(){let e=this.det();return e?this.adj().scalef(1/e):null},toString:function(){return`[${this.data[0]}, ${this.data[3]}, ${this.data[6]}]\n[${this.data[1]}, ${this.data[4]}, ${this.data[7]}]\n[${this.data[2]}, ${this.data[5]}, ${this.data[8]}]\n`}});$828cb24954f75093$var$Matrix.loadIdentity=function(e){e.fill(0),e[0]=e[4]=e[8]=1},
//!/class
//!namespace Matrix
//!namespace Pool
$3755e11d40ee463d$export$2e2bcd8739ae039.createPool($828cb24954f75093$var$Matrix,4096,1024);var $828cb24954f75093$export$2e2bcd8739ae039=$828cb24954f75093$var$Matrix,$lTI0F=parcelRequire("lTI0F"),$lTI0F=parcelRequire("lTI0F");
//!namespace glx
//!enum BufferTarget
//!/enum
//!enum BufferUsage
//!STATIC_DRAW
//!DYNAMIC_DRAW
//!STREAM_DRAW
//!STATIC_READ
//!DYNAMIC_READ
//!STREAM_READ
//!STATIC_COPY
//!DYNAMIC_COPY
//!STREAM_COPY
//!/enum
//!/namespace
//!class glx
const $5018703a9d9401f6$var$glx={BufferTarget:{},BufferUsage:{},gl:null,setContext:function(e){return this.gl=e,this.BufferTarget.ARRAY_BUFFER=this.gl.ARRAY_BUFFER,this.BufferTarget.ELEMENT_ARRAY_BUFFER=this.gl.ELEMENT_ARRAY_BUFFER,this.BufferTarget.COPY_READ_BUFFER=this.gl.COPY_READ_BUFFER,this.BufferTarget.COPY_WRITE_BUFFER=this.gl.COPY_WRITE_BUFFER,this.BufferTarget.TRANSFORM_FEEDBACK_BUFFER=this.gl.TRANSFORM_FEEDBACK_BUFFER,this.BufferTarget.UNIFORM_BUFFER=this.gl.UNIFORM_BUFFER,this.BufferTarget.PIXEL_PACK_BUFFER=this.gl.PIXEL_PACK_BUFFER,this.BufferTarget.PIXEL_UNPACK_BUFFER=this.gl.PIXEL_UNPACK_BUFFER,this.BufferUsage.STATIC_DRAW=this.gl.STATIC_DRAW,this.BufferUsage.DYNAMIC_DRAW=this.gl.DYNAMIC_DRAW,this.BufferUsage.STREAM_DRAW=this.gl.STREAM_DRAW,this.BufferUsage.STATIC_READ=this.gl.STATIC_READ,this.BufferUsage.DYNAMIC_READ=this.gl.DYNAMIC_READ,this.BufferUsage.STREAM_READ=this.gl.STREAM_READ,this.BufferUsage.STATIC_COPY=this.gl.STATIC_COPY,this.BufferUsage.DYNAMIC_COPY=this.gl.DYNAMIC_COPY,this.BufferUsage.STREAM_COPY=this.gl.STREAM_COPY,this},getParameter:function(e){return this.gl.getParameter(this.gl[e])},getFloat32Array:function(e,t,i){if(0===t&&i===e.length&&e instanceof Float32Array)return e;let r=new Float32Array(i);for(let n=0;n<i;n++)r[n]=e[n+t];return r},createBufferFrom:function(e,t=null,i=null,r=null,n=null){t=null!=t?t:$5018703a9d9401f6$var$glx.BufferTarget.ARRAY_BUFFER,i=null!=i?i:$5018703a9d9401f6$var$glx.BufferUsage.STATIC_DRAW;let a=this.gl.createBuffer();return this.gl.bindBuffer(t,a),this.gl.bufferData(t,this.getFloat32Array(e,null!=r?r:0,null!=n?n:e.length),i),a}};var//!/class
$5018703a9d9401f6$export$2e2bcd8739ae039=$5018703a9d9401f6$var$glx;
//!class glsl
const $c85bfca66a1d5459$var$glsl={snippets:{},set:function(e,t){this.snippets[e]=t},get:function(e){return this.snippets.hasOwnProperty(e)?this.snippets[e]:""},replace:function(e,t){e=e.split("\n");for(let i=0;i<e.length;i++){let r=e[i].trim();if(r.startsWith("//@use ")){let n="";for(let e of r.substring(7).split(","))e=e.trim(),t.hasOwnProperty(e)||(t[e]=!0,n+=$c85bfca66a1d5459$var$glsl.replace($c85bfca66a1d5459$var$glsl.get(e),t)+"\n");e[i]=n}}return e.join("\n")},process:function(e){return-1===(e=e.trim()).indexOf("precision")&&(e="precision highp float;\n"+e),-1===e.indexOf("#version")&&(e="#version 300 es\n"+e),this.replace(e,{})}};var//!/class
$c85bfca66a1d5459$export$2e2bcd8739ae039=$c85bfca66a1d5459$var$glsl;$c85bfca66a1d5459$var$glsl.set("vert-defs","\n\tuniform mat3 m_transform;\n\tuniform mat3 m_quad;\n\tuniform mat3 m_texture;\n\tuniform vec4 v_resolution;\n\tuniform vec4 v_frame_size;\n\tuniform float f_scale;\n\tuniform float f_time;\n\tuniform float f_depth;\n\n\tin vec3 location;\n\tout vec2 texcoords;\n"),$c85bfca66a1d5459$var$glsl.set("frag-defs","\n\tuniform vec4 v_resolution;\n\tuniform vec4 v_frame_size;\n\tuniform float f_scale;\n\tuniform float f_time;\n\tuniform float f_alpha;\n\tuniform sampler2D texture0;\n\n\tin vec2 texcoords;\n\tout vec4 color;\n"),$c85bfca66a1d5459$var$glsl.set("invertX","\n\tvec2 invertX (vec2 value) {\n\t\treturn value * vec2(-1.0, 1.0);\n\t}\n"),$c85bfca66a1d5459$var$glsl.set("invertY","\n\tvec2 invertY (vec2 value) {\n\t\treturn value * vec2(1.0, -1.0);\n\t}\n"),$c85bfca66a1d5459$var$glsl.set("norm","\n\tvec2 norm (vec2 value) {\n\t\treturn (value + 1.0) * 0.5;\n\t}\n\n\tvec3 norm (vec3 value) {\n\t\treturn (value + 1.0) * 0.5;\n\t}\n"),$c85bfca66a1d5459$var$glsl.set("snorm","\n\tvec2 snorm (vec2 value) {\n\t\treturn value * 2.0 - 1.0;\n\t}\n\n\tvec3 snorm (vec3 value) {\n\t\treturn value * 2.0 - 1.0;\n\t}\n"),$c85bfca66a1d5459$var$glsl.set("location2d","\n\t//@use invertY, snorm\n\n\tvec4 location2d (vec3 location, float depth)\n\t{\n\t\tvec2 loc = vec2(m_transform * m_quad * location) / v_resolution.xy;\n\t\treturn vec4(invertY(snorm(loc)), depth/16777216.0, 1.0);\n\t}\n"),$c85bfca66a1d5459$var$glsl.set("frameTexCoords","\n\tflat out vec2 v_frame_offset;\n\n\tvec2 frameTexCoords (vec3 location) {\n\t\tv_frame_offset = vec2(m_texture[2][0], m_texture[2][1]);\n\t\treturn mat2(m_texture * m_quad) * location.xy / (v_frame_size.xy * v_frame_size.zw);\n\t}\n"),$c85bfca66a1d5459$var$glsl.set("frameTex","\n\tflat in vec2 v_frame_offset;\n\n\tvec4 frameTex (vec2 texcoords) {\n\t\treturn texture(texture0, fract(texcoords)*v_frame_size.xy + v_frame_offset);\n\t}\n"),$c85bfca66a1d5459$var$glsl.set("rand","\n\tfloat rand (vec2 value) {\n\t\treturn fract(sin(dot(value, vec2(12.9898, 78.233))) * 43758.5453);\n\t}\n"),$c85bfca66a1d5459$var$glsl.set("align","\n\tfloat align (float value, float step) {\n\t\treturn floor(value/step)*step;\n\t}\n");
//![import "./glx"]
//![import "./glsl"]
//!class Shader
const $21de2c81276fb0c1$var$Shader=$lTI0F.Class.extend({id:null,type:0,shaderId:null,__ctor:function(e,t=null,i=null){null===i&&null!==t&&"string"==typeof t&&(i=t,t=null),null===t&&(t=e,e=null),$21de2c81276fb0c1$var$Shader.put(this.id=e,this),this.type=t,this.shaderId=null,i&&this.compile(i)},__dtor:function(){$5018703a9d9401f6$export$2e2bcd8739ae039.gl.deleteShader(this.shaderId),$21de2c81276fb0c1$var$Shader.remove(this.id)},compile:function(e){let t=$5018703a9d9401f6$export$2e2bcd8739ae039.gl;this.shaderId=t.createShader(this.type===$21de2c81276fb0c1$var$Shader.Type.VERTEX?t.VERTEX_SHADER:this.type===$21de2c81276fb0c1$var$Shader.Type.FRAGMENT?t.FRAGMENT_SHADER:t.GEOMETRY_SHADER),e=$c85bfca66a1d5459$export$2e2bcd8739ae039.process(e),t.shaderSource(this.shaderId,e),t.compileShader(this.shaderId);let i=t.getShaderInfoLog(this.shaderId);if(i)throw console.error(e.split("\n").map(((e,t)=>t+": "+e)).join("\n")),new Error((this.id?"["+this.id+"] ":"")+i);return this}});
//!/class
$21de2c81276fb0c1$var$Shader.shaders={},$21de2c81276fb0c1$var$Shader.put=function(e,t){e&&(this.shaders[e]=t)},$21de2c81276fb0c1$var$Shader.get=function(e){return this.shaders[e]},$21de2c81276fb0c1$var$Shader.remove=function(e){delete this.shaders[e]},
//!namespace Shader
//!enum Type
$21de2c81276fb0c1$var$Shader.Type={VERTEX:0,
//!VERTEX
FRAGMENT:1,
//!FRAGMENT
GEOMETRY:2};var//!/enum
$21de2c81276fb0c1$export$2e2bcd8739ae039=$21de2c81276fb0c1$var$Shader;
//![import "./shader"]
//![import "./globals"]
//![import "./glx"]
//!class ShaderProgram
const $6537756e185f4720$var$ShaderProgram=$lTI0F.Class.extend({locations:null,id:null,shaders:null,programId:null,__ctor:function(e=null){this.id=e,this.shaders=[],this.programId=null,this.locations={},this._uniformSetter=null,$6537756e185f4720$var$ShaderProgram.put(e,this)},__dtor:function(){let e=$5018703a9d9401f6$export$2e2bcd8739ae039.gl;if(!e)return this;e.deleteProgram(this.programId),$6537756e185f4720$var$ShaderProgram.remove(this.id)},uniformSetter:function(e){return this._uniformSetter=e,this},attach:function(e){if("string"==typeof e&&(e=$21de2c81276fb0c1$export$2e2bcd8739ae039.get(e)),!e)throw new Error("Unable to attach shader, invalid argument.");return this.shaders.push(e),this},bindLocations:function(){$5018703a9d9401f6$export$2e2bcd8739ae039.gl.bindAttribLocation(this.programId,0,"location")},getAttribLocation:function(e){return this.locations.hasOwnProperty(e)||(this.locations[e]=$5018703a9d9401f6$export$2e2bcd8739ae039.gl.getAttribLocation(this.programId,e)),this.locations[e]},getUniformLocation:function(e){return this.locations.hasOwnProperty(e)||(this.locations[e]=$5018703a9d9401f6$export$2e2bcd8739ae039.gl.getUniformLocation(this.programId,e)),this.locations[e]},getUniformBlockLocation:function(e){return this.locations.hasOwnProperty(e)||(this.locations[e]=$5018703a9d9401f6$export$2e2bcd8739ae039.gl.getUniformBlockIndex(this.programId,e)),this.locations[e]},getUniformBlockSize:function(e){return"string"==typeof e&&(e=this.getUniformBlockLocation(e)),$5018703a9d9401f6$export$2e2bcd8739ae039.gl.getActiveUniformBlockParameter(this.programId,e,$5018703a9d9401f6$export$2e2bcd8739ae039.gl.UNIFORM_BLOCK_DATA_SIZE)},createUniformBlockBuffer:function(e){"string"==typeof e&&(e=this.getUniformBlockLocation(e));let t=this.getUniformBlockSize(e),i=$5018703a9d9401f6$export$2e2bcd8739ae039.createBufferFrom(new Float32Array(t).fill(0),$5018703a9d9401f6$export$2e2bcd8739ae039.BufferTarget.UNIFORM_BUFFER,$5018703a9d9401f6$export$2e2bcd8739ae039.BufferUsage.DYNAMIC_DRAW);$5018703a9d9401f6$export$2e2bcd8739ae039.gl.bindBufferBase($5018703a9d9401f6$export$2e2bcd8739ae039.BufferTarget.UNIFORM_BUFFER,0,i)},preloadLocations:function(){this.getUniformLocation("f_time"),this.getUniformLocation("f_scale"),this.getUniformLocation("m_transform"),this.getUniformLocation("m_texture"),this.getUniformLocation("m_quad"),this.getUniformLocation("v_resolution"),this.getUniformLocation("v_frame_size"),this.getUniformLocation("f_depth"),this.getUniformLocation("f_alpha"),this.getUniformLocation("v_base_color"),this.getUniformLocation("texture0"),this.getAttribLocation("location")},link:function(){let e=$5018703a9d9401f6$export$2e2bcd8739ae039.gl;if(!e)return this;this.programId=e.createProgram();for(let t of this.shaders)e.attachShader(this.programId,t.shaderId);return this.bindLocations(),e.linkProgram(this.programId),this.preloadLocations(),this},activate:function(){let e=$5018703a9d9401f6$export$2e2bcd8739ae039.gl;e&&(e.useProgram(this.programId),null!==this._uniformSetter&&this._uniformSetter(this,e))},getStatus:function(){let e=$5018703a9d9401f6$export$2e2bcd8739ae039.gl;return!e||e.getProgramParameter(this.programId,e.LINK_STATUS)},getError:function(){let e=$5018703a9d9401f6$export$2e2bcd8739ae039.gl;return e?null===this.programId?"Program has not been linked.":e.getProgramInfoLog(this.programId):""},uniform1f:function(e,t){return"string"==typeof e&&(e=this.getUniformLocation(e)),$5018703a9d9401f6$export$2e2bcd8739ae039.gl.uniform1f(e,t),this},uniform1fv:function(e,t){return"string"==typeof e&&(e=this.getUniformLocation(e)),$5018703a9d9401f6$export$2e2bcd8739ae039.gl.uniform1fv(e,t),this},uniform1i:function(e,t){return"string"==typeof e&&(e=this.getUniformLocation(e)),$5018703a9d9401f6$export$2e2bcd8739ae039.gl.uniform1i(e,t),this},uniform1iv:function(e,t){return"string"==typeof e&&(e=this.getUniformLocation(e)),$5018703a9d9401f6$export$2e2bcd8739ae039.gl.uniform1iv(e,t),this},uniform2f:function(e,t,i){return"string"==typeof e&&(e=this.getUniformLocation(e)),$5018703a9d9401f6$export$2e2bcd8739ae039.gl.uniform2f(e,t,i),this},uniform2fv:function(e,t){return"string"==typeof e&&(e=this.getUniformLocation(e)),$5018703a9d9401f6$export$2e2bcd8739ae039.gl.uniform2fv(e,t),this},uniform2i:function(e,t,i){return"string"==typeof e&&(e=this.getUniformLocation(e)),$5018703a9d9401f6$export$2e2bcd8739ae039.gl.uniform2i(e,t,i),this},uniform2iv:function(e,t){return"string"==typeof e&&(e=this.getUniformLocation(e)),$5018703a9d9401f6$export$2e2bcd8739ae039.gl.uniform2iv(e,t),this},uniform3f:function(e,t,i,r){return"string"==typeof e&&(e=this.getUniformLocation(e)),$5018703a9d9401f6$export$2e2bcd8739ae039.gl.uniform3f(e,t,i,r),this},uniform3fv:function(e,t){return"string"==typeof e&&(e=this.getUniformLocation(e)),$5018703a9d9401f6$export$2e2bcd8739ae039.gl.uniform3fv(e,t),this},uniform3i:function(e,t,i,r){return"string"==typeof e&&(e=this.getUniformLocation(e)),$5018703a9d9401f6$export$2e2bcd8739ae039.gl.uniform3i(e,t,i,r),this},uniform3iv:function(e,t){return"string"==typeof e&&(e=this.getUniformLocation(e)),$5018703a9d9401f6$export$2e2bcd8739ae039.gl.uniform3iv(e,t),this},uniform4f:function(e,t,i,r,n){return"string"==typeof e&&(e=this.getUniformLocation(e)),$5018703a9d9401f6$export$2e2bcd8739ae039.gl.uniform4f(e,t,i,r,n),this},uniform4fv:function(e,t){return"string"==typeof e&&(e=this.getUniformLocation(e)),$5018703a9d9401f6$export$2e2bcd8739ae039.gl.uniform4fv(e,t),this},uniform4i:function(e,t,i,r,n){return"string"==typeof e&&(e=this.getUniformLocation(e)),$5018703a9d9401f6$export$2e2bcd8739ae039.gl.uniform4i(e,t,i,r,n),this},uniform4iv:function(e,t){return"string"==typeof e&&(e=this.getUniformLocation(e)),$5018703a9d9401f6$export$2e2bcd8739ae039.gl.uniform4iv(e,t),this}});$6537756e185f4720$var$ShaderProgram.programs={},$6537756e185f4720$var$ShaderProgram.create=function(e,t){let i=null,r=null,n=null,a=null,s=null,o=null,l=null;for(let e of t.split("\n")){let t=e.trim();if(t.startsWith("//")){if(t=t.split(" ").map((e=>e.trim())),"//@vert"===t[0]){t.length>1&&(r=t[1]),null===i&&(i=[]),l=i;continue}if("//@frag"===t[0]){t.length>1&&(a=t[1]),null===n&&(n=[]),l=n;continue}if("//@geom"===t[0]){t.length>1&&(o=t[1]),null===s&&(s=[]),l=s;continue}}null!==l&&l.push(e)}let c=new $6537756e185f4720$var$ShaderProgram(e);if(null!==i&&(i=i.join("\n").trim()),null!==n&&(n=n.join("\n").trim()),null!==s&&(s=s.join("\n").trim()),null!==i&&0===i.length){if(i=$21de2c81276fb0c1$export$2e2bcd8739ae039.get(r),null===i)throw new Error("Vertex shader not found: "+r)}else null!==i&&0!==i.length||(i=null);if(null!==n&&0===n.length){if(n=$21de2c81276fb0c1$export$2e2bcd8739ae039.get(a),null===n)throw new Error("Fragment shader not found: "+a)}else null!==n&&0!==n.length||(n=null);if(null!==s&&0===s.length){if(s=$21de2c81276fb0c1$export$2e2bcd8739ae039.get(o),null===s)throw new Error("Geometry shader not found: "+o)}else null!==s&&0!==s.length||(s=null);return null===i&&(i=$21de2c81276fb0c1$export$2e2bcd8739ae039.get("def-vert")),null===n&&(n=$21de2c81276fb0c1$export$2e2bcd8739ae039.get("def-frag")),null!==i&&"string"==typeof i&&(i=new $21de2c81276fb0c1$export$2e2bcd8739ae039(r,$21de2c81276fb0c1$export$2e2bcd8739ae039.Type.VERTEX,i)),null!==n&&"string"==typeof n&&(n=new $21de2c81276fb0c1$export$2e2bcd8739ae039(a,$21de2c81276fb0c1$export$2e2bcd8739ae039.Type.FRAGMENT,n)),null!==s&&"string"==typeof s&&(s=new $21de2c81276fb0c1$export$2e2bcd8739ae039(o,$21de2c81276fb0c1$export$2e2bcd8739ae039.Type.GEOMETRY,s)),null!==i&&c.attach(i),null!==n&&c.attach(n),null!==s&&c.attach(s),c.link()},$6537756e185f4720$var$ShaderProgram.put=function(e,t){e&&(this.programs[e]=t)},$6537756e185f4720$var$ShaderProgram.get=function(e){return this.programs[e]},$6537756e185f4720$var$ShaderProgram.remove=function(e){delete this.programs[e]};var $6537756e185f4720$export$2e2bcd8739ae039=$6537756e185f4720$var$ShaderProgram;
//![import "../math/matrix"]
//![import "./system"]
//![import "../utils/list"]
//![import "./shader-program"]
//![import "./shader"]
//![import "./globals"]
//![import "./log"]
//![import "./glx"]
//!namespace Canvas
//!type Options =
//!/type
//!/namespace
//!class Canvas
const $22f7193504a1f089$var$Canvas=function(e=null){let t={elem:null,gl:!1,background:"#000000",width:0,height:0,hidden:!0,absolute:!1,antialias:!1,...e};const i=!$parcel$global.document;null==t.elem?(this.elem=i?$lTI0F.Rinn.clone($22f7193504a1f089$var$Canvas.passThruCanvas):$parcel$global.document.createElement("canvas"),$parcel$global.document&&1!=t.hidden&&($parcel$global.document.body.appendChild(this.elem),!0===t.absolute&&(this.elem.style.position="absolute",this.elem.style.left="0",this.elem.style.top="0"))):this.elem=t.elem,this.elem.getContext&&(!0!==t.gl||i?(this.context=this.elem.getContext("2d",{desynchronized:!1}),this.gl=null):(this.gl=this.elem.getContext("webgl2",{desynchronized:!1,alpha:!1,stencil:!0}),$b91bcfe7d0e9e859$export$2e2bcd8739ae039.gl=this.gl,$b91bcfe7d0e9e859$export$2e2bcd8739ae039.shaderProgram=null,$5018703a9d9401f6$export$2e2bcd8739ae039.setContext(this.gl),this.context=null,$e2086caaef68d463$export$2e2bcd8739ae039.write($5018703a9d9401f6$export$2e2bcd8739ae039.getParameter("VERSION")+", "+$5018703a9d9401f6$export$2e2bcd8739ae039.getParameter("SHADING_LANGUAGE_VERSION"))),this.matrixStack=$5ffbe5e8d10cd81c$export$2e2bcd8739ae039.Pool.alloc(),this.alphaStack=$5ffbe5e8d10cd81c$export$2e2bcd8739ae039.Pool.alloc(),this.depthFlagStack=$5ffbe5e8d10cd81c$export$2e2bcd8739ae039.Pool.alloc(),this.shaderProgramStack=$5ffbe5e8d10cd81c$export$2e2bcd8739ae039.Pool.alloc(),this.matr=$828cb24954f75093$export$2e2bcd8739ae039.Pool.alloc(),this.transform=$828cb24954f75093$export$2e2bcd8739ae039.Pool.alloc(),this._globalScale=1,this._alpha=1,this._depthFlag=!0,this.updateTransform(),this.strokeStyle("#fff"),this.fillStyle("#fff"),t.width&&t.height&&this.resize(t.width,t.height),null!==this.gl&&this.initGl(),this.antialias=t.antialias,this.setBackground(t.background))};$22f7193504a1f089$var$Canvas.passThruCanvas={parentNode:null,imageSmoothingEnabled:!0,style:{},width:960,height:540,getContext:function(e){return this},pushClip:function(){},popClip:function(){},scale:function(e,t){},rotate:function(e){},translate:function(e,t){},setTransform:function(e,t,i,r,n,a){},updateTransform:function(){},toDataURL:function(e,t){return""},beginPath:function(){},moveTo:function(e,t){},closePath:function(){},lineTo:function(){},rect:function(e,t,i,r){},fill:function(){},stroke:function(){},fillRect:function(e,t,i,r){},strokeRect:function(e,t,i,r){},clip:function(){},quadraticCurveTo:function(e,t,i,r){},bezierCurveTo:function(e,t,i,r,n,a){},arc:function(e,t,i,r,n,a){},arcTo:function(e,t,i,r,n){},fillText:function(e,t,i,r){},strokeText:function(e,t,i,r){},measureText:function(e){return{width:0}},createImageData:function(e,t){return{width:e,height:t}},getImageData:function(e,t,i,r){return{width:i,height:r,data:[]}},putImageData:function(e,t,i){},drawImage:function(e,t=0,i=0,r=null,n=null,a=null,s=null,o=null,l=null,c=null,h=null,u=null,d=null){},getBoundingClientRect:function(){return{left:0,top:0}}},$22f7193504a1f089$var$Canvas.prototype.initGl=function(){let e=this.gl;if(this.glFWrapProgram=new $6537756e185f4720$export$2e2bcd8739ae039("fwrap"),new $21de2c81276fb0c1$export$2e2bcd8739ae039("fwrap-vert",$21de2c81276fb0c1$export$2e2bcd8739ae039.Type.VERTEX,"\n\t\tuniform mat3 m_transform;\n\t\tuniform mat3 m_quad;\n\t\tuniform mat3 m_texture;\n\t\tuniform vec4 v_resolution;\n\t\tuniform vec4 v_frame_size;\n\t\tuniform float f_depth;\n\n\t\tin vec3 location;\n\t\tout vec2 texcoords;\n\n\t\t//@use location2d, frameTexCoords\n\n\t\tvoid main ()\n\t\t{\n\t\t\tgl_Position = location2d (location, f_depth);\n\t\t\ttexcoords = frameTexCoords(location);\n\t\t}\n\t"),new $21de2c81276fb0c1$export$2e2bcd8739ae039("fwrap-frag",$21de2c81276fb0c1$export$2e2bcd8739ae039.Type.FRAGMENT,"\n\t\tuniform sampler2D texture0;\n\t\tuniform vec4 v_frame_size;\n\t\tuniform float f_alpha;\n\n\t\tin vec2 texcoords;\n\t\tout vec4 color;\n\n\t\t//@use frameTex\n\n\t\tvoid main ()\n\t\t{\n\t\t\tcolor = frameTex(texcoords);\n\n\t\t\tcolor.a *= f_alpha;\n\t\t\tif (color.a <= 0.0) discard;\n\t\t}\n\t"),this.glDefaultProgram=new $6537756e185f4720$export$2e2bcd8739ae039("def"),new $21de2c81276fb0c1$export$2e2bcd8739ae039("def-vert",$21de2c81276fb0c1$export$2e2bcd8739ae039.Type.VERTEX,"\n\t\tuniform mat3 m_transform;\n\t\tuniform mat3 m_quad;\n\t\tuniform mat3 m_texture;\n\t\tuniform vec4 v_resolution;\n\t\tuniform float f_depth;\n\n\t\tin vec3 location;\n\t\tout vec2 texcoords;\n\n\t\t//@use location2d\n\n\t\tvoid main ()\n\t\t{\n\t\t\tgl_Position = location2d (location, f_depth);\n\t\t\ttexcoords = vec2(m_texture * location);\n\t\t}\n\t"),new $21de2c81276fb0c1$export$2e2bcd8739ae039("def-frag",$21de2c81276fb0c1$export$2e2bcd8739ae039.Type.FRAGMENT,"\n\t\tuniform sampler2D texture0;\n\t\tuniform float f_alpha;\n\n\t\tin vec2 texcoords;\n\t\tout vec4 color;\n\n\t\tvoid main()\n\t\t{\n\t\t\tcolor = texture(texture0, texcoords);\n\n\t\t\tcolor.a *= f_alpha;\n\t\t\tif (color.a <= 0.0) discard;\n\t\t}\n\t"),this.glBlitProgram=new $6537756e185f4720$export$2e2bcd8739ae039("blit"),new $21de2c81276fb0c1$export$2e2bcd8739ae039("blit-vert",$21de2c81276fb0c1$export$2e2bcd8739ae039.Type.VERTEX,"\n\t\tuniform vec4 v_resolution;\n\t\tuniform mat3 m_quad;\n\t\tuniform mat3 m_texture;\n\n\t\tin vec3 location;\n\t\tout vec2 texcoords;\n\n\t\t//@use snorm\n\n\t\tvoid main() {\n\t\t\tgl_Position = vec4(snorm(vec2(m_quad * location) / v_resolution.xy), 0.0, 1.0);\n\t\t\ttexcoords = vec2(m_texture * location);\n\t\t}\n\t"),new $21de2c81276fb0c1$export$2e2bcd8739ae039("blit-frag",$21de2c81276fb0c1$export$2e2bcd8739ae039.Type.FRAGMENT,"\n\t\tuniform sampler2D texture0;\n\t\tin vec2 texcoords;\n\n\t\tout vec4 color;\n\n\t\tvoid main() {\n\t\t\tcolor = texture(texture0, texcoords);\n\t\t}\n\t"),this.glDefaultProgram.attach("def-vert"),this.glDefaultProgram.attach("def-frag"),this.glFWrapProgram.attach("fwrap-vert"),this.glFWrapProgram.attach("fwrap-frag"),this.glBlitProgram.attach("blit-vert"),this.glBlitProgram.attach("blit-frag"),this.glDefaultProgram.link(),this.glFWrapProgram.link(),this.glBlitProgram.link(),!this.glDefaultProgram.getStatus())throw new Error(this.glDefaultProgram.getAllErrors());if(!this.glFWrapProgram.getStatus())throw new Error(this.glFWrapProgram.getAllErrors());if(!this.glBlitProgram.getStatus())throw new Error(this.glBlitProgram.getAllErrors());this.setShaderProgram($6537756e185f4720$export$2e2bcd8739ae039.get("def")),this.vao0=e.createVertexArray(),e.bindVertexArray(this.vao0),$5018703a9d9401f6$export$2e2bcd8739ae039.createBufferFrom([0,0,1,0,1,1,1,0,1,1,1,1],$5018703a9d9401f6$export$2e2bcd8739ae039.BufferTarget.ARRAY_BUFFER,$5018703a9d9401f6$export$2e2bcd8739ae039.BufferUsage.STATIC_DRAW),e.vertexAttribPointer($b91bcfe7d0e9e859$export$2e2bcd8739ae039.shaderProgram.getAttribLocation("location"),3,e.FLOAT,e.FALSE,3*Float32Array.BYTES_PER_ELEMENT,0*Float32Array.BYTES_PER_ELEMENT),e.enableVertexAttribArray($b91bcfe7d0e9e859$export$2e2bcd8739ae039.shaderProgram.getAttribLocation("location")),e.clearColor(0,0,0,1),e.enable(e.DEPTH_TEST),e.clearDepth(0),e.depthFunc(e.GEQUAL),e.enable(e.BLEND),e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA),this.m_quad=new Float32Array(9).fill(0),this.m_texture=new Float32Array(9).fill(0),this.v_resolution=new Float32Array(4).fill(0),this.zvalue=0,$828cb24954f75093$export$2e2bcd8739ae039.loadIdentity(this.m_quad),$828cb24954f75093$export$2e2bcd8739ae039.loadIdentity(this.m_texture),this.drawImage=function(e,t,i,r,n,a,s,o,l,c=null,h=null,u=null,d=null){if(!e.glTextureReady)return;let f=this.gl,$=$b91bcfe7d0e9e859$export$2e2bcd8739ae039.shaderProgram;null===c&&(c=e.width,h=e.height),null===u&&(u=e.targetWidth,d=e.targetHeight),$.uniform4fv("v_resolution",this.v_resolution),$.uniform1f("f_time",$b91bcfe7d0e9e859$export$2e2bcd8739ae039.time),$.uniform1f("f_scale",this._globalScale),$.uniform1f("f_alpha",this._alpha),this.glActiveTextureId===e.glTextureId&&this.glActiveShader===$||(f.activeTexture(f.TEXTURE0),f.bindTexture(f.TEXTURE_2D,e.glTextureId),$.uniform1i("texture0",0),$.uniform4f("v_frame_size",u*e.rscale/c,d*e.rscale/h,u,d),this.glActiveTextureId=e.glTextureId,this.glActiveShader=$),this.m_quad[0]=o,this.m_quad[4]=l,this.m_quad[6]=a,this.m_quad[7]=s,this.m_texture[0]=r/c,this.m_texture[4]=n/h,this.m_texture[6]=t/c,this.m_texture[7]=i/h,f.uniformMatrix3fv($.getUniformLocation("m_transform"),!1,this.transform.data),f.uniformMatrix3fv($.getUniformLocation("m_quad"),!1,this.m_quad),f.uniformMatrix3fv($.getUniformLocation("m_texture"),!1,this.m_texture),f.uniform1f($.getUniformLocation("f_depth"),this.zvalue),f.drawArrays(f.TRIANGLE_STRIP,0,4)},this.drawRect=function(e,t,i,r,n=null){let a=this.gl,s=$b91bcfe7d0e9e859$export$2e2bcd8739ae039.shaderProgram;s.uniform4fv("v_resolution",this.v_resolution),s.uniform1f("f_time",$b91bcfe7d0e9e859$export$2e2bcd8739ae039.time),s.uniform1f("f_scale",this._globalScale),s.uniform1f("f_alpha",this._alpha),this.glActiveTextureId=null,this.m_quad[0]=i,this.m_quad[4]=r,this.m_quad[6]=e,this.m_quad[7]=t,this.m_texture[0]=1,this.m_texture[4]=1,this.m_texture[6]=0,this.m_texture[7]=0,a.uniformMatrix3fv(s.getUniformLocation("m_transform"),!1,this.transform.data),a.uniformMatrix3fv(s.getUniformLocation("m_quad"),!1,this.m_quad),a.uniformMatrix3fv(s.getUniformLocation("m_texture"),!1,this.m_texture),a.uniform1f(s.getUniformLocation("f_depth"),this.zvalue),a.drawArrays(a.TRIANGLE_STRIP,0,4)}},$22f7193504a1f089$var$Canvas.prototype.prepareImage=function(e){let t=this.gl;if(null==t)return!1;let i=t.createTexture();return t.bindTexture(t.TEXTURE_2D,i),e.filter||(e.filter="NEAREST"),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),!0===e.mipmap?(t.texStorage2D(t.TEXTURE_2D,e.levels,t.RGBA8,e.width,e.height),t.texSubImage2D(t.TEXTURE_2D,0,0,0,e.width,e.height,t.RGBA,t.UNSIGNED_BYTE,e),t.generateMipmap(t.TEXTURE_2D),"NEAREST"===e.filter?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST_MIPMAP_LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST)):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR_MIPMAP_LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR))):(t.texStorage2D(t.TEXTURE_2D,1,t.RGBA8,e.width,e.height),t.texSubImage2D(t.TEXTURE_2D,0,0,0,e.width,e.height,t.RGBA,t.UNSIGNED_BYTE,e),"NEAREST"===e.filter?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST)):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR))),e.glTextureId=i,e.glTextureReady=!0,!0},$22f7193504a1f089$var$Canvas.prototype.setWrapRepeat=function(e){let t=this.gl;return null!=t&&e.glTextureReady?(t.bindTexture(t.TEXTURE_2D,e.glTextureId),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT),e):e},$22f7193504a1f089$var$Canvas.prototype.applyConfig=function(){0==this.antialias?(null!=this.context&&(this.context.imageSmoothingEnabled=!1),this.elem.style.imageRendering="crisp-edges"):(null!=this.context&&(this.context.imageSmoothingEnabled=!0),this.elem.style.imageRendering="auto")},$22f7193504a1f089$var$Canvas.prototype.dispose=function(){this.elem.parentNode&&this.elem.parentNode.removeChild(this.elem),this.matrixStack.free(),this.alphaStack.free(),this.depthFlagStack.free(),this.shaderProgramStack.free(),this.matr=null,this.context=null,this.elem=null},$22f7193504a1f089$var$Canvas.prototype.setBackground=function(e){if(this.elem.style.background=e,this.backgroundColor=e,null!==this.gl){if(7!=e.length)throw new Error("Canvas.setBackground: color parameter should be CSS-style hex-rgb with 6 digits.");let t=parseInt(e.substr(1,2),16)/255,i=parseInt(e.substr(3,2),16)/255,r=parseInt(e.substr(5,2),16)/255;this.gl.clearColor(t,i,r,1)}},$22f7193504a1f089$var$Canvas.prototype.resize=function(e,t){let i=this.elem.getBoundingClientRect();e||(e=i.width),t||(t=i.height),this.elem.width=e,this.elem.height=t,this.width=this.elem.width,this.height=this.elem.height,this._width=int(this.width/this._globalScale),this._height=int(this.height/this._globalScale);let r=this.gl;return null!=r&&(r.enable(r.SCISSOR_TEST),r.scissor(0,0,this.width,this.height),r.viewport(0,0,this.width,this.height),this.v_resolution&&(this.v_resolution[0]=this.width,this.v_resolution[1]=this.height,this.v_resolution[2]=this.width,this.v_resolution[3]=this.height)),this.applyConfig(),this},$22f7193504a1f089$var$Canvas.prototype.globalScale=function(e){return this._globalScale=e,this._width=int(this.width/this._globalScale),this._height=int(this.height/this._globalScale),this.loadIdentity(),this.scale(e,e),this},$22f7193504a1f089$var$Canvas.prototype.flipped=function(e){return e?(this._width=int(this.height/this._globalScale),this._height=int(this.width/this._globalScale)):(this._width=int(this.width/this._globalScale),this._height=int(this.height/this._globalScale)),null!=this.gl&&this.v_resolution&&(this.v_resolution[0]=this.width,this.v_resolution[1]=this.height,this.v_resolution[2]=e?this.height:this.width,this.v_resolution[3]=e?this.width:this.height),this.isFlipped=e,this},$22f7193504a1f089$var$Canvas.prototype.pushClip=function(){return this},$22f7193504a1f089$var$Canvas.prototype.popClip=function(){return null!=this.gl&&this.gl.scissor(0,0,this.width,this.height),this},$22f7193504a1f089$var$Canvas.prototype.toDataUrl=function(e="image/png",t=null){return this.elem.toDataURL(e,t)},$22f7193504a1f089$var$Canvas.prototype.toPngBase64=function(){return this.elem.toDataURL("image/png").substr(22)},$22f7193504a1f089$var$Canvas.prototype._contextAttribute=function(e,t=null){if(this.context)return null!==t?(this.context[e]=t,this):this.context[e]},$22f7193504a1f089$var$Canvas.prototype.fillStyle=function(e){return this._contextAttribute("fillStyle",e)},$22f7193504a1f089$var$Canvas.prototype.strokeStyle=function(e){return this._contextAttribute("strokeStyle",e)},$22f7193504a1f089$var$Canvas.prototype.lineCap=function(e){return this._contextAttribute("lineCap",e)},$22f7193504a1f089$var$Canvas.prototype.lineJoin=function(e){return this._contextAttribute("lineJoin",e)},$22f7193504a1f089$var$Canvas.prototype.lineWidth=function(e){return this._contextAttribute("lineWidth",e)},$22f7193504a1f089$var$Canvas.prototype.miterLimit=function(e){return this._contextAttribute("miterLimit",e)},$22f7193504a1f089$var$Canvas.prototype.shadowColor=function(e){return this._contextAttribute("shadowColor",e)},$22f7193504a1f089$var$Canvas.prototype.shadowOffsetX=function(e){return this._contextAttribute("shadowOffsetX",e)},$22f7193504a1f089$var$Canvas.prototype.shadowOffsetY=function(e){return this._contextAttribute("shadowOffsetY",e)},$22f7193504a1f089$var$Canvas.prototype.shadowBlur=function(e){return this._contextAttribute("shadowBlur",e)},$22f7193504a1f089$var$Canvas.prototype.font=function(e){return this._contextAttribute("font",e)},$22f7193504a1f089$var$Canvas.prototype.textAlign=function(e){return this._contextAttribute("textAlign",e)},$22f7193504a1f089$var$Canvas.prototype.textBaseline=function(e){return this._contextAttribute("textBaseline",e)},$22f7193504a1f089$var$Canvas.prototype.globalAlpha=function(e=null){return null===e?this._alpha:(this._alpha=e,this.alpha(1))},$22f7193504a1f089$var$Canvas.prototype.globalCompositeOperation=function(e){return this._contextAttribute("globalCompositeOperation",e)},$22f7193504a1f089$var$Canvas.prototype.updateTransform=function(){return this.setTransform(this.matr.data[0],this.matr.data[1],this.matr.data[3],this.matr.data[4],this.matr.data[6],this.matr.data[7]),this},$22f7193504a1f089$var$Canvas.prototype.setTransform=function(e,t,i,r,n,a){return null===this.context?(this.transform.data[0]=e,this.transform.data[1]=t,this.transform.data[2]=0,this.transform.data[3]=i,this.transform.data[4]=r,this.transform.data[5]=0,this.transform.data[6]=int(n),this.transform.data[7]=int(a),this.transform.data[8]=1,this):(this.context.setTransform(e,t,i,r,int(n),int(a)),this)},$22f7193504a1f089$var$Canvas.prototype.fillRect=function(e,t,i,r){return this.context.fillRect(e,t,i,r),this},$22f7193504a1f089$var$Canvas.prototype.strokeRect=function(e,t,i,r){return this.context.strokeRect(e,t,i,r),this},$22f7193504a1f089$var$Canvas.prototype.clearRect=function(e,t,i,r){return this.context.clearRect(e,t,i,r),this},$22f7193504a1f089$var$Canvas.prototype.beginPath=function(){return this.context.beginPath(),this},$22f7193504a1f089$var$Canvas.prototype.moveTo=function(e,t){return this.context.moveTo(e,t),this},$22f7193504a1f089$var$Canvas.prototype.closePath=function(){return this.context.closePath(),this},$22f7193504a1f089$var$Canvas.prototype.lineTo=function(e,t){return this.context.lineTo(e,t),this},$22f7193504a1f089$var$Canvas.prototype.rect=function(e,t,i,r){return this.context.rect(e,t,i,r),this},$22f7193504a1f089$var$Canvas.prototype.fill=function(e=null){return e&&this.fillStyle(e),this.context.fill(),this},$22f7193504a1f089$var$Canvas.prototype.stroke=function(e=null){return e&&this.strokeStyle(e),this.context.stroke(),this},$22f7193504a1f089$var$Canvas.prototype.clip=function(e,t,i,r){return null!==this.gl&&(e*=this._globalScale,t*=this._globalScale,i*=this._globalScale,r*=this._globalScale,this.isFlipped?this.gl.scissor(this.width-t-r-1,this.height-e-i-1,r,i):this.gl.scissor(e,this.height-t-r-1,i,r)),this},$22f7193504a1f089$var$Canvas.prototype.quadraticCurveTo=function(e,t,i,r){return this.context.quadraticCurveTo(e,t,i,r),this},$22f7193504a1f089$var$Canvas.prototype.bezierCurveTo=function(e,t,i,r,n,a){return this.context.bezierCurveTo(e,t,i,r,n,a),this},$22f7193504a1f089$var$Canvas.prototype.arc=function(e,t,i,r,n,a){return this.context.arc(e,t,i,r,n,a),this},$22f7193504a1f089$var$Canvas.prototype.arcTo=function(e,t,i,r,n){return this.context.arcTo(e,t,i,r,n),this},$22f7193504a1f089$var$Canvas.prototype.fillText=function(e,t,i,r=1e3){return this.context.fillText(e,t,i,r),this},$22f7193504a1f089$var$Canvas.prototype.strokeText=function(e,t,i,r=1e3){return this.context.strokeText(e,t,i,r),this},$22f7193504a1f089$var$Canvas.prototype.measureText=function(e){return this.context.measureText(e).width},$22f7193504a1f089$var$Canvas.prototype.createImageData=function(e,t){return this.context.createImageData(e,t)},$22f7193504a1f089$var$Canvas.prototype.getImageData=function(e,t,i,r){return this.context.getImageData(e,t,i,r)},$22f7193504a1f089$var$Canvas.prototype.putImageData=function(e,t,i){return this.context.putImageData(e,t,i),this},$22f7193504a1f089$var$Canvas.prototype.drawImage=function(e,t=0,i=0,r=null,n=null,a=null,s=null,o=null,l=null){if(null===r)this.context.drawImage(e,int(t),int(i));else if(null===a)this.context.drawImage(e,int(t),int(i),int(r),int(n));else{let c=int(r),h=int(n);if(!c||!h)return this;let u=int(o),d=int(l);if(!u||!d)return this;this.context.drawImage(e,int(t),int(i),c,h,int(a),int(s),u,d)}return this},$22f7193504a1f089$var$Canvas.prototype.clear=function(e=null){return null!=this.gl?(this.gl.clear(this.gl.STENCIL_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT|this.gl.COLOR_BUFFER_BIT),this.glActiveTextureId=null,this):(e?this.globalCompositeOperation("source-over").globalAlpha(1).fillStyle(!0!==e?e:this.backgroundColor).fillRect(0,0,this._width,this._height):(this.elem.width=this.width,this.applyConfig()),this.updateTransform(),this)},$22f7193504a1f089$var$Canvas.prototype.start=function(){},$22f7193504a1f089$var$Canvas.prototype.end=function(){},$22f7193504a1f089$var$Canvas.prototype.flush=function(){let e=this.gl;null!==e&&(e.colorMask(!1,!1,!1,!0),e.clear(e.COLOR_BUFFER_BIT),e.colorMask(!0,!0,!0,!0))},$22f7193504a1f089$var$Canvas.prototype.blit=function(e,t,i,r=null){let n=this.gl;null!==n&&(r=r||this.glBlitProgram,this.setShaderProgram(r),n.disable(n.DEPTH_TEST),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,e),r.uniform1i("texture0",0),r.uniform4fv("v_resolution",this.v_resolution),r.uniform1f("f_time",$b91bcfe7d0e9e859$export$2e2bcd8739ae039.time),r.uniform1f("f_scale",this._globalScale),r.uniform1f("f_alpha",this._alpha),this.m_quad[0]=this.width,this.m_quad[4]=this.height,this.m_quad[6]=0,this.m_quad[7]=0,this.m_texture[0]=this.width/t,this.m_texture[4]=this.height/i,this.m_texture[6]=0,this.m_texture[7]=0,n.uniformMatrix3fv(r.getUniformLocation("m_quad"),!1,this.m_quad),n.uniformMatrix3fv(r.getUniformLocation("m_texture"),!1,this.m_texture),n.drawArrays(n.TRIANGLE_STRIP,0,4),this.setShaderProgram($6537756e185f4720$export$2e2bcd8739ae039.get("def")),n.enable(n.DEPTH_TEST))},$22f7193504a1f089$var$Canvas.prototype.reset=function(e=!1){return this.fillStyle("#000000").strokeStyle("#000000").lineCap("butt").lineJoin("miter").lineWidth("1").miterLimit("10").shadowColor("#000000").shadowOffsetX("0").shadowOffsetY("0").shadowBlur("0").globalAlpha("1.0").globalCompositeOperation("source-over"),e&&this.beginPath().closePath(),this},$22f7193504a1f089$var$Canvas.prototype.pushMatrix=function(){return this.matrixStack.push(this.matr),this.matr=this.matr.clone(),this},$22f7193504a1f089$var$Canvas.prototype.popMatrix=function(){return this.matr.free(),this.matr=this.matrixStack.pop(),this.updateTransform()},$22f7193504a1f089$var$Canvas.prototype.alpha=function(e){return this._alpha*=e,this.context&&null===this.gl&&(this.context.globalAlpha=this._alpha),this},$22f7193504a1f089$var$Canvas.prototype.pushAlpha=function(){return this.alphaStack.push(this.globalAlpha()),this},$22f7193504a1f089$var$Canvas.prototype.popAlpha=function(){return this.globalAlpha(this.alphaStack.pop()),this},$22f7193504a1f089$var$Canvas.prototype.setDepthFlag=function(e){let t=this.gl;null!==t&&(e?(t.enable(t.DEPTH_TEST),this._depthFlag=!0):(t.disable(t.DEPTH_TEST),this._depthFlag=!1))},$22f7193504a1f089$var$Canvas.prototype.getDepthFlag=function(){return this._depthFlag},$22f7193504a1f089$var$Canvas.prototype.pushDepthFlag=function(e=null){if(null!==e)return(e=!!e)!==this._depthFlag&&(this.depthFlagStack.push(this._depthFlag),this.setDepthFlag(e),!0);this.depthFlagStack.push(this._depthFlag)},$22f7193504a1f089$var$Canvas.prototype.popDepthFlag=function(){this.setDepthFlag(this.depthFlagStack.pop())},$22f7193504a1f089$var$Canvas.prototype.setShaderProgram=function(e){null!==this.gl&&($b91bcfe7d0e9e859$export$2e2bcd8739ae039.shaderProgram=e,$b91bcfe7d0e9e859$export$2e2bcd8739ae039.shaderProgram.activate())},$22f7193504a1f089$var$Canvas.prototype.getShaderProgram=function(){return $b91bcfe7d0e9e859$export$2e2bcd8739ae039.shaderProgram},$22f7193504a1f089$var$Canvas.prototype.pushShaderProgram=function(e=null){if(null!==e)return e!==$b91bcfe7d0e9e859$export$2e2bcd8739ae039.shaderProgram&&(this.shaderProgramStack.push($b91bcfe7d0e9e859$export$2e2bcd8739ae039.shaderProgram),this.setShaderProgram(e),!0);this.shaderProgramStack.push($b91bcfe7d0e9e859$export$2e2bcd8739ae039.shaderProgram)},$22f7193504a1f089$var$Canvas.prototype.popShaderProgram=function(){this.setShaderProgram(this.shaderProgramStack.pop())},$22f7193504a1f089$var$Canvas.prototype.loadIdentity=function(){return this.matr.identity(),this.updateTransform()},$22f7193504a1f089$var$Canvas.prototype.loadMatrix=function(e){return this.matr.set(e),this.updateTransform()},$22f7193504a1f089$var$Canvas.prototype.getMatrix=function(e=!1){return e?this.matr.clone():this.matr},$22f7193504a1f089$var$Canvas.prototype.appendMatrix=function(e){return this.matr.append(e),this.updateTransform()},$22f7193504a1f089$var$Canvas.prototype.scale=function(e,t,i=!1){return i?(this.context.scale(e,t),this):(this.matr.scale(e,t),this.updateTransform())},$22f7193504a1f089$var$Canvas.prototype.rotate=function(e,t=!1){return t?(this.context.rotate(e),this):(this.matr.rotate(e),this.updateTransform())},$22f7193504a1f089$var$Canvas.prototype.translate=function(e,t,i=!1){return i?(this.context.translate(e,t),this):(this.matr.translate(e,t),this.updateTransform())},$22f7193504a1f089$var$Canvas.prototype.ellipse=function(e,t,i,r){var n=i/2*.5522848,a=r/2*.5522848,s=e+i-1,o=t+r-1,l=e+i/2,c=t+r/2;return this.beginPath().moveTo(e,c),this.bezierCurveTo(e,c-a,l-n,t,l,t),this.bezierCurveTo(l+n,t,s,c-a,s,c),this.bezierCurveTo(s,c+a,l+n,o,l,o),this.bezierCurveTo(l-n,o,e,c+a,e,c),this.closePath(),this},$22f7193504a1f089$var$Canvas.prototype.circle=function(e,t,i,r){return this.beginPath(),this.arc(e,t,i,0,2*Math.PI),this.closePath(),r&&this.stroke(r),this},$22f7193504a1f089$var$Canvas.prototype.line=function(e,t,i,r,n){return this.beginPath(),this.moveTo(e,t),this.lineTo(i,r),this.closePath(),n&&this.stroke(n),this},$22f7193504a1f089$var$Canvas.prototype.enablePointerEvents=function(){if(this.pointerHandler)return this;this.pointerScale={sx:1,sy:1},this.pointerOffset={x:0,y:0};var e=this,t={action:"",buttons:0,lbuttons:0,x:0,y:0,containedBy:function(e,t,i,r){return this.x>=e&&this.x<=e+i-1&&this.y>=t&&this.y<=t+r-1}};return this.pointerHandlers=[],this.pointerHandler=function(i,r){var n=this.elem.getBoundingClientRect();t.action=i,t.buttons=r.buttons,t.x=t.rx=int(r.clientX-n.left),t.y=t.ry=int(r.clientY-n.top),t.x=(t.x-e.pointerOffset.x-0*e.pointerScale.sx)/e.pointerScale.sx,t.y=(t.y-e.pointerOffset.y-0*e.pointerScale.sy)/e.pointerScale.sy,t.dragging=!1,t.buttons&&!t.lbuttons&&(t.sx=t.x,t.sy=t.y,t.ldx=t.ldy=0),t.buttons&&t.lbuttons&&(t.dragging=!0,t.dx=t.x-t.sx,t.dy=t.y-t.sy,t.ddx=t.dx-t.ldx,t.ddy=t.dy-t.ldy,t.ldx=t.dx,t.ldy=t.dy),t.lbuttons=t.buttons;for(var a=0;a<this.pointerHandlers.length&&!1!==this.pointerHandlers[a][1](t,this.pointerHandlers[a][2]);a++);},this.elem.onmousedown=function(t){e.pointerHandler("DOWN",t)},this.elem.onmouseup=function(t){e.pointerHandler("UP",t)},this.elem.onmousemove=function(t){e.pointerHandler("MOVE",t)},this},$22f7193504a1f089$var$Canvas.prototype.setPointerScale=function(e,t){return this.pointerScale={sx:e,sy:t},this},$22f7193504a1f089$var$Canvas.prototype.setPointerOffset=function(e,t){return this.pointerOffset={x:e,y:t},this},$22f7193504a1f089$var$Canvas.prototype.addPointerHandler=function(e,t){return this.enablePointerEvents(),this.pointerHandlers.push([this.pointerHandlers.length+"_"+int(1e6*Math.random()),e,t]),this.pointerHandlers[this.pointerHandlers.length-1][0]},$22f7193504a1f089$var$Canvas.prototype.removePointerHandler=function(e){if(this.pointerHandlers)for(var t=0;t<this.pointerHandlers.length;t++)if(this.pointerHandlers[t][0]==e){this.pointerHandlers.splice(t,1);break}},$22f7193504a1f089$var$Canvas.renderImage=function(e,t,i,r){let n=new $22f7193504a1f089$var$Canvas({hidden:!0,width:e,height:t,antialias:$fde096e7347cb963$export$2e2bcd8739ae039.options.antialias});i(n);let a=n.toDataUrl(),s=new Image;s.onload=()=>{s.filter=$fde096e7347cb963$export$2e2bcd8739ae039.options.antialias?"LINEAR":"NEAREST",s.rscale=1,s.targetWidth=e,s.targetHeight=t,$fde096e7347cb963$export$2e2bcd8739ae039.renderer.prepareImage(s),r(s,a)},s.src=a,n.dispose()},$22f7193504a1f089$var$Canvas.renderImageMipmap=function(e,t,i,r,n){let a=new $22f7193504a1f089$var$Canvas({hidden:!0,width:t,height:i,antialias:$fde096e7347cb963$export$2e2bcd8739ae039.options.antialias});r(a);let s=a.toDataUrl(),o=new Image;o.onload=()=>{o.filter=$fde096e7347cb963$export$2e2bcd8739ae039.options.antialias?"LINEAR":"NEAREST",o.rscale=1,o.targetWidth=t,o.targetHeight=i,o.mipmap=!0,o.levels=e,$fde096e7347cb963$export$2e2bcd8739ae039.renderer.prepareImage(o),n(o,s)},o.src=s,a.dispose()};var $22f7193504a1f089$export$2e2bcd8739ae039=$22f7193504a1f089$var$Canvas;
//![import "./keycode"]
//![import "../utils/list"]
//![import "../utils/linkable"]
//![import "./timer"]
//![import "./canvas"]
//![import "./globals"]
//!namespace System
//!type Options =
//!/type
//!/namespace
//!class System
const $fde096e7347cb963$var$System={flags:{renderingEnabled:!1,renderingPaused:!1},defaultOptions:{background:"#000000",gl:!0,log:!1,overdraw:!1,antialias:!0,orientation:0,fps:144,minFps:15,vsync:!0,screenWidth:null,screenHeight:null,extraScaleFactor:1,maxScaleFactor:null,fullscreen:!1},screenWidth:0,screenHeight:0,orientation:0,offsX:0,offsY:0,devicePixelRatio:1,backingStoreRatio:1,canvasPixelRatio:1,canvasScaleFactor:1,scaleFactor:1,initialMatrix:null,renderer:null,displayBuffer2:null,displayBuffer3:null,tempDisplayBuffer:null,keyState:{time:0,shift:!1,ctrl:!1,alt:!1,keyCode:0},pointerState:{},updateQueue:null,drawQueue:null,timeScale:1,frameInterval:0,fixedFrameInterval:0,maxFrameInterval:0,frameDelta:0,frameTime:0,frameNumber:0,perf:{startTime:0,lastTime:0,numFrames:0,numSamples:0,updateTimeTotal:0,drawTimeTotal:0,extraTimeTotal:0,fps:0,averageFps:0,averageUpdateTime:0,averageDrawTime:0,averageExtraTime:0},init:function(e=null){let t=this,i={...this.defaultOptions,...e};this.options=i,!1!==this.options.preallocate&&(!0===this.options.preallocate?$3755e11d40ee463d$export$2e2bcd8739ae039.preallocate():$3755e11d40ee463d$export$2e2bcd8739ae039.preallocate(this.options.preallocate)),i.screenWidth&&i.screenHeight&&"default"==i.orientation&&(i.orientation=i.screenWidth>i.screenHeight?"landscape":"portrait"),this.orientation=i.orientation,this.updateQueue=$5ffbe5e8d10cd81c$export$2e2bcd8739ae039.Pool.alloc(),this.drawQueue=$5ffbe5e8d10cd81c$export$2e2bcd8739ae039.Pool.alloc(),this.frameInterval=1e3/i.fps,this.maxFrameInterval=1e3/i.minFps,$parcel$global.onresize=function(){t.onWindowResized()},this.frameTimer=new $aa13d5a33a29523b$export$2e2bcd8739ae039(i.vsync,this.frameInterval,(e=>this.onFrame(e))),this.renderer=new $22f7193504a1f089$export$2e2bcd8739ae039({gl:i.gl,elem:null,absolute:!0,hidden:!1,antialias:i.antialias,background:i.background}),this.displayBuffer2=new $22f7193504a1f089$export$2e2bcd8739ae039({gl:!1,elem:null,absolute:!0,hidden:!1,antialias:i.antialias,background:"none"}),this.displayBuffer2.elem.style.pointerEvents="none",this.displayBuffer3=new $22f7193504a1f089$export$2e2bcd8739ae039({gl:!1,elem:null,absolute:!0,hidden:!1,antialias:i.antialias,background:"none"}),this.displayBuffer3.elem.style.pointerEvents="none",this.tempDisplayBuffer=new $22f7193504a1f089$export$2e2bcd8739ae039({hidden:!0,antialias:i.antialias}).resize(640,480);let r=this.renderer.elem;this.devicePixelRatio=$parcel$global.devicePixelRatio||1,this.backingStoreRatio=!0===i.gl?1:this.renderer.context.webkitBackingStorePixelRatio||this.renderer.context.mozBackingStorePixelRatio||this.renderer.context.msBackingStorePixelRatio||this.renderer.context.oBackingStorePixelRatio||this.renderer.context.backingStorePixelRatio||1,this.canvasPixelRatio=this.devicePixelRatio/this.backingStoreRatio,$fde096e7347cb963$var$System.onWindowResized(!0),$parcel$global.onkeydown=function(e){if(e.target===$parcel$global.document.body){if(t.keyState[e.keyCode])return!1;switch(t.keyState[e.keyCode]=!0,t.keyState.keyCode=e.keyCode,t.keyState.startTime=hrnow(),e.keyCode){case 16:t.keyState.shift=!0;break;case 17:t.keyState.ctrl=!0;break;case 18:t.keyState.alt=!0}return t.keyState.ctrl&&e.keyCode==$6fd473ea64d5e91a$export$2e2bcd8739ae039.TAB?(t.keyState[e.keyCode]=!1,!0):!1!==t.onKeyboardEvent(t.KeyboardEventType.KEY_DOWN,e.keyCode,t.keyState)&&void 0}},$parcel$global.onkeyup=function(e){if(e.target===$parcel$global.document.body){if(!t.keyState[e.keyCode])return!1;switch(t.keyState[e.keyCode]=!1,t.keyState.endTime=hrnow(),t.keyState.keyCode=e.keyCode,e.keyCode){case 16:t.keyState.shift=!1;break;case 17:t.keyState.ctrl=!1;break;case 18:t.keyState.alt=!1}return!1!==t.onKeyboardEvent(t.KeyboardEventType.KEY_UP,e.keyCode,t.keyState)&&void 0}};const n=function(e,t){return $fde096e7347cb963$var$System.reverseRender?int($fde096e7347cb963$var$System.screenWidth-1-(t-$fde096e7347cb963$var$System.offsY)/$fde096e7347cb963$var$System.canvasScaleFactor):int((e-$fde096e7347cb963$var$System.offsX)/$fde096e7347cb963$var$System.canvasScaleFactor)},a=function(e,t){return $fde096e7347cb963$var$System.reverseRender?int((e-$fde096e7347cb963$var$System.offsX)/$fde096e7347cb963$var$System.canvasScaleFactor):int((t-$fde096e7347cb963$var$System.offsY)/$fde096e7347cb963$var$System.canvasScaleFactor)};"ontouchstart"in $parcel$global?(r.ontouchstart=function(e){e.preventDefault();let t=e.changedTouches;for(let e=0;e<t.length;e++){$fde096e7347cb963$var$System.pointerState[t[e].identifier]||($fde096e7347cb963$var$System.pointerState[t[e].identifier]={id:t[e].identifier,isActive:!1,isDragging:!1,sx:0,sy:0,x:0,y:0,dx:0,dy:0,button:0,wheelDelta:0,wheelAccum:0});let i=$fde096e7347cb963$var$System.pointerState[t[e].identifier];i.isActive=!0,i.isDragging=!1,i.button=1,i.startTime=hrnow(),i.x=i.sx=n(t[e].clientX,t[e].clientY),i.y=i.sy=a(t[e].clientX,t[e].clientY),$fde096e7347cb963$var$System.onPointerEvent($fde096e7347cb963$var$System.PointerEventType.POINTER_DOWN,i,$fde096e7347cb963$var$System.pointerState)}return!1},r.ontouchend=function(e){e.preventDefault();let t=e.changedTouches;for(let e=0;e<t.length;e++){if(!$fde096e7347cb963$var$System.pointerState[t[e].identifier])continue;let i=$fde096e7347cb963$var$System.pointerState[t[e].identifier];i.endTime=hrnow(),i.deltaTime=i.endTime-i.startTime,i.x=n(t[e].clientX,t[e].clientY),i.y=a(t[e].clientX,t[e].clientY),i.isDragging&&$fde096e7347cb963$var$System.onPointerEvent($fde096e7347cb963$var$System.PointerEventType.POINTER_DRAG_STOP,i,$fde096e7347cb963$var$System.pointerState),$fde096e7347cb963$var$System.onPointerEvent($fde096e7347cb963$var$System.PointerEventType.POINTER_UP,i,$fde096e7347cb963$var$System.pointerState),i.isActive=!1,i.isDragging=!1,i.button=0}return!1},r.ontouchcancel=function(e){e.preventDefault();let t=e.changedTouches;for(let e=0;e<t.length;e++){if(!$fde096e7347cb963$var$System.pointerState[t[e].identifier])continue;let i=$fde096e7347cb963$var$System.pointerState[t[e].identifier];i.x=n(t[e].clientX,t[e].clientY),i.y=a(t[e].clientX,t[e].clientY),$fde096e7347cb963$var$System.onPointerEvent(i.isDragging?$fde096e7347cb963$var$System.PointerEventType.POINTER_DRAG_STOP:$fde096e7347cb963$var$System.PointerEventType.POINTER_UP,i,$fde096e7347cb963$var$System.pointerState),i.isActive=!1,i.isDragging=!1,i.button=0}return!1},r.ontouchmove=function(e){e.preventDefault();let t=e.changedTouches;for(let e=0;e<t.length;e++){if(!$fde096e7347cb963$var$System.pointerState[t[e].identifier])continue;let i=$fde096e7347cb963$var$System.pointerState[t[e].identifier];i.isActive&&!i.isDragging&&($fde096e7347cb963$var$System.onPointerEvent($fde096e7347cb963$var$System.PointerEventType.POINTER_DRAG_START,i,$fde096e7347cb963$var$System.pointerState),i.isDragging=!0),i.x=n(t[e].clientX,t[e].clientY),i.y=a(t[e].clientX,t[e].clientY),i.dx=i.x-i.sx,i.dy=i.y-i.sy,$fde096e7347cb963$var$System.onPointerEvent(i.isDragging?$fde096e7347cb963$var$System.PointerEventType.POINTER_DRAG_MOVE:$fde096e7347cb963$var$System.PointerEventType.POINTER_MOVE,i,$fde096e7347cb963$var$System.pointerState)}return!1}):(r.oncontextmenu=function(e){return e.preventDefault(),!1},r.onwheel=function(e){e.preventDefault(),$fde096e7347cb963$var$System.pointerState[0]||($fde096e7347cb963$var$System.pointerState[0]={id:0,isActive:!1,isDragging:!1,sx:0,sy:0,x:0,y:0,dx:0,dy:0,button:0,wheelDelta:0,wheelAccum:0});let t=$fde096e7347cb963$var$System.pointerState[0];return t.x=n(e.clientX,e.clientY),t.y=a(e.clientX,e.clientY),t.wheelDelta=e.deltaY,t.wheelAccum+=e.deltaY,$fde096e7347cb963$var$System.onPointerEvent($fde096e7347cb963$var$System.PointerEventType.POINTER_WHEEL,t,$fde096e7347cb963$var$System.pointerState),!1},r.onmousedown=function(e){e.preventDefault(),$fde096e7347cb963$var$System.pointerState[0]||($fde096e7347cb963$var$System.pointerState[0]={id:0,isActive:!1,isDragging:!1,sx:0,sy:0,x:0,y:0,dx:0,dy:0,button:0,wheelDelta:0,wheelAccum:0});let t=$fde096e7347cb963$var$System.pointerState[0];return t.isActive=!0,t.isDragging=!1,t.button=e.which,t.x=t.sx=n(e.clientX,e.clientY),t.y=t.sy=a(e.clientX,e.clientY),$fde096e7347cb963$var$System.onPointerEvent($fde096e7347cb963$var$System.PointerEventType.POINTER_DOWN,t,$fde096e7347cb963$var$System.pointerState),!1},r.onmouseup=function(e){if(e.preventDefault(),!$fde096e7347cb963$var$System.pointerState[0])return!1;let t=$fde096e7347cb963$var$System.pointerState[0];t.x=n(e.clientX,e.clientY),t.y=a(e.clientX,e.clientY),t.isDragging&&$fde096e7347cb963$var$System.onPointerEvent($fde096e7347cb963$var$System.PointerEventType.POINTER_DRAG_STOP,t,$fde096e7347cb963$var$System.pointerState),$fde096e7347cb963$var$System.onPointerEvent($fde096e7347cb963$var$System.PointerEventType.POINTER_UP,t,$fde096e7347cb963$var$System.pointerState),t.isActive=!1,t.isDragging=!1,t.button=0},r.onmousemove=function(e){if(e.preventDefault(),!$fde096e7347cb963$var$System.pointerState[0])return!1;let t=$fde096e7347cb963$var$System.pointerState[0];return t.isActive&&!t.isDragging&&($fde096e7347cb963$var$System.onPointerEvent($fde096e7347cb963$var$System.PointerEventType.POINTER_DRAG_START,t,$fde096e7347cb963$var$System.pointerState),t.isDragging=!0),t.x=n(e.clientX,e.clientY),t.y=a(e.clientX,e.clientY),t.dx=t.x-t.sx,t.dy=t.y-t.sy,$fde096e7347cb963$var$System.onPointerEvent(t.isDragging?$fde096e7347cb963$var$System.PointerEventType.POINTER_DRAG_MOVE:$fde096e7347cb963$var$System.PointerEventType.POINTER_MOVE,t,$fde096e7347cb963$var$System.pointerState),!1}),!0===i.log&&$e2086caaef68d463$export$2e2bcd8739ae039.enable()},time:function(){return this.frameTime},start:function(){this.onWindowResized(),this.flags.renderingPaused=!1,this.frameTimer.start()},stop:function(){this.flags.renderingPaused=!0,this.frameTimer.stop()},pause:function(){this.flags.renderingPaused=!0},resume:function(){this.flags.renderingPaused=!1,this.resetPerf()},onFrame:function(e){let t,i=hrnow();e>this.maxFrameInterval&&(e=this.maxFrameInterval),0!==this.fixedFrameInterval&&(e=this.fixedFrameInterval),this.flags.renderingEnabled&&!this.flags.renderingPaused?(e*=this.timeScale,this.frameDelta=e/1e3,this.frameTime+=this.frameDelta,$b91bcfe7d0e9e859$export$2e2bcd8739ae039.time=this.frameTime,this.frameNumber++,t=hrnow(),this.update(this.frameDelta),this.perf.updateTimeTotal+=hrnow()-t,t=hrnow(),this.draw(),this.perf.drawTimeTotal+=hrnow()-t,this.perf.lastTime=i,this.perf.numFrames++,(e=this.perf.lastTime-this.perf.startTime)>1e3&&(this.perf.fps=int(1e3*this.perf.numFrames/e),this.perf.averageFps=int((this.perf.averageFps*this.perf.numSamples+this.perf.fps)/(this.perf.numSamples+1)),this.perf.averageUpdateTime=int((this.perf.averageUpdateTime*this.perf.numSamples+1e3*this.perf.updateTimeTotal/this.perf.numFrames)/(this.perf.numSamples+1)),this.perf.averageDrawTime=int((this.perf.averageDrawTime*this.perf.numSamples+1e3*this.perf.drawTimeTotal/this.perf.numFrames)/(this.perf.numSamples+1)),this.perf.averageExtraTime=int((this.perf.averageExtraTime*this.perf.numSamples+1e3*this.perf.extraTimeTotal/this.perf.numFrames)/(this.perf.numSamples+1)),this.perf.numSamples++,this.perf.startTime=i,this.perf.lastTime=i,this.perf.numFrames=0,this.perf.updateTimeTotal=0,this.perf.drawTimeTotal=0,this.perf.extraTimeTotal=0)):this.draw()},onWindowResized:function(e=!1){if("document"in $parcel$global)this.options.fullscreen?(this._screenWidth=int($parcel$global.screen.width),this._screenHeight=int($parcel$global.screen.height)):(this._screenWidth=$parcel$global.innerWidth,this._screenHeight=$parcel$global.innerHeight);else if(this._screenWidth=this.options.screenWidth,this._screenHeight=this.options.screenHeight,null==this.options.screenWidth&&null==this.options.screenHeight)throw new Error("At least one screen dimension must be specified in headless mode.");this._screenWidth<this._screenHeight&&"landscape"==this.orientation||this._screenWidth>this._screenHeight&&"portrait"==this.orientation?(this.screenWidth=this._screenHeight,this.screenHeight=this._screenWidth,this.reverseRender=!0):(this.screenWidth=this._screenWidth,this.screenHeight=this._screenHeight,this.reverseRender=!1);let t=this.options.screenWidth,i=this.options.screenHeight;null!==t&&null!==i||(null===t&&null===i?(t=this.screenWidth,i=this.screenHeight):null===t?t=int(.5+this.screenWidth*(this.options.screenHeight/this.screenHeight)):null===i&&(i=int(.5+this.screenHeight*(this.options.screenWidth/this.screenWidth))));let r=t,n=i;"automatic"===this.orientation&&r&&n&&(r>n&&this.screenWidth<this.screenHeight||r<n&&this.screenWidth>this.screenHeight)&&(r=n,n=t),this.canvasScaleFactor=1,r&&n?this.canvasScaleFactor=Math.min(this.screenWidth/r,this.screenHeight/n):r?this.canvasScaleFactor=this.screenWidth/r:n&&(this.canvasScaleFactor=this.screenHeight/n);let a=this.screenWidth,s=this.screenHeight;if(r&&(this.screenWidth=r),n&&(this.screenHeight=n),this.offsX=int(.5*(a-this.screenWidth*this.canvasScaleFactor)),this.offsY=int(.5*(s-this.screenHeight*this.canvasScaleFactor)),this.reverseRender){let e=this.offsX;this.offsX=this.offsY,this.offsY=e}this.scaleFactor=this.canvasScaleFactor*this.canvasPixelRatio,this.scaleFactor=int(.7+this.scaleFactor),this.options.maxScaleFactor>0&&this.scaleFactor>this.options.maxScaleFactor&&(this.scaleFactor=this.options.maxScaleFactor),this.flags.renderingEnabled=!1,"document"in $parcel$global&&($parcel$global.document.body.style.backgroundColor=this.renderer.backgroundColor),this.reverseRender?(this.renderer.resize(this.screenHeight*this.scaleFactor,this.screenWidth*this.scaleFactor),this.renderer.elem.style.width=int(this.screenHeight*this.canvasScaleFactor+.5)+"px",this.renderer.elem.style.height=int(this.screenWidth*this.canvasScaleFactor+.5)+"px",this.displayBuffer2.resize(this.screenHeight*this.scaleFactor,this.screenWidth*this.scaleFactor),this.displayBuffer2.elem.style.width=int(this.screenHeight*this.canvasScaleFactor+.5)+"px",this.displayBuffer2.elem.style.height=int(this.screenWidth*this.canvasScaleFactor+.5)+"px",this.displayBuffer3.resize(s,a),this.displayBuffer3.elem.style.width=s+"px",this.displayBuffer3.elem.style.height=a+"px"):(this.renderer.resize(this.screenWidth*this.scaleFactor,this.screenHeight*this.scaleFactor),this.renderer.elem.style.width=int(this.screenWidth*this.canvasScaleFactor+.5)+"px",this.renderer.elem.style.height=int(this.screenHeight*this.canvasScaleFactor+.5)+"px",this.displayBuffer2.resize(this.screenWidth*this.scaleFactor,this.screenHeight*this.scaleFactor),this.displayBuffer2.elem.style.width=int(this.screenWidth*this.canvasScaleFactor+.5)+"px",this.displayBuffer2.elem.style.height=int(this.screenHeight*this.canvasScaleFactor+.5)+"px",this.displayBuffer3.resize(a,s),this.displayBuffer3.elem.style.width=a+"px",this.displayBuffer3.elem.style.height=s+"px"),this.renderer.elem.style.marginLeft=this.offsX+"px",this.renderer.elem.style.marginTop=this.offsY+"px",this.displayBuffer2.elem.style.marginLeft=this.offsX+"px",this.displayBuffer2.elem.style.marginTop=this.offsY+"px",this.renderer.loadIdentity(),this.displayBuffer2.loadIdentity(),this.displayBuffer3.loadIdentity(),1!=this.scaleFactor&&(this.renderer.globalScale(this.scaleFactor),this.displayBuffer2.globalScale(this.scaleFactor)),this.reverseRender?(this.renderer.rotate(Math.PI/2),this.renderer.translate(-this.screenWidth,0),this.renderer.flipped(!0),this.displayBuffer2.rotate(Math.PI/2),this.displayBuffer2.translate(-this.screenWidth,0),this.displayBuffer2.flipped(!0),this.displayBuffer3.rotate(Math.PI/2),this.displayBuffer3.translate(-a,0),this.displayBuffer3.flipped(!0)):(this.renderer.flipped(!1),this.displayBuffer2.flipped(!1),this.displayBuffer3.flipped(!1)),this.scaleFactor*=this.options.extraScaleFactor,this.options.maxScaleFactor>0&&this.scaleFactor>this.options.maxScaleFactor&&(this.scaleFactor=this.options.maxScaleFactor),this.integerScaleFactor=int(this.scaleFactor+.5),this.resetPerf(),this.initialMatrix&&this.initialMatrix.free(),this.initialMatrix=this.renderer.getMatrix(!0),1!=e&&(this.flags.renderingEnabled=!0,this.onCanvasResized(this.screenWidth,this.screenHeight))},onCanvasResized:function(e,t){},resetPerf:function(){this.perf.startTime=hrnow(),this.perf.lastTime=hrnow(),this.perf.numFrames=0,this.perf.updateTimeTotal=0,this.perf.drawTimeTotal=0,this.perf.extraTimeTotal=0,this.perf.numSamples=0,this.perf.fps=0,this.perf.averageFps=0,this.perf.averageUpdateTime=0,this.perf.averageDrawTime=0,this.perf.averageExtraTime=0},updateQueueAdd:function(e){return this.updateQueue.push(e),this.updateQueue.bottom},updateQueueRemove:function(e){this.updateQueue.remove($284173a7f016deff$export$2e2bcd8739ae039.isInstance(e)?e:this.updateQueue.sgetNode(e))},drawQueueAdd:function(e){return this.drawQueue.push(e),this.drawQueue.bottom},drawQueueRemove:function(e){this.drawQueue.remove($284173a7f016deff$export$2e2bcd8739ae039.isInstance(e)?e:this.drawQueue.sgetNode(e))},queueAdd:function(e){this.updateQueue.push(e),this.drawQueue.push(e)},queueRemove:function(e){this.updateQueue.remove(this.updateQueue.sgetNode(e)),this.drawQueue.remove(this.drawQueue.sgetNode(e))},update:function(e){try{let t;for(let i=this.updateQueue.top;i;i=t)t=i.next,!1===i.value.update(e)&&this.updateQueueRemove(i)}catch(e){throw $fde096e7347cb963$var$System.stop(),e}},draw:function(){null!==this.renderer.gl&&this.renderer.start(),this.options.overdraw||(this.renderer.clear(),this.displayBuffer2.clear(),this.displayBuffer3.clear());try{let e;for(let t=this.drawQueue.top;t;t=e)e=t.next,t.value.draw(this.renderer);null!==this.renderer.gl&&(this.renderer.flush(),this.renderer.end())}catch(e){throw $fde096e7347cb963$var$System.stop(),e}},interpolate:function(e,t,i,r,n){let a={},s={},o=0;for(let t in e)a[t]=0,s[t]=e[t],o++;let l={update:function(l){for(let n in a){if(a[n]==i[n])continue;a[n]+=l,a[n]>=i[n]&&(a[n]=i[n],o--);let c=r[n](a[n]/i[n]);s[n]=(1-c)*e[n]+c*t[n]}if(n(s,0==o),0==o)return!1}};$fde096e7347cb963$var$System.updateQueueAdd(l),l.update(0)},onKeyboardEvent:function(e,t,i){},onPointerEvent:function(e,t,i){},
//!/class
//!namespace System
//!enum KeyboardEventType
KeyboardEventType:{KEY_DOWN:1,KEY_UP:2},
//!/enum
//!enum PointerEventType
PointerEventType:{POINTER_DOWN:16,POINTER_UP:17,POINTER_MOVE:18,POINTER_DRAG_START:19,POINTER_DRAG_MOVE:20,POINTER_DRAG_STOP:21,POINTER_WHEEL:22}};var//!/enum
//!/namespace
$fde096e7347cb963$export$2e2bcd8739ae039=$fde096e7347cb963$var$System;
//![import "./system"]
//![import "../utils/list"]
//!namespace Log
const $e2086caaef68d463$var$Log={enabled:!1,paused:!1,maxsize:30,data:$5ffbe5e8d10cd81c$export$2e2bcd8739ae039.Pool.alloc(),count:0,debugEcho:!1,color:"#fff",background:"#cf266a",vars:{},write:function(e){for(this.data.push(e),this.count++;this.data.length>this.maxsize;)this.data.shift();this.debugEcho&&console.debug(this.count+": "+e)},clear:function(){this.data.reset(),this.count=0},enable:function(e=0,t=0,i=9.5,r=!0,n=!0){if(this.enabled)return;this.enabled=!0,r||(t-=16);let a=t;$fde096e7347cb963$export$2e2bcd8739ae039.drawQueueAdd({draw:function(){if($e2086caaef68d463$var$Log.paused)return;let s=hrnow();const o=$fde096e7347cb963$export$2e2bcd8739ae039.displayBuffer3;o.font("bold "+i+"pt Monospace"),o.textBaseline("top");let l="";t=a,!1!==r&&0!=$fde096e7347cb963$export$2e2bcd8739ae039.perf.fps&&(l="fps: "+$fde096e7347cb963$export$2e2bcd8739ae039.perf.fps+"/"+$fde096e7347cb963$export$2e2bcd8739ae039.perf.averageFps+", update: "+$fde096e7347cb963$export$2e2bcd8739ae039.perf.averageUpdateTime+", draw: "+$fde096e7347cb963$export$2e2bcd8739ae039.perf.averageDrawTime+", extra: "+$fde096e7347cb963$export$2e2bcd8739ae039.perf.averageExtraTime,$e2086caaef68d463$var$Log.background&&(o.fillStyle($e2086caaef68d463$var$Log.background),o.fillRect(e-3,t-1,o.measureText(l)+6,i+5)),o.fillStyle($e2086caaef68d463$var$Log.color),o.fillText(l,e,t)),l="";for(let e in $e2086caaef68d463$var$Log.vars)l+=e+": "+$e2086caaef68d463$var$Log.vars[e]+"  ";""!==l&&(t+=24,$e2086caaef68d463$var$Log.background&&(o.fillStyle($e2086caaef68d463$var$Log.background),o.fillRect(e-3,t-1,o.measureText(l)+6,i+5)),o.fillStyle($e2086caaef68d463$var$Log.color),o.fillText(l,e,t));let c=0;for(let r=$e2086caaef68d463$var$Log.data.top;r;r=r.next,c++)l=(n?"#"+($e2086caaef68d463$var$Log.count-$e2086caaef68d463$var$Log.data.length+c+1)+": ":"> ")+r.value,$e2086caaef68d463$var$Log.background&&(o.fillStyle($e2086caaef68d463$var$Log.background),o.fillRect(e-3,t-1+7+(i+5)*(c+1)-1,o.measureText(l)+6,i+5)),o.fillStyle($e2086caaef68d463$var$Log.color),o.fillText(l,e,t-1+7+(i+5)*(c+1));s=hrnow()-s,$fde096e7347cb963$export$2e2bcd8739ae039.perf.drawTimeTotal-=s,$fde096e7347cb963$export$2e2bcd8739ae039.perf.extraTimeTotal+=s}})},pause:function(){this.paused=!0},resume:function(){this.paused=!1}};var $e2086caaef68d463$export$2e2bcd8739ae039=$e2086caaef68d463$var$Log;
//![import "./random"]
//![import "./log"]
//![import "../flow/viewport"]
//!namespace globals
const $b91bcfe7d0e9e859$var$globals={gl:null,shaderProgram:null,time:0,viewport:null,debugBounds:!1,debugMasks:!1,rand0:new $09cb358c2aa81294$export$2e2bcd8739ae039,rand1:new $09cb358c2aa81294$export$2e2bcd8739ae039,rand2:new $09cb358c2aa81294$export$2e2bcd8739ae039};var $b91bcfe7d0e9e859$export$2e2bcd8739ae039=$b91bcfe7d0e9e859$var$globals;
//!/namespace
//!declare global
$parcel$global.px=function(e){return e*C.SCALE},$parcel$global.dispose=function(e){if(null!==e&&"object"==typeof e)return"free"in e?e.free():"dispose"in e?e.dispose():void("__dtor"in e&&e.__dtor())},"AudioContext"in $parcel$global?($parcel$global.audioContext=new AudioContext({latencyHint:"interactive",sampleRate:44100}),$e2086caaef68d463$export$2e2bcd8739ae039.write("AudioContext: baseLatency="+~~(1e3*$parcel$global.audioContext.baseLatency)+" ms")):$parcel$global.audioContext=null,$parcel$global.fetchd=function(e,t){return new Promise(((i,r)=>{t||(t={}),"responseType"in t||(t.responseType="arraybuffer");var n=new XMLHttpRequest;n.open("GET",e,!0);for(let e in t)n[e]=t[e];n.onload=function(){i(n.response)},n.onerror=function(){r("Unable to fetch specified resource.")},n.send()}))},$parcel$global.fetchAudioBuffer=function(e){return new Promise(((t,i)=>{$parcel$global.audioContext?fetchd(e).then((e=>audioContext.decodeAudioData(e))).then((e=>t(e))).catch((e=>i(e))):i("AudioContext is not available.")}))},$parcel$global.int=function(e){return e>>0},$parcel$global.bool=function(e){return!0===e||!1===e?e:"true"==e||"false"!=e&&!!e},$parcel$global.float=function(e){return parseFloat(e)},$parcel$global.float2=function(e){return int(100*e)/100},$parcel$global.float3=function(e){return int(1e3*e)/1e3},$parcel$global.float4=function(e){return int(1e4*e)/1e4},$parcel$global.rad=function(e){return e*Math.PI/180},$parcel$global.deg=function(e){return e/Math.PI*180},$parcel$global.rand=function(){return $b91bcfe7d0e9e859$var$globals.rand0.nextInt16()},$parcel$global.randf=function(){return $b91bcfe7d0e9e859$var$globals.rand0.nextFloat()},$parcel$global.randrf=function(e,t){let i=$b91bcfe7d0e9e859$var$globals.rand0.nextFloat();return i*t+(1-i)*e},$parcel$global.randr=function(e,t){let i=$b91bcfe7d0e9e859$var$globals.rand0.nextFloat();return Math.round(i*t+(1-i)*e)},$parcel$global.randtf=function(e,t,i){for(var r=[],n=0;n<i;n++)r.push(randrf(e,t));return r},$parcel$global.hrnow=function(){return performance.now()},$parcel$global.randvar=function(e,t){return function(){return randr(e,t)}},$parcel$global.randitem=function(e,t=null,i=null){return null===t&&(t=0),null===i&&(i=e.length-1),function(){return e[randr(t,i)]}},$parcel$global.getLineSegmentIntersection=function(e,t,i,r,n,a,s,o){if(e==n&&t==a&&i==s&&r==o)return 0;var l=r-t,c=i-e,h=o-a,u=s-n;if(0==l&&0==h){if(t!=a)return 2;var d=Math.max(e,n);return d>Math.min(i,s)?2:(d-e)/c}if(0==c&&0==u){if(e!=n)return 2;var f=Math.max(t,a);return f>Math.min(r,o)?2:(f-t)/l}if(0==c)return 0>(p=(h*(e-n)+u*(a-t))/(u*l))||p>1||0>($=(e-n)/u)||$>1?2:p;var $,p,b=h*c-u*l;return 0==b||0>($=(l*(n-e)+c*(t-a))/b)||$>1||0>(p=(u*$+n-e)/c)||p>1?2:p},$parcel$global.lineSegmentIntersects=function(e,t,i,r,n,a,s,o){let l=getLineSegmentIntersection(e,t,i,r,n,a,s,o);return l>=0&&l<=1},$parcel$global.rotatePoint=function(e,t,i){return{x:t*Math.cos(e)+i*Math.sin(e),y:i*Math.cos(e)-t*Math.sin(e)}},$parcel$global.stepValue=function(e,t,i,r){return Math.round(r*(e-t)/(i-t))/r*(i-t)+t},$parcel$global.alignValue=function(e,t){return Math.round(e/t)*t},$parcel$global.FIXED_POINT_BITS=8,$parcel$global.upscale=function(e){return e*(1<<FIXED_POINT_BITS)>>0},$parcel$global.downscale=function(e){return e>>FIXED_POINT_BITS},$parcel$global.downscalef=function(e){return e/(1<<FIXED_POINT_BITS)},$parcel$global.falign=function(e){return downscalef(upscale(e))},$parcel$global.absmin=function(e,t){return Math.abs(e)<Math.abs(t)?e:t},$parcel$global.absmax=function(e,t){return Math.abs(e)>Math.abs(t)?e:t},$parcel$global.repeat=function(e,t){let i="";for(;t-- >0;)i+=e;return i},$parcel$global.lpad=function(e,t,i="0"){return e=e.toString(),repeat(i.charAt(0),t-e.length)+e},$parcel$global.rpad=function(e,t,i="0"){return(e=e.toString())+repeat(i.charAt(0),t-e.length)},$parcel$global.norm=function(e){return.5*(e+1)},$parcel$global.snorm=function(e){return 2*e-1},$parcel$global.clamp=function(e,t=0,i=1){return e<t?t:e>i?i:e},$parcel$global.map=function(e,t,i,r,n){return(e-t)*(n-r)/(i-t)+r};
//!class Perf
const $f19bc58388a66526$var$Perf=function(e,t=null){this.data=[],this.accumSize=e,this.expectedValue=t,this.lastFeed=0,this.lastUpdate=0,this.stdSum=0,this.stdCount=0};var $f19bc58388a66526$export$2e2bcd8739ae039=$f19bc58388a66526$var$Perf;$f19bc58388a66526$var$Perf.prototype.begin=function(){this.startTime=performance.now()},$f19bc58388a66526$var$Perf.prototype.end=function(){this.feed(performance.now()-this.startTime)},$f19bc58388a66526$var$Perf.prototype.feed=function(e){this.data.push(e),this.lastFeed++,this.data.length==this.accumSize&&(this.report(),this.data=[])},$f19bc58388a66526$var$Perf.prototype.update=function(){let e=null,t=null,i=0,r=0;for(let r=0;r<this.data.length;r++)e=null===e?this.data[r]:Math.min(e,this.data[r]),t=null===t?this.data[r]:Math.max(t,this.data[r]),i+=this.data[r];i/=this.data.length;let n=null!==this.expectedValue?this.expectedValue:i;for(let e=0;e<this.data.length;e++)r+=Math.pow(this.data[e]-n,2);return r=Math.sqrt(r/this.data.length),this.stdSum+=r,this.stdCount++,this.min=e,this.max=t,this.avg=i,this.std=r,this.lastUpdate=this.lastFeed,this},$f19bc58388a66526$var$Perf.prototype.report=function(e=255){let t="";return this.lastUpdate!=this.lastFeed&&this.update(),e&$f19bc58388a66526$var$Perf.Flags.SAMPLES&&(t+="n: "+this.stdCount),e&$f19bc58388a66526$var$Perf.Flags.MIN&&(t+=(""!=t?", ":"")+"min: "+this.min),e&$f19bc58388a66526$var$Perf.Flags.MAX&&(t+=(""!=t?", ":"")+"max: "+this.max),e&$f19bc58388a66526$var$Perf.Flags.AVG&&(t+=(""!=t?", ":"")+"avg: "+this.avg.toFixed(2)),e&$f19bc58388a66526$var$Perf.Flags.EXPECTED&&(t+=(""!=t?", ":"")+(void 0!==this.expectedValue?"e: "+this.expectedValue:"")),e&$f19bc58388a66526$var$Perf.Flags.STDDEV&&(t+=(""!=t?", ":"")+"stddev: "+this.std.toFixed(2)),e&$f19bc58388a66526$var$Perf.Flags.AVG_STDDEV&&(t+=(""!=t?", ":"")+"avg_stddev: "+(this.stdSum/this.stdCount).toFixed(2)),t},
//!/class
//!namespace Perf
//!enum Flags
$f19bc58388a66526$var$Perf.Flags={SAMPLES:1,
//!SAMPLES
MIN:2,
//!MIN
MAX:4,
//!MAX
AVG:8,
//!AVG
EXPECTED:16,
//!EXPECTED
STDDEV:32,
//!STDDEV
AVG_STDDEV:64,
//!AVG_STDDEV
ALL:255};//!/enum
var $lTI0F=parcelRequire("lTI0F");
//![import "./globals"]
//![import "./system"]
const $4ef6348d85518192$var$Framebuffer=$lTI0F.Class.extend({framebufferId:null,attachments:null,attachmentTypes:null,width:0,height:0,drawBuffers:null,drawBufferIds:null,__ctor:function(e=null,t=null){null!==$b91bcfe7d0e9e859$export$2e2bcd8739ae039.gl&&(null===$4ef6348d85518192$var$attachmentPointIds[0]&&$4ef6348d85518192$var$initAttachmentPointIds($b91bcfe7d0e9e859$export$2e2bcd8739ae039.gl),this.framebufferId=$b91bcfe7d0e9e859$export$2e2bcd8739ae039.gl.createFramebuffer(),this.drawBuffers=[],this.drawBufferIds=[],this.width=e||$fde096e7347cb963$export$2e2bcd8739ae039.renderer.width,this.height=t||$fde096e7347cb963$export$2e2bcd8739ae039.renderer.height,this.attachments=new Array($4ef6348d85518192$var$Framebuffer.MAX_ATTACHMENT_POINTS).fill(null),this.attachmentTypes=new Array($4ef6348d85518192$var$Framebuffer.MAX_ATTACHMENT_POINTS).fill(null))},__dtor:function(){let e=$b91bcfe7d0e9e859$export$2e2bcd8739ae039.gl;if(null!==e){for(let t=0;t<this.attachments.length;t++)null!==this.attachments[t]&&(this.attachmentTypes[t]===$4ef6348d85518192$var$Framebuffer.TEXTURE?e.deleteTexture(this.attachments[t]):e.deleteRenderbuffer(this.attachments[t]));e.deleteFramebuffer(this.frameBufferId)}},attach:function(e,t,i=null){let r=$b91bcfe7d0e9e859$export$2e2bcd8739ae039.gl;if(null===r)return;null===i&&(i=e<$4ef6348d85518192$var$Framebuffer.DEPTH?$4ef6348d85518192$var$Framebuffer.TEXTURE:$4ef6348d85518192$var$Framebuffer.RENDERBUFFER),this.attachments[e]=t,this.attachmentTypes[e]=i,e<$4ef6348d85518192$var$Framebuffer.DEPTH&&-1===this.drawBuffers.indexOf(e)&&(this.drawBuffers.push(e),this.drawBufferIds.push($4ef6348d85518192$var$attachmentPointIds[e]));let n=r.getParameter(r.FRAMEBUFFER_BINDING);switch(r.bindFramebuffer(r.FRAMEBUFFER,this.framebufferId),i){case $4ef6348d85518192$var$Framebuffer.TEXTURE:r.framebufferTexture2D(r.FRAMEBUFFER,$4ef6348d85518192$var$attachmentPointIds[e],r.TEXTURE_2D,t,0);break;case $4ef6348d85518192$var$Framebuffer.RENDERBUFFER:r.framebufferRenderbuffer(r.FRAMEBUFFER,$4ef6348d85518192$var$attachmentPointIds[e],r.RENDERBUFFER,t)}r.bindFramebuffer(r.FRAMEBUFFER,n)},createColorBuffer:function(e,t=null,i=null){let r=$b91bcfe7d0e9e859$export$2e2bcd8739ae039.gl;if(null===r)return null;null===t&&(t=this.width),null===i&&(i=this.height);let n=r.createTexture();return r.bindTexture(r.TEXTURE_2D,n),r.texStorage2D(r.TEXTURE_2D,1,r.RGBA8,t,i),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),this.attach(e,n),n},createDepthBuffer:function(e=null,t=null){let i=$b91bcfe7d0e9e859$export$2e2bcd8739ae039.gl;if(null===i)return null;null===e&&(e=this.width),null===t&&(t=this.height);let r=i.createRenderbuffer();return i.bindRenderbuffer(i.RENDERBUFFER,r),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_COMPONENT24,e,t),this.attach($4ef6348d85518192$var$Framebuffer.DEPTH,r),r},createStencilBuffer:function(e=null,t=null){let i=$b91bcfe7d0e9e859$export$2e2bcd8739ae039.gl;if(null===i)return null;null===e&&(e=this.width),null===t&&(t=this.height);let r=i.createTexture();return i.bindTexture(i.TEXTURE_2D,r),i.texStorage2D(i.TEXTURE_2D,1,i.DEPTH_STENCIL,e,t),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),this.attach($4ef6348d85518192$var$Framebuffer.DEPTH_STENCIL,r),r},getTexture:function(e){return this.attachmentTypes[e]!==$4ef6348d85518192$var$Framebuffer.TEXTURE?null:this.attachments[e]},getRenderBuffer:function(e){return this.attachmentTypes[e]!==$4ef6348d85518192$var$Framebuffer.RENDERBUFFER?null:this.attachments[e]},bind:function(){let e=$b91bcfe7d0e9e859$export$2e2bcd8739ae039.gl;null!==e&&(e.bindFramebuffer(e.FRAMEBUFFER,this.framebufferId),e.drawBuffers(this.drawBufferIds),e.viewport(0,0,this.width,this.height))},unbind:function(){let e=$b91bcfe7d0e9e859$export$2e2bcd8739ae039.gl;null!==e&&(e.bindFramebuffer(e.FRAMEBUFFER,null),e.drawBuffers($4ef6348d85518192$var$defaultDrawBuffers),e.viewport(0,0,$fde096e7347cb963$export$2e2bcd8739ae039.renderer.width,$fde096e7347cb963$export$2e2bcd8739ae039.renderer.height))},isComplete:function(){let e=$b91bcfe7d0e9e859$export$2e2bcd8739ae039.gl;if(null===e)return!0;let t=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,this.framebufferId);let i=e.checkFramebufferStatus(e.FRAMEBUFFER);return e.bindFramebuffer(e.FRAMEBUFFER,t),i===e.FRAMEBUFFER_COMPLETE}});$4ef6348d85518192$var$Framebuffer.TEXTURE=1,$4ef6348d85518192$var$Framebuffer.RENDERBUFFER=2,$4ef6348d85518192$var$Framebuffer.COLOR0=0,$4ef6348d85518192$var$Framebuffer.COLOR1=1,$4ef6348d85518192$var$Framebuffer.COLOR2=2,$4ef6348d85518192$var$Framebuffer.COLOR3=3,$4ef6348d85518192$var$Framebuffer.COLOR4=4,$4ef6348d85518192$var$Framebuffer.COLOR5=5,$4ef6348d85518192$var$Framebuffer.COLOR6=6,$4ef6348d85518192$var$Framebuffer.COLOR7=7,$4ef6348d85518192$var$Framebuffer.DEPTH=8,$4ef6348d85518192$var$Framebuffer.STENCIL=9,$4ef6348d85518192$var$Framebuffer.DEPTH_STENCIL=10,$4ef6348d85518192$var$Framebuffer.MAX_ATTACHMENT_POINTS=11;const $4ef6348d85518192$var$attachmentPointIds=new Array($4ef6348d85518192$var$Framebuffer.MAX_ATTACHMENT_POINTS).fill(null),$4ef6348d85518192$var$defaultDrawBuffers=new Array(1).fill(null),$4ef6348d85518192$var$initAttachmentPointIds=function(e){$4ef6348d85518192$var$defaultDrawBuffers[0]=e.BACK,$4ef6348d85518192$var$attachmentPointIds[$4ef6348d85518192$var$Framebuffer.COLOR0]=e.COLOR_ATTACHMENT0,$4ef6348d85518192$var$attachmentPointIds[$4ef6348d85518192$var$Framebuffer.COLOR1]=e.COLOR_ATTACHMENT1,$4ef6348d85518192$var$attachmentPointIds[$4ef6348d85518192$var$Framebuffer.COLOR2]=e.COLOR_ATTACHMENT2,$4ef6348d85518192$var$attachmentPointIds[$4ef6348d85518192$var$Framebuffer.COLOR3]=e.COLOR_ATTACHMENT3,$4ef6348d85518192$var$attachmentPointIds[$4ef6348d85518192$var$Framebuffer.COLOR4]=e.COLOR_ATTACHMENT4,$4ef6348d85518192$var$attachmentPointIds[$4ef6348d85518192$var$Framebuffer.COLOR5]=e.COLOR_ATTACHMENT5,$4ef6348d85518192$var$attachmentPointIds[$4ef6348d85518192$var$Framebuffer.COLOR6]=e.COLOR_ATTACHMENT6,$4ef6348d85518192$var$attachmentPointIds[$4ef6348d85518192$var$Framebuffer.COLOR7]=e.COLOR_ATTACHMENT7,$4ef6348d85518192$var$attachmentPointIds[$4ef6348d85518192$var$Framebuffer.DEPTH]=e.DEPTH_ATTACHMENT,$4ef6348d85518192$var$attachmentPointIds[$4ef6348d85518192$var$Framebuffer.STENCIL]=e.STENCIL_ATTACHMENT,$4ef6348d85518192$var$attachmentPointIds[$4ef6348d85518192$var$Framebuffer.DEPTH_STENCIL]=e.DEPTH_STENCIL_ATTACHMENT};var $4ef6348d85518192$export$2e2bcd8739ae039=$4ef6348d85518192$var$Framebuffer,$3c032669d563ec95$exports={};$parcel$export($3c032669d563ec95$exports,"Drawable",(function(){return $3c032669d563ec95$export$f35845279390eafd})),$parcel$export($3c032669d563ec95$exports,"Custom",(function(){return $3c032669d563ec95$export$922ad9063d3cdee8})),$parcel$export($3c032669d563ec95$exports,"Spritesheet",(function(){return $3c032669d563ec95$export$674d2eb4debbef0c})),$parcel$export($3c032669d563ec95$exports,"SpritesheetAnimation",(function(){return $3c032669d563ec95$export$7faa71ea66a694bb})),$parcel$export($3c032669d563ec95$exports,"SpriteFont",(function(){return $3c032669d563ec95$export$e1896ac0c4970221})),$parcel$export($3c032669d563ec95$exports,"Sound",(function(){return $3c032669d563ec95$export$85990f0f98a390bb})),$parcel$export($3c032669d563ec95$exports,"SoundArray",(function(){return $3c032669d563ec95$export$bc40a15752ef9732}));var $lTI0F=parcelRequire("lTI0F");
//!class Drawable
const $9c01ee4e3248479e$var$Drawable=$lTI0F.Class.extend({className:"Drawable",resource:null,width:0,height:0,sx:0,sy:0,swidth:0,sheight:0,__ctor:function(e=null,t=null,i=null){if($lTI0F.Rinn.isInstanceOf(e,$9c01ee4e3248479e$var$Drawable)){let r=e;this.resource=r.resource,this.width=null!=t?t:r.width,this.height=null!=i?i:r.height,this.sx=r.sx,this.sy=r.sy,this.swidth=r.swidth,this.sheight=r.sheight}else this.resource=e,this.sx=0,this.sy=0,this.resource?(this.width=null!=t?t:e.targetWidth,this.height=null!=i?i:e.targetHeight,this.swidth=e.width,this.sheight=e.height):(this.width=t,this.height=i,this.swidth=t,this.sheight=i)},getDrawable:function(){return this},getImage:function(){return this.resource},resize:function(e,t){return e=null!==e?!0===e||e:this.width,t=null!==t?!0===t||t:this.height,!0===e?e=t*(this.width/this.height):!0===t&&(t=e*(this.height/this.width)),this.width=e,this.height=t,this},draw:function(e,t,i,r=null,n=null){r=null!=r?r:this.width,n=null!=n?n:this.height,this.drawf(e,this.sx,this.sy,this.swidth,this.sheight,t,i,r,n)},drawf:function(e,t,i,r,n,a,s,o,l,c=null,h=null){e.drawImage(this.resource,t,i,r,n,a,s,o,l,null,null,null!=c?c:o,null!=h?h:l)},render:function(e,t){this.draw(e,t.bounds.x1,t.bounds.y1,t.bounds.width(),t.bounds.height())}}),$9c01ee4e3248479e$var$NineSlice=$9c01ee4e3248479e$var$Drawable.extend({className:"DrawableNineSlice",ss:null,startingIndex:0,__ctor:function(e,t){if(this._super.Drawable.__ctor(e),null===e||!$lTI0F.Class.instanceOf(e,"Spritesheet"))throw new Error("NineSlice: spritesheet required");this.ss=e,this.startingIndex=t},__dtor:function(){dispose(this.ss)},getImage:function(){return this.ss.getImage()},draw:function(e,t,i,r,n){const a=this.startingIndex;let s=this.ss.getFrame(a+0).width,o=this.ss.getFrame(a+2).width,l=this.ss.getFrame(a+1).width,c=this.ss.getFrame(a+0).height,h=this.ss.getFrame(a+6).height,u=this.ss.getFrame(a+3).height,d=int((r-s-o)/l),f=int((n-c-h)/u),$=t,p=i;this.ss.getFrame(a+0).draw(e,$,p),this.ss.getFrame(a+2).draw(e,$+s+d*l,p),this.ss.getFrame(a+6).draw(e,$,p+c+f*u),this.ss.getFrame(a+8).draw(e,$+s+d*l,p+c+f*u);for(let t=0;t<d;t++)this.ss.getFrame(a+1).draw(e,$+s+t*l,p),this.ss.getFrame(a+7).draw(e,$+s+t*l,p+c+f*u);for(let t=0;t<f;t++)this.ss.getFrame(a+3).draw(e,$,p+c+t*u),this.ss.getFrame(a+5).draw(e,$+s+d*l,p+c+t*u);for(let t=0;t<f;t++)for(let i=0;i<d;i++)this.ss.getFrame(a+4).draw(e,$+s+i*l,p+c+t*u)}});Recycler.createPool($9c01ee4e3248479e$var$NineSlice,512);const $9c01ee4e3248479e$var$Repeated=$9c01ee4e3248479e$var$Drawable.extend({className:"DrawableRepeated",drawable:null,__ctor:function(e){this._super.Drawable.__ctor(e),this.drawable=e},__dtor:function(){dispose(this.drawable)},drawf:function(e,t,i,r,n,a,s,o,l,c=null,h=null){this.drawable.drawf(e,t,i,r,n,a,s,o,l,this.width,this.height)}});Recycler.createPool($9c01ee4e3248479e$var$Repeated,512);const $9c01ee4e3248479e$var$Clipped=$9c01ee4e3248479e$var$Drawable.extend({className:"DrawableClipped",drawable:null,__ctor:function(e){this._super.Drawable.__ctor(e),this.drawable=e},__dtor:function(){dispose(this.drawable)},draw:function(e,t,i,r=null,n=null){let a=this.getImage();r=null!=r?r:this.width,n=null!=n?n:this.height,this.drawable.drawf(e,this.drawable.sx,this.drawable.sy,r*a.rscale,n*a.rscale,t,i,r,n)}});Recycler.createPool($9c01ee4e3248479e$var$Clipped,512);const $9c01ee4e3248479e$var$Centered=$9c01ee4e3248479e$var$Drawable.extend({className:"DrawableCentered",drawable:null,offsX:0,offsY:0,__ctor:function(e,t,i){this._super.Drawable.__ctor(e),this.drawable=e,this.offsX=t,this.offsY=i},__dtor:function(){dispose(this.drawable)},draw:function(e,t,i,r=null,n=null){r=null!=r?r:this.width,n=null!=n?n:this.height,this.drawable.draw(e,t+this.offsX+.5*(r-this.width),i+this.offsY+.5*(n-this.height),this.width,this.height)}});Recycler.createPool($9c01ee4e3248479e$var$Centered,512);const $9c01ee4e3248479e$var$Static=$9c01ee4e3248479e$var$Drawable.extend({className:"DrawableStatic",drawable:null,offsX:0,offsY:0,__ctor:function(e,t,i){this._super.Drawable.__ctor(e),this.drawable=e,this.offsX=t,this.offsY=i},__dtor:function(){dispose(this.drawable)},draw:function(e,t,i,r=null,n=null){this.drawable.draw(e,t+this.offsX,i+this.offsY,r,n)}});Recycler.createPool($9c01ee4e3248479e$var$Static,512);const $9c01ee4e3248479e$var$Group=$9c01ee4e3248479e$var$Drawable.extend({className:"DrawableGroup",list:null,__ctor:function(e){this._super.Drawable.__ctor(),this.list=e,this.width=0,this.height=0;for(let e=0;e<this.list.length;e++)this.list[e].width>this.width&&(this.width=this.list[e].width),this.list[e].height>this.height&&(this.height=this.list[e].height);this.swidth=this.width,this.sheight=this.height},__dtor:function(){if(null!==this.list){for(let e=0;e<this.list.length;e++)dispose(this.list[e]);this.list=null}},draw:function(e,t,i,r=null,n=null){for(let a=0;a<this.list.length;a++)this.list[a].draw(e,t,i,r,n)},render:function(e,t){for(let i=0;i<this.list.length;i++)this.list[i].render(e,t)}});Recycler.createPool($9c01ee4e3248479e$var$Group,512),$9c01ee4e3248479e$var$Drawable.nineSlice=function(e,t=0){return $9c01ee4e3248479e$var$NineSlice.Pool.alloc(e,t)},$9c01ee4e3248479e$var$Drawable.prototype.nineSlice=function(e=0){return $9c01ee4e3248479e$var$NineSlice.Pool.alloc(this,e)},$9c01ee4e3248479e$var$Drawable.repeated=function(e){return $9c01ee4e3248479e$var$Repeated.Pool.alloc(e)},$9c01ee4e3248479e$var$Drawable.prototype.repeated=function(){return $9c01ee4e3248479e$var$Repeated.Pool.alloc(this)},$9c01ee4e3248479e$var$Drawable.clipped=function(e){return $9c01ee4e3248479e$var$Clipped.Pool.alloc(e)},$9c01ee4e3248479e$var$Drawable.prototype.clipped=function(){return $9c01ee4e3248479e$var$Clipped.Pool.alloc(this)},$9c01ee4e3248479e$var$Drawable.centered=function(e,t,i){return $9c01ee4e3248479e$var$Centered.Pool.alloc(e,t,i)},$9c01ee4e3248479e$var$Drawable.prototype.centered=function(e,t){return $9c01ee4e3248479e$var$Centered.Pool.alloc(this,e,t)},$9c01ee4e3248479e$var$Drawable.static=function(e,t,i){return $9c01ee4e3248479e$var$Static.Pool.alloc(e,t,i)},$9c01ee4e3248479e$var$Drawable.prototype.static=function(e,t){return $9c01ee4e3248479e$var$Static.Pool.alloc(this,e,t)},$9c01ee4e3248479e$var$Drawable.group=function(...e){return $9c01ee4e3248479e$var$Group.Pool.alloc(e)},
//!/class
//!namespace Drawable
//!namespace Pool
Recycler.createPool($9c01ee4e3248479e$var$Drawable,512);var $9c01ee4e3248479e$export$2e2bcd8739ae039=$9c01ee4e3248479e$var$Drawable,$02845dbdbf026744$export$2e2bcd8739ae039=$9c01ee4e3248479e$export$2e2bcd8739ae039.extend({className:"DrawableResource",r:null,__ctor:function(e){if("image"!==e.type)throw new Error("Resource is not an image.");this._super.Drawable.__ctor(e.data,e.width,e.height),this.r=e,this.r.wrapper=this}}),//![import "../system/canvas"]
$bd7bbd108a331fae$export$2e2bcd8739ae039=$9c01ee4e3248479e$export$2e2bcd8739ae039.extend({className:"DrawableCustom",__ctor:function(e){if("object"!=e.type)throw new Error("Resource is not an object.");this._super.Drawable.__ctor(null,e.width,e.height),this.r=e,this.r.wrapper=this},init:function(e){$22f7193504a1f089$export$2e2bcd8739ae039.renderImage(this.r.width,this.r.height,(e=>{null!==this.r.draw&&"function"==typeof this.r.draw?this.r.draw(e,this.r):(e.fillStyle(this.r.color),e.fillRect(0,0,this.r.width,this.r.height))}),(t=>{this.resource=t,this.swidth=this.resource.width,this.sheight=this.resource.height,e()}))}});const $8652d779e3153a64$var$FrameDrawable=$9c01ee4e3248479e$export$2e2bcd8739ae039.extend({spritesheet:null,frameIndex:0,__ctor:function(e,t){this._super.Drawable.__ctor(null,e.width,e.height),this.spritesheet=e,this.frameIndex=t,this.width=e.width,this.height=e.height,this.swidth=e.frameWidth,this.sheight=e.frameHeight}});var $8652d779e3153a64$export$2e2bcd8739ae039=$9c01ee4e3248479e$export$2e2bcd8739ae039.extend({className:"Spritesheet",numCols:0,numFrames:0,frameCache:null,__ctor:function(e){if(this._super.Drawable.__ctor(),"image"!=e.type&&"images"!=e.type)throw new Error("Resource is not a sprite sheet.");var t,i;if("image"==e.type){if(!(e.config.sheetWidth||e.config.numFrames&&e.config.frameWidth))throw new Error(e.resName+": required sheetWidth or numFrames+frameWidth");e.config.sheetWidth||(e.config.sheetWidth=e.width),e.config.frameHeight||(e.config.frameHeight=e.data.height),t=e.data.width/e.config.sheetWidth,i=e.width/e.config.sheetWidth}else e.config||(e.config={}),e.config.frameWidth||(e.config.frameWidth=e.data[0].width),e.config.frameHeight||(e.config.frameHeight=e.data[0].height),t=e.data[0].data.width/e.config.frameWidth,i=e.data[0].width/e.config.frameWidth;this.frameWidth=e.config.frameWidth*t,this.frameHeight=e.config.frameHeight*t,this.width=e.config.frameWidth*i,this.height=e.config.frameHeight*i,"image"==e.type?(this.numCols=int(e.data.width/this.frameWidth),this.numRows=Math.ceil(e.data.height/this.frameHeight),this.numFrames=e.config.numFrames||this.numCols*this.numRows):(this.numCols=this.numRows=0,this.numFrames=e.data.length),this.frameCache={},this.r=e,this.r.wrapper=this;for(let e=0;e<this.numFrames;e++)this.getFrame(e)},getFrame:function(e,t=null){let i=null!==t?t*this.numCols+e:e;if(i<0||i>=this.numFrames)throw new Error("frameIndex out of range");if(this.frameCache[i])return this.frameCache[i];let r=new $8652d779e3153a64$var$FrameDrawable(this,i);return 0!=this.numCols?(r.sy=int(i/this.numCols)*this.frameHeight,r.sx=i%this.numCols*this.frameWidth,r.resource=this.r.data):r.resource=this.r.data[i].data,this.frameCache[i]=r},getImage:function(){return this.getFrame(0).getImage()},getDrawable:function(){return this.getFrame(0)}});parcelRequire("lTI0F");const $2d9d52b4ff4142ab$export$c35d437ae5945fcd=$9c01ee4e3248479e$export$2e2bcd8739ae039.extend({className:"Animation",seq:null,seq_i:0,trans:null,trans_i:0,trans_t:null,queue:null,fps:0,frameSeconds:0,time:0,frameNumber:-1,finished:!1,_paused:!1,finishedCallback:null,finishedCallbackHandler:null,finishedCallbackContext:null,frameCallback:null,__ctor:function(e,t,i){this._super.Drawable.__ctor(e.getImage(),e.width,e.height),this.anim=e,this.queue=$5ffbe5e8d10cd81c$export$2e2bcd8739ae039.Pool.alloc(),this.seq=t,this.seq_i=0,this.trans=null,this.trans_i=0,this.trans_t=null,this.frameNumber=-1,this.finished=!1,this._paused=!1,this.finishedCallback=null,this.finishedCallbackHandler=null,this.finishedCallbackContext=null,this.frameCallback=null,this.fps=i,this.setFps(this.seq.fps||this.fps)},__dtor:function(){this.queue.free(),this.finishedCallbackHandler&&this.finishedCallbackHandler.free(),this.finishedCallbackContext&&this.finishedCallbackContext.free()},setFps:function(e){return this.frameSeconds=1/e,this.time=0,this},paused:function(e=null){return null===e?this._paused:(this._paused=e,this)},initialDelay:function(e){return this.time=-e,this},onFinished:function(e){return this.finishedCallback=e,this},then:function(e,t=null){return!1===e&&this.finishedCallback===this.thenCallback&&(this.finishedCallbackHandler.clear(),this.finishedCallbackContext.clear()),e?(this.finishedCallback!==this.thenCallback&&(this.finishedCallback=this.thenCallback,this.finishedCallbackHandler=$5ffbe5e8d10cd81c$export$2e2bcd8739ae039.Pool.alloc(),this.finishedCallbackContext=$5ffbe5e8d10cd81c$export$2e2bcd8739ae039.Pool.alloc()),this.finishedCallbackHandler.push(e),this.finishedCallbackContext.push(t),this):this},thenCallback:function(){if(!this.finishedCallbackHandler.length)return!1;let e=this.finishedCallbackContext.shift();this.finishedCallbackHandler.shift()(this,e)},onFrame:function(e){return this.frameCallback=e,this},setFrame:function(e){return this.seq_i=int(e)%this.seq.group.length,this},getFrame:function(e){return!0===e?this.seq_i/(this.seq.group.length-1):this.seq_i},getLength:function(){return this.seq.group.length},draw:function(e,t=0,i=0,r=null,n=null){if(this.time<0)return this._paused||(this.time+=this.frameNumber===$fde096e7347cb963$export$2e2bcd8739ae039.frameNumber?0:$fde096e7347cb963$export$2e2bcd8739ae039.frameDelta,this.frameNumber=$fde096e7347cb963$export$2e2bcd8739ae039.frameNumber),void(this.time>0&&(this.time=0));if(this.seq_i===this.seq.group.length){let a=this.seq.group[this.seq_i-1];if(null!==e)for(let s=0;s<a.length;s++)this.anim.getFrame(a[s]).draw(e,t,i,r,n);return}let a=this.seq.group[this.seq_i];if(null!==e)for(let s=0;s<a.length;s++)this.anim.getFrame(a[s]).draw(e,t,i,r,n);if(this._paused||(this.time+=this.frameNumber===$fde096e7347cb963$export$2e2bcd8739ae039.frameNumber?0:$fde096e7347cb963$export$2e2bcd8739ae039.frameDelta,this.frameNumber=$fde096e7347cb963$export$2e2bcd8739ae039.frameNumber),this.time>=this.frameSeconds){const e=this.seq_i;this.time-=this.frameSeconds,this.seq_i++,this.seq_i===this.seq.group.length&&(null!=this.trans?(++this.trans_i===this.trans.length?(this.trans=null,this.seq=this.trans_t):this.seq=this.trans[this.trans_i],this.setFps(this.seq.fps||this.fps),this.seq_i=0,this.time=0,this.finished=!1):(this.seq.loop?this.seq_i=0:(this.finished=!0,this.finishedCallback&&!1===this.finishedCallback(this)&&(this.finishedCallback=null)),this.queue.length&&this.use(this.queue.shift(),!0))),this.frameCallback&&!1===this.frameCallback(e,this.seq.group.length-1,this)&&(this.frameCallback=null)}},getImage:function(){return this.anim.getImage()},getDrawable:function(){return this},advance:function(){this.paused(!1),this.draw(null,0,0)},getSequenceName:function(){return(null===this.trans?this.seq:this.trans_t).name},use:function(e,t=!1){let i=null===this.trans?this.seq:this.trans_t;return!(i.name===e&&!this.finished&&!0!==t)&&(i.trans&&i.trans[e]?(this.trans_t=this.anim.a.seq[e],this.trans=i.trans[e],this.trans_i=0,this.seq=this.trans[this.trans_i]):(!0===t&&(this.trans=null),this.seq=this.anim.a.seq[e]),this.setFps(this.seq.fps||this.fps),this.seq_i=0,this.time=0,this.finished=!1,!0)},play:function(e){return this.use(e),this},setQueue:function(e){if(!$5ffbe5e8d10cd81c$export$2e2bcd8739ae039.isInstance(e))throw new Error("setQueue: Parameter must be an instance of List");null!=this.queue&&this.queue.clear().free(),this.queue=e,this.use(this.queue.shift(),!0)},enqueue:function(e,t=!1){let i=null===this.trans?this.seq:this.trans_t,r=this.queue.length>0?this.queue[this.queue.length-1]:i.name;return i.name===e&&i.loop?this:r!==e||t?i.loop||this.finished?(this.use(e,!0),this):(this.queue.push(e),this):this}});$3755e11d40ee463d$export$2e2bcd8739ae039.createPool($2d9d52b4ff4142ab$export$c35d437ae5945fcd);var $2d9d52b4ff4142ab$export$2e2bcd8739ae039=$8652d779e3153a64$export$2e2bcd8739ae039.extend({className:"SpritesheetAnimation",defaultDrawable:null,sharedAnim:null,r:null,a:null,__ctor:function(e){if(!e.anim)throw new Error("Animation descriptors not found.");this._super.Spritesheet.__ctor(e),this.r=e,this.r.wrapper=this;let t=this.a=this.r.anim;if(t.initialized)return;if(t.def||(t.def="def"),t.seq||(t.seq={}),!t.seq[t.def]&&("def"==t.def||"defloop"==t.def)){let e={loop:"def"!=t.def,group:[]};for(let t=0;t<this.numFrames;t++)e.group.push([t]);t.seq[t.def]=e}if(!t.seq[t.def])throw new Error("Undefined default sequence: "+t.def);t.fps||(t.fps=25),t.def=t.seq[t.def];let i=0;for(let e in t.seq)if(t.seq[e].name=e,t.seq[e].loop||(t.seq[e].loop=!1),"string"==typeof t.seq[e].group){let r,n,a;if(-1!=t.seq[e].group.indexOf(" ")){r=t.seq[e].group.split(" "),t.seq[e].group=[];for(let i in r)t.seq[e].group.push([int(r[i])])}else if(-1!=t.seq[e].group.indexOf("-"))if(a=t.seq[e].group.split("-"),r=int(a[0]),n=int(a[1]),t.seq[e].group=[],r<n)for(a=r;a<=n;a++)t.seq[e].group.push([a]);else for(a=r;a>=n;a--)t.seq[e].group.push([a]);else for(r=int(t.seq[e].group),t.seq[e].group=[];r--;)t.seq[e].group.push([i++]);t.seq[e].count=t.seq[e].group.length}if(t.trans)for(let e in t.trans){t.seq[e].trans=t.trans[e];for(let i in t.trans[e])for(let r=0;r<t.trans[e][i].length;r++){let n=t.trans[e][i][r];if(!t.seq[n])throw new Error("Undefined sequence: "+n);t.trans[e][i][r]=t.seq[n]}}t.initialized=!0},getSharedAnimation:function(e=null){return null===this.sharedAnim?(this.sharedAnim=$2d9d52b4ff4142ab$export$c35d437ae5945fcd.Pool.alloc(this,e?this.a.seq[e]:this.a.def,this.a.fps),this.sharedAnim.lockInstance(!0),this.sharedAnim):this.sharedAnim.play(e||this.a.def.name)},getAnimation:function(e=null,t=null){return $2d9d52b4ff4142ab$export$c35d437ae5945fcd.Pool.alloc(this,e?this.a.seq[e]:this.a.def,t||this.a.fps)},getSequence:function(e){return this.a.seq[e]},getDrawable:function(){return null===this.defaultDrawable&&(this.defaultDrawable=this.getAnimation()),this.defaultDrawable}}),$lTI0F=parcelRequire("lTI0F"),//![import "../system/canvas"]
$f4d79ecc7bc126e9$export$2e2bcd8739ae039=$lTI0F.Class.extend({__ctor:function(e){if("image"!=e.type||!e.font)throw new Error("Resource is not a sprite font.");e.font.sheetWidth||(e.font.sheetWidth=e.width);let t=e.data.width/e.font.sheetWidth,i=e.width/e.font.sheetWidth;this.r_charWidth=e.font.charWidth*t,this.r_charHeight=e.font.charHeight*t,this.charWidth=e.font.charWidth*i,this.charHeight=e.font.charHeight*i,this.paddingX=(e.font.paddingX||0)*i,this.paddingY=(e.font.paddingY||0)*i,this.spacingX=(e.font.spacingX||0)*i,this.spacingY=(e.font.spacingY||0)*i,this.reverseDraw=e.font.reverseDraw||!1;let r=int(e.font.sheetWidth/e.font.charWidth);this.r=e,this.r.wrapper=this;let n=e.font.charset.length,a=0,s=0;for(this.charTable={};a<n;){let t=0;for(let i=0;i<r&&a<n;i++){let i=e.font.charset[a++];this.charTable[i]={hidden:!1,x:t,y:s,charWidth:this.charWidth,r_charWidth:this.r_charWidth,spacingX:0},t+=this.r_charWidth}s+=this.r_charHeight}if(" "in this.charTable||(this.charTable[" "]={hidden:!0,charWidth:int(2*(this.charWidth+this.paddingX)/3),r_charWidth:this.r_charWidth,spacingX:0}),e.font.widths){n=e.font.widths.length;for(let t=0;t<n;t+=2){let r=e.font.widths[t+1]*i,n=e.font.widths[t];"number"==typeof n&&(n=String.fromCharCode(n));for(let e=0;e<n.length;e++)n[e]in this.charTable&&(this.charTable[n[e]].spacingX=r-this.charTable[n[e]].charWidth)}}},drawText:function(e,t,i,r){let n=r.length,a=-2*this.paddingX+this.spacingX;if(t-=this.paddingX,i-=this.paddingY,this.reverseDraw){for(let e=0;e<n-1;e++){let i=this.charTable[r[e]];i&&(t+=i.charWidth+a)}for(let s=n-1;s>=0;s--){let n=this.charTable[r[s]];n&&(n.hidden||e.drawImage(this.r.data,n.x,n.y,n.r_charWidth,this.r_charHeight,t,i,n.charWidth,this.charHeight,null,null,n.charWidth,this.charHeight),t-=n.charWidth+a+n.spacingX)}}else for(let s=0;s<n;s++){let n=this.charTable[r[s]];n&&(n.hidden||e.drawImage(this.r.data,n.x,n.y,n.r_charWidth,this.r_charHeight,t,i,n.charWidth,this.charHeight,null,null,n.charWidth,this.charHeight),t+=n.charWidth+a+n.spacingX)}},measureWidth:function(e){let t=e.length,i=0,r=-2*this.paddingX+this.spacingX;for(let n=0;n<t;n++){let t=this.charTable[e[n]];t&&(i+=t.charWidth+r+t.spacingX)}return i},measureHeight:function(e){return this.charHeight-2*this.paddingY+this.spacingY}});$22f7193504a1f089$export$2e2bcd8739ae039.prototype.drawText=function(e,t,i,r){e.drawText(this,t,i,r)},$22f7193504a1f089$export$2e2bcd8739ae039.prototype.drawTextAligned=function(e,t,i,r,n,a,s,o){0==a?t+=r-e.measureWidth(o)>>1:a<0?t=t-a-1:a>0&&(t=t+r-a+1-e.measureWidth(o)),0==s?i+=n-e.measureHeight(o)>>1:s<0?i=i-s-1:s>0&&(i=i+n-s+1-e.measureHeight(o)),e.drawText(this,t,i,o)},$22f7193504a1f089$export$2e2bcd8739ae039.prototype.drawTextAligned2=function(e,t,i,r,n){this.drawTextAligned(e,t.x1,t.y1,t.width(),t.height(),i,r,n)};var $lTI0F=parcelRequire("lTI0F"),$lTI0F=parcelRequire("lTI0F");const $68eb0e0111ce8878$var$Resources={};let $68eb0e0111ce8878$var$reported=!1;
//!namespace Resources
//!type ConfigOptions =
//!/type
//!/namespace
//!class Resources
Object.assign($68eb0e0111ce8878$var$Resources,{integerScalingEnabled:!0,pixelated:!1,filter:"LINEAR",original:!1,config:function(e){null!==e&&Object.assign(this,e)},load:function(e,t,i,r,n){if(!r){r=Object.keys(e);for(let t in r)"__loaded"in e[r[t]]||(e[r[t]].__clone=$lTI0F.Rinn.clone(e[r[t]]));n=0}for(;n<r.length&&"__loaded"in e[r[n]];)n++;if(t&&t(n,r.length,n/r.length,n<r.length?r[n]:null),n==r.length)return void(i&&i(e));let a=e[r[n]];switch(a.resName=r[n],a.type){case"image":a.data=new Image,a.data.onload=function(){var s=a.data.width/a.data.height;a.scale&&(a.width=int(a.data.width*a.scale),a.height=int(a.data.height*a.scale)),a.hasOwnProperty("extraScale")||(a.extraScale=0),a.width||a.height?a.width&&!a.height?a.height=int(a.width/s):!a.width&&a.height&&(a.width=int(s*a.height)):(a.width=a.data.width,a.height=a.data.height),a.owidth=a.data.width,a.oheight=a.data.height,a.hasOwnProperty("filter")||(a.filter=a.hasOwnProperty("pixelated")&&!0===a.pixelated?"NEAREST":$68eb0e0111ce8878$var$Resources.filter),a.hasOwnProperty("pixelated")||(a.pixelated=$68eb0e0111ce8878$var$Resources.pixelated),a.hasOwnProperty("original")||(a.original=$68eb0e0111ce8878$var$Resources.original),a.data.width==a.width&&a.data.height==a.height&&0==a.extraScale||!0===a.original||(a.data=$68eb0e0111ce8878$var$Resources.resizeImage(a,a.width*(a.extraScale+(a.pixelated?$fde096e7347cb963$export$2e2bcd8739ae039.integerScaleFactor:$fde096e7347cb963$export$2e2bcd8739ae039.scaleFactor)),a.height*(a.extraScale+(a.pixelated?$fde096e7347cb963$export$2e2bcd8739ae039.integerScaleFactor:$fde096e7347cb963$export$2e2bcd8739ae039.scaleFactor)),a.pixelated,!0)),a.rscale=a.data.width/a.width,a.data.rscale=a.rscale,a.data.filter=a.filter,a.data.targetWidth=a.width,a.data.targetHeight=a.height,$fde096e7347cb963$export$2e2bcd8739ae039.tempDisplayBuffer.drawImage(a.data,0,0),$fde096e7347cb963$export$2e2bcd8739ae039.renderer.prepareImage(a.data),$68eb0e0111ce8878$var$Resources.onLoaded(e,r[n],(()=>{$68eb0e0111ce8878$var$Resources.load(e,t,i,r,n+1)}))},a.data.onerror=function(){console.error("Error: Unable to load: "+a.resName)},a.data.src=a.src+"?r="+Math.random();break;case"images":let o=a.src,l=o.indexOf("#"),c=o.lastIndexOf("#"),h=c-l+1;if(-1==l)return void console.error("Unable to load: "+a.resName+"\nError: The 'src' attribute requires one or more '#' marks.");if(!a.count)return void console.error("Unable to load: "+a.resName+"\nError: The 'count' attribute was not found.");a._i=0,a.data=[],(s=function(){if(a._i!=a.count){var o={type:"image",width:a.width,height:a.height,scale:a.scale};o.src=a.src.substr(0,l)+(a._i++/Math.pow(10,h)).toFixed(h).substr(2)+a.src.substr(c+1),o.data=new Image,o.resName=a.resName+"#"+(a._i-1),t&&t(n,r.length,n/r.length+(a._i-1)/a.count*(1/r.length),a.resName+"/"+(a._i-1)),o.data.onload=function(){var e=o.data.width/o.data.height;o.scale&&(o.width=int(o.data.width*o.scale),o.height=int(o.data.height*o.scale)),o.width||o.height?o.width&&!o.height?o.height=int(o.width/e):!o.width&&o.height&&(o.width=int(e*o.height)):(o.width=o.data.width,o.height=o.data.height),1==a._i&&(a.owidth=o.data.width,a.oheight=o.data.height,a.hasOwnProperty("filter")||(a.filter=a.hasOwnProperty("pixelated")&&!0===a.pixelated?"NEAREST":$68eb0e0111ce8878$var$Resources.filter),a.hasOwnProperty("pixelated")||(a.pixelated=$68eb0e0111ce8878$var$Resources.pixelated),a.hasOwnProperty("original")||(a.original=$68eb0e0111ce8878$var$Resources.original)),o.pixelated=a.pixelated,o.filter=a.filter,o.original=a.original,o.data.width==o.width&&o.data.height==o.height||!0===o.original||(o.data=$68eb0e0111ce8878$var$Resources.resizeImage(o,o.width*(a.pixelated?$fde096e7347cb963$export$2e2bcd8739ae039.integerScaleFactor:$fde096e7347cb963$export$2e2bcd8739ae039.scaleFactor),o.height*(o.pixelated?$fde096e7347cb963$export$2e2bcd8739ae039.integerScaleFactor:$fde096e7347cb963$export$2e2bcd8739ae039.scaleFactor),o.pixelated,!0)),o.rscale=o.data.width/o.width,o.data.rscale=o.rscale,o.data.filter=o.filter,o.data.targetWidth=o.width,o.data.targetHeight=o.height,1==a._i&&(a.width=o.width,a.height=o.height,a.rscale=o.rscale),$fde096e7347cb963$export$2e2bcd8739ae039.tempDisplayBuffer.drawImage(o.data,0,0),$fde096e7347cb963$export$2e2bcd8739ae039.renderer.prepareImage(o.data),a.data.push(o),s()},o.data.onerror=function(){console.error("Error: Unable to load: "+o.resName)},o.data.src=o.src+"?r="+Math.random()}else $68eb0e0111ce8878$var$Resources.onLoaded(e,r[n],(()=>{$68eb0e0111ce8878$var$Resources.load(e,t,i,r,n+1)}))})();break;case"audio":if(a.track||(a.track="sfx"),$parcel$global.plugins&&$parcel$global.plugins.NativeAudio&&"sfx"==a.track){$68eb0e0111ce8878$var$reported||($e2086caaef68d463$export$2e2bcd8739ae039.write("ENGINE_NATIVEAUDIO"),$68eb0e0111ce8878$var$reported=!0),a.engine=$3c032669d563ec95$exports.Sound.ENGINE_NATIVEAUDIO,a.data="snd_"+n,$parcel$global.plugins.NativeAudio.preloadSimple(a.data,a.src,(function(){$68eb0e0111ce8878$var$Resources.onLoaded(e,r[n],(()=>{$68eb0e0111ce8878$var$Resources.load(e,t,i,r,n+1)}))}),(function(e){console.error("Error: Unable to load (sfx): "+a.resName+"\n"+e)}));break}if($parcel$global.audioContext){$68eb0e0111ce8878$var$reported||($e2086caaef68d463$export$2e2bcd8739ae039.write("ENGINE_WEBAUDIO"),$68eb0e0111ce8878$var$reported=!0),a.engine=$3c032669d563ec95$exports.Sound.ENGINE_WEBAUDIO,fetchAudioBuffer(a.src+"?r="+Math.random()).then((s=>{a.data=s,$68eb0e0111ce8878$var$Resources.onLoaded(e,r[n],(()=>{$68eb0e0111ce8878$var$Resources.load(e,t,i,r,n+1)}))})).catch((e=>{console.error("Error: Unable to load: "+a.resName)}));break}$68eb0e0111ce8878$var$reported||($e2086caaef68d463$export$2e2bcd8739ae039.write("ENGINE_HTML5"),$68eb0e0111ce8878$var$reported=!0),a.data=new Audio,a.engine=$3c032669d563ec95$exports.Sound.ENGINE_HTML5,a.data.oncanplaythrough=function(){$68eb0e0111ce8878$var$Resources.onLoaded(e,r[n],(()=>{$68eb0e0111ce8878$var$Resources.load(e,t,i,r,n+1)}))},a.data.onerror=function(){console.error("Error: Unable to load: "+a.resName)},a.data.src=a.src+"?r="+Math.random();break;case"audios":var s;a.src,o.indexOf("#"),o.lastIndexOf("#");if(-1==l)return void console.error("Unable to load: "+a.resName+"\nError: The 'src' attribute requires one or more '#' marks.");if(!a.count)return void console.error("Unable to load: "+a.resName+"\nError: The 'count' attribute was not found.");a._i=0,a.data=[],(s=function(){if(a._i!=a.count){var o={type:"audio",track:a.track};if(o.src=a.src.substr(0,l)+(a._i++/Math.pow(10,h)).toFixed(h).substr(2)+a.src.substr(c+1),o.resName=a.resName+"#"+(a._i-1),o.track||(o.track="sfx"),$parcel$global.plugins&&$parcel$global.plugins.NativeAudio&&"sfx"==o.track)return o.engine=$3c032669d563ec95$exports.Sound.ENGINE_NATIVEAUDIO,o.data="snd_"+n+"_"+a._i,void $parcel$global.plugins.NativeAudio.preloadSimple(o.data,o.src,(function(){a.data.push(o),s()}),(function(e){console.error("Error: Unable to load (sfx): "+o.resName+"\n"+e)}));if($parcel$global.audioContext)return o.engine=$3c032669d563ec95$exports.Sound.ENGINE_WEBAUDIO,void fetchAudioBuffer(o.src+"?r="+Math.random()).then((e=>{o.data=e,a.data.push(o),s()})).catch((e=>{console.error("Error: Unable to load: "+o.resName)}));o.data=new Audio,o.engine=$3c032669d563ec95$exports.Sound.ENGINE_HTML5,o.data.oncanplaythrough=function(){a.data.push(o),s()},o.data.onerror=function(){console.error("Error: Unable to load: "+o.resName)},o.data.src=o.src+"?r="+Math.random()}else $68eb0e0111ce8878$var$Resources.onLoaded(e,r[n],(()=>{$68eb0e0111ce8878$var$Resources.load(e,t,i,r,n+1)}))})();break;case"json":fetchd(a.src+"?r="+Math.random(),{responseType:"json"}).then((function(s){a.data=s,$68eb0e0111ce8878$var$Resources.onLoaded(e,r[n],(()=>{$68eb0e0111ce8878$var$Resources.load(e,t,i,r,n+1)}))})).catch((function(e){console.error("Error: Unable to load: "+a.resName+". Error: "+e)}));break;case"data":fetchd(a.src+"?r="+Math.random()).then((function(s){a.data=s,$68eb0e0111ce8878$var$Resources.onLoaded(e,r[n],(()=>{$68eb0e0111ce8878$var$Resources.load(e,t,i,r,n+1)}))})).catch((function(e){console.error("Error: Unable to load: "+a.resName+". Error: "+e)}));break;case"text":fetchd(a.src+"?r="+Math.random()).then((function(s){a.data=String.fromCharCode.apply(null,new Uint8Array(s)),$68eb0e0111ce8878$var$Resources.onLoaded(e,r[n],(()=>{$68eb0e0111ce8878$var$Resources.load(e,t,i,r,n+1)}))})).catch((function(e){console.error("Error: Unable to load: "+a.resName+". Error: "+e)}));break;case"object":a.data={},$68eb0e0111ce8878$var$Resources.onLoaded(e,r[n],(()=>{$68eb0e0111ce8878$var$Resources.load(e,t,i,r,n+1)}))}},unload:function(e){throw new Error("IMPLEMENTED UNLOAD!")},onLoaded:function(e,t,i){let r=e[t];r.wrapper&&r.wrapper in $3c032669d563ec95$exports?(e[t]=new $3c032669d563ec95$exports[r.wrapper](r),"init"in e[t]?e[t].init((()=>{e[t].__loaded=!0,i()})):(e[t].__loaded=!0,i())):i()},resizeImage:function(e,t,i,r,n){var a=e.data.width,s=e.data.height;if(t=int(t),i=int(i),a==t&&s==i)return e.data;if(!this.integerScalingEnabled&&r&&(r=null),r){if(int(t/a)>0){var o,l=int(t/a+.9),c=(t=l*a)/a,h=(i=l*s)/s;p=new $22f7193504a1f089$export$2e2bcd8739ae039({hidden:!0,antialias:!1}).resize(t,i);(o=new $22f7193504a1f089$export$2e2bcd8739ae039({hidden:!0,antialias:!1}).resize(a,s)).drawImage(e.data,0,0);for(var u=0;u<s;u++)for(var d=o.getImageData(0,u,a,1).data,f=0,$=0;$<a&&f<d.length;$++,f+=4)p.fillStyle("rgba("+d[f]+","+d[f+1]+","+d[f+2]+","+d[f+3]/255+")"),p.fillRect($*c,u*h,c,h);return o.dispose(),p.elem}return this.resizeImage(e,t,i,null,n)}for((o=new $22f7193504a1f089$export$2e2bcd8739ae039({hidden:!0,antialias:r=null!==r}).resize(a,s)).drawImage(e.data,0,0);;){var p,b=a>>1,g=s>>1;if(b<=t||g<=i)break;(p=new $22f7193504a1f089$export$2e2bcd8739ae039({hidden:!0,antialias:r}).resize(b,g)).drawImage(o.elem,0,0,b,g),o.dispose(),a=b,s=g,o=p}return(p=new $22f7193504a1f089$export$2e2bcd8739ae039({hidden:!0,antialias:r}).resize(t,i)).drawImage(o.elem,0,0,t,i),o.dispose(),n&&dispose(e.data),p.elem},flipImageHorz:function(e){var t=new $22f7193504a1f089$export$2e2bcd8739ae039({hidden:!0}).resize(e.data.width,e.data.height);return t.translate(e.data.width,0),t.scale(-1,1),t.drawImage(e.data,0,0),t.elem},flipImageVert:function(e){var t=new $22f7193504a1f089$export$2e2bcd8739ae039({hidden:!0}).resize(e.data.width,e.data.height);return t.translate(0,e.data.height),t.scale(1,-1),t.drawImage(e.data,0,0),t.elem},showDownload:function(e,t){var i=document.createElement("a");i.href=t,i.style.display="none",i.download=e,i.target="_blank",document.body.appendChild(i),i.click(),document.body.removeChild(i)},showFilePicker:function(e,t,i){var r=document.createElement("input");r.type="file",r.accept=t,r.style.display="none",r.multiple=e,document.body.appendChild(r),r.onchange=function(){i(r.files)},document.body.onfocus=function(){document.body.onfocus=null,document.body.removeChild(r)},r.click()},loadAsDataURL:function(e,t){var i=new FileReader;i.onload=function(e){t(e.target.result)},i.readAsDataURL(e)},loadAsText:function(e,t){var i=new FileReader;i.onload=function(e){t(e.target.result)},i.readAsText(e)},loadAsArrayBuffer:function(e,t){var i=new FileReader;i.onload=function(e){t(e.target.result)},i.readAsArrayBuffer(e)},loadAllAsDataURL:function(e,t){var i=[];if(e&&e.length){var r=function(n){n!=e.length?$68eb0e0111ce8878$var$Resources.loadAsDataURL(e[n],(function(t){i.push({name:e[n].name,size:e[n].size,url:t}),r(n+1)})):t(i)};r(0)}else t(i)}});var//!/class
$68eb0e0111ce8878$export$2e2bcd8739ae039=$68eb0e0111ce8878$var$Resources;
//![import "./resources"]
const $689eb0292031c01c$var$Sound=$lTI0F.Class.extend({r:null,__ctor:function(e){if("audio"!=e.type)throw new Error("Resource is not audio.");this.r=e,this.r.wrapper=this,this.track=$689eb0292031c01c$var$Sound[this.r.track.toUpperCase()]},play:function(e,t){return $689eb0292031c01c$var$Sound.play(this,e,t)},playLoop:function(e,t){return $689eb0292031c01c$var$Sound.playLoop(this,e,t)}});$689eb0292031c01c$var$Sound.ENGINE_HTML5=1,$689eb0292031c01c$var$Sound.ENGINE_WEBAUDIO=2,$689eb0292031c01c$var$Sound.ENGINE_NATIVEAUDIO=3,Object.assign($689eb0292031c01c$var$Sound,{MASTER:{enabled:!0,volume:1},SFX:{enabled:!0,volume:1},MUSIC:{enabled:!0,volume:.8},VOICE:{enabled:!0,volume:1},MAX_POOL_SIZE:100,pool:[],active:[],register:function(e){e.registered||(e.registered=!0,this.active.push(e))},unregister:function(e){if(e.registered){e.registered=!1;var t=$689eb0292031c01c$var$Sound.active.indexOf(e);-1!=t&&$689eb0292031c01c$var$Sound.active.splice(t,1)}},updateNode:function(e,t){switch(e.snd.r.engine){case $689eb0292031c01c$var$Sound.ENGINE_WEBAUDIO:return this.updateNode_webaudio(e,t);case $689eb0292031c01c$var$Sound.ENGINE_NATIVEAUDIO:return this.updateNode_nativeaudio(e,t)}return this.updateNode_audio(e,t)},alloc_webaudio:function(e){e.gainNode=audioContext.createGain(),e.gainNode.gain.value=0,e.gainNode.connect(audioContext.destination),e.res=audioContext.createBufferSource(),e.res.buffer=e.snd.r.data,e.res.loop=!1,e.res.connect(e.gainNode),e.res.node=e},free_webaudio:function(e){e.res&&(e.gainNode.disconnect(),e.res=null,e.gainNode=null)},alloc_nativeaudio:function(e){e.res=!0},free_nativeaudio:function(e){e.res=!1},alloc_audio:function(e){return this.pool.length?item=this.pool.pop():item=e.cloneNode(),item._src=e.src,item},free_audio:function(e){this.pool.length!=this.MAX_POOL_SIZE&&this.pool.push(e)},updateNode_webaudio:function(e,t){if(!e)return null;var i=$689eb0292031c01c$var$Sound.MASTER.volume*e.snd.track.volume*e.volume;switch(t){case"play":if(e.playing)break;e.res||$689eb0292031c01c$var$Sound.alloc_webaudio(e),e.playTime=hrnow(),e.playing=!0,e.pause=!1,e.res.onended=$689eb0292031c01c$var$Sound.onended_webaudio,e.gainNode.gain.value=i;try{e.res.start(0,e.startTime/1e3)}catch(t){return $689eb0292031c01c$var$Sound.free_webaudio(e),null}$689eb0292031c01c$var$Sound.register(e);break;case"setvolume":if(!e.res)break;e.gainNode.gain.value=i;break;case"stop":if(!e.playing&&e.paused){e.startTime=0,e.paused=!1,$689eb0292031c01c$var$Sound.free_webaudio(e),e.callback&&e.callback();break}if(!e.res)break;e.startTime=0,e.playing=!1,e.pause=!1,e.res.onended=null,$689eb0292031c01c$var$Sound.unregister(e),e.res.stop(),$689eb0292031c01c$var$Sound.free_webaudio(e),e.callback&&e.callback();break;case"pause":if(!e.playing||!e.res)break;e.startTime+=hrnow()-e.playTime,e.playing=!1,e.pause=!0,e.res.onended=null,$689eb0292031c01c$var$Sound.unregister(e),e.res.stop(),$689eb0292031c01c$var$Sound.free_webaudio(e);break;case"softstop":if(!e.playing&&e.paused){e.startTime=0,e.paused=!1;break}if(!e.playing||!e.res)break;e.startTime=0,e.playing=!1,e.pause=!1,e.res.loop=!1}return e},onended_webaudio:function(e){var t=e.currentTarget.node;if(t.playing&&0!=t.loop)return $689eb0292031c01c$var$Sound.free_webaudio(t),-1!=t.loop&&t.loop--,t.startTime=0,t.playing=!1,t.pause=!1,void $689eb0292031c01c$var$Sound.updateNode_webaudio(t,"play");t.res.onended=null,t.res.volume=0,$689eb0292031c01c$var$Sound.updateNode_webaudio(t,"stop")},updateNode_nativeaudio:function(e,t){if(!e)return null;switch(t){case"play":if(e.playing)break;e.res||$689eb0292031c01c$var$Sound.alloc_nativeaudio(e),e.playing=!0,e.pause=!1;try{$parcel$global.plugins.NativeAudio.play(e.snd.r.data,null,null,(function(){$689eb0292031c01c$var$Sound.onended_nativeaudio(e)}))}catch(t){return $689eb0292031c01c$var$Sound.free_nativeaudio(e),null}$689eb0292031c01c$var$Sound.register(e);break;case"setvolume":case"pause":case"softstop":break;case"stop":if(!e.res)break;e.playing=!1,e.pause=!1,$689eb0292031c01c$var$Sound.unregister(e),$parcel$global.plugins.NativeAudio.stop(e.snd.r.data,null),$689eb0292031c01c$var$Sound.free_nativeaudio(e),e.callback&&e.callback()}return e},onended_nativeaudio:function(e){$689eb0292031c01c$var$Sound.updateNode_nativeaudio(e,"stop")},updateNode_audio:function(e,t){if(!e)return null;var i=$689eb0292031c01c$var$Sound.MASTER.volume*e.snd.track.volume*e.volume;switch(t){case"play":if(e.playing)break;e.res||(e.res=$689eb0292031c01c$var$Sound.alloc_audio(e.snd.r.data),e.res.node=e,e.res.src=e.res._src),e.playTime=hrnow(),e.playing=!0,e.pause=!1,e.res.onended=$689eb0292031c01c$var$Sound.onended_audio,e.res.currentTime=e.startTime/1e3,e.res.volume=i;try{e.res.play()}catch(t){return $689eb0292031c01c$var$Sound.free_audio(e.res),e.res=null,null}$689eb0292031c01c$var$Sound.register(e);break;case"setvolume":if(!e.res)break;e.res.volume=i;break;case"stop":if(!e.playing&&e.paused){e.startTime=0,e.paused=!1,$689eb0292031c01c$var$Sound.free_audio(e.res),e.res=null,e.callback&&e.callback();break}if(!e.res)break;e.startTime=0,e.playing=!1,e.pause=!1,$689eb0292031c01c$var$Sound.unregister(e),e.res.pause(),$689eb0292031c01c$var$Sound.free_audio(e.res),e.res=null,e.callback&&e.callback();break;case"pause":if(!e.playing||!e.res)break;e.startTime+=hrnow()-e.playTime,e.playing=!1,e.pause=!0,$689eb0292031c01c$var$Sound.unregister(e),e.res.pause();break;case"softstop":if(!e.playing&&e.paused){e.startTime=0,e.paused=!1;break}if(!e.playing||!e.res)break;e.startTime=0,e.playing=!1,e.pause=!1}return e},onended_audio:function(e){var t=e.currentTarget.node;if(t.playing&&0!=t.loop)return-1!=t.loop&&t.loop--,t.startTime=0,t.playing=!1,t.pause=!1,void $689eb0292031c01c$var$Sound.updateNode_audio(t,"play");t.res.onended=null,t.res.volume=0,$689eb0292031c01c$var$Sound.updateNode_audio(t,"stop")},enableTrack:function(e){e&&(e.enabled=!0)},disableTrack:function(e){e&&(e.enabled=!1)},setVolume:function(e,t){e&&(e.volume=t)},createNode:function(e,t){var i={};return i.startVolume=t,i.volume=t,i.snd=e,i.loop=0,i.playing=!1,i.paused=!1,i.startTime=0,i.playTime=0,i.callback=null,i.timer=null,i.res=null,i},play:function(e,t,i){if(!this.MASTER.enabled||!e||!e.track.enabled)return null;i=null!=i?i:1;var r=this.createNode(e,i);return r.callback=t,this.updateNode(r,"play")},playLoop:function(e,t,i){if(!this.MASTER.enabled||!e||!e.track.enabled)return null;i=null!=i?i:1;var r=this.createNode(e,i);return r.callback=t,r.loop=-1,this.updateNode(r,"play")},stop:function(e,t){return e?(t&&!0!==t&&(e.callback=t),this.updateNode(e,!0===t?"stop":"softstop")):null},pause:function(e){return e?this.updateNode(e,"pause"):null},resume:function(e){return e?this.updateNode(e,"play"):null},fadeOut:function(e,t,i){if(e)if(e.playing&&!e.timer){var r=hrnow();e.startVolume=e.volume,e.timer=setInterval((function(){var n=(hrnow()-r)/t;n>1&&(n=1),e.volume=e.startVolume*(1-n),$689eb0292031c01c$var$Sound.updateNode(e,"setvolume"),1==n&&(clearInterval(e.timer),e.timer=null,!0===i?$689eb0292031c01c$var$Sound.updateNode(e,"stop"):$689eb0292031c01c$var$Sound.updateNode(e,"pause"),i&&!0!==i&&i())}),50)}else i&&i()},fadeIn:function(e,t,i){if(e)if(e.playing||e.timer)i&&i();else{var r=hrnow();e.volume=0,this.updateNode(e,"play"),e.timer=setInterval((function(){var n=(hrnow()-r)/t;n>1&&(n=1),e.volume=e.startVolume*n,$689eb0292031c01c$var$Sound.updateNode(e,"setvolume"),1==n&&(clearInterval(e.timer),e.timer=null,i&&i())}),50)}}}),$68eb0e0111ce8878$export$2e2bcd8739ae039.Audio=function(e,t=null){return{type:"audio",wrapper:"Sound",src:e,...t}};var $689eb0292031c01c$export$2e2bcd8739ae039=$689eb0292031c01c$var$Sound,$lTI0F=parcelRequire("lTI0F"),//![import "./sound.js"]
$22fce242bea61ea1$export$2e2bcd8739ae039=$lTI0F.Class.extend({r:null,__ctor:function(e){if("audios"!=e.type)throw new Error("Resource is not audios.");this.r=e,this.r.wrapper=this,this.r.track||(this.r.track="sfx"),this.r.mode||(this.r.mode="random"),this.track=$689eb0292031c01c$export$2e2bcd8739ae039[this.r.track.toUpperCase()],this.sounds=[],this.lastIndex=-1;for(var t=0;t<this.r.data.length;t++)this.sounds.push(new $689eb0292031c01c$export$2e2bcd8739ae039(Object.assign(this.r.data[t],{track:this.r.track})))},getRandomSound:function(){return"random"==this.r.mode?this.sounds[randr(0,this.sounds.length-1)]:(this.lastIndex=++this.lastIndex%this.sounds.length,this.sounds[this.lastIndex])},play:function(e,t){return $689eb0292031c01c$export$2e2bcd8739ae039.play(this.getRandomSound(),e,t)},playLoop:function(e,t){return $689eb0292031c01c$export$2e2bcd8739ae039.playLoop(this.getRandomSound(),e,t)},playAt:function(e,t,i){return $689eb0292031c01c$export$2e2bcd8739ae039.play(this.sounds[e%this.sounds.length],t,i)},playLoopAt:function(e,t,i){return $689eb0292031c01c$export$2e2bcd8739ae039.playLoop(this.sounds[e%this.sounds.length],t,i)}});const $3c032669d563ec95$export$f35845279390eafd=$02845dbdbf026744$export$2e2bcd8739ae039,$3c032669d563ec95$export$922ad9063d3cdee8=$bd7bbd108a331fae$export$2e2bcd8739ae039,$3c032669d563ec95$export$674d2eb4debbef0c=$8652d779e3153a64$export$2e2bcd8739ae039,$3c032669d563ec95$export$7faa71ea66a694bb=$2d9d52b4ff4142ab$export$2e2bcd8739ae039,$3c032669d563ec95$export$e1896ac0c4970221=$f4d79ecc7bc126e9$export$2e2bcd8739ae039,$3c032669d563ec95$export$85990f0f98a390bb=$689eb0292031c01c$export$2e2bcd8739ae039,$3c032669d563ec95$export$bc40a15752ef9732=$22fce242bea61ea1$export$2e2bcd8739ae039;var $lTI0F=parcelRequire("lTI0F"),//!class PriorityQueue
$b280b216ed4b8038$export$2e2bcd8739ae039=$lTI0F.Class.extend({className:"PriorityQueue",queue:null,queueKeys:null,order:null,__ctor:function(){this.queue={},this.queueKeys=[]},add:function(e){return null==e?null:("priority"in e||(e.priority=50),e.priority in this.queue||(this.queue[e.priority]={is_dirty:!1,list:[]},this.queueKeys.push(e.priority),this.order=Object.keys(this.queue).sort(((e,t)=>e-t))),-1===this.queue[e.priority].list.indexOf(e)&&this.queue[e.priority].list.push(e),e)},remove:function(e){if(null==e)return null;if("priority"in e||(e.priority=50),!(e.priority in this.queue))return e;let t=this.queue[e.priority].list.indexOf(e);return-1===t||(this.queue[e.priority].is_dirty=!0,this.queue[e.priority].list[t]=null),e},cleanup:function(){for(let e=0;e<this.queueKeys.length;e++){let t=this.queue[this.queueKeys[e]];if(t.is_dirty){for(let e=0;e<t.list.length;e++)null==t.list[e]&&t.list.splice(e--,1);t.is_dirty=!1}}},forEach:function(e){let t=!1,i=!1;for(let r=0;!i&&r<this.order.length;r++){let n=this.queue[this.order[r]].list;for(let r=0;!i&&r<n.length;r++)null!=n[r]&&!1===e(n[r])&&(i=!0),null==n[r]&&(t=!0)}t&&this.cleanup()},forEachRev:function(e){let t=!1,i=!1;for(let r=this.order.length-1;!i&&r>=0;r--){let n=this.queue[this.order[r]].list;for(let r=n.length-1;!i&&r>=0;r--)null!=n[r]&&!1===e(n[r])&&(i=!0),null==n[r]&&(t=!0)}t&&this.cleanup()},forEachAsync:function(e,t=null){let i=this,r=!1,n=!1,a=-1,s=-1,o=null,l=function(){s++,!n&&s<o.length?(null!=o[s]&&!1===e(o[s],l)&&(n=!0),null==o[s]&&(r=!0),n&&l()):c()},c=function(){a++,!n&&a<i.order.length?(o=i.queue[i.order[a]].list,s=-1,l()):(r&&i.cleanup(),t&&t())};c()},forEachRevAsync:function(e){alert("NOT IMPLEMENTED: forEachRevAsync")}}),$lTI0F=parcelRequire("lTI0F"),$lTI0F=parcelRequire("lTI0F");
//![import "./recycler"]
//!class Callback
const $9e32ad385ff5fde1$var$Callback=$lTI0F.Class.extend({className:"Callback",callback:null,arg0:null,arg1:null,arg2:null,arg3:null,arg4:null,arg5:null,prev:null,next:null,__ctor:function(e,t=null,i=null,r=null,n=null,a=null,s=null){this.callback=e,this.arg0=t,this.arg1=i,this.arg2=r,this.arg3=n,this.arg4=a,this.arg5=s,this.prev=null,this.next=null},__dtor:function(){this.callback=null,this.arg0=null,this.arg1=null,this.arg2=null,this.arg3=null,this.arg4=null,this.arg5=null,this.prev=null,this.next=null},isEqual:function(e=null,t=null,i=null,r=null,n=null,a=null,s=null){return null!==e&&$9e32ad385ff5fde1$var$Callback.isInstance(e)?e===this:(null===e||this.callback===e)&&((null===t||this.arg0===t)&&((null===i||this.arg1===i)&&((null===r||this.arg2===r)&&((null===n||this.arg3===n)&&((null===a||this.arg4===a)&&(null===s||this.arg5===s))))))},exec:function(e){return null===this.callback||this.callback(e,this.arg0,this.arg1,this.arg2,this.arg3,this.arg4,this.arg5)}});
//!/class
//!namespace Callback
//!namespace Pool
$3755e11d40ee463d$export$2e2bcd8739ae039.createPool($9e32ad385ff5fde1$var$Callback,16384,6144);var $9e32ad385ff5fde1$export$2e2bcd8739ae039=$9e32ad385ff5fde1$var$Callback;
//![import "./recycler"]
//![import "./callback"]
//!class Handler
const $45a34d9ad9468512$var$Handler=$lTI0F.Class.extend({className:"Handler",host:null,top:null,bottom:null,__ctor:function(e=null){return this.host=e,this.top=null,this.bottom=null,this},__dtor:function(){this.remove()},add:function(e,t=null,i=null,r=null,n=null,a=null,s=null){let o=$9e32ad385ff5fde1$export$2e2bcd8739ae039.isInstance(e)?e:$9e32ad385ff5fde1$export$2e2bcd8739ae039.Pool.alloc(e,t,i,r,n,a,s);return o.prev=this.bottom,null!==this.bottom&&(this.bottom.next=o),this.bottom=o,null===this.top&&(this.top=o),o},unlink:function(e){e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),this.top===e&&(this.top=e.next),this.bottom===e&&(this.bottom=e.prev),e.prev=null,e.next=null,dispose(e)},remove:function(e=null,t=null,i=null,r=null,n=null,a=null,s=null){if(null!==e&&$9e32ad385ff5fde1$export$2e2bcd8739ae039.isInstance(e))return this.unlink(e),this;let o=this.top;for(;null!==o;){let l=o.next;o.isEqual(e,t,i,r,n,a,s)&&this.unlink(o),o=l}return this},find:function(e,t=null,i=null,r=null,n=null,a=null,s=null){let o=this.top;for(;null!==o;){if(o.isEqual(e,t,i,r,n,a,s))return o;o=o.next}return null},exec:function(e=null){let t=this.top;for(e=null!=e?e:this.host;null!==t;){let i=t.next;!1===t.exec(e)&&this.unlink(t),t=i}},execf:function(e=null,t=null,i=null,r=null,n=null,a=null,s=null){let o=this.top;for(;null!==o;){let l=o.next;if(o.isEqual(e,t,i,r,n,a,s)){!1===o.exec(this.host)&&this.unlink(o);break}o=l}},execc:function(e,t=null){!1===e.exec(null!=t?t:this.host)&&this.unlink(e)}});
//!/class
//!namespace Handler
//!namespace Pool
$3755e11d40ee463d$export$2e2bcd8739ae039.createPool($45a34d9ad9468512$var$Handler,16384,6144);var $45a34d9ad9468512$export$2e2bcd8739ae039=$45a34d9ad9468512$var$Handler,$lTI0F=parcelRequire("lTI0F");
//![import "../utils/recycler"]
//![import "./vec2"]
//!class Rect
const $b102a02d12056e55$var$Rect=$lTI0F.Class.extend({className:"Rect",cx:0,cy:0,x1:0,y1:0,x2:0,y2:0,__ctor:function(e=null,t=null,i=null,r=null){return null===e?(this.x1=this.y1=this.x2=this.y2=this.cx=this.cy=0,this):null===i?(this.set(0,0,0,0),this.resize(e,t),this):this.set(e,t,i,r)},__dtor:function(){},clone:function(){return $b102a02d12056e55$var$Rect.Rool.alloc(this.x1,this.y1,this.x2,this.y2)},zero:function(){return this.cx=0,this.cy=0,this.x1=0,this.y1=0,this.x2=0,this.y2=0,this},reset:function(){return this.cx=null,this.cy=null,this.x1=null,this.y1=null,this.x2=null,this.y2=null,this},extendWithPoint:function(e,t=null){if(null===t){const i=e;e=i.x,t=i.y}return(null===this.x1||e<this.x1)&&(this.x1=e),(null===this.y1||t<this.y1)&&(this.y1=t),(null===this.x2||e>this.x2)&&(this.x2=e),(null===this.y2||t>this.y2)&&(this.y2=t),this.cx=(this.x1+this.x2)/2,this.cy=(this.y1+this.y2)/2,this},translate:function(e,t){return this.x1+=e,this.y1+=t,this.x2+=e,this.y2+=t,this.cx+=e,this.cy+=t,this},centerAt:function(e,t,i=!1){return 1==i&&(e=this.x1+e*(this.x2-this.x1),t=this.y1+t*(this.y2-this.y1)),this.translate(e-this.cx,t-this.cy)},set:function(e,t=null,i=null,r=null){if(null===t){const n=e;e=n.x1,t=n.y1,i=n.x2,r=n.y2}return this.cx=(e+i)/2,this.cy=(t+r)/2,this.x1=e,this.y1=t,this.x2=i,this.y2=r,this},equals:function(e,t=null,i=null,r=null){if(null===t){const n=e;e=n.x1,t=n.y1,i=n.x2,r=n.y2}return e==this.x1&&i==this.x2&&t==this.y1&&r==this.y2},contains:function(e,t=null,i=null,r=null){if(null===t){const n=e;e=n.x1,t=n.y1,i=n.x2,r=n.y2}return e==Math.max(this.x1,e)&&t==Math.max(this.y1,t)&&i==Math.min(this.x2,i)&&r==Math.min(this.y2,r)},setAsUnion:function(e,t=null,i=null,r=null){if(null===t){const n=e;e=n.x1,t=n.y1,i=n.x2,r=n.y2}return this.x1=Math.min(this.x1,e),this.y1=Math.min(this.y1,t),this.x2=Math.max(this.x2,i),this.y2=Math.max(this.y2,r),this},intersects:function(e,t=null,i=null,r=null){if(null===t){const n=e;e=n.x1,t=n.y1,i=n.x2,r=n.y2}let n=Math.max(this.x1,e),a=Math.max(this.y1,t),s=Math.min(this.x2,i),o=Math.min(this.y2,r);return Math.max(0,o-a)*Math.max(0,s-n)>0},setAsIntersection:function(e,t=null,i=null,r=null){if(null===t){const n=e;e=n.x1,t=n.y1,i=n.x2,r=n.y2}return this.x1=Math.max(this.x1,e),this.y1=Math.max(this.y1,t),this.x2=Math.min(this.x2,i),this.y2=Math.min(this.y2,r),Math.max(0,this.y2-this.y1)*Math.max(0,this.x2-this.x1)>0},resize:function(e,t,i=!1,r=!1){return 1==r&&(e*=this.x2-this.x1,t*=this.y2-this.y1),1==i?(this.x2=this.x1+e,this.y2=this.y1+t):(e/=2,t/=2,this.x1=this.cx-e,this.y1=this.cy-t,this.x2=this.cx+e,this.y2=this.cy+t),this},resizeBy:function(e,t,i=!1){return 1==i?(this.x2+=e,this.y2+=t):(e/=2,t/=2,this.x1-=e,this.y1-=t,this.x2+=e,this.y2+=t),this},width:function(){return this.x2-this.x1},height:function(){return this.y2-this.y1},ncx:function(){return(this.cx-this.x1)/(this.x2-this.x1)},ncy:function(){return(this.cy-this.y1)/(this.y2-this.y1)},isRight:function(){return this.x1<=this.x2&&this.y1<=this.y2},containsPoint:function(e,t,i=0){return this.x1-i<=e&&e<=this.x2+i&&this.y1-i<=t&&t<=this.y2+i},area:function(e){return e?this.isRight()?(this.y2-this.y1)*(this.x2-this.x1):0:(this.y2-this.y1)*(this.x2-this.x1)},floor:function(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.floor(this.x2),this.y2=Math.floor(this.y2),this.cx=Math.floor(this.cx),this.cy=Math.floor(this.cy),this},ceil:function(){return this.x1=Math.ceil(this.x1),this.y1=Math.ceil(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this.cx=Math.ceil(this.cx),this.cy=Math.ceil(this.cy),this},toString:function(){return"("+this.x1.toFixed(2)+", "+this.y1.toFixed(2)+", "+this.x2.toFixed(2)+", "+this.y2.toFixed(2)+")"},flatten:function(){return[this.x1,this.y1,this.x2,this.y2]},unflatten:function(e){return this.set(e[0],e[1],e[2],e[3]),this}});
//!/class
//!namespace Rect
//!namespace Pool
$3755e11d40ee463d$export$2e2bcd8739ae039.createPool($b102a02d12056e55$var$Rect,4096,2048);var $b102a02d12056e55$export$2e2bcd8739ae039=$b102a02d12056e55$var$Rect,$lTI0F=parcelRequire("lTI0F");
//!class TFunction
const $a07db0aab30c8926$var$TFunction=$lTI0F.Class.extend({className:"TFunction",t:null,y:null,f:null,__ctor:function(e=0){this.reset(e)},reset:function(e=0){return this.t=[0],this.y=[e],this.f=[null],this},copyFrom:function(e,t,i){if(this.t=[],this.y=[],this.f=[],null==t&&null==i){for(let t=0;t<e.t.length;t++)this.t.push(e.t[t]),this.y.push(e.y[t]),this.f.push(e.f[t]);return this}null==t&&(t=e.t[0]),null==i&&(i=e.t[e.t.length-1]),t<e.t[0]&&(t=e.t[0]);let r=e.find(t),n=e.find(i);if(null==r)return null;if(null==n)return null;e.t[r]!=t&&(this.set(t,e.getAt(t),e.f[r]),r++);for(let t=r;t<=n;t++)this.set(e.t[t],e.y[t],e.f[t]);if(e.t[n]!=i){let t=(i-e.t[n])/Math.ceil(Math.log(i-e.t[n])),r=this.t[this.t.length-1];for(t<=0&&(t=1),t=i-r;r!=i;)r+t>i&&(t=i-r),r+=t,this.set(float4(r),e.getAt(r),e.f[n])}return this},clone:function(e,t){return(new $a07db0aab30c8926$var$TFunction).copyFrom(this,e,t)},endTime:function(e=0){return this.t[this.t.length-1]+e},startTime:function(e=0){return this.t[0]+e},find:function(e){if(e<this.t[0])return null;const t=this.t.length;for(let i=1;i<t;i++)if(e<this.t[i])return i-1;return t-1},set:function(e,t,i=null){let r=this.find(e);return null!=r&&(this.t[r]==e?(this.y[r]=t,null!=i&&(this.f[r]=i)):(r++,this.t.splice(r,0,e),this.y.splice(r,0,t),this.f.splice(r,0,i)),!0)},get:function(){return this.y[this.y.length-1]},getAt:function(e){let t=this.find(e);if(null==t)return 0;let i=t+1;if(this.t[t]==e||i>=this.t.length||this.y[t]==this.y[i]||null==this.f[t])return this.y[t];if(null==this.f[t])return this.y[t];let r=e,n=this.t[t],a=this.t[i],s=this.y[t],o=this.y[i];return e=(r-n)/(a-n),(e=this.f[t](e))*o+(1-e)*s},integral:function(e=null,t=null,i=0){null==e&&(e=this.t[0]),null==t&&(t=this.t[this.t.length-1]),e<this.t[0]&&(e=this.t[0]);let r=1;if(e>t){let i;i=e,e=t,t=i,r=-1}let n=i;for(let i=e;i<t;){let e=this.find(i);if(null==e)return 0;let r=e+1,a=Math.max(this.t[e],i),s=Math.min(r<this.t.length?this.t[r]:t,t),o=this.getAt(a),l=s-a,c=this.getAt(s)-o;null==this.f[e]?n+=o*l:n+=.5*c*(s+a)-a*c+o*l,i+=l}return r*n},second_integral:function(e=null,t=null,i=0){null==e&&(e=this.t[0]),null==t&&(t=this.t[this.t.length-1]);let r=$a07db0aab30c8926$var$TFunction.Temp1.copyFrom(this,this.t[0],e).integrate(i).integral();return $a07db0aab30c8926$var$TFunction.Temp2.copyFrom(this,this.t[0],t).integrate(i).integral()-r},integrate:function(e=0){let t=[];t.push(e);for(let e=1;e<this.t.length;e++)t.push(t[e-1]+this.integral(this.t[e-1],this.t[e]));return this.y=t,this},accumulate:function(e=0){this.y[0]+=e;for(let e=1;e<this.t.length;e++)this.y[e]+=this.y[e-1];return this},chopLeft:function(e){return this.t.splice(0,e),this.f.splice(0,e),this.y.splice(0,e),this},chopRight:function(e){return this.t.splice(e+1,this.t.length-e-1),this.f.splice(e+1,this.f.length-e-1),this.y.splice(e+1,this.y.length-e-1),this},map:function(e){for(let t=0;t<this.y.length;t++)this.y[t]=e(this.y[t],this.t[t],t);return this},toString:function(e=0){let t="",i=10;const r=function(e,t,i){for(e=e.toString(),null==i&&(i=" "),i=i[0];e.length<t;)e+=i;return e};t+="\n",t+=r(" Time",i)+" "+r(" Value",i)+" "+r(" Integral",i)+"\n",t+=r("",i,"-")+" "+r("",i,"-")+" "+r("",i,"-")+"\n";for(let n=0;n<this.t.length;n++)t+=r(" "+float4(this.t[n]),i)+" "+r(" "+float4(this.y[n]),i)+" "+r(" "+float4(this.integral(this.t[0],this.t[n],e)),i)+"\n";return t}});$a07db0aab30c8926$var$TFunction.Temp1=new $a07db0aab30c8926$var$TFunction,$a07db0aab30c8926$var$TFunction.Temp2=new $a07db0aab30c8926$var$TFunction;var $a07db0aab30c8926$export$2e2bcd8739ae039=$a07db0aab30c8926$var$TFunction,$lTI0F=parcelRequire("lTI0F"),$lTI0F=parcelRequire("lTI0F");
//![import "../utils/recycler"]
//![import "./vec2"]
//!class Point2
const $333d67efa04b2b0b$var$Point2=$lTI0F.Class.extend({className:"Point2",ux:0,uy:0,x:0,y:0,__ctor:function(e=null,t=null){return this.set(e,t)},downscale:function(){return this.x=downscale(this.ux),this.y=downscale(this.uy),this},clone:function(){return $333d67efa04b2b0b$var$Point2.Pool.alloc(this)},set:function(e,t=null,i=!1){return null===e?(e=0,t=0):null===t?$333d67efa04b2b0b$var$Point2.isInstance(e)?(t=e.uy,e=e.ux):(t=upscale(e.y),e=upscale(e.x)):i||(e=upscale(e),t=upscale(t)),this.ux=e,this.uy=t,this.downscale(this)},setX:function(e){return this.ux=upscale(e),this.downscale(this)},setY:function(e){return this.uy=upscale(e),this.downscale(this)},zero:function(){return this.set(0,0)},isZero:function(){return 0==this.x&&0==this.y},equals:function(e,t=null){return null===t?$333d67efa04b2b0b$var$Point2.isInstance(e)?(t=e.y,e=e.x):(t=int(e.y),e=int(e.x)):(e=int(e),t=int(t)),this.x==e&&this.y==t},add:function(e,t=null,i=!1){return null===t?$333d67efa04b2b0b$var$Point2.isInstance(e)?(t=e.uy,e=e.ux):(t=upscale(e.y),e=upscale(e.x)):i||(e=upscale(e),t=upscale(t)),this.ux+=e,this.uy+=t,this.downscale()},sub:function(e,t,i=!1){return null===t?$333d67efa04b2b0b$var$Point2.isInstance(e)?(t=e.uy,e=e.ux):(t=upscale(e.y),e=upscale(e.x)):i||(e=upscale(e),t=upscale(t)),this.ux-=e,this.uy-=t,this.downscale()},toString:function(){return`(${this.x}, ${this.y})`}});
//!/class
//!namespace Point2
//!namespace Pool
$3755e11d40ee463d$export$2e2bcd8739ae039.createPool($333d67efa04b2b0b$var$Point2,2048,1024);var $333d67efa04b2b0b$export$2e2bcd8739ae039=$333d67efa04b2b0b$var$Point2;
//![import "../utils/recycler"]
//![import "./point2"]
//![import "./rect"]
//!class Bounds2
const $33fa7ae7f1b4b0c7$var$Bounds2=$lTI0F.Class.extend({className:"Bounds2",cx:0,cy:0,x1:0,y1:0,x2:0,y2:0,ucx:0,ucy:0,ux1:0,uy1:0,ux2:0,uy2:0,__ctor:function(e=null,t=null,i=null,r=null,n=!1){return null===e?(this.ux1=this.uy1=this.ux2=this.uy2=this.ucx=this.ucy=0,this.downscale()):null!==t&&null===i?this.set(0,0,0,0).resize(e,t):this.set(e,t,i,r,n)},downscale:function(){return this.x1=downscale(this.ux1),this.y1=downscale(this.uy1),this.x2=downscale(this.ux2),this.y2=downscale(this.uy2),this.cx=downscale(this.ucx),this.cy=downscale(this.ucy),this},trunc:function(){return this.ux1=upscale(this.x1),this.uy1=upscale(this.y1),this.ux2=upscale(this.x2),this.uy2=upscale(this.y2),this.ucx=upscale(this.cx),this.ucy=upscale(this.cy),this},clone:function(){return $33fa7ae7f1b4b0c7$var$Bounds2.Pool.alloc(this.ux1,this.uy1,this.ux2,this.uy2,!0)},zero:function(){return this.ux1=0,this.uy1=0,this.ux2=0,this.uy2=0,this.ucx=0,this.ucy=0,this.downscale()},reset:function(){return this.ux1=null,this.uy1=null,this.ux2=null,this.uy2=null,this.ucx=null,this.ucy=null,this.x1=null,this.y1=null,this.x2=null,this.y2=null,this.cx=null,this.cy=null,this},translate:function(e,t=null,i=!1){return null===t?$333d67efa04b2b0b$export$2e2bcd8739ae039.isInstance(e)?(t=e.uy,e=e.ux):(t=upscale(e.y),e=upscale(e.x)):i||(e=upscale(e),t=upscale(t)),this.ux1+=e,this.uy1+=t,this.ux2+=e,this.uy2+=t,this.ucx+=e,this.ucy+=t,this.downscale()},set:function(e,t=null,i=null,r=null,n=!1){return null===t?$33fa7ae7f1b4b0c7$var$Bounds2.isInstance(e)?(r=e.uy2,i=e.ux2,t=e.uy1,e=e.ux1):(r=upscale(e.y2),i=upscale(e.x2),t=upscale(e.y1),e=upscale(e.x1)):n||(e=upscale(e),t=upscale(t),i=upscale(i),r=upscale(r)),this.ux1=e,this.uy1=t,this.ux2=i,this.uy2=r,this.ucx=e+i>>1,this.ucy=t+r>>1,this.downscale()},add:function(e,t=null,i=null,r=null,n=!1){return null===t?$33fa7ae7f1b4b0c7$var$Bounds2.isInstance(e)?(r=e.uy2,i=e.ux2,t=e.uy1,e=e.ux1):(r=upscale(e.y2),i=upscale(e.x2),t=upscale(e.y1),e=upscale(e.x1)):n||(e=upscale(e),t=upscale(t),i=upscale(i),r=upscale(r)),this.ux1+=e,this.uy1+=t,this.ux2+=i,this.uy2+=r,this.ucx+=e+i>>1,this.ucy+=t+r>>1,this.downscale()},equals:function(e,t=null,i=null,r=null){return null===t?$33fa7ae7f1b4b0c7$var$Bounds2.isInstance(e)?(r=e.y2,i=e.x2,t=e.y1,e=e.x1):(r=int(e.y2),i=int(e.x2),t=int(e.y1),e=int(e.x1)):(e=int(e),t=int(t),i=int(i),r=int(r)),e==this.x1&&i==this.x2&&t==this.y1&&r==this.y2},contains:function(e,t=null,i=null,r=null){return null===t?$33fa7ae7f1b4b0c7$var$Bounds2.isInstance(e)?(r=e.y2,i=e.x2,t=e.y1,e=e.x1):(r=int(e.y2),i=int(e.x2),t=int(e.y1),e=int(e.x1)):(e=int(e),t=int(t),i=int(i),r=int(r)),e==Math.max(this.x1,e)&&t==Math.max(this.y1,t)&&i==Math.min(this.x2,i)&&r==Math.min(this.y2,r)},setAsUnion:function(e,t=null,i=null,r=null){if(null===t){if($33fa7ae7f1b4b0c7$var$Bounds2.isInstance(e))return this.setAsUnion(e.ux1,e.uy1,!0),this.setAsUnion(e.ux2,e.uy2,!0),this;if($b102a02d12056e55$export$2e2bcd8739ae039.isInstance(e))return this.setAsUnion(e.x1,e.y1),this.setAsUnion(e.x2,e.y2),this;$333d67efa04b2b0b$export$2e2bcd8739ae039.isInstance(e)?(t=e.uy,e=e.ux):(t=upscale(e.y),e=upscale(e.x))}else{if(null!==r)return this.setAsUnion(e,t),this.setAsUnion(i,r),this;!0!==i&&(e=upscale(e),t=upscale(t))}return(null===this.ux1||e<this.ux1)&&(this.ux1=e),(null===this.uy1||t<this.uy1)&&(this.uy1=t),(null===this.ux2||e>this.ux2)&&(this.ux2=e),(null===this.uy2||t>this.uy2)&&(this.uy2=t),this.ucx=this.ux1+this.ux2>>1,this.ucy=this.uy1+this.uy2>>1,this.downscale()},intersects:function(e,t=null,i=null,r=null){null===t?$33fa7ae7f1b4b0c7$var$Bounds2.isInstance(e)?(r=e.y2,i=e.x2,t=e.y1,e=e.x1):(r=int(e.y2),i=int(e.x2),t=int(e.y1),e=int(e.x1)):(e=int(e),t=int(t),i=int(i),r=int(r));let n=Math.max(this.x1,e),a=Math.max(this.y1,t),s=Math.min(this.x2,i),o=Math.min(this.y2,r);return Math.max(0,o-a)*Math.max(0,s-n)>0},setAsIntersection:function(e,t=null,i=null,r=null){return null===t?$33fa7ae7f1b4b0c7$var$Bounds2.isInstance(e)?(r=e.y2,i=e.x2,t=e.y1,e=e.x1):(r=int(e.y2),i=int(e.x2),t=int(e.y1),e=int(e.x1)):(e=int(e),t=int(t),i=int(i),r=int(r)),this.ux1=upscale(Math.max(this.x1,e)),this.uy1=upscale(Math.max(this.y1,t)),this.ux2=upscale(Math.min(this.x2,i)),this.uy2=upscale(Math.min(this.y2,r)),this.ucx=this.ux1+this.ux2>>1,this.ucy=this.uy1+this.uy2>>1,this.downscale(),Math.max(0,this.uy2-this.uy1)*Math.max(0,this.ux2-this.ux1)>0},resize:function(e,t,i=!1){return e=null!==e?!0===e||upscale(e):this.ux2-this.ux1,t=null!==t?!0===t||upscale(t):this.uy2-this.uy1,!0===e?e=t*this.ratio():!0===t&&(t=e/this.ratio()),!0===i?(this.ux2=this.ux1+e,this.uy2=this.uy1+t,this.ucx=this.ux1+this.ux2>>1,this.ucy=this.uy1+this.uy2>>1):(e>>=1,t>>=1,this.ux1=this.ucx-e,this.uy1=this.ucy-t,this.ux2=this.ucx+e,this.uy2=this.ucy+t),this.downscale()},resizeBy:function(e,t,i=!1){return e=!0===e||upscale(e),t=!0===t||upscale(t),!0===e?e=t*this.ratio():!0===t&&(t=e/this.ratio()),!0===i?(this.ux2+=e,this.uy2+=t,this.ucx=this.ux1+this.ux2>>1,this.ucy=this.uy1+this.uy2>>1):(e>>=1,t>>=1,this.ux1-=e,this.uy1-=t,this.ux2+=e,this.uy2+=t),this.downscale()},width:function(){return this.x2-this.x1},height:function(){return this.y2-this.y1},ratio:function(){return(this.x2-this.x1)/(this.y2-this.y1)},isForward:function(){return this.ux1<=this.ux2&&this.uy1<=this.uy2},containsPoint:function(e,t,i=0){return e=upscale(e),t=upscale(t),i=upscale(i),this.ux1-i<=e&&e<=this.ux2+i&&this.uy1-i<=t&&t<=this.uy2+i},area:function(e=!1){return e?this.isForward()?(this.y2-this.y1)*(this.x2-this.x1):0:(this.y2-this.y1)*(this.x2-this.x1)},toString:function(){return"("+this.x1+", "+this.y1+", "+this.x2+", "+this.y2+")"},flatten:function(){return[this.ux1,this.uy1,this.ux2,this.uy2]},unflatten:function(e){return this.ux1=e[0],this.uy1=e[1],this.ux2=e[2],this.uy2=e[3],this.ucx=this.ux1+this.ux2>>1,this.ucy=this.uy1+this.uy2>>1,this.downscale()}});
//!/class
//!namespace Rect
//!namespace Pool
$3755e11d40ee463d$export$2e2bcd8739ae039.createPool($33fa7ae7f1b4b0c7$var$Bounds2,8192,3072);var $33fa7ae7f1b4b0c7$export$2e2bcd8739ae039=$33fa7ae7f1b4b0c7$var$Bounds2;
//!namespace Easing
const $3569e5716b6e61f7$var$Easing={//!namespace Linear
Linear:{IN:function(e){return e},OUT:function(e){return e},IN_OUT:function(e){return e}},
//!/namespace
//!namespace Back
Back:{k:1.70158,IN:function(e,t=null){return null===t&&(t=$3569e5716b6e61f7$var$Easing.Back.k),e*e*((t+1)*e-t)},OUT:function(e,t=null){return 1-$3569e5716b6e61f7$var$Easing.Back.IN(1-e,t)},IN_OUT:function(e,t=null){return e<.5?$3569e5716b6e61f7$var$Easing.Back.IN(2*e,t)/2:$3569e5716b6e61f7$var$Easing.Back.OUT(2*(e-.5),t)/2+.5}},
//!/namespace
//!namespace Bounce
Bounce:{getConst:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},IN:function(e){return 1-$3569e5716b6e61f7$var$Easing.Bounce.getConst(1-e)},OUT:function(e){return $3569e5716b6e61f7$var$Easing.Bounce.getConst(e)},IN_OUT:function(e){return e<.5?(1-$3569e5716b6e61f7$var$Easing.Bounce.getConst(1-2*e))/2:$3569e5716b6e61f7$var$Easing.Bounce.getConst(2*(e-.5))/2+.5}},
//!/namespace
//!namespace Circ
Circ:{IN:function(e){return 1-Math.sqrt(1-e*e)},OUT:function(e){return 1-$3569e5716b6e61f7$var$Easing.Circ.IN(1-e)},IN_OUT:function(e){return e<.5?$3569e5716b6e61f7$var$Easing.Circ.IN(2*e)/2:$3569e5716b6e61f7$var$Easing.Circ.OUT(2*(e-.5))/2+.5}},
//!/namespace
//!namespace Cubic
Cubic:{IN:function(e){return e*e*e},OUT:function(e){return 1-$3569e5716b6e61f7$var$Easing.Cubic.IN(1-e)},IN_OUT:function(e){return e<.5?$3569e5716b6e61f7$var$Easing.Cubic.IN(2*e)/2:$3569e5716b6e61f7$var$Easing.Cubic.OUT(2*(e-.5))/2+.5}},
//!/namespace
//!namespace Expo
Expo:{IN:function(e){return Math.pow(2,12*(e-1))},OUT:function(e){return 1-Math.pow(2,-12*e)},IN_OUT:function(e){return(e*=2)<1?Math.pow(2,12*(e-1))/2:(2-Math.pow(2,-12*(e-1)))/2}},
//!/namespace
//!namespace Power
Power:{IN:function(e,t=12){return Math.pow(e,t)},OUT:function(e,t=12){return 1-$3569e5716b6e61f7$var$Easing.Power.IN(1-e,t)},IN_OUT:function(e,t=12){return e<.5?$3569e5716b6e61f7$var$Easing.Power.IN(2*e,t)/2:$3569e5716b6e61f7$var$Easing.Power.OUT(2*(e-.5),t)/2+.5}},
//!/namespace
//!namespace Quad
Quad:{IN:function(e){return e*e},OUT:function(e){return 1-$3569e5716b6e61f7$var$Easing.Quad.IN(1-e)},IN_OUT:function(e){return e<.5?$3569e5716b6e61f7$var$Easing.Quad.IN(2*e)/2:$3569e5716b6e61f7$var$Easing.Quad.OUT(2*(e-.5))/2+.5}},
//!/namespace
//!namespace Quartic
Quartic:{IN:function(e){return e*e*e*e},OUT:function(e){return 1-$3569e5716b6e61f7$var$Easing.Quartic.IN(1-e)},IN_OUT:function(e){return e<.5?$3569e5716b6e61f7$var$Easing.Quartic.IN(2*e)/2:$3569e5716b6e61f7$var$Easing.Quartic.OUT(2*(e-.5))/2+.5}},
//!/namespace
//!namespace Quintic
Quintic:{IN:function(e){return e*e*e*e*e},OUT:function(e){return 1-$3569e5716b6e61f7$var$Easing.Quintic.IN(1-e)},IN_OUT:function(e){return e<.5?$3569e5716b6e61f7$var$Easing.Quintic.IN(2*e)/2:$3569e5716b6e61f7$var$Easing.Quintic.OUT(2*(e-.5))/2+.5}},
//!/namespace
//!namespace Sine
Sine:{IN:function(e){return 1-Math.sin(1.5708*(1-e))},OUT:function(e){return Math.sin(1.5708*e)},IN_OUT:function(e){return(Math.cos(3.1416*e)-1)/-2}},
//!/namespace
//!namespace Step
Step:{IN:function(e){return 1!=e?0:1},OUT:function(e){return 1!=e?0:1},IN_OUT:function(e){return 1!=e?0:1}}};var $3569e5716b6e61f7$export$2e2bcd8739ae039=$3569e5716b6e61f7$var$Easing,$lTI0F=parcelRequire("lTI0F"),$lTI0F=parcelRequire("lTI0F");
//![import "../utils/priority-queue"]
//!class Boot
const $03dacdb15d88825e$var$Boot={modules:new $b280b216ed4b8038$export$2e2bcd8739ae039,register:function(e){return this.modules.add(e)},unregister:function(e){this.modules.remove(e),this.modules.cleanup()},startup:function(e=null){this.modules.forEachAsync(((e,t)=>{!1!==e.onStartup(t)&&t()}),e)},shutdown:function(e=null){this.modules.forEachAsyncRev(((e,t)=>{!1!==e.onShutdown(t)&&t()}),e)}};
//!/class
//!namespace Boot
//!interface Module
$03dacdb15d88825e$var$Boot.Module=$lTI0F.Class.extend({className:"Module",priority:5,__ctor:function(){$03dacdb15d88825e$var$Boot.register(this)},__dtor:function(){$03dacdb15d88825e$var$Boot.unregister(this)},onStartup:function(e){},onShutdown:function(e){}});var//!/interface
//!/namespace
$03dacdb15d88825e$export$2e2bcd8739ae039=$03dacdb15d88825e$var$Boot;
//!class sys
const $cf4285abf605e9c9$var$system={initialized:!1,screenWidth:0,screenHeight:0,renderer:null,time:0,dt:0,_timeout:null,_interval:null,_span:null,update:null,draw:null,onPaused:null,onResumed:null,options:{gl:!0,log:!1,antialias:!1,background:"#000000",orientation:"automatic",screenWidth:null,screenHeight:null,fps:144,minFps:24,preallocate:!1},init:function(e){return new Promise(((t,i)=>{if(this.initialized)return t();Object.assign(this.options,e),$68eb0e0111ce8878$export$2e2bcd8739ae039.config({pixelated:!this.options.antialias,filter:this.options.antialias?"LINEAR":"NEAREST"}),$fde096e7347cb963$export$2e2bcd8739ae039.init(this.options),$fde096e7347cb963$export$2e2bcd8739ae039.updateQueueAdd({update:function(e){$cf4285abf605e9c9$var$system.time=$fde096e7347cb963$export$2e2bcd8739ae039.frameTime,$cf4285abf605e9c9$var$system.dt=e,$cf4285abf605e9c9$var$system._timeout.exec(e),$cf4285abf605e9c9$var$system._interval.exec(e),$cf4285abf605e9c9$var$system._span.exec(e),$cf4285abf605e9c9$var$system.update.exec(e)}}),$fde096e7347cb963$export$2e2bcd8739ae039.drawQueueAdd({draw:function(e){$cf4285abf605e9c9$var$system.draw.exec(e)}}),$03dacdb15d88825e$export$2e2bcd8739ae039.startup((function(){$fde096e7347cb963$export$2e2bcd8739ae039.start(),$cf4285abf605e9c9$var$system.screenWidth=$fde096e7347cb963$export$2e2bcd8739ae039.screenWidth,$cf4285abf605e9c9$var$system.screenHeight=$fde096e7347cb963$export$2e2bcd8739ae039.screenHeight,$cf4285abf605e9c9$var$system.renderer=$fde096e7347cb963$export$2e2bcd8739ae039.renderer,$cf4285abf605e9c9$var$system._timeout=$45a34d9ad9468512$export$2e2bcd8739ae039.Pool.alloc(),$cf4285abf605e9c9$var$system._interval=$45a34d9ad9468512$export$2e2bcd8739ae039.Pool.alloc(),$cf4285abf605e9c9$var$system._span=$45a34d9ad9468512$export$2e2bcd8739ae039.Pool.alloc(),$cf4285abf605e9c9$var$system.update=$45a34d9ad9468512$export$2e2bcd8739ae039.Pool.alloc(),$cf4285abf605e9c9$var$system.draw=$45a34d9ad9468512$export$2e2bcd8739ae039.Pool.alloc(),window.onblur=function(){$cf4285abf605e9c9$var$system.pause(!0)},window.onfocus=function(){$cf4285abf605e9c9$var$system.resume(!0)},$cf4285abf605e9c9$var$system.initialized=!0,t()}))}))},pause:function(e=!1){null!==$cf4285abf605e9c9$var$system.onPaused&&$cf4285abf605e9c9$var$system.onPaused(e)},resume:function(e=!1){null!==$cf4285abf605e9c9$var$system.onResumed&&$cf4285abf605e9c9$var$system.onResumed(e)},timeout:function(e,t,i=null,r=null,n=null,a=null){this._timeout.add(this._updateTimeout,e,t,i,r,n,a)},_updateTimeout:function(e,t,i,r,n,a,s){return this.arg0-=e,this.arg0>0||(i(r,n,a,s),!1)},interval:function(e,t,i=null,r=null,n=null){this._interval.add(this._updateInterval,0,e,t,i,r,n)},_updateInterval:function(e,t,i,r,n,a,s){return this.arg0+=e,this.arg0<this.arg1||(this.arg0-=this.arg1,r(n,a,s))},span:function(e,t,i=null,r=null,n=null){this._span.add(this._updateSpan,0,e,t,i,r,n)},_updateSpan:function(e,t,i,r,n,a,s){return this.arg0+=e,this.arg0>this.arg1&&(e-=this.arg0-this.arg1,this.arg0=this.arg1),!1!==r(this.arg0/this.arg1,e,n,a,s)&&this.arg0!==this.arg1}};var $cf4285abf605e9c9$export$2e2bcd8739ae039=$cf4285abf605e9c9$var$system,$lTI0F=parcelRequire("lTI0F");
//!class Block
const $8a234cbdd1616e86$var$Block=$lTI0F.Class.extend({className:"Anim:Block",commands:null,first:!0,current:!1,time:0,init:function(){return this.commands=$5ffbe5e8d10cd81c$export$2e2bcd8739ae039.Pool.alloc(),this.reset(0),this},__dtor:function(){this.clear(),this.commands.free()},add:function(e){return this.commands.push(e),e},clone:function(){let e=$8a234cbdd1616e86$var$Block.alloc();for(let t=this.commands.top;null!==t;t=t.next)e.commands.push(t.value.clone());return e},clear:function(){return this.commands.clear(),this.reset(0),this},reset:function(e=0){return this.first=!0,this.current=null,this.time=e,this},restart:function(){return this.first=!0,this},isFinished:function(){return!0===this.first&&(this.current=this.commands.top,this.first=!1),null===this.current},update:function(e){for(;!this.isFinished();){let t=this.current.value.update(e,this);if(!0!==t)return t;this.current=this.current.next}return!0}});$3755e11d40ee463d$export$2e2bcd8739ae039.attachTo($8a234cbdd1616e86$var$Block,8192);var $8a234cbdd1616e86$export$2e2bcd8739ae039=$8a234cbdd1616e86$var$Block,$lTI0F=parcelRequire("lTI0F");
//!class Command
const $e59415f90bae69ee$var$Command=$lTI0F.Class.extend({className:"Anim:Command",op:null,started:!1,field:null,value:null,duration:0,_duration:0,count:0,_count:0,startValue:0,_startValue:0,endValue:0,_endValue:0,easing:null,_cur:null,_last:null,block:null,blocks:null,table:null,snd:null,fn:null,init:function(e,t){return this.op=e,this.started=!1,this.block=null,this.blocks=null,this.table=null,this.snd=null,this.fn=null,!1!==t&&e.init(this,!1),this},__dtor:function(){null!==this.block&&this.block.clear().free(),null!==this.blocks&&this.blocks.clear().free()},clone:function(){let e=$e59415f90bae69ee$var$Command.alloc(this.op,!1);if(e.field=this.field,e.value=this.value,e.duration=this.duration,e.count=this.count,e.startValue=this.startValue,e.endValue=this.endValue,e.easing=this.easing,e.table=this.table,e.snd=this.snd,e.fn=this.fn,null!==this.block&&(e.block=this.block.clone()),null!==this.blocks){e.blocks=$5ffbe5e8d10cd81c$export$2e2bcd8739ae039.Pool.alloc();for(let t=this.blocks.top;null!==t;t=t.next)e.blocks.push(t.value.clone())}return e},ready:function(){this.op.init(this,!0)},update:function(e,t){return this.op.update(e,t,this)}});$3755e11d40ee463d$export$2e2bcd8739ae039.attachTo($e59415f90bae69ee$var$Command);var $e59415f90bae69ee$export$2e2bcd8739ae039=$e59415f90bae69ee$var$Command,$52fe5271af6feef9$export$2e2bcd8739ae039={init:function(e,t=!1){if(!t)return e.block=$8a234cbdd1616e86$export$2e2bcd8739ae039.alloc(),void(e.blocks=$5ffbe5e8d10cd81c$export$2e2bcd8739ae039.Pool.alloc());let i;for(;null!=(i=e.block.commands.shift());){let t=$8a234cbdd1616e86$export$2e2bcd8739ae039.alloc();t.add(i),e.blocks.push(t)}e.block.free(),e.block=null},update:function(e,t,i){if(!1===i.started){for(let e=i.blocks.top;null!==e;e=e.next)e.value.reset(t.time);i.started=!0}let r=t.time,n=0,a=0;for(let t=i.blocks.top;null!==t;t=t.next){let i=t.value.update(e);!0===i?n++:null===i&&a++,t.value.time>r&&(r=t.value.time)}return n+a==i.blocks.length&&(i.started=!1,t.time=r,!0)}},$28418ecd69cb7a00$export$2e2bcd8739ae039={init:function(e,t=!1){t||(e.block=$8a234cbdd1616e86$export$2e2bcd8739ae039.alloc())},update:function(e,t,i){!1===i.started&&(i.block.reset(t.time),i.started=!0);let r=i.block.update(e);return!0!==r?r:(i.started=!1,t.time=i.block.time,!0)}},$744608404c94ae00$export$2e2bcd8739ae039={init:function(e,t=!1){t||(e.block=$8a234cbdd1616e86$export$2e2bcd8739ae039.alloc())},update:function(e,t,i){!1===i.started&&(i.block.reset(t.time),i._count=i.count,i.started=!0);let r=i.block.update(e);return!0!==r?r:i._count<=1?(i.started=!1,t.time=i.block.time,!0):(i.block.restart(),i._count--,!1)}},$316a9b98407c8266$export$2e2bcd8739ae039={init:function(e,t=!1){},update:function(e,t,i){return e.setValue(i.field,e.getValue(i.field,i.value)),!0}},$12fac9c77770ec48$export$2e2bcd8739ae039={init:function(e,t=!1){},update:function(e,t,i){return t.restart(),!0}},$lTI0F=parcelRequire("lTI0F"),$9753a61aac9de17e$export$2e2bcd8739ae039={init:function(e,t=!1){},update:function(e,t,i){return!1===i.started&&(i._duration="string"===$lTI0F.Rinn.typeOf(i.duration)?e.getValue(i.duration):i.duration,i.started=!0),!(e.time<t.time+i._duration)&&(i.started=!1,t.time+=i._duration,!0)}},$lTI0F=parcelRequire("lTI0F"),$7084299a5c2e7ef7$export$2e2bcd8739ae039={init:function(e,t=!1){},update:function(e,t,i){!1===i.started&&(i._startValue=e.getValue(i.field,i.startValue),i._duration="string"===$lTI0F.Rinn.typeOf(i.duration)?e.getValue(i.duration):i.duration,i.started=!0),i._endValue=e.getValue(i.field,i.endValue,i._startValue);let r=1;return e.time<t.time+i._duration&&(r=(e.time-t.time)/i._duration),i.easing&&1!=r?e.setValue(i.field,i.easing(r)*(i._endValue-i._startValue)+i._startValue):e.setValue(i.field,r*(i._endValue-i._startValue)+i._startValue),1==r&&(i.started=!1,t.time+=i._duration,!0)}},$lTI0F=parcelRequire("lTI0F"),$2407cf27bf0f221f$export$2e2bcd8739ae039={init:function(e,t=!1){},update:function(e,t,r){!1===r.started&&(r._duration="string"===$lTI0F.Rinn.typeOf(r.duration)?e.getValue(r.duration):r.duration,r._last=null,r.started=!0);let n=1;if(e.time<t.time+r._duration&&(n=(e.time-t.time)/r._duration),r.easing&&1!=n?r._cur=int(r.easing(n)*r.count):r._cur=int(n*r.count),r._cur!=r._last){let t=e.getValue(r.field);for(;;){if(int(Math.random()*(r.endValue-r.startValue+1))+r.startValue!=t)break}e.setValue(r.field,i),r._last=r._cur}return 1==n&&(r.started=!1,t.time+=r._duration,!0)}},$lTI0F=parcelRequire("lTI0F"),$336a8399d6f4e247$export$2e2bcd8739ae039={init:function(e,t=!1){if(!t)return;let i=[];for(let t=0;t<e.count;t++)i.push(t%(e.endValue-e.startValue+1)+e.startValue);for(let t=e.count>>2;t>0;t--){let t=int(Math.random()*e.count),r=int(Math.random()*e.count),n=i[r];i[r]=i[t],i[t]=n}e.table=i},update:function(e,t,i){!1===i.started&&(i._duration="string"===$lTI0F.Rinn.typeOf(i.duration)?e.getValue(i.duration):i.duration,i.started=!0);let r,n=1;return e.time<t.time+i._duration&&(n=(e.time-t.time)/i._duration),r=i.easing&&1!=n?i.easing(n)*(i.count-1):n*(i.count-1),e.setValue(i.field,i.table[int((r+i.count)%i.count)]),1==n&&(i.started=!1,t.time+=i._duration,!0)}};
//!class Anim
const $26e32f922146c7f0$var$Anim=$lTI0F.Class.extend({className:"Anim",initialData:null,data:null,blockStack:null,cmdStack:null,timeScale:1,block:null,time:0,paused:!1,finished:!1,running:!1,finishedCallback:null,finishedCallbackHandler:null,finishedCallbackContext:null,autoDispose:!1,__ctor:function(){return this.initialData={},this.data={},this.block=$8a234cbdd1616e86$export$2e2bcd8739ae039.alloc(),this.blockStack=$5ffbe5e8d10cd81c$export$2e2bcd8739ae039.Pool.alloc(),this.cmdStack=$5ffbe5e8d10cd81c$export$2e2bcd8739ae039.Pool.alloc(),this.running=!1,this.autoDispose=!1,this.finishedCallback=null,this.finishedCallbackHandler=null,this.finishedCallbackContext=null,this.reset()},__dtor:function(){this.block.free(),this.blockStack.clear().free(),this.cmdStack.clear().free(),null!==this.finishedCallbackHandler&&(this.finishedCallbackHandler.free(),this.finishedCallbackHandler=null),null!==this.finishedCallbackContext&&(this.finishedCallbackContext.free(),this.finishedCallbackContext=null)},copyTo:function(e){return e.clear(),dispose(e.block),e.block=this.block.clone(),e.initialData=this.initialData,e.reset()},clone:function(e=!1){let t=new $26e32f922146c7f0$var$Anim;return t.autoDispose=e,this.copyTo(t),t},onFinished:function(e){return this.finishedCallback=e,this},then:function(e,t=null){return e?(this.finishedCallback!==this.thenCallback&&(this.finishedCallback=this.thenCallback,null===this.finishedCallbackHandler?(this.finishedCallbackHandler=$5ffbe5e8d10cd81c$export$2e2bcd8739ae039.Pool.alloc(),this.finishedCallbackContext=$5ffbe5e8d10cd81c$export$2e2bcd8739ae039.Pool.alloc()):(this.finishedCallbackHandler.reset(),this.finishedCallbackContext.reset())),this.finishedCallbackHandler.push(e),this.finishedCallbackContext.push(t),this):this},thenCallback:function(){if(!this.finishedCallbackHandler.length)return!1;let e=this.finishedCallbackContext.shift();this.finishedCallbackHandler.shift()(this,e)},clear:function(){return this.blockStack.clear(),this.cmdStack.clear(),this.block.clear(),this.paused=!1,this.finished=!1,this.time=0,this.timeScale=1,null!==this.finishedCallbackHandler&&(this.finishedCallbackHandler.free(),this.finishedCallbackHandler=null),null!==this.finishedCallbackContext&&(this.finishedCallbackContext.free(),this.finishedCallbackContext=null),this.finishedCallback=null,this},reset:function(){return this.blockStack.clear(),this.cmdStack.clear(),this.block.reset(),this.paused=!1,this.finished=!1,this.time=0,this.timeScale=1,Object.assign(this.data,this.initialData),this},initial:function(e=null){return null!==e&&(this.initialData=e),Object.assign(this.data,this.initialData),this},speed:function(e){return this.timeScale=e>0?e:1,this},output:function(e){return this.data=e,this},pause:function(){return this.paused||(this.paused=!0),this},resume:function(){return this.finished=!1,this.paused=!1,this.running||this.run(!1),this},run:function(e=!0){return this.running||(1==e&&this.reset(),$cf4285abf605e9c9$export$2e2bcd8739ae039.update.add(this.update,this),this.running=!0),this},setValue:function(e,t){let i=this.data;if("string"!=typeof e)if("function"==typeof e)e(this,t);else{let r=0;for(;null!==i&&r<e.length-1;)i=i[e[r++]];i[e[r]]=t}else i[e]=t},getValue:function(e,t=null,i=null){let r=this.data;if("string"!=typeof e)if("function"==typeof e)r=e(this,null);else{let t=0;for(;null!==r&&t<e.length;)r=r[e[t++]]}else r=r[e];if(null===t&&(t=r),null===i&&(i=r),"string"==typeof t)switch(t[0]){case"+":t=i+Number(t.substr(1));break;case"-":t=i-Number(t.substr(1));break;default:t=Number(t)}else"function"==typeof t&&(t=t(r,i,this));return t},update:function(e,t=null){if(null===t&&(t=this),t.paused||t.block.isFinished())return t.running=!1,!1;if(t.time+=e*t.timeScale*$26e32f922146c7f0$var$Anim.timeScale,!0!==t.block.update(t))return!0;let i=t.finished,r=t.block.length,n=t.block;return t.finished=!0,i||null===t.finishedCallback||(!1===t.finishedCallback(t.data,t)&&(t.finishedCallback=null),t.block===n&&t.block.length==r)?(t.running=!1,t.autoDispose&&dispose(t),!1):(t.resume(),!0)},prepareFieldName:function(e){return"function"==typeof e?e:-1!=e.indexOf(".")?e.split("."):e},parallel:function(){let e=this.block.add($e59415f90bae69ee$export$2e2bcd8739ae039.alloc($52fe5271af6feef9$export$2e2bcd8739ae039));return this.blockStack.push(this.block),this.cmdStack.push(e),this.block=e.block,this},serial:function(){let e=this.block.add($e59415f90bae69ee$export$2e2bcd8739ae039.alloc($28418ecd69cb7a00$export$2e2bcd8739ae039));return this.blockStack.push(this.block),this.cmdStack.push(e),this.block=e.block,this},repeat:function(e){let t=this.block.add($e59415f90bae69ee$export$2e2bcd8739ae039.alloc($744608404c94ae00$export$2e2bcd8739ae039));return t.count=e,this.blockStack.push(this.block),this.cmdStack.push(t),this.block=t.block,this},end:function(){return this.cmdStack.pop().ready(),this.block=this.blockStack.pop(),this},set:function(e,t){let i=this.block.add($e59415f90bae69ee$export$2e2bcd8739ae039.alloc($316a9b98407c8266$export$2e2bcd8739ae039));return i.field=this.prepareFieldName(e),i.value=t,this},restart:function(){return this.block.add($e59415f90bae69ee$export$2e2bcd8739ae039.alloc($12fac9c77770ec48$export$2e2bcd8739ae039)),this},wait:function(e){return this.block.add($e59415f90bae69ee$export$2e2bcd8739ae039.alloc($9753a61aac9de17e$export$2e2bcd8739ae039)).duration=e,this},range:function(e,t,i,r,n=null){let a=this.block.add($e59415f90bae69ee$export$2e2bcd8739ae039.alloc($7084299a5c2e7ef7$export$2e2bcd8739ae039));return a.field=this.prepareFieldName(e),a.duration=t,a.startValue=i,a.endValue=r,a.easing=n,this},rangeTo:function(e,t,i,r=null){let n=this.block.add($e59415f90bae69ee$export$2e2bcd8739ae039.alloc($7084299a5c2e7ef7$export$2e2bcd8739ae039));return n.field=this.prepareFieldName(e),n.duration=t,n.startValue=null,n.endValue=i,n.easing=r,this},rand:function(e,t,i,r,n,a=null){let s=this.block.add($e59415f90bae69ee$export$2e2bcd8739ae039.alloc($2407cf27bf0f221f$export$2e2bcd8739ae039));return s.field=this.prepareFieldName(e),s.duration=t,s.count=i,s.startValue=r,s.endValue=n,s.easing=a,this},randt:function(e,t,i,r,n,a){let s=this.block.add($e59415f90bae69ee$export$2e2bcd8739ae039.alloc($336a8399d6f4e247$export$2e2bcd8739ae039));return s.field=this.prepareFieldName(e),s.duration=t,s.count=i,s.startValue=r,s.endValue=n,s.easing=a,s.ready(),this},play:function(e){return this.block.add($e59415f90bae69ee$export$2e2bcd8739ae039.alloc(PLAY)).snd=e,this},exec:function(e){return this.block.add($e59415f90bae69ee$export$2e2bcd8739ae039.alloc(EXEC)).fn=e,this},_bounds_x1:function(e,t){if(null===t)return e.data.bounds.x1;e.data.translate(int(t)-e.data.bounds.x1,0)},_bounds_y1:function(e,t){if(null===t)return e.data.bounds.y1;e.data.translate(0,int(t)-e.data.bounds.y1)},setX:function(e){return this.set(this._bounds_x1,e)},setY:function(e){return this.set(this._bounds_y1,e)},position:function(e,t){return this.set(this._bounds_x1,e).set(this._bounds_y1,t)},translateX:function(e,t,i){return this.range(this._bounds_x1,e,null,(t<0?"-":"+")+Math.abs(t),i)},translateY:function(e,t,i){return this.range(this._bounds_y1,e,null,(t<0?"-":"+")+Math.abs(t),i)},translate:function(e,t,i,r,n=null){return this.parallel().range(this._bounds_x1,e,null,(t<0?"-":"+")+Math.abs(t),r).range(this._bounds_y1,e,null,(i<0?"-":"+")+Math.abs(i),n||r).end()},moveTo:function(e,t,i,r,n=null){return this.parallel().range(this._bounds_x1,e,null,t,r).range(this._bounds_y1,e,null,i,n||r).end()},moveX:function(e,t,i=null){return this.range(this._bounds_x1,e,null,t,i)},moveY:function(e,t,i=null){return this.range(this._bounds_y1,e,null,t,i)},scaleX:function(e,t,i){return this.range("sx",e,null,t,i)},scaleY:function(e,t,i){return this.range("sy",e,null,t,i)},scale:function(e,t,i,r,n=null){return this.parallel().range("sx",e,null,t,r).range("sy",e,null,i,n||r).end()},rotate:function(e,t,i){return this.range("angle",e,null,(t<0?"-":"+")+Math.abs(t),i)}});$26e32f922146c7f0$var$Anim.timeScale=1,$26e32f922146c7f0$var$Anim.speed=function(e){$26e32f922146c7f0$var$Anim.timeScale=e>0?e:1},$3755e11d40ee463d$export$2e2bcd8739ae039.createPool($26e32f922146c7f0$var$Anim,8192);var $26e32f922146c7f0$export$2e2bcd8739ae039=$26e32f922146c7f0$var$Anim,$lTI0F=parcelRequire("lTI0F");
//![import "../math/bounds2"]
//![import "../utils/handler"]
//!class GridElement
const $8d8e7c58165f35d0$var$GridElement=$lTI0F.Class.extend({className:"GridElement",id:null,bounds:null,flags:0,data:null,ext:null,container:null,_grid_remove_node:null,remover:null,__ctor:function(e,t,i,r){this.bounds=$33fa7ae7f1b4b0c7$export$2e2bcd8739ae039.Pool.alloc(),this.bounds.translate(e,t),this.bounds.resize(i,r,!0),this.flags=$8d8e7c58165f35d0$var$GridElement.ALIVE|$8d8e7c58165f35d0$var$GridElement.VISIBLE|$8d8e7c58165f35d0$var$GridElement.DIRTY|$8d8e7c58165f35d0$var$GridElement.DEPTH_FLAG,this.data=null,this.ext=null,this.remover=$45a34d9ad9468512$export$2e2bcd8739ae039.Pool.alloc(this)},__dtor:function(){this.alive(!1),null!==this.data&&(dispose(this.data),this.data=null),this.remover.exec(),this.remover.free(),this.bounds.free()},setId:function(e){return this.id=e,this},setFlags:function(e){return this.flags|=e,this},clearFlags:function(e){return this.flags&=~e,this},getFlags:function(e,t=null){return null===t?(this.flags&e)===e:(this.flags&e)===t},setData:function(e){return this.data=e,this},getData:function(){return this.data},setExt:function(e){return this.ext=e,this},getExt:function(){return this.ext},exec:function(e,t=null,i=null,r=null,n=null,a=null,s=null,o=null,l=null,c=null,h=null){return!(null===this.ext||!this.ext.hasOwnProperty(e))&&this.ext[e](this,t,i,r,n,a,s,o,l,c,h)},visible:function(e=null,t=!1){return null===e?!!(this.flags&$8d8e7c58165f35d0$var$GridElement.VISIBLE):(!t&&this.flags&$8d8e7c58165f35d0$var$GridElement.VISIBLE_LOCK||(this.flags&=~$8d8e7c58165f35d0$var$GridElement.VISIBLE,e&&(this.flags|=$8d8e7c58165f35d0$var$GridElement.VISIBLE)),this)},visibleLock:function(e=null){return null===e?!!(this.flags&$8d8e7c58165f35d0$var$GridElement.VISIBLE_LOCK):(this.flags&=~$8d8e7c58165f35d0$var$GridElement.VISIBLE_LOCK,e&&(this.flags|=$8d8e7c58165f35d0$var$GridElement.VISIBLE_LOCK),this)},alive:function(e=null){return null===e?!!(this.flags&$8d8e7c58165f35d0$var$GridElement.ALIVE):(this.flags&=~$8d8e7c58165f35d0$var$GridElement.ALIVE,e&&(this.flags|=$8d8e7c58165f35d0$var$GridElement.ALIVE),this)},dirty:function(e=null){return null===e?!!(this.flags&$8d8e7c58165f35d0$var$GridElement.DIRTY):(this.flags&=~$8d8e7c58165f35d0$var$GridElement.DIRTY,e&&(this.flags|=$8d8e7c58165f35d0$var$GridElement.DIRTY),this)},depthFlagEnabled:function(e=null){return null===e?!!(this.flags&$8d8e7c58165f35d0$var$GridElement.DEPTH_FLAG_ENABLED):(this.flags&=~$8d8e7c58165f35d0$var$GridElement.DEPTH_FLAG_ENABLED,e&&(this.flags|=$8d8e7c58165f35d0$var$GridElement.DEPTH_FLAG_ENABLED),this)},depthFlag:function(e=null){return null===e?!!(this.flags&$8d8e7c58165f35d0$var$GridElement.DEPTH_FLAG):(this.flags&=~$8d8e7c58165f35d0$var$GridElement.DEPTH_FLAG,e&&(this.flags|=$8d8e7c58165f35d0$var$GridElement.DEPTH_FLAG),this)},remove:function(){return this.remover.exec(),this},sync:function(){return null!==this.container&&this.getFlags($8d8e7c58165f35d0$var$GridElement.ALIVE|$8d8e7c58165f35d0$var$GridElement.DIRTY)?(this.container.sync(this),this):this},resize:function(e,t){return this.flags|=$8d8e7c58165f35d0$var$GridElement.DIRTY,this.bounds.resize(e,t,!0),this},resizeBy:function(e,t){return this.flags|=$8d8e7c58165f35d0$var$GridElement.DIRTY,this.bounds.resizeBy(e,t,!0),this},translate:function(e,t,i=!1){return this.flags|=$8d8e7c58165f35d0$var$GridElement.DIRTY,this.bounds.translate(e,t,i),this},setPosition:function(e,t=!1){return!1===t&&(t=e.y,e=e.x),this.translate(null!==e?upscale(e)-this.bounds.ux1:0,null!==t?upscale(t)-this.bounds.uy1:0,!0)}});$8d8e7c58165f35d0$var$GridElement.ALIVE=1,$8d8e7c58165f35d0$var$GridElement.VISIBLE=2,$8d8e7c58165f35d0$var$GridElement.VISIBLE_LOCK=4,$8d8e7c58165f35d0$var$GridElement.DIRTY=8,$8d8e7c58165f35d0$var$GridElement.DEPTH_FLAG_ENABLED=16,$8d8e7c58165f35d0$var$GridElement.DEPTH_FLAG=32,$8d8e7c58165f35d0$var$GridElement.WRAP_EXTENTS=64,$8d8e7c58165f35d0$var$GridElement.USERDEF=256,$8d8e7c58165f35d0$var$GridElement.LAST_FLAG=128,$8d8e7c58165f35d0$var$GridElement.allocFlag=function(){let e=$8d8e7c58165f35d0$var$GridElement.LAST_FLAG;if(1073741824===e)throw new Error("allocFlag: out of bit space to allocate another flag");return e<<=1,$8d8e7c58165f35d0$var$GridElement.LAST_FLAG=e,e};var $8d8e7c58165f35d0$export$2e2bcd8739ae039=$8d8e7c58165f35d0$var$GridElement,$lTI0F=parcelRequire("lTI0F");
//![import "./grid-element"]
//![import "../utils/list"]
//!class Grid
const $7379a5ec690d13e4$var$Grid=$lTI0F.Class.extend({className:"Grid",grid:null,count:0,offsx:0,offsy:0,kx:0,ky:0,stride:0,verifyIntersection:!0,__ctor:function(e,t,i,r=null){e=1<<Math.ceil(Math.log2(e)),t=1<<Math.ceil(Math.log2(t)),this.offsx=e>>1,this.offsy=t>>1,null===r&&(r=i),i=Math.floor(Math.log2(i)),r=Math.floor(Math.log2(r)),this.kx=i,this.ky=r;let n=e>>i,a=t>>r;n||(i=Math.log2(e),n=1),a||(r=Math.log2(t),a=1),this.grid=new Array(n*a).fill(null),this.stride=n},__dtor:function(){this.clear(),this.grid=null},clear:function(){for(let e=0;e<this.grid.length;e++){if(null===this.grid[e])continue;let t;for(;null!==(t=this.grid[e].shift());)t.remover.remove(this._remove,this),t.container=null,dispose(t);this.grid[e].free(),this.grid[e]=null}this.count=0},reset:function(){for(let e=0;e<this.grid.length;e++){if(null===this.grid[e])continue;let t;for(;null!==(t=this.grid[e].shift());)t.remover.remove(this._remove,this),t.container=null;this.grid[e].free(),this.grid[e]=null}this.count=0},add:function(e){if(!$8d8e7c58165f35d0$export$2e2bcd8739ae039.isInstance(e))throw new Error("argument must be a GridElement");let t=int(e.bounds.y1+this.offsy>>this.ky)*this.stride+int(e.bounds.x1+this.offsx>>this.kx);return!(t<0||t>=this.grid.length)&&(null===this.grid[t]&&(this.grid[t]=$5ffbe5e8d10cd81c$export$2e2bcd8739ae039.Pool.alloc()),this.grid[t].push(e),this.count++,e.container=this,e._grid_remove_node=e.remover.add(this._remove,this,t,this.grid[t].bottom),!0)},_remove:function(e,t,i,r){return t.grid[i].remove(r),t.count--,e.container=null,!1},remove:function(e){return e.remover.execc(this._grid_remove_node),e},sync:function(e){e.clearFlags($8d8e7c58165f35d0$export$2e2bcd8739ae039.DIRTY);let t=e._grid_remove_node,i=int(e.bounds.y1+this.offsy>>this.ky)*this.stride+int(e.bounds.x1+this.offsx>>this.kx);return i<0||i>=this.grid.length?(e.remover.execc(t),!1):(t.arg1===i||(this.grid[t.arg1].remove(t.arg2),null===this.grid[i]&&(this.grid[i]=$5ffbe5e8d10cd81c$export$2e2bcd8739ae039.Pool.alloc()),this.grid[i].push(e),t.arg1=i,t.arg2=this.grid[i].bottom),!0)},forEachInRegion:function(e,t,i,r,n){let a=(e.y1+this.offsy-(1<<this.ky-1)>>this.ky)*this.stride,s=(e.y2+this.offsy+(1<<this.ky-1)>>this.ky)*this.stride,o=e.x1+this.offsx-(1<<this.kx-1)>>this.kx,l=e.x2+this.offsx+(1<<this.kx-1)>>this.kx,c=this.grid.length-1;a<0&&(a=0),s<0&&(s=0),o<0&&(o=0),l<0&&(l=0),a>c&&(a=c),s>c&&(s=c),o>c&&(o=c),l>c&&(l=c);for(let h=a;h<=s;h+=this.stride)for(let u=o;u<=l;u++){let d=h+u;if(!(d>c||null===this.grid[d]))for(let c=this.grid[d].top;c;c=c.next)if(c.value.getFlags(t,i)&&(!this.verifyIntersection||!(h<=a+1||u<=o+1||h>=s-1||u>=l-1)||c.value.bounds.intersects(e))&&!1===r(c.value,n))return}},selectInRegion:function(e,t,i){let r=(e.y1+this.offsy-(1<<this.ky-1)>>this.ky)*this.stride,n=(e.y2+this.offsy+(1<<this.ky-1)>>this.ky)*this.stride,a=e.x1+this.offsx-(1<<this.kx-1)>>this.kx,s=e.x2+this.offsx+(1<<this.kx-1)>>this.kx,o=this.grid.length-1;r<0&&(r=0),n<0&&(n=0),a<0&&(a=0),s<0&&(s=0),r>o&&(r=o),n>o&&(n=o),a>o&&(a=o),s>o&&(s=o);let l=$5ffbe5e8d10cd81c$export$2e2bcd8739ae039.Pool.alloc();for(let c=r;c<=n;c+=this.stride)for(let h=a;h<=s;h++){let u=c+h;if(!(u>o||null===this.grid[u]))for(let o=this.grid[u].top;o;o=o.next)o.value.getFlags(t,i)&&(this.verifyIntersection&&(c<=r+1||h<=a+1||c>=n-1||h>=s-1)&&!o.value.bounds.intersects(e)||l.push(o.value))}return l},countInRegion:function(e,t,i){let r=(e.y1+this.offsy-(1<<this.ky-1)>>this.ky)*this.stride,n=(e.y2+this.offsy+(1<<this.ky-1)>>this.ky)*this.stride,a=e.x1+this.offsx-(1<<this.kx-1)>>this.kx,s=e.x2+this.offsx+(1<<this.kx-1)>>this.kx,o=this.grid.length-1;r<0&&(r=0),n<0&&(n=0),a<0&&(a=0),s<0&&(s=0),r>o&&(r=o),n>o&&(n=o),a>o&&(a=o),s>o&&(s=o);let l=0;for(let c=r;c<=n;c+=this.stride)for(let h=a;h<=s;h++){let u=c+h;if(!(u>o||null===this.grid[u]))for(let o=this.grid[u].top;o;o=o.next)o.value.getFlags(t,i)&&(this.verifyIntersection&&(c<=r+1||h<=a+1||c>=n-1||h>=s-1)&&!o.value.bounds.intersects(e)||l++)}return l},selectFirst:function(e,t,i){let r=(e.y1+this.offsy-(1<<this.ky-1)>>this.ky)*this.stride,n=(e.y2+this.offsy+(1<<this.ky-1)>>this.ky)*this.stride,a=e.x1+this.offsx-(1<<this.kx-1)>>this.kx,s=e.x2+this.offsx+(1<<this.kx-1)>>this.kx,o=this.grid.length-1;r<0&&(r=0),n<0&&(n=0),a<0&&(a=0),s<0&&(s=0),r>o&&(r=o),n>o&&(n=o),a>o&&(a=o),s>o&&(s=o);for(let l=r;l<=n;l+=this.stride)for(let c=a;c<=s;c++){let h=l+c;if(!(h>o||null===this.grid[h]))for(let o=this.grid[h].top;o;o=o.next)if(o.value.getFlags(t,i)&&(!this.verifyIntersection||!(l<=r+1||c<=a+1||l>=n-1||c>=s-1)||o.value.bounds.intersects(e)))return o.value}return null}});var $7379a5ec690d13e4$export$2e2bcd8739ae039=$7379a5ec690d13e4$var$Grid,$lTI0F=parcelRequire("lTI0F"),$lTI0F=parcelRequire("lTI0F");
//!class Container
const $c0ca59ea4341de78$var$Container=$lTI0F.Class.extend({className:"Container",viewportBounds:null,width:0,height:0,zvalue:0,scene:null,flags:0,g:null,elementCount:0,drawCount:0,ldraw:null,__ctor:function(e=32768,t=32768){this.width=e,this.height=t,this.flags=$c0ca59ea4341de78$var$Container.VISIBLE|$c0ca59ea4341de78$var$Container.DEPTH_FLAG,this.ldraw=$45a34d9ad9468512$export$2e2bcd8739ae039.Pool.alloc(this)},__dtor:function(){this.ldraw.free()},visible:function(e=null){return null===e?!!(this.flags&$c0ca59ea4341de78$var$Container.VISIBLE):(this.flags&=~$c0ca59ea4341de78$var$Container.VISIBLE,e&&(this.flags|=$c0ca59ea4341de78$var$Container.VISIBLE),this)},depthFlag:function(e=null){return null===e?!!(this.flags&$c0ca59ea4341de78$var$Container.DEPTH_FLAG):(this.flags&=~$c0ca59ea4341de78$var$Container.DEPTH_FLAG,e&&(this.flags|=$c0ca59ea4341de78$var$Container.DEPTH_FLAG),this)},setViewportBounds:function(e){return this.viewportBounds=e,this},drawElement:function(e,t){return t.drawCount++,e.draw(t.g)},syncZ:function(e){e.__zvalue=this.zvalue+(e._zvalue+e.bounds.y2&262143)},sync:function(e){throw new Error("Container::sync not implemented")},clear:function(){throw new Error("Container::clear not implemented")},reset:function(){throw new Error("Container::reset not implemented")},add:function(e){throw new Error("Container::add not implemented")},remove:function(e){throw new Error("Container::remove not implemented")},draw:function(e){if(!this.visible())return;let t=e.pushDepthFlag(this.flags&$c0ca59ea4341de78$var$Container.DEPTH_FLAG);e.zvalue=this.zvalue,this.drawCount=0,this.g=e,this.render(),this.ldraw.exec(e),t&&e.popDepthFlag()},render:function(){throw new Error("Container::render not implemented")}});$c0ca59ea4341de78$var$Container.VISIBLE=1,$c0ca59ea4341de78$var$Container.DEPTH_FLAG=2;var $c0ca59ea4341de78$export$2e2bcd8739ae039=$c0ca59ea4341de78$var$Container,$lTI0F=parcelRequire("lTI0F");
//![import "../math/point2"]
//![import "../math/bounds2"]
//![import "../math/rect"]
//![import "../system/canvas"]
//!class Viewport
const $36f8d9ddfdfdb2c5$var$Viewport=$lTI0F.Class.extend({className:"Viewport",width:0,initialWidth:0,height:0,initialHeight:0,sx:0,sy:0,x:0,y:0,centerRatioX:0,centerRatioY:0,offset:null,container:null,focusFactorX:0,focusFactorY:0,focusRect:null,focusOffsX:0,focusOffsY:0,focusAxisX:!0,focusAxisY:!0,flags:0,scale:1,globalScale:1,bounds:null,padding:null,focusBounds:null,screenBounds:null,tmpPoint:null,__ctor:function(e,t,i,r,n,a){this.focusFactorX=.4,this.focusFactorY=.4,this.focusRect=null,this.sx=e,this.sy=t,this.width=this.initialWidth=i,this.height=this.initialHeight=r,this.x=0,this.y=0,this.bounds=$33fa7ae7f1b4b0c7$export$2e2bcd8739ae039.Pool.alloc(),this.padding=null,this.focusBounds=$33fa7ae7f1b4b0c7$export$2e2bcd8739ae039.Pool.alloc(),this.screenBounds=$33fa7ae7f1b4b0c7$export$2e2bcd8739ae039.Pool.alloc(),this.container=$33fa7ae7f1b4b0c7$export$2e2bcd8739ae039.Pool.alloc(),this.offset=$333d67efa04b2b0b$export$2e2bcd8739ae039.Pool.alloc(),this.flags=$36f8d9ddfdfdb2c5$var$Viewport.ENABLED,this.tmpPoint=$333d67efa04b2b0b$export$2e2bcd8739ae039.Pool.alloc(),this.setContainerBounds(-n>>1,-a>>1,n>>1,a>>1),this.updateScreenBounds(),this.updateBounds()},__dtor:function(){this.bounds.free(),this.focusBounds.free(),this.screenBounds.free(),this.container.free(),this.tmpPoint.free(),null!==this.padding&&this.padding.free()},enabled:function(e=null){return null===e?!!(this.flags&$36f8d9ddfdfdb2c5$var$Viewport.ENABLED):(this.flags&=~$36f8d9ddfdfdb2c5$var$Viewport.ENABLED,e&&(this.flags|=$36f8d9ddfdfdb2c5$var$Viewport.ENABLED),this)},topLeft:function(e=null){return null===e?!!(this.flags&$36f8d9ddfdfdb2c5$var$Viewport.TOP_LEFT):(this.flags&=~$36f8d9ddfdfdb2c5$var$Viewport.TOP_LEFT,e&&(this.flags|=$36f8d9ddfdfdb2c5$var$Viewport.TOP_LEFT),this)},setContainerBounds:function(e,t=null,i=null,r=null){return null===t&&(r=e.y2,i=e.x2,t=e.y1,e=e.x1),this.width=this.initialWidth,this.height=this.initialHeight,this.width>i-e&&(this.width=i-e),this.height>r-t&&(this.height=r-t),this.container.set(e,t,i,r),this},setPadding:function(e,t=null,i=null,r=null){return null===this.padding&&(this.padding=$33fa7ae7f1b4b0c7$export$2e2bcd8739ae039.Pool.alloc()),null===t&&(i=r=e,e=t=-e),this.padding.set(e,t,i,r),this},updateBounds:function(e=!1){let t,i,r,n,a,s,o,l;t=this.width>>1,i=this.height>>1,r=t/this.scale,n=i/this.scale,a=this.x-r+this.offset.x,s=this.y-n+this.offset.y,o=this.x+r+this.offset.x,l=this.y+n+this.offset.y,e&&(a<this.container.x1?this.offset.setX(this.container.x1-this.x+r):o>this.container.x2&&this.offset.setX(this.container.x2-this.x-r),s<this.container.y1?this.offset.setY(this.container.y1-this.y+n):l>this.container.y2&&this.offset.setY(this.container.y2-this.y-n),a=this.x-r+this.offset.x,s=this.y-n+this.offset.y,o=this.x+r+this.offset.x,l=this.y+n+this.offset.y),this.bounds.set(a,s,o,l),null!==this.padding&&this.bounds.add(this.padding),this.focusBounds.set(this.x-(this.focusFactorX*t+this.centerRatioX*t)/this.scale,this.y-(this.focusFactorY*i+this.centerRatioY*i)/this.scale,this.x+(this.focusFactorX*t+this.centerRatioX*t)/this.scale,this.y+(this.focusFactorY*i+this.centerRatioY*i)/this.scale)},updateScreenBounds:function(){this.screenBounds.set(this.sx,this.sy,this.sx+this.width,this.sy+this.height)},resize:function(e,t){return this.width=this.initialWidth=null!=e?e:this.width,this.height=this.initialHeight=null!=t?t:this.height,this.updateScreenBounds(),this.updateBounds(),this},resizeBy:function(e,t){return this.width+=e,this.height+=t,this.initialWidth=this.width,this.initialHeight=this.height,this.updateScreenBounds(),this.updateBounds(),this},setPosition:function(e,t){return this.x=null!=e?e:this.x,this.y=null!=t?t:this.y,this.offset.set(0,0),this.updateBounds(),this},setOffsets:function(e,t){return this.offset.set(e,t),this.updateBounds(),this},setScale:function(e){return this.scale=e,this.updateBounds(),this},getScale:function(){return this.scale},setGlobalScale:function(e){return this.globalScale=e,this},getGlobalScale:function(){return this.globalScale},setCenter:function(e,t){return this.centerRatioX=e,this.centerRatioY=t,this},translate:function(e,t,i=!1){return this.offset.add(e,t),this.updateBounds(i),this},setScreenPosition:function(e,t){return this.sx=e,this.sy=t,this.updateScreenBounds(),this},getX:function(e=!1){return this.x+(e?0:this.offset.x)},getY:function(e=!1){return this.y+(e?0:this.offset.y)},getOffsetX:function(){return this.offset.x},getOffsetY:function(){return this.offset.y},getWidth:function(){return this.width},getHeight:function(){return this.height},focusX:function(e,t=null,i=null){null===i&&(i=this.focusFactorX),null===t&&(t=e);let r=this.width>>1,n=this.x-int((i*r+this.centerRatioX*r)/this.scale),a=this.x+int((i*r+this.centerRatioX*r)/this.scale);n==a&&(e=t=e+t>>1);let s=this.x;return e<n?s+=e-n:t>a&&(s+=t-a),n=s-r,a=s+r,n<this.container.x1&&(s=this.container.x1+r),a>this.container.x2&&(s=this.container.x2-r),this.x=s,this},focusY:function(e,t=null,i=null){null===i&&(i=this.focusFactorY),null===t&&(t=e);let r=this.height>>1,n=this.y-int((i*r+this.centerRatioY*r)/this.scale),a=this.y+int((i*r+this.centerRatioY*r)/this.scale);n==a&&(e=t=e+t>>1);let s=this.y;return e<n?s+=e-n:t>a&&(s+=t-a),n=s-r,a=s+r,n<this.container.y1&&(s=this.container.y1+r),a>this.container.y2&&(s=this.container.y2-r),this.y=s,this},update:function(e=0){null!==this.focusRect&&(this.focusAxisX&&this.focusX(this.focusRect.x1+this.focusOffsX,this.focusRect.x2+this.focusOffsX),this.focusAxisY&&this.focusY(this.focusRect.y1+this.focusOffsY,this.focusRect.y2+this.focusOffsY),this.updateBounds())},updateForced:function(e=0){null!==this.focusRect&&(this.focusX(this.focusRect.x1+this.focusOffsX,this.focusRect.x2+this.focusOffsX),this.focusY(this.focusRect.y1+this.focusOffsY,this.focusRect.y2+this.focusOffsY),this.updateBounds())},setFocusRect:function(e,t=0,i=0){return this.focusRect=e,this.focusOffsX=t,this.focusOffsY=i,this.update(0),this},setFocusOffsets:function(e,t){return this.focusOffsX=e,this.focusOffsY=t,this},setFocusAxes:function(e,t){return this.focusAxisX=e,this.focusAxisY=t,this},setFocusFactor:function(e,t){return this.focusFactorX=e,this.focusFactorY=void 0===t?e:t,this},applyClip:function(e){e.clip(this.screenBounds.x1,this.screenBounds.y1,this.screenBounds.width(),this.screenBounds.height())},applyTransform:function(e){this.flags&$36f8d9ddfdfdb2c5$var$Viewport.TOP_LEFT?e.translate(this.screenBounds.x1,this.screenBounds.y1):e.translate(this.screenBounds.cx,this.screenBounds.cy),1!=this.scale&&e.scale(this.scale,this.scale),1!=this.globalScale&&e.scale(this.globalScale,this.globalScale),this.flags&$36f8d9ddfdfdb2c5$var$Viewport.TOP_LEFT?e.translate(-this.bounds.x1,-this.bounds.y1):e.translate(-this.bounds.cx,-this.bounds.cy),e.updateTransform()},toWorldSpace:function(e,t=null,i=!1){let r,n;return null!==t&&!0!==t||(i=!0===t,t=e.y,e=e.x),this.flags&$36f8d9ddfdfdb2c5$var$Viewport.TOP_LEFT?(r=this.screenBounds.x1,n=this.screenBounds.y1,i?(e=(e-int(r))/this.scale+int(this.bounds.x1),t=(t-int(n))/this.scale+int(this.bounds.y1)):(e=(e-r)/this.scale+this.bounds.x1,t=(t-n)/this.scale+this.bounds.y1)):(r=this.screenBounds.cx,n=this.screenBounds.cy,i?(e=(e-int(r))/this.scale+int(this.bounds.cx),t=(t-int(n))/this.scale+int(this.bounds.cy)):(e=(e-r)/this.scale+this.bounds.cx,t=(t-n)/this.scale+this.bounds.cy)),this.tmpPoint.set(e,t)},toScreenSpace:function(e,t=null,i=!1){let r,n;return null!==t&&!0!==t||(i=!0===t,t=e.y,e=e.x),this.flags&$36f8d9ddfdfdb2c5$var$Viewport.TOP_LEFT?(r=this.screenBounds.x1,n=this.screenBounds.y1,i?(e=(e-int(this.bounds.x1))*this.scale+int(r),t=(t-int(this.bounds.y1))*this.scale+int(n)):(e=(e-this.bounds.x1)*this.scale+r,t=(t-this.bounds.y1)*this.scale+n)):(r=this.screenBounds.cx,n=this.screenBounds.cy,i?(e=(e-int(this.bounds.cx))*this.scale+int(r),t=(t-int(this.bounds.cy))*this.scale+int(n)):(e=(e-this.bounds.cx)*this.scale+r,t=(t-this.bounds.cy)*this.scale+n)),this.tmpPoint.set(e,t)}});$36f8d9ddfdfdb2c5$var$Viewport.ENABLED=1,$36f8d9ddfdfdb2c5$var$Viewport.TOP_LEFT=2;var $36f8d9ddfdfdb2c5$export$2e2bcd8739ae039=$36f8d9ddfdfdb2c5$var$Viewport;
//![import "./grid-element"]
//![import "../system/globals"]
//![import "../utils/recycler"]
//![import "../system/system"]
//![import "../system/canvas"]
//![import "../system/shader-program"]
//!class Element extends GridElement
const $96075e5e25a8b8bd$var$Element=$8d8e7c58165f35d0$export$2e2bcd8739ae039.extend({className:"Element",group:null,img:null,debugBounds:!1,_zvalue:0,__zvalue:0,_alpha:1,_shaderProgram:null,_uniformSetter:null,render:null,__ctor:function(e,t,i=null,r=null,n=null){null===i&&(i=r=0),null===r&&(i=(n=i).width,r=n.height),this._super.GridElement.__ctor(e,t,i,r),this.img=null!==n?n.getDrawable():n,this.group=null,this.debugBounds=!1,this._zvalue=0,this.__zvalue=0,this._alpha=1,this._shaderProgram=null,this._uniformSetter=null,this.render=null},__dtor:function(){null!==this.img&&(dispose(this.img),this.img=null),this._super.GridElement.__dtor()},destroyLater:function(){this.alive()&&(null!==this.container?this.container.scene.disposeLater(this):dispose(this))},debug:function(e=null){return null===e?this.debugBounds:(this.debugBounds=0===e||e,this)},alpha:function(e=null){return null===e?this._alpha:(this._alpha=e,this)},zvalue:function(e=null){return null===e?this._zvalue:(this._zvalue=e,this)},shaderProgram:function(e=!1){return!1===e?this._shaderProgram:("string"==typeof e&&(e=$6537756e185f4720$export$2e2bcd8739ae039.get(e)),this._shaderProgram=e,this)},uniformSetter:function(e){return this._uniformSetter=e,this},draw:function(e){if(null!==this.img||null!==this.render){let t=null!==this._shaderProgram&&e.pushShaderProgram(this._shaderProgram),i=!!this.depthFlagEnabled()&&e.pushDepthFlag(this.depthFlag());null!==this._shaderProgram&&null!==this._uniformSetter&&null!==e.gl&&this._uniformSetter(e.getShaderProgram(),this,e.gl),e.zvalue=this.__zvalue,1!=this._alpha&&(e.pushAlpha(),e.alpha(this._alpha)),null!==this.render?this.render(e,this,this.img):this.img.render(e,this),i&&e.popDepthFlag(),t&&e.popShaderProgram(),1!=this._alpha&&e.popAlpha()}if($b91bcfe7d0e9e859$export$2e2bcd8739ae039.debugBounds||this.debugBounds){let t=e.getMatrix();(e=$fde096e7347cb963$export$2e2bcd8739ae039.displayBuffer2).pushMatrix(),e.loadMatrix(t),e.fillStyle($96075e5e25a8b8bd$var$Element.getDebugColor(this.debugBounds)),e.fillRect(this.bounds.x1,this.bounds.y1,this.bounds.width(),this.bounds.height()),e.popMatrix()}},renderWith:function(e){return this.render=null!=e?e:null,this}});$96075e5e25a8b8bd$var$Element.debugColors=["rgba(0,255,255,0.35)","rgba(255,255,0,0.35)","rgba(255,0,255,0.35)","rgba(255,255,255,0.35)","rgba(255,0,0,0.35)","rgba(0,255,0,0.35)","rgba(0,0,255,0.35)","rgba(128,128,128,0.35)"],$96075e5e25a8b8bd$var$Element.getDebugColor=function(e){return!0!==e&&!1!==e||(e=0),$96075e5e25a8b8bd$var$Element.debugColors[7&~~e]},
//!/class
//!namespace Element
//!namespace Pool
$3755e11d40ee463d$export$2e2bcd8739ae039.createPool($96075e5e25a8b8bd$var$Element);var $96075e5e25a8b8bd$export$2e2bcd8739ae039=$96075e5e25a8b8bd$var$Element;
//![import "./element"]
//![import "../utils/list"]
//![import "../math/point2"]
//![import "../utils/recycler"]
const $3d21729d154fe9fa$var$tempPoint=$333d67efa04b2b0b$export$2e2bcd8739ae039.Pool.alloc(),$3d21729d154fe9fa$var$Group=$96075e5e25a8b8bd$export$2e2bcd8739ae039.extend({className:"Group",children:null,ref:null,__ctor:function(e=null){this._super.Element.__ctor(0,0,0,0),this.children=$5ffbe5e8d10cd81c$export$2e2bcd8739ae039.Pool.alloc(),this.bounds.reset(),this.ref=$333d67efa04b2b0b$export$2e2bcd8739ae039.Pool.alloc(),this.setId(e)},__dtor:function(){this.clear(),this.children.free(),this.ref.free(),this._super.Element.__dtor()},destroyLater:function(){if(!this.alive())return;let e;for(;null!=(e=this.children.shift());)e.remover.remove(this._remove,this),e.group=null,e.destroyLater();this._super.Element.destroyLater()},clear:function(){let e;for(;null!=(e=this.children.shift());)e.remover.remove(this._remove,this),e.group=null,dispose(e);return this},reset:function(){let e;for(;null!=(e=this.children.shift());)e.remover.remove(this._remove,this),e.group=null;return this},wrapExtents:function(e=null){return null===e?!!(this.flags&$8d8e7c58165f35d0$export$2e2bcd8739ae039.WRAP_EXTENTS):(this.flags&=~$8d8e7c58165f35d0$export$2e2bcd8739ae039.WRAP_EXTENTS,e&&(this.flags|=$8d8e7c58165f35d0$export$2e2bcd8739ae039.WRAP_EXTENTS),this)},addChild:function(e,t=!1){if(!e)return e;let i=null===this.bounds.x1;return(i||this.flags&$8d8e7c58165f35d0$export$2e2bcd8739ae039.WRAP_EXTENTS)&&((i||e.bounds.x1<this.bounds.x1)&&this.ltranslate(e.bounds.x1-this.bounds.x1,0),(i||e.bounds.y1<this.bounds.y1)&&this.ltranslate(0,e.bounds.y1-this.bounds.y1),(i||e.bounds.x2>this.bounds.x2)&&this.resizeBy(e.bounds.x2-this.bounds.x2,0),(i||e.bounds.y2>this.bounds.y2)&&this.resizeBy(0,e.bounds.y2-this.bounds.y2)),this.children.push(e),null!==e.id&&(this[e.id]=e),!0===t&&e.translate(this.bounds.x1,this.bounds.y1),e.group=this,e.remover.add(this._remove,this,this.children.bottom),e},getChild:function(e){return this[e]||null},_remove:function(e,t,i){return t.children.remove(i),e.group=null,null!==e.id&&(t[e.id]=null),!1},removeChild:function(e){return e&&e.group===this?(e.remover.execf(this._remove,this),e):e},sync:function(){for(let e=this.children.top;e;e=e.next)e.value.sync();return this._super.Element.sync()},ltranslate:function(e,t,i=!1){return this._super.Element.translate(e,t,i)},translate:function(e,t,i=!1){let r=this.bounds.x1,n=this.bounds.y1;this._super.Element.translate(e,t,i),this.ref.add(e,t,i),r=this.bounds.x1-r,n=this.bounds.y1-n;for(let e=this.children.top;e;e=e.next)e.value.translate(r,n);return this},getOffsets:function(e,t,i=!1){$3d21729d154fe9fa$var$tempPoint.set(this.bounds.ux1,this.bounds.uy1,!0);let r=$3d21729d154fe9fa$var$tempPoint.x,n=$3d21729d154fe9fa$var$tempPoint.y;return $3d21729d154fe9fa$var$tempPoint.add(e,t,i),r=$3d21729d154fe9fa$var$tempPoint.x-r,n=$3d21729d154fe9fa$var$tempPoint.y-n,$3d21729d154fe9fa$var$tempPoint.set(r,n),$3d21729d154fe9fa$var$tempPoint.x-=e,$3d21729d154fe9fa$var$tempPoint.y-=t,$3d21729d154fe9fa$var$tempPoint},setFlags:function(e){for(let t=this.children.top;t;t=t.next)t.value.setFlags(e);return this._super.Element.setFlags(e)},clearFlags:function(e){for(let t=this.children.top;t;t=t.next)t.value.clearFlags(e);return this._super.Element.clearFlags(e)},visible:function(e=null,t=!1){if(null===e)return this._super.Element.visible();for(let i=this.children.top;i;i=i.next)i.value.visible(e,t);return this._super.Element.visible(e,t)},alpha:function(e=null){if(null===e)return this._super.Element.alpha();for(let t=this.children.top;t;t=t.next)t.value.alpha(e);return this._super.Element.alpha(e)}});
//!class Group extends Element
//!/class
//!namespace Group
//!namespace Pool
$3755e11d40ee463d$export$2e2bcd8739ae039.createPool($3d21729d154fe9fa$var$Group);var $3d21729d154fe9fa$export$2e2bcd8739ae039=$3d21729d154fe9fa$var$Group;
//![import "./container"]
//![import "./viewport"]
//![import "./group"]
//![import "../math/bounds2"]
//![import "../utils/list"]
//![import "../utils/handler"]
//![import "../system/globals"]
//!class Scene
const $70f6e3c3a2801809$var$Scene=$lTI0F.Class.extend({className:"Scene",minWidth:null,minHeight:null,maxWidth:null,maxHeight:null,containers:null,viewports:null,viewportBounds:null,groupList:null,groups:null,disposalQueue:null,fupdater:null,updater:null,synchronizer:null,lupdater:null,destroyer:null,dt:0,flags:0,drawCount:0,scene:null,zvalue:null,name:null,__ctor:function(e,t=null){this.containers=[],this.zvalue=(3&e)<<22,this.name=null!==t?t:"SCENE_"+e,this.viewports=[],this.viewportBounds=$33fa7ae7f1b4b0c7$export$2e2bcd8739ae039.Pool.alloc(),this.groupList=$5ffbe5e8d10cd81c$export$2e2bcd8739ae039.Pool.alloc(),this.groups={},this.disposalQueue=$5ffbe5e8d10cd81c$export$2e2bcd8739ae039.Pool.alloc(),this.fupdater=$45a34d9ad9468512$export$2e2bcd8739ae039.Pool.alloc(this),this.updater=$45a34d9ad9468512$export$2e2bcd8739ae039.Pool.alloc(this),this.synchronizer=$45a34d9ad9468512$export$2e2bcd8739ae039.Pool.alloc(this),this.lupdater=$45a34d9ad9468512$export$2e2bcd8739ae039.Pool.alloc(this),this.destroyer=$45a34d9ad9468512$export$2e2bcd8739ae039.Pool.alloc(this),this.flags=$70f6e3c3a2801809$var$Scene.VISIBLE,this.scene=this},__dtor:function(){let e;for(this.disposeQueued(),this.disposalQueue.free(),this.destroyer.exec(),this.destroyer.free(),this.fupdater.free(),this.updater.free(),this.synchronizer.free(),this.lupdater.free();null!==(e=this.groupList.shift());)e.remover.remove(this._remove,this),e.container=null,dispose(e);for(e=0;e<this.containers.length;e++)this.containers[e]&&(this.containers[e].scene=null,dispose(this.containers[e]),this.containers[e]=null);for(e=0;e<this.viewports.length;e++)this.viewports[e]&&(dispose(this.viewports[e]),this.viewports[e]=null);this.viewportBounds.free(),this.groupList.free()},clear:function(){let e;for(this.disposeQueued();null!==(e=this.groupList.shift());)e.remover.remove(this._remove,this),e.container=null,dispose(e);for(e=0;e<this.containers.length;e++)this.containers[e]&&this.containers[e].clear()},visible:function(e=null){return null===e?!!(this.flags&$70f6e3c3a2801809$var$Scene.VISIBLE):(this.flags&=~$70f6e3c3a2801809$var$Scene.VISIBLE,e&&(this.flags|=$70f6e3c3a2801809$var$Scene.VISIBLE),this)},setContainer:function(e,t){if(e<0)return this;if(e&=15,null===t)return this.containers[e].scene=null,this.containers[e]=null,this;if(!$c0ca59ea4341de78$export$2e2bcd8739ae039.isInstance(t))throw new Error("Scene: Unable to set container at index "+e+": argument is not a Container");return(null===this.minWidth||t.width<this.minWidth)&&(this.minWidth=t.width),(null===this.minHeight||t.height<this.minHeight)&&(this.minHeight=t.height),(null===this.maxWidth||t.width>this.maxWidth)&&(this.maxWidth=t.width),(null===this.maxHeight||t.height>this.maxHeight)&&(this.maxHeight=t.height),t.scene=this,t.zvalue=this.zvalue+(e<<18),this.containers[e]=t,this},getContainer:function(e){return e<0||e>=this.containers.length?null:this.containers[e]},setViewport:function(e,t){if(e<0)return this;if(null!==t&&!$36f8d9ddfdfdb2c5$export$2e2bcd8739ae039.isInstance(t))throw new Error("Scene: Unable to set viewport at index "+e+": argument is not a Viewport.");return this.viewports[e]=t,this},getViewport:function(e){return e<0||e>=this.viewports.length?null:this.viewports[e]},disposeLater:function(e){e.alive()&&(this.disposalQueue.push(e),e.alive(!1))},disposeQueued:function(){let e;for(;null!==(e=this.disposalQueue.shift());)dispose(e)},addGroup:function(e){if(!$3d21729d154fe9fa$export$2e2bcd8739ae039.isInstance(e))throw new Error("argument must be a Group");return this.groupList.push(e),null!==e.id&&(this.groups[e.id]=e),e.container=this,e.remover.add(this._removeGroup,this,this.groupList.bottom),!0},_removeGroup:function(e,t,i){return e.container=null,t.groupList.remove(i),null!==e.id&&(t.groups[e.id]=null),!1},removeGroup:function(e){return e.remover.execf(this._remove,this),e},sync:function(e){return!0},draw:function(e){if(this.visible()){if(this.drawCount=0,this.viewports.length)for(let t=0;t<this.viewports.length;t++){let i=this.viewports[t];i&&i.enabled()&&($b91bcfe7d0e9e859$export$2e2bcd8739ae039.viewport=i,e.pushClip(),e.pushMatrix(),i.applyClip(e),i.applyTransform(e),this.viewportBounds.set(i.bounds),this.drawContainers(e,this.viewportBounds),e.popMatrix(),e.popClip())}else this.drawContainers(e,null);$e2086caaef68d463$export$2e2bcd8739ae039.enabled&&($e2086caaef68d463$export$2e2bcd8739ae039.vars[this.name]=this.drawCount)}},drawContainers:function(e,t){try{for(let i=0;i<this.containers.length;i++)this.containers[i]&&(this.containers[i].setViewportBounds(t),this.containers[i].draw(e),this.drawCount+=this.containers[i].drawCount)}catch(e){if("FRAME_END"!==e.message)throw e}},updateViewports:function(){for(let e=0;e<this.viewports.length;e++)this.viewports[e]&&this.viewports[e].update(this.dt)},update:function(e){this.dt=e,this.fupdater.exec(),this.updater.exec(),this.disposeQueued(),this.synchronizer.exec(),this.updateViewports(),this.lupdater.exec()}});$70f6e3c3a2801809$var$Scene.VISIBLE=1;var $70f6e3c3a2801809$export$2e2bcd8739ae039=$70f6e3c3a2801809$var$Scene,$lTI0F=parcelRequire("lTI0F");
//![import "../utils/list"]
//![import "./element"]
//!class Updater
const $f621b5dd5d2511c0$var$Updater=$lTI0F.Class.extend({className:"Updater",scene:null,list:null,__update:null,__context:null,__preupdate:null,__postupdate:null,__ctor:function(e,t=null,i=null){this.list=$5ffbe5e8d10cd81c$export$2e2bcd8739ae039.Pool.alloc(),this.scene=e,this.__update=t,this.__context=i,this.__preupdate=null,this.__postupdate=null,this.scene.updater.add(this._update,this),this.scene.synchronizer.add(this._sync,this),this.scene.destroyer.add(this._destroy,this)},__dtor:function(){let e;for(this.scene.updater.remove(this._update,this),this.scene.synchronizer.remove(this._sync,this),this.scene.destroyer.remove(this._destroy,this);null!==(e=this.list.shift());)e.remover.remove(this._remove,this);this.list.free()},_destroy:function(e,t){dispose(t)},reset:function(){for(;null!==(i=this.list.shift());)i.remover.remove(this._remove,this);return this},clear:function(){for(;null!==(i=this.list.shift());)i.remover.remove(this._remove,this),dispose(i);return this},preUpdate:function(e){return this.__preupdate=e,this},postUpdate:function(e){return this.__postupdate=e,this},add:function(e){if(!$96075e5e25a8b8bd$export$2e2bcd8739ae039.isInstance(e))throw new Error("argument must be of type: Element");return this.list.push(e),e.remover.add(this._remove,this,this.list.bottom),e},_remove:function(e,t,i){return t.list.remove(i),!1},remove:function(e){return e.remover.execf(this._remove,this),e},_sync:function(e,t){for(let e=t.list.top;e;e=e.next)e.value.sync()},_update:function(e,t){t.update(e.dt)},update:function(e){if(null!==this.__preupdate&&this.__preupdate(this.list,e,this.__context),null!==this.__update){let t=null;for(let i=this.list.top;i;i=t)t=i.next,!1===this.__update(i.value,e,this.__context)&&this.remove(i.value)}null!==this.__postupdate&&this.__postupdate(this.list,e,this.__context)}});var $f621b5dd5d2511c0$export$2e2bcd8739ae039=$f621b5dd5d2511c0$var$Updater,//![import "./container"]
//![import "./grid-element"]
//![import "./element"]
//![import "../utils/list"]
//!class SimpleContainer extends Container
$e23387bae255f715$export$2e2bcd8739ae039=$c0ca59ea4341de78$export$2e2bcd8739ae039.extend({className:"SimpleContainer",list:null,__ctor:function(e,t){this._super.Container.__ctor(e,t),this.list=$5ffbe5e8d10cd81c$export$2e2bcd8739ae039.Pool.alloc(),this.depthFlag(!1)},__dtor:function(){this.clear(),this.list.free(),this._super.Container.__dtor()},sync:function(e){return this.syncZ(e),!0},clear:function(){let e;for(;null!==(e=this.list.shift());)e.remover.remove(this._remove,this),e.container=null,dispose(e);this.elementCount=0},reset:function(){let e;for(;null!==(e=this.list.shift());)e.remover.remove(this._remove,this),e.container=null;this.elementCount=0},add:function(e){if(!$96075e5e25a8b8bd$export$2e2bcd8739ae039.isInstance(e))throw new Error("argument must be an Element");return this.list.push(e),this.elementCount++,e.container=this,e.remover.add(this._remove,this,this.list.bottom),this.syncZ(e),!0},_remove:function(e,t,i){return t.list.remove(i),t.elementCount--,e.container=null,!1},remove:function(e){return e.remover.execf(this._remove,this),e},render:function(){let e=$8d8e7c58165f35d0$export$2e2bcd8739ae039.ALIVE|$8d8e7c58165f35d0$export$2e2bcd8739ae039.VISIBLE;for(let t=this.list.top;t&&(!t.value.getFlags(e)||!1!==this.drawElement(t.value,this));t=t.next);}}),//![import "./container"]
//![import "./grid"]
//![import "./grid-element"]
//![import "./element"]
//![import "../system/globals"]
//![import "../system/system"]
//!class GridContainer extends Container
$eae625b74bd4f8cd$export$2e2bcd8739ae039=$c0ca59ea4341de78$export$2e2bcd8739ae039.extend({className:"GridContainer",grid:null,debugBounds:!1,__ctor:function(e=32768,t=32768,i=64,r=null){this._super.Container.__ctor(e,t),this.grid=new $7379a5ec690d13e4$export$2e2bcd8739ae039(e,t,i,r)},__dtor:function(){this.clear(),this._super.Container.__dtor()},sync:function(e){return this.syncZ(e),this.grid.sync(e)},clear:function(){this.grid.clear()},reset:function(){this.grid.reset()},add:function(e){if(!$96075e5e25a8b8bd$export$2e2bcd8739ae039.isInstance(e))throw new Error("argument must be an Element");return!!this.grid.add(e)&&(e.container=this,this.elementCount=this.grid.count,this.syncZ(e),!0)},remove:function(e){return this.grid.remove(e),this.elementCount=this.grid.count,e},render:function(){if(this.grid.forEachInRegion(this.viewportBounds,$8d8e7c58165f35d0$export$2e2bcd8739ae039.ALIVE|$8d8e7c58165f35d0$export$2e2bcd8739ae039.VISIBLE,$8d8e7c58165f35d0$export$2e2bcd8739ae039.ALIVE|$8d8e7c58165f35d0$export$2e2bcd8739ae039.VISIBLE,this.drawElement,this),!this.debugBounds||null===this.viewportBounds)return;let e=$fde096e7347cb963$export$2e2bcd8739ae039.displayBuffer2;e.pushMatrix(),e.loadMatrix(this.g.getMatrix());let t=(this.viewportBounds.y1+this.grid.offsy-(1<<this.grid.ky-1)>>this.grid.ky)*this.grid.stride,i=(this.viewportBounds.y2+this.grid.offsy+(1<<this.grid.ky-1)>>this.grid.ky)*this.grid.stride,r=this.viewportBounds.x1+this.grid.offsx-(1<<this.grid.kx-1)>>this.grid.kx,n=this.viewportBounds.x2+this.grid.offsx+(1<<this.grid.kx-1)>>this.grid.kx;t=(int(t/this.grid.stride)<<this.grid.ky)-this.grid.offsy,i=(int(i/this.grid.stride)<<this.grid.ky)-this.grid.offsy+(1<<this.grid.ky),r=(r<<this.grid.kx)-this.grid.offsx,n=(n<<this.grid.kx)-this.grid.offsx+(1<<this.grid.kx),e.fillStyle("rgba(255,0,0,0.2)"),e.fillRect(r,t,n-r+1,i-t+1),t=this.viewportBounds.y1,i=this.viewportBounds.y2,r=this.viewportBounds.x1,n=this.viewportBounds.x2,e.lineWidth(1/$fde096e7347cb963$export$2e2bcd8739ae039.canvasScaleFactor),e.strokeStyle("#fff"),e.strokeRect(r,t,n-r+1,i-t+1),e.lineWidth(1/$fde096e7347cb963$export$2e2bcd8739ae039.canvasScaleFactor),e.strokeStyle("#008");for(let t=$b91bcfe7d0e9e859$export$2e2bcd8739ae039.viewport.container.y1+this.grid.offsy;t<$b91bcfe7d0e9e859$export$2e2bcd8739ae039.viewport.container.y2+this.grid.offsy;t+=1<<this.grid.ky)for(let i=$b91bcfe7d0e9e859$export$2e2bcd8739ae039.viewport.container.x1+this.grid.offsx;i<$b91bcfe7d0e9e859$export$2e2bcd8739ae039.viewport.container.x2+this.grid.offsx;i+=1<<this.grid.kx)e.strokeRect(i-this.grid.offsx,t-this.grid.offsy,1<<this.grid.kx,1<<this.grid.ky);e.popMatrix()},forEachInRegion:function(e,t,i,r,n){this.grid.forEachInRegion(e,t,i,r,n)},selectInRegion:function(e,t,i){return this.grid.selectInRegion(e,t,i)},countInRegion:function(e,t,i){return this.grid.countInRegion(e,t,i)},selectFirst:function(e,t,i){return this.grid.selectFirst(e,t,i)}});
//![import "./element"]
//![import "../system/system"]
//![import "../utils/recycler"]
//!class Mask extends Element
const $cb1f7d549b970dad$var$Mask=$96075e5e25a8b8bd$export$2e2bcd8739ae039.extend({className:"Mask",type:0,__ctor:function(e,t,i,r,n){this._super.Element.__ctor(t,i,r,n),this.type=e},draw:function(e){if(!$b91bcfe7d0e9e859$export$2e2bcd8739ae039.debugMasks&&!this.debugBounds)return;let t=e.getMatrix();(e=$fde096e7347cb963$export$2e2bcd8739ae039.displayBuffer2).pushMatrix(),e.loadMatrix(t),e.fillStyle($96075e5e25a8b8bd$export$2e2bcd8739ae039.getDebugColor(this.debugBounds)),e.fillRect(this.bounds.x1,this.bounds.y1,this.bounds.width(),this.bounds.height()),e.popMatrix()}});
//!/class
//!namespace Mask
//!namespace Pool
$3755e11d40ee463d$export$2e2bcd8739ae039.createPool($cb1f7d549b970dad$var$Mask);var $cb1f7d549b970dad$export$2e2bcd8739ae039=$cb1f7d549b970dad$var$Mask;
//![import "./element"]
//![import "../utils/recycler"]
//!class Label extends Element
const $fe8bd36457f8e4df$var$Label=$96075e5e25a8b8bd$export$2e2bcd8739ae039.extend({className:"Label",text:null,font:null,_dirty:!1,textWidth:null,textHeight:null,_align:-1,_valign:-1,textOffsetX:null,textOffsetY:null,__ctor:function(e,t,i,r){this._super.Element.__ctor(e,t,4,4),this.text=r,this.font=i,this._align=-1,this._valign=-1,this.renderWith(this.renderText),this._dirty=!0},align:function(e){return this._align===e||(this._align=e,this.textOffsetX=null),this},valign:function(e){return this._valign===e||(this._valign=e,this.textOffsetY=null),this},setText:function(e){return this.text===e||(this.text=e,this._dirty=!0),this},setFont:function(e){return this.font===e||(this.font=e,this._dirty=!0),this},update:function(){this._dirty&&(this.textWidth=this.font.measureWidth(this.text),this.textHeight=this.font.measureHeight(this.text),this.textOffsetX=null,this.textOffsetY=null,this._dirty=!1),null===this.textOffsetX&&(this._align<0?this.textOffsetX=0:0===this._align?this.textOffsetX=-this.textWidth>>1:this.textOffsetX=-this.textWidth),null===this.textOffsetY&&(this._valign<0?this.textOffsetY=0:0===this._valign?this.textOffsetY=-this.textHeight>>1:this.textOffsetY=-this.textHeight)},renderText:function(e,t,i){t.update(),t.font.drawText(e,t.bounds.x1+t.textOffsetX,t.bounds.y1+t.textOffsetY,t.text)}});
//!/class
//!namespace Label
//!namespace Pool
$3755e11d40ee463d$export$2e2bcd8739ae039.createPool($fe8bd36457f8e4df$var$Label);var $fe8bd36457f8e4df$export$2e2bcd8739ae039=$fe8bd36457f8e4df$var$Label,//![import "../utils/priority-queue"]
//![import "./boot"]
//![import "../system/system"]
//!namespace KeyboardHandler
//!interface EventHandler
//!/interface
//!/namespace
//!class KeyboardHandler
$e2643e71ae71ec0f$export$2e2bcd8739ae039=$03dacdb15d88825e$export$2e2bcd8739ae039.Module.create({handlers:null,__ctor:function(){const e=this;this._super.Module.__ctor(),this.handlers=new $b280b216ed4b8038$export$2e2bcd8739ae039,this._callOnKeyboardEvent=function(t){return e.callOnKeyboardEvent(t)}},register:function(e){try{this.handlers.add(e),"init"in e&&e.init()}catch(e){throw new Error("KeyboardHandler (register): "+e.message)}return e},unregister:function(e){try{this.handlers.remove(e),this.handlers.cleanup()}catch(e){throw new Error("KeyboardHandler (unregister): "+e.message)}},callOnKeyboardEvent:function(e){return e.onKeyboardEvent(this._action,this._keyCode,this._keyState)},onStartup:function(){$fde096e7347cb963$export$2e2bcd8739ae039.onKeyboardEvent=(e,t,i)=>{this._action=e,this._keyCode=t,this._keyState=i,this.handlers.forEach(this._callOnKeyboardEvent)}},onShutdown:function(){$fde096e7347cb963$export$2e2bcd8739ae039.onKeyboardEvent=null}}),//![import "../utils/priority-queue"]
//![import "./boot"]
//![import "../system/system"]
//!namespace PointerHandler
//!interface EventHandler
//!/interface
//!/namespace
//!class PointerHandler
$1ebcb7208b1d3955$export$2e2bcd8739ae039=$03dacdb15d88825e$export$2e2bcd8739ae039.Module.create({handlers:null,__ctor:function(){const e=this;this._super.Module.__ctor(),this.handlers=new $b280b216ed4b8038$export$2e2bcd8739ae039,this._callOnPointerEvent=function(t){return e.callOnPointerEvent(t)}},register:function(e){try{this.handlers.add(e),"init"in e&&e.init()}catch(e){throw new Error("PointerHandler (register): "+e.message)}return e},unregister:function(e){try{this.handlers.remove(e),this.handlers.cleanup()}catch(e){throw new Error("PointerHandler (unregister): "+e.message)}},callOnPointerEvent:function(e){return e.onPointerEvent(this._action,this._p,this._pointers)},onStartup:function(){$fde096e7347cb963$export$2e2bcd8739ae039.onPointerEvent=(e,t,i)=>{this._action=e,this._p=t,this._pointers=i,this.handlers.forEach(this._callOnPointerEvent)}},onShutdown:function(){$fde096e7347cb963$export$2e2bcd8739ae039.onPointerEvent=null}});
//![import "./keyboard-handler"]
//![import "./pointer-handler"]
//![import "../system/system"]
const $3fcd3411b88f95db$var$ScreenControls={priority:5,list:[],dummy:{},hoverEnabled:!1,zindexEnabled:!1,lastFrame:0,add:function(e){this.zindexEnabled&&!("zindex"in e)&&(e.zindex=0),-1===this.list.indexOf(e)&&this.list.push(e)},remove:function(e){var t=this.list.indexOf(e);-1!==t&&this.list.splice(t,1)},setHoverEnabled:function(e){this.hoverEnabled=e},setZIndexEnabled:function(e){this.zindexEnabled=e},findTarget:function(e,t,i){if(this.zindexEnabled&&this.lastFrame!=$fde096e7347cb963$export$2e2bcd8739ae039.frameNumber){let e=this.list[0].zindex;for(let t of this.list){if(t.zindex>e){this.list=this.list.sort(((e,t)=>t.zindex-e.zindex));break}e=t.zindex}this.lastFrame=$fde096e7347cb963$export$2e2bcd8739ae039.frameNumber}for(let r=0;r<this.list.length;r++)if(this.list[r]&&(null==i||!1!==i(this.list[r]))&&this.list[r].containsPoint(e,t))return this.list[r];return null},filterHover:function(e){return"hover"in e},onPointerEvent:function(e,t,i){let r=!0,n=null;switch(e){case $fde096e7347cb963$export$2e2bcd8739ae039.PointerEventType.POINTER_DOWN:null!=t._ref&&(n=t._ref,t._ref=null,n.pointerDeactivate(t)),n=this.findTarget(t.x,t.y),null!=n&&((t._ref=n).pointerActivate(t),r=!1);break;case $fde096e7347cb963$export$2e2bcd8739ae039.PointerEventType.POINTER_DRAG_START:null!=t._ref&&(r=!1);break;case $fde096e7347cb963$export$2e2bcd8739ae039.PointerEventType.POINTER_DRAG_MOVE:this.hoverEnabled&&(null!=t._refh?t._refh.containsPoint(t.x,t.y)||(n=t._refh,t._refh=null,n.hover(!1,t),n=this.findTarget(t.x,t.y,this.filterHover),null!=n&&(t._refh=n).hover(!0,t)):(n=this.findTarget(t.x,t.y,this.filterHover),null!=n&&(t._refh=n).hover(!0,t))),null!=t._ref?t._ref.containsPoint(t.x,t.y)||1==t._ref.focusLock?(t._ref.pointerUpdate(t.x,t.y,t),r=!1):(n=t._ref,t._ref=null,n.pointerDeactivate(t),n=this.findTarget(t.x,t.y),null!=n&&((t._ref=n).pointerActivate(t),r=!1)):(n=this.findTarget(t.x,t.y),null!=n&&((t._ref=n).pointerActivate(t),r=!1));break;case $fde096e7347cb963$export$2e2bcd8739ae039.PointerEventType.POINTER_MOVE:if(this.hoverEnabled&&(null!=t._refh?t._refh.containsPoint(t.x,t.y)||(n=t._refh,t._refh=null,n.hover(!1,t),n=this.findTarget(t.x,t.y,this.filterHover),null!=n&&(t._refh=n).hover(!0,t)):(n=this.findTarget(t.x,t.y,this.filterHover),null!=n&&(t._refh=n).hover(!0,t))),null==t._ref)break;t._ref.containsPoint(t.x,t.y)||1==t._ref.focusLock?(t._ref.pointerUpdate(t.x,t.y,t),r=!1):(n=t._ref,t._ref=null,n.pointerDeactivate(t));break;case $fde096e7347cb963$export$2e2bcd8739ae039.PointerEventType.POINTER_DRAG_STOP:null!=t._ref&&(r=!1);break;case $fde096e7347cb963$export$2e2bcd8739ae039.PointerEventType.POINTER_UP:null!=t._ref&&(n=t._ref,t._ref=null,n.pointerDeactivate(t),r=!1)}return r},onKeyboardEvent:function(e,t,i){switch(e){case $fde096e7347cb963$export$2e2bcd8739ae039.KeyboardEventType.KEY_DOWN:for(let e=0;e<this.list.length&&(!this.list[e]||!this.list[e].keyboardEvents||!1!==this.list[e].keyDown(t,i));e++);break;case $fde096e7347cb963$export$2e2bcd8739ae039.KeyboardEventType.KEY_UP:for(let e=0;e<this.list.length&&(!this.list[e]||!this.list[e].keyboardEvents||!1!==this.list[e].keyUp(t,i));e++);}}};$1ebcb7208b1d3955$export$2e2bcd8739ae039.register($3fcd3411b88f95db$var$ScreenControls),$e2643e71ae71ec0f$export$2e2bcd8739ae039.register($3fcd3411b88f95db$var$ScreenControls);var $3fcd3411b88f95db$export$2e2bcd8739ae039=$3fcd3411b88f95db$var$ScreenControls,//![import "./group.js"]
//![import "./mask.js"]
//![import "./screen-controls.js"]
//!class Button extends Group
$1198e43a1b1a70e6$export$2e2bcd8739ae039=$3d21729d154fe9fa$export$2e2bcd8739ae039.extend({focusLock:!1,keyboardEvents:!0,isPressed:!1,wasPressed:!1,unpressedImg:null,pressedImg:null,keyCode:null,hitbox:null,_onButtonDown:null,_onButtonUp:null,_onTap:null,_onChange:null,__ctor:function(e,t,i,r=null,n=null){this._super.Group.__ctor(),this.unpressedImg=r,this.pressedImg=null!=n?n:r,this.hitbox=null;let a=$cb1f7d549b970dad$export$2e2bcd8739ae039.Pool.alloc(0,t,i,this.unpressedImg?this.unpressedImg.width:16,this.unpressedImg?this.unpressedImg.height:16).visible(!1).visibleLock(!0).debug(2);this.addChild(a),e.add(a),e.add(this),this.hitbox=a,this._onButtonDown=null,this._onButtonUp=null,this._onTap=null,this._onChange=this._default_onChange,this.reset(),$3fcd3411b88f95db$export$2e2bcd8739ae039.add(this)},__dtor:function(){this._super.Group.__dtor(),$3fcd3411b88f95db$export$2e2bcd8739ae039.remove(this)},resize:function(e,t){return this._super.Group.resize(e,t),null!==this.hitbox&&this.hitbox.resize(e,t),this},resizeBy:function(e,t){return this._super.Group.resizeBy(e,t),null!==this.hitbox&&this.hitbox.resizeBy(e,t),this},setImage:function(e,t=null){return this.unpressedImg=e,this.pressedImg=t||e,this.reset(),this},setKeyCode:function(e){return this.keyCode=e,this},reset:function(){this.img=this.unpressedImg,this._onChange(this.isPressed=!1,this.wasPressed=!1,this)},pointerUpdate:function(e,t,i){},setStatus:function(e){return this.isPressed===e||(this.updateStatus(e),this.img=this.isPressed?this.pressedImg:this.unpressedImg,this._onChange(this.isPressed,this.wasPressed,this)),this},updateStatus:function(e=null){return this.wasPressed=this.isPressed,this.isPressed=null===e?this.isPressed:e,this},pointerActivate:function(e){this.setStatus(!0)},pointerDeactivate:function(e){this.setStatus(!1)},containsPoint:function(e,t){return!!this.visible()&&this.hitbox.bounds.containsPoint(e,t)},_default_onChange:function(e,t,i){e!==t&&(e&&this._onButtonDown?this._onButtonDown():!e&&this._onButtonUp&&this._onButtonUp()),!e&&t&&this._onTap&&this._onTap()},keyDown:function(e,t){if(e===this.keyCode)return this.pointerActivate(),!1},keyUp:function(e,t){if(e===this.keyCode)return this.pointerDeactivate(),!1},onChange:function(e){return this._onChange=null===e?this._default_onChange:e,this},onButtonDown:function(e=!0){if(!0!==e)return this._onButtonDown=e,this;this._onButtonDown&&this._onButtonDown()},onButtonUp:function(e=!0){if(!0!==e)return this._onButtonUp=e,this;this._onButtonUp&&this._onButtonUp()},onTap:function(e=!0){if(!0!==e)return this._onTap=e,this;this._onTap&&this._onTap()}}),//![import "./group"]
//![import "./mask"]
//![import "./screen-controls"]
//![import "../system/keycode"]
//!class Stick extends Group
$e311fd73aef87164$export$2e2bcd8739ae039=$3d21729d154fe9fa$export$2e2bcd8739ae039.extend({focusLock:!0,keyboardEvents:!0,isPressed:!1,wasPressed:!1,unpressedImg:null,pressedImg:null,unpressedImgInner:null,pressedImgInner:null,angleSteps:0,radiusSteps:0,refX:null,refY:null,rdirx:0,rdiry:0,dirx:0,diry:0,magnitude:0,angle:0,frdirx:0,frdiry:0,fdirx:0,fdiry:0,fmagnitude:0,fangle:0,dispx:0,dispy:0,radius:0,maxRadius:0,deadZoneX:0,deadZoneY:0,hitbox:0,_onChange:null,__ctor:function(e,t,i,r,n,a,s=null,o=null){var l,c;this._super.Group.__ctor(),this.unpressedImg=n,this.pressedImg=s||n,this.unpressedImgInner=a,this.pressedImgInner=o||a,this.maxRadius=r,this.deadZoneX=0,this.deadZoneY=0,this.hitbox=$cb1f7d549b970dad$export$2e2bcd8739ae039.Pool.alloc(0,t,i,(null!==(l=this.unpressedImg)&&void 0!==l?l:this.unpressedImgInner).width,(null!==(c=this.unpressedImg)&&void 0!==c?c:this.unpressedImgInner).height).visible(!1).visibleLock(!0).debug(2),this.addChild(this.hitbox),e.add(this.hitbox),e.add(this),this._onChange=null,this.renderWith(this.renderStick),$3fcd3411b88f95db$export$2e2bcd8739ae039.add(this)},__dtor:function(){this._super.Group.__dtor(),$3fcd3411b88f95db$export$2e2bcd8739ae039.remove(this)},setImage:function(e,t=null){return this.unpressedImg=e,this.pressedImg=t||e,this},setImageInner:function(e,t=null){return this.unpressedImgInner=e,this.pressedImgInner=t||e,this},setAngleSteps:function(e){return this.angleSteps=e,this},setRadiusSteps:function(e){return this.radiusSteps=e,this},setDeadZone:function(e,t){return this.deadZoneX=e,this.deadZoneY=t,this},reset:function(){this.dispx=0,this.dispy=0,this.rdirx=0,this.rdiry=0,this.dirx=0,this.diry=0,this.magnitude=0,this._onChange&&this._onChange(this.dirx,this.diry,this.magnitude,this.angle,this)},renderStick:function(e,t,i){t.isPressed?(t.pressedImg&&t.pressedImg.draw(e,t.bounds.x1,t.bounds.y1),t.pressedImgInner&&t.pressedImgInner.draw(e,t.bounds.x1+t.dispx,t.bounds.y1+t.dispy)):(t.unpressedImg&&t.unpressedImg.draw(e,t.bounds.x1,t.bounds.y1),t.unpressedImgInner&&t.unpressedImgInner.draw(e,t.bounds.x1,t.bounds.y1))},pointerUpdate:function(e,t){let i,r;if(i=e-this.refX,r=t-this.refY,this.angle=Math.atan2(-r,i),this.radius=Math.sqrt(i*i+r*r),this.radius>this.maxRadius&&(this.radius=this.maxRadius),this.angleSteps){let e=2*Math.PI/this.angleSteps;this.angle=int((this.angle+Math.PI+e/2)/e)*e-Math.PI}if(this.radiusSteps){let e=this.maxRadius/this.radiusSteps;this.radius=int((this.radius+e/2)/e)*e}this.rdirx=Math.min(1,Math.max(i/this.maxRadius,-1)),this.rdiry=Math.min(1,Math.max(r/this.maxRadius,-1)),this.dispx=this.radius*Math.cos(this.angle),this.dispy=this.radius*-Math.sin(this.angle),this.radius>0?(this.dirx=this.dispx/this.radius,this.diry=this.dispy/this.radius,this.magnitude=this.radius/this.maxRadius):(this.dirx=0,this.diry=0,this.magnitude=0),Math.abs(this.rdirx)<this.deadZoneX&&(this.rdirx=0,this.dirx=0),Math.abs(this.rdiry)<this.deadZoneY&&(this.rdiry=0,this.diry=0),this._onChange&&this._onChange(this.dirx,this.diry,this.magnitude,this.angle,this)},pointerActivate:function(e){this.wasPressed=this.isPressed,this.isPressed=1,this.refX=e.x,this.refY=e.y,this.pointerUpdate(e.x,e.y)},pointerDeactivate:function(e){this.wasPressed=this.isPressed,this.isPressed=0,this.reset()},containsPoint:function(e,t){return!!this.visible()&&this.hitbox.bounds.containsPoint(e,t)},setDirection:function(e,t,i=.1,r=.1){return Math.abs(e)<i&&(e=0),Math.abs(t)<r&&(t=0),this.wasPressed=this.isPressed,this.isPressed=0==e&&0==t?0:1,this.pointerUpdate(this.bounds.cx+e*this.maxRadius,this.bounds.cy+t*this.maxRadius),!1},freezeState:function(e=!1){return this.frdirx=e?0!=this.rdirx?this.rdirx:this.frdirx:this.rdirx,this.frdiry=e?0!=this.rdiry?this.rdiry:this.frdiry:this.rdiry,this.fdirx=e?0!=this.dirx?this.dirx:this.fdirx:this.dirx,this.fdiry=e?0!=this.diry?this.diry:this.fdiry:this.diry,this.fmagnitude=e?0!=this.magnitude?this.magnitude:this.fmagnitude:this.magnitude,this.fangle=e?0!=this.angle?this.angle:this.fangle:this.angle,this},keyDown:function(e,t){let i=0,r=0;if(!0===t[$6fd473ea64d5e91a$export$2e2bcd8739ae039.UP]&&(r=-this.maxRadius),!0===t[$6fd473ea64d5e91a$export$2e2bcd8739ae039.LEFT]&&(i=-this.maxRadius),!0===t[$6fd473ea64d5e91a$export$2e2bcd8739ae039.DOWN]&&(r=this.maxRadius),!0===t[$6fd473ea64d5e91a$export$2e2bcd8739ae039.RIGHT]&&(i=this.maxRadius),e===$6fd473ea64d5e91a$export$2e2bcd8739ae039.UP||e===$6fd473ea64d5e91a$export$2e2bcd8739ae039.LEFT||e===$6fd473ea64d5e91a$export$2e2bcd8739ae039.DOWN||e===$6fd473ea64d5e91a$export$2e2bcd8739ae039.RIGHT)return i=this.bounds.cx+i,r=this.bounds.cy+r,this.wasPressed=this.isPressed,this.isPressed=1,this.pointerUpdate(i,r),!1},keyUp:function(e,t){let i=0,r=0;if(!0===t[$6fd473ea64d5e91a$export$2e2bcd8739ae039.UP]&&(r=-this.maxRadius),!0===t[$6fd473ea64d5e91a$export$2e2bcd8739ae039.LEFT]&&(i=-this.maxRadius),!0===t[$6fd473ea64d5e91a$export$2e2bcd8739ae039.DOWN]&&(r=this.maxRadius),!0===t[$6fd473ea64d5e91a$export$2e2bcd8739ae039.RIGHT]&&(i=this.maxRadius),e===$6fd473ea64d5e91a$export$2e2bcd8739ae039.UP||e===$6fd473ea64d5e91a$export$2e2bcd8739ae039.LEFT||e===$6fd473ea64d5e91a$export$2e2bcd8739ae039.DOWN||e===$6fd473ea64d5e91a$export$2e2bcd8739ae039.RIGHT)return this.pointerUpdate(this.bounds.cx+i,this.bounds.cy+r),0===i&&0===r&&(this.wasPressed=this.isPressed,this.isPressed=0),!1},onChange:function(e){return this._onChange=e,this}}),$c66f8165c35d7ae1$exports={};$parcel$export($c66f8165c35d7ae1$exports,"sys",(function(){return $c66f8165c35d7ae1$export$773cc7fa6f8304c3})),$parcel$export($c66f8165c35d7ae1$exports,"world",(function(){return $c66f8165c35d7ae1$export$f965ae91e38a1274})),$parcel$export($c66f8165c35d7ae1$exports,"r",(function(){return $c66f8165c35d7ae1$export$43caf9889c228507})),$parcel$export($c66f8165c35d7ae1$exports,"res",(function(){return $c66f8165c35d7ae1$export$a79e2b3ea5d10ee0})),$parcel$export($c66f8165c35d7ae1$exports,"input",(function(){return $c66f8165c35d7ae1$export$b7e3ae3d7c15e42e})),$parcel$export($c66f8165c35d7ae1$exports,"collider",(function(){return $c66f8165c35d7ae1$export$5fa227701309b621}));
//!/**
//! * 	World system allows to manage scenes, containers, viewports and display elements.
//! */
//!class world
const $0a02b0fdb2ff6fc7$var$world={SCENE_MAIN:0,SCENE_HUD:1,LAYER_BG0:0,LAYER_BG1:1,LAYER_BG2:2,LAYER_BG3:3,LAYER_BG4:4,LAYER_MAIN:5,LAYER_FG0:6,LAYER_FG1:7,LAYER_FG2:8,LAYER_FG3:9,LAYER_FG4:10,LAYER_MASK:11,LAYER_HUD_BG0:0,LAYER_HUD_BG1:1,LAYER_HUD_BG2:2,LAYER_HUD_MAIN:3,LAYER_HUD_FG0:4,LAYER_HUD_FG1:5,LAYER_HUD_FG2:6,_scenes:[],activeScene:null,_viewports:[],activeViewport:null,activeContainer:null,activeGroup:null,lastGroup:null,lastElement:null,bounds:$33fa7ae7f1b4b0c7$export$2e2bcd8739ae039.Pool.alloc(),init:function(e=32768,t=32768,i=null,r=null){null===i&&(i=Math.max(e,t)/512),i<16&&(i=16),null!==r&&r<16&&(r=16),this.bounds.zero().resize(e,t),this.createScene($0a02b0fdb2ff6fc7$var$world.SCENE_MAIN,"SCENE_MAIN"),this.setContainer($0a02b0fdb2ff6fc7$var$world.LAYER_BG0,new $eae625b74bd4f8cd$export$2e2bcd8739ae039(e,t,i,r)),this.setContainer($0a02b0fdb2ff6fc7$var$world.LAYER_BG1,new $eae625b74bd4f8cd$export$2e2bcd8739ae039(e,t,i,r)),this.setContainer($0a02b0fdb2ff6fc7$var$world.LAYER_BG2,new $eae625b74bd4f8cd$export$2e2bcd8739ae039(e,t,i,r)),this.setContainer($0a02b0fdb2ff6fc7$var$world.LAYER_BG3,new $eae625b74bd4f8cd$export$2e2bcd8739ae039(e,t,i,r)),this.setContainer($0a02b0fdb2ff6fc7$var$world.LAYER_BG4,new $eae625b74bd4f8cd$export$2e2bcd8739ae039(e,t,i,r)),this.setContainer($0a02b0fdb2ff6fc7$var$world.LAYER_MAIN,new $eae625b74bd4f8cd$export$2e2bcd8739ae039(e,t,i,r)),this.setContainer($0a02b0fdb2ff6fc7$var$world.LAYER_FG0,new $eae625b74bd4f8cd$export$2e2bcd8739ae039(e,t,i,r)),this.setContainer($0a02b0fdb2ff6fc7$var$world.LAYER_FG1,new $eae625b74bd4f8cd$export$2e2bcd8739ae039(e,t,i,r)),this.setContainer($0a02b0fdb2ff6fc7$var$world.LAYER_FG2,new $eae625b74bd4f8cd$export$2e2bcd8739ae039(e,t,i,r)),this.setContainer($0a02b0fdb2ff6fc7$var$world.LAYER_FG3,new $eae625b74bd4f8cd$export$2e2bcd8739ae039(e,t,i,r)),this.setContainer($0a02b0fdb2ff6fc7$var$world.LAYER_FG4,new $eae625b74bd4f8cd$export$2e2bcd8739ae039(e,t,i,r)),this.setContainer($0a02b0fdb2ff6fc7$var$world.LAYER_MASK,new $eae625b74bd4f8cd$export$2e2bcd8739ae039(e,t,i,r)),this.getContainer($0a02b0fdb2ff6fc7$var$world.LAYER_MASK).visible(!1),this.createViewport(0),this.createScene($0a02b0fdb2ff6fc7$var$world.SCENE_HUD,"SCENE_HUD"),this.setContainer($0a02b0fdb2ff6fc7$var$world.LAYER_HUD_BG0,new $e23387bae255f715$export$2e2bcd8739ae039($cf4285abf605e9c9$export$2e2bcd8739ae039.screenWidth,$cf4285abf605e9c9$export$2e2bcd8739ae039.screenHeight)),this.setContainer($0a02b0fdb2ff6fc7$var$world.LAYER_HUD_BG1,new $e23387bae255f715$export$2e2bcd8739ae039($cf4285abf605e9c9$export$2e2bcd8739ae039.screenWidth,$cf4285abf605e9c9$export$2e2bcd8739ae039.screenHeight)),this.setContainer($0a02b0fdb2ff6fc7$var$world.LAYER_HUD_BG2,new $e23387bae255f715$export$2e2bcd8739ae039($cf4285abf605e9c9$export$2e2bcd8739ae039.screenWidth,$cf4285abf605e9c9$export$2e2bcd8739ae039.screenHeight)),this.setContainer($0a02b0fdb2ff6fc7$var$world.LAYER_HUD_MAIN,new $e23387bae255f715$export$2e2bcd8739ae039($cf4285abf605e9c9$export$2e2bcd8739ae039.screenWidth,$cf4285abf605e9c9$export$2e2bcd8739ae039.screenHeight)),this.setContainer($0a02b0fdb2ff6fc7$var$world.LAYER_HUD_FG0,new $e23387bae255f715$export$2e2bcd8739ae039($cf4285abf605e9c9$export$2e2bcd8739ae039.screenWidth,$cf4285abf605e9c9$export$2e2bcd8739ae039.screenHeight)),this.setContainer($0a02b0fdb2ff6fc7$var$world.LAYER_HUD_FG1,new $e23387bae255f715$export$2e2bcd8739ae039($cf4285abf605e9c9$export$2e2bcd8739ae039.screenWidth,$cf4285abf605e9c9$export$2e2bcd8739ae039.screenHeight)),this.setContainer($0a02b0fdb2ff6fc7$var$world.LAYER_HUD_FG2,new $e23387bae255f715$export$2e2bcd8739ae039($cf4285abf605e9c9$export$2e2bcd8739ae039.screenWidth,$cf4285abf605e9c9$export$2e2bcd8739ae039.screenHeight))},createScene:function(e,t=null){this._scenes[e]&&($fde096e7347cb963$export$2e2bcd8739ae039.queueRemove(this._scenes[e]),$parcel$global.dispose(this._scenes[e])),this._scenes[e]=new $70f6e3c3a2801809$export$2e2bcd8739ae039(e,t),$fde096e7347cb963$export$2e2bcd8739ae039.queueAdd(this._scenes[e]),this.selectScene(e)},getScene:function(e=null){return null===e?this.activeScene:e<0||e>=this._scenes.length?null:this._scenes[e]},selectScene:function(e){return!(e<0||e>=this._scenes.length||!this._scenes[e])&&(this.activeScene=this._scenes[e],this.activeContainer=null,!0)},createViewport:function(e){if(null===this.activeScene)throw new Error("createViewport: use `selectScene` first to select the active scene.");this._viewports[e]&&($parcel$global.dispose(this._viewports[e]),this.activeScene.setViewport(e,null)),this._viewports[e]=new $36f8d9ddfdfdb2c5$export$2e2bcd8739ae039(0,0,$cf4285abf605e9c9$export$2e2bcd8739ae039.screenWidth,$cf4285abf605e9c9$export$2e2bcd8739ae039.screenHeight,this.activeScene.maxWidth,this.activeScene.maxHeight),this.activeScene.setViewport(e,this._viewports[e]),this.selectViewport(e)},getViewport:function(e=null){return null===e?this.activeViewport:e<0||e>=this._viewports.length?null:this._viewports[e]},selectViewport:function(e){return!(e<0||e>=this._viewports.length||!this._viewports[e])&&(this.activeViewport=this._viewports[e],!0)},setContainer:function(e,t){if(null===this.activeScene)throw new Error("setContainer: use `selectScene` first to select the active scene.");return this.activeScene.setContainer(e,t),t},getContainer:function(e=null,t=!1){if(null===e){if(null===this.activeContainer&&t)throw new Error("getContainer: container index not specified and default container not set.");return this.activeContainer}if(null===this.activeScene)throw new Error("getContainer: use `selectScene` first to select the active scene.");let i=this.activeScene.getContainer(e);if(null===i&&t)throw new Error("getContainer: container index out of bounds.");return i},selectContainer:function(e){return this.activeContainer=this.getContainer(e,!0),null!==this.activeContainer},showMasks:function(e,t=!0){$0a02b0fdb2ff6fc7$var$world.getScene($0a02b0fdb2ff6fc7$var$world.SCENE_MAIN).getContainer($0a02b0fdb2ff6fc7$var$world.LAYER_MASK).visible(e),$b91bcfe7d0e9e859$export$2e2bcd8739ae039.debugMasks=t},createGroup:function(e=null){if(null===this.activeScene)throw new Error("createGroup: use selectScene first to select the active scene.");return this.activeGroup=$3d21729d154fe9fa$export$2e2bcd8739ae039.Pool.alloc(e),this.activeScene.addGroup(this.activeGroup),this.activeGroup},endGroup:function(e=null,t=null){return null!==e&&null!==t&&this.activeGroup.translate(e,t),this.lastGroup=this.activeGroup,this.activeGroup=null,this.lastGroup.sync()},createElement:function(e,t,i,r=null,n=null){"string"!=typeof e&&(n=r,r=i,i=t,t=e,e=null);let a=this.getContainer(n),s=$96075e5e25a8b8bd$export$2e2bcd8739ae039.Pool.alloc(t,i,r);return a.add(s.setId(e)),null!==this.activeGroup&&this.activeGroup.addChild(s),this.lastElement=s,s},createMask:function(e,t,i=null,r=null,n=null,a=null,s=null){let o=this.getContainer(s||$0a02b0fdb2ff6fc7$var$world.LAYER_MASK);if(null===i){if(null===this.activeGroup)throw new Error("createMask: create a group first to use default masks.");i=this.activeGroup.bounds.x1,r=this.activeGroup.bounds.y1,n=this.activeGroup.bounds.width(),a=this.activeGroup.bounds.height()}let l=$cb1f7d549b970dad$export$2e2bcd8739ae039.Pool.alloc(t,i,r,n,a);return o.add(l.setId(e)),null!==this.activeGroup&&this.activeGroup.addChild(l),l},createLabel:function(e,t,i,r,n,a=null){"string"!=typeof e&&(a=n,n=r,r=i,i=t,t=e,e=null);let s=this.getContainer(a),o=$fe8bd36457f8e4df$export$2e2bcd8739ae039.Pool.alloc(t,i,r,n);return s.add(o.setId(e)),null!==this.activeGroup&&this.activeGroup.addChild(o),this.lastElement=o,o},createUpdater:function(e=null,t=null){if(null===this.activeScene)throw new Error("createUpdater: use selectScene first to select the active scene.");return new $f621b5dd5d2511c0$export$2e2bcd8739ae039(this.activeScene,e,t)}};var//!/class
$0a02b0fdb2ff6fc7$export$2e2bcd8739ae039=$0a02b0fdb2ff6fc7$var$world;
//!/**
//! * Registered resources. Initially these are resource descriptors, but after a call to `res.load` these will be fully loaded resources.
//! */
const $4d52c4e5e80ae305$var$r={};var $4d52c4e5e80ae305$export$2e2bcd8739ae039=$4d52c4e5e80ae305$var$r;
//!class res
const $2ee1ae61bc160290$var$res={config:function(e){$68eb0e0111ce8878$export$2e2bcd8739ae039.config(e)},load:function(e=null){return new Promise((function(t,i){$68eb0e0111ce8878$export$2e2bcd8739ae039.load($4d52c4e5e80ae305$export$2e2bcd8739ae039,(function(t,i,r,n){e&&e(r,n)}),(function(){t()}))}))},get:function(e){return $4d52c4e5e80ae305$export$2e2bcd8739ae039[e]},__resIdMustNotExist:function(e){if(e in $4d52c4e5e80ae305$export$2e2bcd8739ae039)throw new Error("Resource identifier `"+e+"` is already in use")},color:function(e,t,i,r){return this.__resIdMustNotExist(e),$4d52c4e5e80ae305$export$2e2bcd8739ae039[e]={type:"object",wrapper:"Custom",color:t,width:i,height:r}},custom:function(e,t,i,r,n=null){return this.__resIdMustNotExist(e),$4d52c4e5e80ae305$export$2e2bcd8739ae039[e]={type:"object",wrapper:"Custom",width:t,height:i,draw:r,...n}},image:function(e,t,i=null){return this.__resIdMustNotExist(e),$4d52c4e5e80ae305$export$2e2bcd8739ae039[e]={type:"image",wrapper:"Drawable",src:t,...i}},images:function(e,t,i,r=null,n=null,a=null,s=null){return this.__resIdMustNotExist(e),$4d52c4e5e80ae305$export$2e2bcd8739ae039[e]={type:"images",wrapper:"Spritesheet",src:t,count:i,width:r,height:n,config:{frameWidth:r,frameHeight:n,...a},...s}},spritesheet:function(e,t,i,r,n=0,a=null,s=null){return this.__resIdMustNotExist(e),$4d52c4e5e80ae305$export$2e2bcd8739ae039[e]={type:"image",wrapper:"Spritesheet",src:t,config:{frameWidth:i,frameHeight:r,numFrames:n,...a},...s}},animation:function(e,t,i,r,n=null,a=null,s=null){return this.__resIdMustNotExist(e),$4d52c4e5e80ae305$export$2e2bcd8739ae039[e]={type:"image",wrapper:"SpritesheetAnimation",src:t,config:{frameWidth:i,frameHeight:r,numFrames:n,...a},anim:{def:null,fps:15,seq:{},trans:{}},...s,fps:function(e){return this.anim.fps=e,this},seq:function(e,t,i,r=null){return this.anim.seq[e]={loop:t,group:i},null!==r&&(this.anim.seq[e].fps=r),this},trans:function(e,t,i){return e in this.anim.trans||(this.anim.trans[e]={}),this.anim.trans[e][t]=i,this},def:function(e){return this.anim.def=e,this}}},spritefont:function(e,t,i,r,n,a=null,s=null){return this.__resIdMustNotExist(e),$4d52c4e5e80ae305$export$2e2bcd8739ae039[e]={type:"image",wrapper:"SpriteFont",src:t,font:{charWidth:i,charHeight:r,charset:n,...a},...s}},json:function(e,t,i=null){return this.__resIdMustNotExist(e),$4d52c4e5e80ae305$export$2e2bcd8739ae039[e]={type:"json",src:t,...i}},data:function(e,t,i=null){return this.__resIdMustNotExist(e),$4d52c4e5e80ae305$export$2e2bcd8739ae039[e]={type:"data",src:t,...i}},text:function(e,t,i=null){return this.__resIdMustNotExist(e),$4d52c4e5e80ae305$export$2e2bcd8739ae039[e]={type:"text",src:t,...i}},sfx:function(e,t,i=null){return this.__resIdMustNotExist(e),$4d52c4e5e80ae305$export$2e2bcd8739ae039[e]={type:"audio",wrapper:"Sound",src:t,track:"sfx",...i}},sfxm:function(e,t,i,r="sequential"){return this.__resIdMustNotExist(e),$4d52c4e5e80ae305$export$2e2bcd8739ae039[e]={type:"audios",wrapper:"SoundArray",src:t,count:i,track:"sfx",mode:r}},music:function(e,t){return this.__resIdMustNotExist(e),$4d52c4e5e80ae305$export$2e2bcd8739ae039[e]={type:"audio",wrapper:"Sound",src:t,track:"music"}}};var $2ee1ae61bc160290$export$2e2bcd8739ae039=$2ee1ae61bc160290$var$res,$lTI0F=parcelRequire("lTI0F");
//![import '../flow/stick.js']
//![import '../flow/button.js']
//!class Gamepad
const $ff17ab5c944d50f9$var$Gamepad=$lTI0F.Class.extend({sticks:null,buttons:null,scene:null,container:null,_visible:!0,__ctor:function(e,t){this.sticks={},this.buttons={},this.scene=e,this.layer=e.getContainer(t)},addStick:function(e,t,i,r,n,a=0){0==a&&(a=r.width-n.width);let s=new $e311fd73aef87164$export$2e2bcd8739ae039(this.layer,t,i,a,r,n);return this.sticks[e]=s,this[e]=s,s},addButton:function(e,t,i,r=null,n=null){let a=new $1198e43a1b1a70e6$export$2e2bcd8739ae039(this.layer,t,i,r,n);return this.buttons[e]=a,this[e]=a,a},visible:function(e=null){if(null===e)return this._visible;this._visible=e;for(let t in this.sticks)this.sticks[t].visible(e);for(let t in this.buttons)this.buttons[t].visible(e);return this},showMasks:function(e){for(let t in this.sticks)this.sticks[t].hitbox.visible(e,!0);for(let t in this.buttons)this.buttons[t].hitbox.visible(e,!0);return this}});var//!/class
$ff17ab5c944d50f9$export$2e2bcd8739ae039=$ff17ab5c944d50f9$var$Gamepad;
//!namespace input
//!/namespace
//!class input
const $fa684acf2c06fbb7$var$input={_gamepads:[],activeGamepad:null,lastButton:null,lastStick:null,cursor:{_enabled:null,_handler:null,_element:null,pointer:null,element:function(e=!1){return!1===e?this._element:(this._element=e,this)},native:function(e){e||"none"===$cf4285abf605e9c9$export$2e2bcd8739ae039.renderer.elem.style.cursor?e&&"none"===$cf4285abf605e9c9$export$2e2bcd8739ae039.renderer.elem.style.cursor&&$cf4285abf605e9c9$export$2e2bcd8739ae039.renderer.elem.style.removeProperty("cursor"):$cf4285abf605e9c9$export$2e2bcd8739ae039.renderer.elem.style.cursor="none"},enabled:function(e=null){return null===e?this._enabled:(this._enabled===e||(this._enabled=e,!0===e?(null!==this._element&&($cf4285abf605e9c9$export$2e2bcd8739ae039.renderer.elem.style.cursor="none"),$1ebcb7208b1d3955$export$2e2bcd8739ae039.register(this.pointerHandler)):($cf4285abf605e9c9$export$2e2bcd8739ae039.renderer.elem.style.removeProperty("cursor"),$1ebcb7208b1d3955$export$2e2bcd8739ae039.unregister(this.pointerHandler))),this)},handler:function(e){return this._handler=e,this},pointerHandler:{priority:50,onPointerEvent:function(e,t,i){$fa684acf2c06fbb7$var$input.cursor._enabled&&($fa684acf2c06fbb7$var$input.cursor.pointer=t,null!==$fa684acf2c06fbb7$var$input.cursor._element&&$fa684acf2c06fbb7$var$input.cursor._element.setPosition(t.x,t.y),null!==$fa684acf2c06fbb7$var$input.cursor._handler&&$fa684acf2c06fbb7$var$input.cursor._handler(e,t))}}},createGamepad:function(e,t=null){return t=null!==t?t:$0a02b0fdb2ff6fc7$export$2e2bcd8739ae039.LAYER_HUD_MAIN,$0a02b0fdb2ff6fc7$export$2e2bcd8739ae039.selectScene($0a02b0fdb2ff6fc7$export$2e2bcd8739ae039.SCENE_HUD),$0a02b0fdb2ff6fc7$export$2e2bcd8739ae039.selectContainer(t),this._gamepads[e]=new $ff17ab5c944d50f9$export$2e2bcd8739ae039($0a02b0fdb2ff6fc7$export$2e2bcd8739ae039.activeScene,t),this.selectGamepad(e),this.activeGamepad},getGamepad:function(e){return e<0||e>=this._gamepads.length?null:this._gamepads[e]||null},selectGamepad:function(e){return this.activeGamepad=this.getGamepad(e),!0},debugGamepad:function(e,t){if(null!==e)this._gamepads[e].debug(t);else for(let e=0;e<this._gamepads.length;e++)this._gamepads[e]&&this.debugGamepad(e,t)},stick:function(e,t,i,r,n,a=0){if(null===this.activeGamepad)throw new Error("input.addStick: use input.selectGamepad first to select the active gamepad.");return this.lastStick=this.activeGamepad.addStick(e,t,i,r,n,a)},button:function(e,t,i,r=null,n=null){if(null===this.activeGamepad)throw new Error("input.addButton: use input.selectGamepad first to select the active gamepad.");return this.lastButton=this.activeGamepad.addButton(e,t,i,r,n)}};var//!/class
$fa684acf2c06fbb7$export$2e2bcd8739ae039=$fa684acf2c06fbb7$var$input;const $e0694b0a35335b44$var$SUPER_TYPE_MASK=4294963200,$e0694b0a35335b44$var$collider={FLAG_EXCLUDE:$8d8e7c58165f35d0$export$2e2bcd8739ae039.allocFlag(),contactRules:{},truncationRules:{},scene:null,maskLayer:null,fupdater:null,lupdater:null,flagsAnd:0,flagsValue:0,state:{contact:$33fa7ae7f1b4b0c7$export$2e2bcd8739ae039.Pool.alloc(),flags:0,dx:0,dy:0,bounds:$33fa7ae7f1b4b0c7$export$2e2bcd8739ae039.Pool.alloc(),x:new Array(32).fill(0),y:new Array(32).fill(0),v0x:new Array(32).fill(0),v0y:new Array(32).fill(0),v1x:new Array(32).fill(0),v1y:new Array(32).fill(0),v2x:new Array(32).fill(0),v2y:new Array(32).fill(0),count:0,target:0,v0:0,w0:0,delta0:0,v1:0,w1:0,delta1:0,w2:0,t_dx:0,t_dy:0},enable:function(e=null,t=null){this.scene=$0a02b0fdb2ff6fc7$export$2e2bcd8739ae039.getScene(e||$0a02b0fdb2ff6fc7$export$2e2bcd8739ae039.SCENE_MAIN),this.maskLayer=this.scene.getContainer(t||$0a02b0fdb2ff6fc7$export$2e2bcd8739ae039.LAYER_MASK),this.flagsAnd=$8d8e7c58165f35d0$export$2e2bcd8739ae039.ALIVE|$8d8e7c58165f35d0$export$2e2bcd8739ae039.VISIBLE|$e0694b0a35335b44$var$collider.FLAG_EXCLUDE,this.flagsValue=$8d8e7c58165f35d0$export$2e2bcd8739ae039.ALIVE|$8d8e7c58165f35d0$export$2e2bcd8739ae039.VISIBLE,this.scene.fupdater.add(this.firstUpdate,this),this.scene.lupdater.add(this.lastUpdate,this),this.fupdater=$45a34d9ad9468512$export$2e2bcd8739ae039.Pool.alloc(this),this.lupdater=$45a34d9ad9468512$export$2e2bcd8739ae039.Pool.alloc(this)},disable:function(){this.scene.fupdater.remove(this.update,this),this.maskLayer=null,this.fupdater.free(),this.lupdater.free()},firstUpdate:function(e,t){t.fupdater.exec()},lastUpdate:function(e,t){t.lupdater.exec()},later:{run:function(e,t,i,r,n){$e0694b0a35335b44$var$collider.fupdater.add(this._run,e,t,i,r,n)},setVisible:function(e,t){$e0694b0a35335b44$var$collider.fupdater.add(this._setVisible,e,t)},setValue:function(e,t,i){$e0694b0a35335b44$var$collider.fupdater.add(this._setValue,e,t,i)},setFlags:function(e,t){$e0694b0a35335b44$var$collider.fupdater.add(this._setFlags,e,t)},clearFlags:function(e,t){$e0694b0a35335b44$var$collider.fupdater.add(this._clearFlags,e,t)},_run:function(e,t,i,r,n,a){return i(e,t,r,n,a),!1},_setVisible:function(e,t,i){return t.visible(i),!1},_setValue:function(e,t,i,r){return t[i]=r,!1},_setFlags:function(e,t,i){return t.setFlags(i),!1},_clearFlags:function(e,t,i){return t.clearFlags(i),!1}},
//!}
contact:function(e,t,i,r=null){return e in this.contactRules||(this.contactRules[e]={}),this.contactRules[e][t]={callback:i,context:r},this},truncate:function(e,t,i=null,r=null){return e in this.truncationRules||(this.truncationRules[e]={}),this.truncationRules[e][t]={callback:i,context:r},this},getContactFlags:function(e,t){this.state.contact.set(e).setAsIntersection(t);let i=this.state.contact;return this.state.flags=0,this.state.numFlags=0,i.x1==t.x1&&(this.state.flags|=$e0694b0a35335b44$var$collider.Contact.LEFT,this.state.numFlags++),i.x2==t.x2&&(this.state.flags|=$e0694b0a35335b44$var$collider.Contact.RIGHT,this.state.numFlags++),i.y1==t.y1&&(this.state.flags|=$e0694b0a35335b44$var$collider.Contact.TOP,this.state.numFlags++),i.y2==t.y2&&(this.state.flags|=$e0694b0a35335b44$var$collider.Contact.BOTTOM,this.state.numFlags++),this.state.flags},calc:function(e,t,i,r,n,a){let s=this.state.count,o=null,l=0;if(t>0)for(let e=0;e<s;e++)!r[e]||!n[e]||i[e]<0||((null===o||i[e]>o)&&(o=i[e]),n[e]=a[e]=0,l+=r[e]);else for(let e=0;e<s;e++)!r[e]||!n[e]||i[e]>0||((null===o||i[e]<o)&&(o=i[e]),n[e]=a[e]=0,l+=r[e]);null===o&&(o=0),e?(this.state.v0=l,this.state.w0=Math.abs(o),this.state.delta0=o):(this.state.v1=l,this.state.w1=Math.abs(o),this.state.delta1=o)},attemptSelect:function(e){this.state.v1+this.state.v0===this.state.target&&(null===this.state.w2||this.state.w1+this.state.w0<this.state.w2)&&(this.state.w2=this.state.w1+this.state.w0,e?(this.state.t_dx=this.state.delta0,this.state.t_dy=this.state.delta1):(this.state.t_dx=this.state.delta1,this.state.t_dy=this.state.delta0))},load0:function(){let e=this.state.count;for(let t=0;t<e;t++)this.state.v1x[t]=this.state.v0x[t],this.state.v1y[t]=this.state.v0y[t]},save1:function(){let e=this.state.count;for(let t=0;t<e;t++)this.state.v2x[t]=this.state.v1x[t],this.state.v2y[t]=this.state.v1y[t]},load1:function(){let e=this.state.count;for(let t=0;t<e;t++)this.state.v1x[t]=this.state.v2x[t],this.state.v1y[t]=this.state.v2y[t]},resolveXpos:function(e=!1){if(this.calc(e,1,this.state.x,this.state.v0x,this.state.v1x,this.state.v1y),e)return!0;this.save1(),this.resolveYpos(!0)&&this.attemptSelect(!1),this.load1(),this.resolveYneg(!0)&&this.attemptSelect(!1),this.load0()},resolveXneg:function(e=!1){if(this.calc(e,-1,this.state.x,this.state.v0x,this.state.v1x,this.state.v1y),e)return!0;this.save1(),this.resolveYpos(!0)&&this.attemptSelect(!1),this.load1(),this.resolveYneg(!0)&&this.attemptSelect(!1),this.load0()},resolveYpos:function(e=!1){if(this.calc(e,1,this.state.y,this.state.v0y,this.state.v1y,this.state.v1x),e)return!0;this.save1(),this.resolveXpos(!0)&&this.attemptSelect(!0),this.load1(),this.resolveXneg(!0)&&this.attemptSelect(!0),this.load0()},resolveYneg:function(e=!1){if(this.calc(e,-1,this.state.y,this.state.v0y,this.state.v1y,this.state.v1x),e)return!0;this.save1(),this.resolveXpos(!0)&&this.attemptSelect(!0),this.load1(),this.resolveXneg(!0)&&this.attemptSelect(!0),this.load0()},commit:function(){this.state.group.alive()&&(this.state.group.translate(this.state.dx,this.state.dy),this.state.group.clearFlags($e0694b0a35335b44$var$collider.FLAG_EXCLUDE))},translate:function(e,t=null,i=0,r=0){if("number"==typeof t&&(r=i,i=t,t=null),!e)return;if(t||(t=e.group),!t.alive()||!e.alive())return;if(this.state.mask=e,this.state.group=t,this.state.dx=downscalef(upscale(i)),this.state.dy=downscalef(upscale(r)),!this.maskLayer||!e.visible())return this.commit();let n=this.truncationRules[e.type];if(!n&&(n=this.truncationRules[e.type&$e0694b0a35335b44$var$SUPER_TYPE_MASK],!n))return this.commit(),this.scan(e,t);this.state.offs=t.getOffsets(this.state.dx,this.state.dy),this.state.bounds.set(e.bounds).translate(this.state.offs.x+this.state.dx,this.state.offs.y+this.state.dy),t.setFlags($e0694b0a35335b44$var$collider.FLAG_EXCLUDE);let a=this.maskLayer.selectInRegion(this.state.bounds,this.flagsAnd,this.flagsValue);if(0===a.length)return a.free(),this.commit();let s=0,o=0;for(;;){let t=a.shift();if(null===t)break;let i=n[t.type];if(!i&&(i=n[t.type&$e0694b0a35335b44$var$SUPER_TYPE_MASK],!i))continue;if(!1===i.callback||null!==i.callback&&!0!==i.callback&&!i.callback(e,t,i.context))continue;let r=Math.min(this.state.bounds.x2,t.bounds.x2)-Math.max(this.state.bounds.x1,t.bounds.x1),l=Math.min(this.state.bounds.y2,t.bounds.y2)-Math.max(this.state.bounds.y1,t.bounds.y1);this.state.v0x[s]=0,this.state.v0y[s]=0,Math.min(this.state.bounds.width(),t.bounds.width())!=r&&(this.state.x[s]=absmin(this.state.bounds.x2-t.bounds.x1,this.state.bounds.x1-t.bounds.x2),this.state.v0x[s]=1),Math.min(this.state.bounds.height(),t.bounds.height())!=l&&(this.state.y[s]=absmin(this.state.bounds.y2-t.bounds.y1,this.state.bounds.y1-t.bounds.y2),this.state.v0y[s]=1);let c=this.state.v0x[s]+this.state.v0y[s];o+=c,c>1&&(this.state.v0x[s]=c,this.state.v0y[s]=c),this.state.v1x[s]=this.state.v0x[s],this.state.v1y[s]=this.state.v0y[s],s++}if(a.free(),0==o)return this.commit(),this.scan(e,t);if(this.state.target=o,this.state.count=s,this.state.w2=null,this.resolveXpos(),this.resolveXneg(),this.resolveYpos(),this.resolveYneg(),null!==this.state.w2){let t=this.contactRules[e.type];if(t||(t=this.contactRules[e.type&$e0694b0a35335b44$var$SUPER_TYPE_MASK]),t){for(this.state.bounds.set(e.bounds).translate(this.state.offs.x+this.state.dx-.5*this.state.t_dx,this.state.offs.y+this.state.dy-.5*this.state.t_dy),a=this.maskLayer.selectInRegion(this.state.bounds,this.flagsAnd,this.flagsValue);e.alive();){let i=a.shift();if(null===i)break;if(!i.alive())continue;let r=t[i.type];(r||(r=t[i.type&$e0694b0a35335b44$var$SUPER_TYPE_MASK],r))&&r.callback(e,i,r.context)}a.free()}this.state.dx-=this.state.t_dx,this.state.dy-=this.state.t_dy}this.commit()},scan:function(e,t=null){if(t||(t=e.group),!t||!t.alive()||!e.alive())return;if(this.state.mask=e,this.state.group=t,!this.maskLayer||!e.visible())return;let i=this.contactRules[e.type];if(i||(i=this.contactRules[e.type&$e0694b0a35335b44$var$SUPER_TYPE_MASK]),!i)return;t.setFlags($e0694b0a35335b44$var$collider.FLAG_EXCLUDE);let r=this.maskLayer.selectInRegion(e.bounds,this.flagsAnd,this.flagsValue);for(t.clearFlags($e0694b0a35335b44$var$collider.FLAG_EXCLUDE);e.alive();){let t=r.shift();if(null===t)break;if(!t.alive())continue;let n=i[t.type];(n||(n=i[t.type&$e0694b0a35335b44$var$SUPER_TYPE_MASK],n))&&n.callback(e,t,n.context)}r.free()},
//!/class
//!namespace collider
//!enum Contact
Contact:{
//!LEFT
LEFT:1,
//!RIGHT
RIGHT:2,
//!HORIZONTAL
HORIZONTAL:3,
//!TOP
TOP:4,
//!BOTTOM
BOTTOM:8,
//!VERTICAL
VERTICAL:12}};
//!class collider
var//!/enum
//!/namespace
$e0694b0a35335b44$export$2e2bcd8739ae039=$e0694b0a35335b44$var$collider;const $c66f8165c35d7ae1$export$773cc7fa6f8304c3=$cf4285abf605e9c9$export$2e2bcd8739ae039,$c66f8165c35d7ae1$export$f965ae91e38a1274=$0a02b0fdb2ff6fc7$export$2e2bcd8739ae039,$c66f8165c35d7ae1$export$43caf9889c228507=$4d52c4e5e80ae305$export$2e2bcd8739ae039,$c66f8165c35d7ae1$export$a79e2b3ea5d10ee0=$2ee1ae61bc160290$export$2e2bcd8739ae039,$c66f8165c35d7ae1$export$b7e3ae3d7c15e42e=$fa684acf2c06fbb7$export$2e2bcd8739ae039,$c66f8165c35d7ae1$export$5fa227701309b621=$e0694b0a35335b44$export$2e2bcd8739ae039,$07eb01cb16db42c1$export$4c85e640eb41c31b=$lTI0F.Class,$07eb01cb16db42c1$export$19342e026b58ebb7=$lTI0F.Schema,$07eb01cb16db42c1$export$14416b8d99d47caa=$lTI0F.Template,$07eb01cb16db42c1$export$816be348776d53c1=$b91bcfe7d0e9e859$export$2e2bcd8739ae039,$07eb01cb16db42c1$export$7c09191825db112d=$5018703a9d9401f6$export$2e2bcd8739ae039,$07eb01cb16db42c1$export$c1b1a45ed915aad9=$c85bfca66a1d5459$export$2e2bcd8739ae039,$07eb01cb16db42c1$export$e1dae5660003ffa7=$fde096e7347cb963$export$2e2bcd8739ae039,$07eb01cb16db42c1$export$c57e9b2d8b9e4de=$aa13d5a33a29523b$export$2e2bcd8739ae039,$07eb01cb16db42c1$export$a92776769f460054=$09cb358c2aa81294$export$2e2bcd8739ae039,$07eb01cb16db42c1$export$e9e0d96f49f57c33=$6fd473ea64d5e91a$export$2e2bcd8739ae039,$07eb01cb16db42c1$export$8d01c972ee8b14a9=$22f7193504a1f089$export$2e2bcd8739ae039,$07eb01cb16db42c1$export$7c4f444dab5ed59=$f19bc58388a66526$export$2e2bcd8739ae039,$07eb01cb16db42c1$export$ce30dbb46644d06c=$e2086caaef68d463$export$2e2bcd8739ae039,$07eb01cb16db42c1$export$462bb059fed9d9e5=$21de2c81276fb0c1$export$2e2bcd8739ae039,$07eb01cb16db42c1$export$cb01d642ebc0a347=$6537756e185f4720$export$2e2bcd8739ae039,$07eb01cb16db42c1$export$eff95f126aa67cfb=$4ef6348d85518192$export$2e2bcd8739ae039,$07eb01cb16db42c1$export$573ab5fe783d8aac=$3c032669d563ec95$exports,$07eb01cb16db42c1$export$e9a269813a6315a4=$68eb0e0111ce8878$export$2e2bcd8739ae039,$07eb01cb16db42c1$export$85990f0f98a390bb=$689eb0292031c01c$export$2e2bcd8739ae039,$07eb01cb16db42c1$export$fe264c04f294fd15=$3755e11d40ee463d$export$2e2bcd8739ae039,$07eb01cb16db42c1$export$1034c64782e66715=$284173a7f016deff$export$2e2bcd8739ae039,$07eb01cb16db42c1$export$54c2e3dc7acea9f5=$5ffbe5e8d10cd81c$export$2e2bcd8739ae039,$07eb01cb16db42c1$export$8fbd1ac8e83536df=$b280b216ed4b8038$export$2e2bcd8739ae039,$07eb01cb16db42c1$export$a428cd33b25d5283=$45a34d9ad9468512$export$2e2bcd8739ae039,$07eb01cb16db42c1$export$5b12bf1653c0dd85=$828cb24954f75093$export$2e2bcd8739ae039,$07eb01cb16db42c1$export$c79fc6492f3af13d=$b102a02d12056e55$export$2e2bcd8739ae039,$07eb01cb16db42c1$export$ac4bca90992eed1=$81cb9504fb4d2922$export$2e2bcd8739ae039,$07eb01cb16db42c1$export$c9b44e90c5031de0=$a07db0aab30c8926$export$2e2bcd8739ae039,$07eb01cb16db42c1$export$3dc3622b48e72adc=$33fa7ae7f1b4b0c7$export$2e2bcd8739ae039,$07eb01cb16db42c1$export$79f93ddd76e66d40=$333d67efa04b2b0b$export$2e2bcd8739ae039,$07eb01cb16db42c1$export$cea96571ebbff9dd=$3569e5716b6e61f7$export$2e2bcd8739ae039,$07eb01cb16db42c1$export$deefd61317ad2797=$26e32f922146c7f0$export$2e2bcd8739ae039,$07eb01cb16db42c1$export$5a2130c936f86fb8=$03dacdb15d88825e$export$2e2bcd8739ae039,$07eb01cb16db42c1$export$cfb3877ce19bb838=$8d8e7c58165f35d0$export$2e2bcd8739ae039,$07eb01cb16db42c1$export$ef2184bd89960b14=$7379a5ec690d13e4$export$2e2bcd8739ae039,$07eb01cb16db42c1$export$38af1803e3442a7f=$70f6e3c3a2801809$export$2e2bcd8739ae039,$07eb01cb16db42c1$export$d5c6c08dc2d3ca7=$36f8d9ddfdfdb2c5$export$2e2bcd8739ae039,$07eb01cb16db42c1$export$3386beb5bc3bfa=$f621b5dd5d2511c0$export$2e2bcd8739ae039,$07eb01cb16db42c1$export$42a852a2b6b56249=$c0ca59ea4341de78$export$2e2bcd8739ae039,$07eb01cb16db42c1$export$eeaa45a7d92663a6=$e23387bae255f715$export$2e2bcd8739ae039,$07eb01cb16db42c1$export$cc55614734af2d87=$eae625b74bd4f8cd$export$2e2bcd8739ae039,$07eb01cb16db42c1$export$eb2fcfdbd7ba97d4=$3d21729d154fe9fa$export$2e2bcd8739ae039,$07eb01cb16db42c1$export$f35845279390eafd=$9c01ee4e3248479e$export$2e2bcd8739ae039,$07eb01cb16db42c1$export$db77ccec0bb4ccac=$96075e5e25a8b8bd$export$2e2bcd8739ae039,$07eb01cb16db42c1$export$991dcf7284de63d=$cb1f7d549b970dad$export$2e2bcd8739ae039,$07eb01cb16db42c1$export$b04be29aa201d4f5=$fe8bd36457f8e4df$export$2e2bcd8739ae039,$07eb01cb16db42c1$export$474b8119f9aaf6a9=$e2643e71ae71ec0f$export$2e2bcd8739ae039,$07eb01cb16db42c1$export$63d5558963a08ef6=$1ebcb7208b1d3955$export$2e2bcd8739ae039,$07eb01cb16db42c1$export$f9b7ad1c9b000a93=$3fcd3411b88f95db$export$2e2bcd8739ae039,$07eb01cb16db42c1$export$353f5b6fc5456de1=$1198e43a1b1a70e6$export$2e2bcd8739ae039,$07eb01cb16db42c1$export$85a6520672683043=$e311fd73aef87164$export$2e2bcd8739ae039;var $07eb01cb16db42c1$export$2e2bcd8739ae039=$c66f8165c35d7ae1$exports;export{$07eb01cb16db42c1$export$4c85e640eb41c31b as Class,$07eb01cb16db42c1$export$19342e026b58ebb7 as Schema,$07eb01cb16db42c1$export$14416b8d99d47caa as Template,$07eb01cb16db42c1$export$816be348776d53c1 as globals,$07eb01cb16db42c1$export$7c09191825db112d as glx,$07eb01cb16db42c1$export$c1b1a45ed915aad9 as glsl,$07eb01cb16db42c1$export$e1dae5660003ffa7 as System,$07eb01cb16db42c1$export$c57e9b2d8b9e4de as Timer,$07eb01cb16db42c1$export$a92776769f460054 as Random,$07eb01cb16db42c1$export$e9e0d96f49f57c33 as KeyCode,$07eb01cb16db42c1$export$8d01c972ee8b14a9 as Canvas,$07eb01cb16db42c1$export$7c4f444dab5ed59 as Perf,$07eb01cb16db42c1$export$ce30dbb46644d06c as Log,$07eb01cb16db42c1$export$462bb059fed9d9e5 as Shader,$07eb01cb16db42c1$export$cb01d642ebc0a347 as ShaderProgram,$07eb01cb16db42c1$export$eff95f126aa67cfb as Framebuffer,$07eb01cb16db42c1$export$573ab5fe783d8aac as Wrappers,$07eb01cb16db42c1$export$e9a269813a6315a4 as Resources,$07eb01cb16db42c1$export$85990f0f98a390bb as Sound,$07eb01cb16db42c1$export$fe264c04f294fd15 as Recycler,$07eb01cb16db42c1$export$1034c64782e66715 as Linkable,$07eb01cb16db42c1$export$54c2e3dc7acea9f5 as List,$07eb01cb16db42c1$export$8fbd1ac8e83536df as PriorityQueue,$07eb01cb16db42c1$export$a428cd33b25d5283 as Handler,$07eb01cb16db42c1$export$5b12bf1653c0dd85 as Matrix,$07eb01cb16db42c1$export$c79fc6492f3af13d as Rect,$07eb01cb16db42c1$export$ac4bca90992eed1 as Vec2,$07eb01cb16db42c1$export$c9b44e90c5031de0 as TFunction,$07eb01cb16db42c1$export$3dc3622b48e72adc as Bounds2,$07eb01cb16db42c1$export$79f93ddd76e66d40 as Point2,$07eb01cb16db42c1$export$cea96571ebbff9dd as Easing,$07eb01cb16db42c1$export$deefd61317ad2797 as Anim,$07eb01cb16db42c1$export$5a2130c936f86fb8 as Boot,$07eb01cb16db42c1$export$cfb3877ce19bb838 as GridElement,$07eb01cb16db42c1$export$ef2184bd89960b14 as Grid,$07eb01cb16db42c1$export$38af1803e3442a7f as Scene,$07eb01cb16db42c1$export$d5c6c08dc2d3ca7 as Viewport,$07eb01cb16db42c1$export$3386beb5bc3bfa as Updater,$07eb01cb16db42c1$export$42a852a2b6b56249 as Container,$07eb01cb16db42c1$export$eeaa45a7d92663a6 as SimpleContainer,$07eb01cb16db42c1$export$cc55614734af2d87 as GridContainer,$07eb01cb16db42c1$export$eb2fcfdbd7ba97d4 as Group,$07eb01cb16db42c1$export$f35845279390eafd as Drawable,$07eb01cb16db42c1$export$db77ccec0bb4ccac as Element,$07eb01cb16db42c1$export$991dcf7284de63d as Mask,$07eb01cb16db42c1$export$b04be29aa201d4f5 as Label,$07eb01cb16db42c1$export$474b8119f9aaf6a9 as KeyboardHandler,$07eb01cb16db42c1$export$63d5558963a08ef6 as PointerHandler,$07eb01cb16db42c1$export$f9b7ad1c9b000a93 as ScreenControls,$07eb01cb16db42c1$export$353f5b6fc5456de1 as Button,$07eb01cb16db42c1$export$85a6520672683043 as Stick,$07eb01cb16db42c1$export$2e2bcd8739ae039 as default};
//# sourceMappingURL=froxel.js.map
