(function(){var $parcel$global="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{};function $parcel$export(t,e,a){Object.defineProperty(t,e,{get:a,enumerable:!0})}var $541749fd9f5c044e8db392fa33166afa$exports={};let $e3192943c08c87b673a09591fd8bc1f0$export$default={invokeLater:function(t){t&&setTimeout((function(){t()}),10)},wait:function(t){return new Promise((function(e,a){setTimeout(e,t)}))},typeOf:function(t){return t instanceof Array?"array":null===t?"null":(typeof t).toString().toLowerCase()},isArrayOrObject:function(t){switch($e3192943c08c87b673a09591fd8bc1f0$export$default.typeOf(t)){case"array":case"object":return!0}return!1},clone:function(t){let e=$e3192943c08c87b673a09591fd8bc1f0$export$default.typeOf(t);if("array"===e){e=[];for(let a=0;a<t.length;a++)e.push($e3192943c08c87b673a09591fd8bc1f0$export$default.clone(t[a]))}else if("object"===e){if("clone"in t&&"function"==typeof t.clone)return t.clone();e={};for(let a in t)e[a]=$e3192943c08c87b673a09591fd8bc1f0$export$default.clone(t[a])}else e=t;return e},merge:function(t,...e){if("array"==$e3192943c08c87b673a09591fd8bc1f0$export$default.typeOf(t))for(let a=0;a<e.length;a++){let i=e[a];if("array"!=$e3192943c08c87b673a09591fd8bc1f0$export$default.typeOf(i))t.push(i);else for(let e=0;e<i.length;e++)t.push($e3192943c08c87b673a09591fd8bc1f0$export$default.clone(i[e]))}else if("object"==$e3192943c08c87b673a09591fd8bc1f0$export$default.typeOf(t))for(let a=0;a<e.length;a++){let i=e[a];if("object"==$e3192943c08c87b673a09591fd8bc1f0$export$default.typeOf(i))for(let e in i)$e3192943c08c87b673a09591fd8bc1f0$export$default.isArrayOrObject(i[e])?e in t?$e3192943c08c87b673a09591fd8bc1f0$export$default.merge(t[e],i[e]):t[e]=$e3192943c08c87b673a09591fd8bc1f0$export$default.clone(i[e]):t[e]=i[e]}return t},override:function(t,...e){for(let a=0;a<e.length;a++)for(let i in e[a])t[i]=e[a][i];return t},partialCompare:function(t,e){if(null==t||null==e)return!1;if(t===e)return!0;for(var a in e)if(t[a]!=e[a])return!1;return!0},arrayFind:function(t,e,a){for(var i=0;t&&i<t.length;i++)if(this.partialCompare(t[i],e))return a?t[i]:i;return!!a&&null},isInstanceOf:function(t,e){return!(!t||!e||"object"!=typeof t)&&(t instanceof e||"isInstanceOf"in t&&t.isInstanceOf(e))},indexOf:function(t,e,a=!1){if(a){for(let a=0;a<t.length;a++)if(t[a]===e)return a;return-1}for(let a in t)if(t[a]===e)return a;return-1},escape:function(t){return(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},ensureTypeOf:function(t,e){return!e||!t||e instanceof t||e.isInstanceOf&&t.prototype.className&&e.isInstanceOf(t.prototype.className)?e:new t(e)},serialize:function(t){return JSON.stringify(t)},deserialize:function(t){return JSON.parse(t)},hookAppend:function(t,e,a,i=!0){const r=t[e];return t[e]=i?function(...t){if(!1!==r.apply(this,t))return a.apply(this,t)}:function(...t){return r.apply(this,t),a.apply(this,t)},{unhook:function(){t[e]=r}}},hookPrepend:function(t,e,a,i=!0){const r=t[e];return t[e]=i?function(...t){if(!1!==a.apply(this,t))return r.apply(this,t)}:function(...t){return a.apply(this,t),r.apply(this,t)},{unhook:function(){t[e]=r}}}},$fcf834a5219b84862032cf1f9914c1a0$export$default=function(){};$fcf834a5219b84862032cf1f9914c1a0$export$default._class=$fcf834a5219b84862032cf1f9914c1a0$export$default,$fcf834a5219b84862032cf1f9914c1a0$export$default._super={},$fcf834a5219b84862032cf1f9914c1a0$export$default.prototype.className="Class",$fcf834a5219b84862032cf1f9914c1a0$export$default.prototype.__ctor=function(){},$fcf834a5219b84862032cf1f9914c1a0$export$default.prototype.__dtor=function(){},$fcf834a5219b84862032cf1f9914c1a0$export$default.prototype.isInstanceOf=function(t){return(t="string"===$e3192943c08c87b673a09591fd8bc1f0$export$default.typeOf(t)?t:t.prototype?t.prototype.className:t.constructor.prototype.className)in this._super||this.className===t},$fcf834a5219b84862032cf1f9914c1a0$export$default.prototype._initSuperRefs=function(){let t=this.constructor._super,e={};const a=this;for(let i in t){let r={},n=t[i].prototype;for(let t in n)"function"===$e3192943c08c87b673a09591fd8bc1f0$export$default.typeOf(n[t])&&(r[t]=function(t){return function(e,i,r,n,s,f,o,d,l,c,u){return t.call(a,e,i,r,n,s,f,o,d,l,c,u)}}(n[t]));e[i]=r}this._super=e},$fcf834a5219b84862032cf1f9914c1a0$export$default.inherit=function(t){let e=this._class,a=e._super,i=e._class;if("function"===$e3192943c08c87b673a09591fd8bc1f0$export$default.typeOf(t)){for(let a in t._class)/^[A-Z]/.test(a)||(e[a]=t._class[a]);$e3192943c08c87b673a09591fd8bc1f0$export$default.override(e.prototype,t._class.prototype),$e3192943c08c87b673a09591fd8bc1f0$export$default.override(a,t._class._super),t._class.prototype.className&&(a[t._class.prototype.className]=t._class)}else $e3192943c08c87b673a09591fd8bc1f0$export$default.override(e.prototype,t);return e._super=a,e._class=i,e},$fcf834a5219b84862032cf1f9914c1a0$export$default.prototype._extend=function(t,e){if(0===e.length)return t;const a=function(...t){this._initSuperRefs(),this.__ctor.apply(this,t)};a._class=a,a._super={},$fcf834a5219b84862032cf1f9914c1a0$export$default.inherit.call(a,t),delete a.prototype.className;for(let t=0;t<e.length;t++)a.inherit(e[t]);return delete a._super.Class,"classInit"in a.prototype&&a.prototype.classInit(),a.isInstance=function(t){return $e3192943c08c87b673a09591fd8bc1f0$export$default.isInstanceOf(t,a)},a},$fcf834a5219b84862032cf1f9914c1a0$export$default.extend=function(...t){return this._class.prototype._extend(this,t)},$fcf834a5219b84862032cf1f9914c1a0$export$default.create=function(t){return new(this.extend(t))};var $c2cfe1737614740848be2bc11cff8087$export$default=$fcf834a5219b84862032cf1f9914c1a0$export$default.extend({className:"Event",source:null,name:null,args:null,_async:!1,list:null,next:null,ret:null,original:null,i:-1,__ctor:function(t,e,a,i,r,n){this.source=t,this.name=a,this.args=i,this.cbHandler=r,this.cbContext=n,this.list=e,this.reset()},reset:function(){return this.next=null,this.ret=[],this._async=!1,this.i=-1,this},setSource:function(t){return this.source=t,this},wait:function(){return this._async=!0,this},resume:function(){for(this._async=!1;!(this._async||++this.i>=this.list.length);)if(!this.list[this.i].silent)if("string"==$e3192943c08c87b673a09591fd8bc1f0$export$default.typeOf(this.list[this.i].handler)){if(this.list[this.i].context){if(!this.list[this.i].context[this.list[this.i].handler])continue;if(!1===this.list[this.i].context[this.list[this.i].handler](this,this.args,this.list[this.i].data))break}else if(!1===$parcel$global[this.list[this.i].handler].call(null,this,this.args,this.list[this.i].data))break}else if(!1===this.list[this.i].handler.call(this.list[this.i].context,this,this.args,this.list[this.i].data))break;return this._async||(this.i>=this.list.length&&this.next&&this.next.resume(),this.cbHandler&&this.cbHandler.call(this.cbContext)),this},from:function(t){return this.original=t,this},enqueue:function(t){if(!t)return this;var e;for(e=this;null!=e.next;e=e.next);return e.next=t,t.from(this),this}}),$2615472e5530380240dea4db08a9ff67$export$default=$fcf834a5219b84862032cf1f9914c1a0$export$default.extend({className:"EventDispatcher",listeners:null,namespace:null,__ctor:function(){this.listeners={}},setNamespace:function(t){return this.namespace=t,this},addEventListener:function(t,e,a,i){var r=(t=t.split(":"))[t.length-1],n=t.length>1?t[0]:null;return this.listeners[r]||(this.listeners[r]=[]),this.listeners[r].push({ns:n,handler:e,context:a,data:i,silent:0}),this},removeEventListener:function(t,e,a){var i=(t=t.split(":"))[t.length-1],r=t.length>1?t[0]:null;if("*"==i)for(var n in this.listeners)for(var s=this.listeners[n],f=0;f<s.length;f++){var o=!0;e&&(o=o&&s[f].handler===e),a&&(o=o&&s[f].context===a),r&&(o=o&&s[f].ns==r),o&&s.splice(f--,1)}else{if(!this.listeners[i])return this;for(s=this.listeners[i],f=0;f<s.length;f++){o=!0;e&&(o=o&&s[f].handler===e),a&&(o=o&&s[f].context===a),r&&(o=o&&s[f].ns==r),o&&s.splice(f--,1)}}return this},prepareEvent:function(t,e,a,i){var r=[],n=(t=t.split(":"))[t.length-1],s=t.length>1?t[0]:null;this.listeners[n]&&(r=r.concat(this.listeners[n])),this.listeners["*"]&&(r=r.concat(this.listeners["*"]));for(var f=0;f<r.length;f++)r[f].silent&&r.splice(f--,1);if(s)for(f=0;f<r.length;f++)r[f].ns!=s&&r.splice(f--,1);return new $c2cfe1737614740848be2bc11cff8087$export$default(this,r,n,e,a,i)},silence:function(t,e){var a=(t=t.split(":"))[t.length-1],i=t.length>1?t[0]:null;if(e=!1===e?-1:1,"*"==a)for(var r in this.listeners)for(var n=this.listeners[r],s=0;s<n.length;s++)i&&n[s].ns!=i||(n[s].silent+=e);else{if(!this.listeners[a])return this;for(n=this.listeners[a],s=0;s<n.length;s++)i&&n[s].ns!=i||(n[s].silent+=e)}return this},dispatchEvent:function(t,e,a,i){return this.prepareEvent(this.namespace?this.namespace+":"+t:t,e,a,i).resume()}}),$e7c5bc425ce0f2f4fa9d3d42405ca1f6$export$default={email:/^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)+$/i,url:/^[\w-]+:\/\/[\w-]+(\.\w+)+.*$/,urlNoProt:/^[\w-]+(\.\w+)+.*$/,name:/^[-A-Za-z0-9_.]+$/,uname:/^['\pL\pN ]+$/,text:/^[^&<>{}]*$/,utext:/^([\r\n\pL\pN\pS &!@#$%*\[\]()_+=;',.\/?:"~-]+)$/},$949d7b5b10655a23fdad9ac5ac51f3c8$exports=function(){var exports=this,module={exports:this};exports.__esModule=!0;var $949d7b5b10655a23fdad9ac5ac51f3c8$export$default={_getref:function(value,obj){return"string"==typeof value?("#"==value.substr(0,1)?value=obj.get(value.substr(1)):"@"==value.substr(0,1)&&(value=obj[value.substr(1)]),"string"==typeof value?eval(value):value):value},type:function(t,e,a,i){switch(e){case"int":if(i=parseInt(i),isNaN(i))throw new Error(e);break;case"float":if(i=parseFloat(i),isNaN(i))throw new Error(e);break;case"string":i=null==i?"":i.toString();break;case"bit":if(!0===i||!1===i){i=i?1:0;break}if(i=parseInt(i),isNaN(i))throw new Error(e);i=i?1:0;break;case"array":if("array"==$e3192943c08c87b673a09591fd8bc1f0$export$default.typeOf(i))break;if(null==i){i=[];break}throw new Error(e);case"bool":if("true"===i||!0===i){i=!0;break}if("false"===i||!1===i){i=!1;break}throw new Error(e)}return i},model:function(t,e,a,i){var r=this._getref(e,t);if(!r)throw new Error(e);return i?r.ensure(i):new r},cls:function(t,e,a,i){var r=this._getref(e,t);return i?$e3192943c08c87b673a09591fd8bc1f0$export$default.ensureTypeOf(r,i):new r},arrayof:function(t,e,a,i){var r=this._getref(e,t);if(i||(i=[]),!r||"array"!=$e3192943c08c87b673a09591fd8bc1f0$export$default.typeOf(i))throw new Error(e);for(var n=0;n<i.length;n++)i[n]=$e3192943c08c87b673a09591fd8bc1f0$export$default.ensureTypeOf(r,i[n]);return i},arraynull:function(t,e,a,i){var r=!1;if("object"==$e3192943c08c87b673a09591fd8bc1f0$export$default.typeOf(e)&&(e.remove&&(r=e.remove),e=e.value),e)return i;if("array"!=$e3192943c08c87b673a09591fd8bc1f0$export$default.typeOf(i))throw new Error(e);for(var n=0;n<i.length;n++)if(null==i[n]){if(!r)throw new Error(e);i.splice(n--,1)}return i},arraycompliant:function(t,e,a,i){var r=!1;if("object"==$e3192943c08c87b673a09591fd8bc1f0$export$default.typeOf(e)&&(e.remove&&(r=e.remove),e=e.value),!e)return i;if("array"!=$e3192943c08c87b673a09591fd8bc1f0$export$default.typeOf(i))throw new Error(e);for(var n=0;n<i.length;n++)if(null!=i[n]&&!i[n].isCompliant()){if(!r)throw new Error(e);i.splice(n--,1)}return i},required:function(t,e,a,i){if(null==i)throw new Error(e?"":"null");switch($e3192943c08c87b673a09591fd8bc1f0$export$default.typeOf(i)){case"array":if(0==i.length)throw new Error(e?"":"null");break;default:if(0==i.toString().length)throw new Error(e?"":"null")}return i},minlen:function(t,e,a,i){if(i.toString().length<e)throw new Error(e);return i},maxlen:function(t,e,a,i){if(i.toString().length>e)throw new Error(e);return i},minval:function(t,e,a,i){if(parseFloat(i)<e)throw new Error(e);return i},maxval:function(t,e,a,i){if(parseFloat(i)>e)throw new Error(e);return i},mincount:function(t,e,a,i){if("array"!=$e3192943c08c87b673a09591fd8bc1f0$export$default.typeOf(i)||i.length<e)throw new Error(e);return i},maxcount:function(t,e,a,i){if("array"!=$e3192943c08c87b673a09591fd8bc1f0$export$default.typeOf(i)||i.length>e)throw new Error(e);return i},pattern:function(t,e,a,i){if(!$e7c5bc425ce0f2f4fa9d3d42405ca1f6$export$default[e].test(i.toString()))throw new Error(e);return i},inset:function(t,e,a,i){if("array"!=$e3192943c08c87b673a09591fd8bc1f0$export$default.typeOf(e)){if(!new RegExp("^("+e.toString()+")$").test(i.toString()))throw new Error(e);return i}if(-1==e.indexOf(i.toString()))throw new Error(e.join("|"));return i},upper:function(t,e,a,i){return e?i.toString().toUpperCase():i},lower:function(t,e,a,i){return e?i.toString().toLowerCase():i}};return $parcel$export(exports,"default",(function(){return $949d7b5b10655a23fdad9ac5ac51f3c8$export$default})),module.exports}.call({});let $54f9182b84f0762dafceb7934d4e0915$export$default=$2615472e5530380240dea4db08a9ff67$export$default.extend({className:"Model",defaults:null,constraints:null,data:null,changedList:null,_silent:0,_level:0,__ctor:function(t,e){if(this._super.EventDispatcher.__ctor(),this.data={},null!=e)this.reset(e);else{var a=null;if(!this.defaults&&this.constraints){a={};for(var i in this.constraints){var r=this.constraints[i];null!==r.def&&void 0!==r.def?"function"==typeof r.def?a[i]=r.def():a[i]=r.def:a[i]=null}}this.reset(a)}this.init(),null!=t&&this.set(arguments[0],!0),this.constraints&&this.update(),this.ready()},reset:function(t,e){if(!this.defaults){if(!t||"object"!=$e3192943c08c87b673a09591fd8bc1f0$export$default.typeOf(t)&&"function"!=$e3192943c08c87b673a09591fd8bc1f0$export$default.typeOf(t))return this;this.defaults=t}return"function"==$e3192943c08c87b673a09591fd8bc1f0$export$default.typeOf(this.defaults)?this.data=this.defaults():this.data=$e3192943c08c87b673a09591fd8bc1f0$export$default.clone(this.defaults),!1===e||!1===t?this:this.update(null,!0)},init:function(){},ready:function(){},silent:function(t){return this._silent+=t?1:-1,this},_validate:function(t,e){if(!this.constraints||!this.constraints[t])return e;var a=this.constraints[t],i=e;for(var r in a)if($54f9182b84f0762dafceb7934d4e0915$export$default.Constraints[r])try{i=$54f9182b84f0762dafceb7934d4e0915$export$default.Constraints[r](this,a[r],t,i)}catch(e){if("null"==e.message)break;throw new Error(`Constraint [${r}:${a[r]}] failed on property '${t}'.`)}return i},_set:function(t,e){if(!this.constraints||!this.constraints[t])return this.data[t]=e,e;var a=this.constraints[t],i=(this.data[t],e);for(var r in a)if($54f9182b84f0762dafceb7934d4e0915$export$default.Constraints[r])try{i=$54f9182b84f0762dafceb7934d4e0915$export$default.Constraints[r](this,a[r],t,i)}catch(a){if("null"==a.message)break;this._silent||this.dispatchEvent("constraintError",{constraint:r,message:a.message,name:t,value:e});break}return this.data[t]=i},_propertyEvent:function(t,e,a,i){var r={name:t,old:e,value:a,level:this._level},n=this.dispatchEvent("propertyChanging",r);i?this.data[t]=r.value:r.value=this._set(t,r.value),null!=n&&n.ret.length&&!1===n.ret[0]||(this.dispatchEvent("propertyChanged."+t,r),this.dispatchEvent("propertyChanged",r),this.changedList.push(t))},set:function(){var t=arguments.length,e=!1,a=!1;if((t>2||2==t&&"object"==$e3192943c08c87b673a09591fd8bc1f0$export$default.typeOf(arguments[0]))&&"boolean"==$e3192943c08c87b673a09591fd8bc1f0$export$default.typeOf(arguments[t-1])&&!1===(e=arguments[--t])&&(a=!0),0==this._level&&(this.changedList=[]),this._level++,2==t)(this.data[arguments[0]]!=arguments[1]||e)&&(this._silent||a?this._set(arguments[0],arguments[1]):this._propertyEvent(arguments[0],this.data[arguments[0]],this._validate(arguments[0],arguments[1])));else for(var i in arguments[0])(this.data[i]!=arguments[0][i]||e)&&(this._silent||a?this._set(i,arguments[0][i]):this._propertyEvent(i,this.data[i],this._validate(i,arguments[0][i])));return--this._level||!this.changedList.length||a||this._silent||this.dispatchEvent("modelChanged",{fields:this.changedList}),this},has:function(t){return t in this.data},get:function(t,e){return 0==arguments.length||!1===t?this.data:1==arguments.length&&!0===t?this.flatten():2==arguments.length&&void 0===this.data[t]?e:this.data[t]},getInt:function(t,e){return 2==arguments.length&&void 0===this.data[t]?e:parseInt(this.data[t])},getFloat:function(t,e){return 2==arguments.length&&void 0===this.data[t]?e:parseFloat(this.data[t])},getBool:function(t,e){return"true"===(t=2==arguments.length&&void 0===this.data[t]?e:this.data[t])||!0===t||"false"!==t&&!1!==t&&!!parseInt(t)},getReference:function(t){var e=this;return{get:function(){return e.get(t)},set:function(a){e.set(t,a)}}},constraint:function(t,e,a){if(3==arguments.length||2==arguments.length||1==arguments.length&&"object"==$e3192943c08c87b673a09591fd8bc1f0$export$default.typeOf(t)){switch(this.constraints===this.constructor.prototype.constraints&&(this.constraints=$e3192943c08c87b673a09591fd8bc1f0$export$default.clone(this.constraints)),arguments.length){case 1:$e3192943c08c87b673a09591fd8bc1f0$export$default.override(this.constraints,t);break;case 2:$e3192943c08c87b673a09591fd8bc1f0$export$default.override(this.constraints[t],e);break;case 3:this.constraints[t][e]=a}return this}return t?this.constraints[t]:this},flatten:function(t,e){if(t)return null==(r=this.flatten(!1,!0))?null:(r.class=this.classPath,r);if(!this.constraints&&!this.defaults)return this.data;if(!this.isCompliant())return{};var a=this.constraints,i=this.defaults?"function"==$e3192943c08c87b673a09591fd8bc1f0$export$default.typeOf(this.defaults)?this.defaults():this.defaults:this.constraints,r={};for(var n in this.data)if(n in i){if(a&&a[n]){var s=a[n];if(s.model){r[n]=this.data[n]?this.data[n].flatten(e):null;continue}if(s.arrayof){r[n]=[];for(var f=0;f<this.data[n].length;f++)r[n][f]=this.data[n][f]?this.data[n][f].flatten(e):null;continue}if(s.cls){r[n]=this.data[n]?this.data[n].flatten():null;continue}}r[n]=this.data[n]}return r},remove:function(t,e){if("array"==$e3192943c08c87b673a09591fd8bc1f0$export$default.typeOf(t)){for(var a=0;a<t.length;a++)delete this.data[t[a]];!1===e||this._silent||this.dispatchEvent("propertyRemoved",{fields:t})}else delete this.data[t],!1===e||this._silent||this.dispatchEvent("propertyRemoved",{fields:[t]})},update:function(t,e){if(this._silent)return this;if(0==this._level&&(this.changedList=[]),this._level++,t&&"string"==$e3192943c08c87b673a09591fd8bc1f0$export$default.typeOf(t))this._propertyEvent(t,this.data[t],this.data[t],e);else if(t&&"array"==$e3192943c08c87b673a09591fd8bc1f0$export$default.typeOf(t))for(var a of t)this._propertyEvent(a,this.data[a],this.data[a],e);else for(var a in this.data)this._propertyEvent(a,this.data[a],this.data[a],e);return--this._level||this._silent||0==this.changedList.length&&!0!==t||this.dispatchEvent("modelChanged",{fields:this.changedList}),this},validate:function(t){if(!this.constraints)return this;if(t&&"string"==$e3192943c08c87b673a09591fd8bc1f0$export$default.typeOf(t))this._set(t,this.data[t]);else for(var e in this.data)t&&-1==$e3192943c08c87b673a09591fd8bc1f0$export$default.indexOf(t,e)||this._set(e,this.data[e]);return this},isCompliant:function(){if(!this.constraints)return!0;try{for(var t in this.data)this._validate(t,this.data[t]);return!0}catch(t){}return!1},observe:function(t,e,a){this.addEventListener("propertyChanged."+t,e,a)},unobserve:function(t,e,a){this.removeEventListener("propertyChanged."+t,e,a)},watch:function(t,e){1==(t=t.split(":")).length&&(t[1]=t[0],t[0]="watch"),this.addEventListener(t[0]+":propertyChanged."+t[1],(function(t,a){e(a.value,a,t)}))},unwatch:function(t){1==(t=t.split(":")).length&&(t[1]=t[0],t[0]="watch"),this.removeEventListener(t[0]+":propertyChanged."+t[1])},toString:function(){return $e3192943c08c87b673a09591fd8bc1f0$export$default.serialize(this.get(!0))}});$54f9182b84f0762dafceb7934d4e0915$export$default.Constraints=$949d7b5b10655a23fdad9ac5ac51f3c8$exports.default;var $6eb7536a3dcc17db356a912337168e31$export$default=$54f9182b84f0762dafceb7934d4e0915$export$default.extend({className:"ModelList",itemt:$54f9182b84f0762dafceb7934d4e0915$export$default,contents:null,itemId:null,nextId:null,defaults:{contents:null},constraints:{contents:{type:"array",arrayof:"@itemt"}},__ctor:function(...t){this.itemId=[],this.nextId=0,this._super.Model.__ctor(...t)},ready:function(){this._eventGroup="ModelList_"+Date.now()+":modelChanged",this.contents=this.data.contents},_bind:function(t,e){return e&&e.addEventListener&&e.addEventListener(this._eventGroup,this._onItemEvent,this,t),e},_unbind:function(t){return t&&t.removeEventListener&&t.removeEventListener(this._eventGroup),t},_onItemEvent:function(t,e,a){this.prepareEvent("itemChanged",{id:a,item:t.source}).from(t).enqueue(this.prepareEvent("modelChanged",{fields:["contents"]})).resume()},length:function(){return this.data.contents.length},clear:function(){for(var t=0;t<this.data.contents;t++)this._unbind(this.data.contents[t]);this.itemId=[],this.nextId=0,this.contents=this.data.contents=[],this.prepareEvent("itemsCleared").enqueue(this.prepareEvent("modelChanged",{fields:["contents"]})).resume()},setData:function(t){if(this.clear(),t){for(var e=0;e<t.length;e++){var a=$e3192943c08c87b673a09591fd8bc1f0$export$default.ensureTypeOf(this.itemt,t[e]);this.itemId.push(this.nextId++),this.data.contents.push(a),this._bind(this.nextId-1,a)}this.prepareEvent("itemsChanged").enqueue(this.prepareEvent("modelChanged",{fields:["contents"]})).resume()}},getData:function(){return this.data.contents},getAt:function(t){return t<0||t>=this.data.contents.length?null:this.data.contents[t]},removeAt:function(t){if(t<0||t>=this.data.contents.length)return null;let e=this.data.contents.splice(t,1)[0],a=this.itemId.splice(t,1)[0];return this._unbind(e),this.prepareEvent("itemRemoved",{id:a,item:e}).enqueue(this.prepareEvent("modelChanged",{fields:["contents"]})).resume(),e},setAt:function(t,e){return!(t<0||t>=this.data.contents.length)&&(e=$e3192943c08c87b673a09591fd8bc1f0$export$default.ensureTypeOf(this.itemt,e),this._unbind(this.data.contents[t]),this.data.contents[t]=e,this._bind(this.itemId[t],e),this.prepareEvent("itemChanged",{id:this.itemId[t],item:e}).enqueue(this.prepareEvent("modelChanged",{fields:["contents"]})).resume(),!0)},updateAt:function(t){return!(t<0||t>=this.data.contents.length)&&(this.prepareEvent("itemChanged",{id:this.itemId[t],item:this.data.contents[t]}).enqueue(this.prepareEvent("modelChanged",{fields:["contents"]})).resume(),!0)},push:function(t){return t&&"object"!=$e3192943c08c87b673a09591fd8bc1f0$export$default.typeOf(t)?null:(t=$e3192943c08c87b673a09591fd8bc1f0$export$default.ensureTypeOf(this.itemt,t),this.itemId.push(this.nextId++),this.data.contents.push(t),this._bind(this.nextId-1,t),this.prepareEvent("itemAdded",{id:this.itemId[this.itemId.length-1],item:t,position:"tail"}).enqueue(this.prepareEvent("modelChanged",{fields:["contents"]})).resume(),t)},pop:function(){return this._unbind(this.data.contents.pop())},unshift:function(t){return t&&"object"!=$e3192943c08c87b673a09591fd8bc1f0$export$default.typeOf(t)?null:(t=$e3192943c08c87b673a09591fd8bc1f0$export$default.ensureTypeOf(this.itemt,t),this.itemId.unshift(this.nextId++),this.data.contents.unshift(t),this._bind(this.nextId-1,t),this.prepareEvent("itemAdded",{id:this.itemId[0],item:t,position:"head"}).enqueue(this.prepareEvent("modelChanged",{fields:["contents"]})).resume(),t)},shift:function(){return this._unbind(this.data.contents.shift())},find:function(t,e){for(var a=this.data.contents,i=0;i<a.length;i++)if($e3192943c08c87b673a09591fd8bc1f0$export$default.partialCompare(a[i].data,t))return e?a[i]:i;return e?null:-1}});let $9a009038ba51359c38a33ad94d1aa8c8$export$default={Type:function(t){let e={flatten:function(t,e){return t},unflatten:function(t,e){return t}};return t?$e3192943c08c87b673a09591fd8bc1f0$export$default.override(e,t):e},String:function(){return $9a009038ba51359c38a33ad94d1aa8c8$export$default.Type({flatten:function(t,e){return null!=t?t.toString():null},unflatten:function(t,e){return null!=t?t.toString():null}})},Integer:function(){return $9a009038ba51359c38a33ad94d1aa8c8$export$default.Type({flatten:function(t,e){return~~t},unflatten:function(t,e){return~~t}})},Number:function(t){return $9a009038ba51359c38a33ad94d1aa8c8$export$default.Type({_precision:t,_round:!1,precision:function(t){return this._precision=~~t,this},flatten:function(t,e){return t=parseFloat(t),this._precision>0&&(t=~~(t*Math.pow(10,this._precision))/Math.pow(10,this._precision)),t},unflatten:function(t,e){return parseFloat(t)}})},Bool:function(t){return $9a009038ba51359c38a33ad94d1aa8c8$export$default.Type({_compact:t,compact:function(t){return this._compact=t,this},flatten:function(t,e){return t=~~t,this._compact?t>0?1:0:t>0},unflatten:function(t,e){return!!~~t}})},SharedString:function(){return $9a009038ba51359c38a33ad94d1aa8c8$export$default.Type({flatten:function(t,e){return null==t?0:(t=t.toString(),"strings"in e||(e.strings_map={},e.strings=[]),t in e.strings_map||(e.strings.push(t),e.strings_map[t]=e.strings.length),e.strings_map[t])},unflatten:function(t,e){return null==t||0==t?null:e.strings[~~t-1]}})},Array:function(t){return $9a009038ba51359c38a33ad94d1aa8c8$export$default.Type({itemType:t,_debug:!1,debug:function(t){return this._debug=t,this},of:function(t){return this.itemType=t,this},flatten:function(t,e){if(null==t)return null;let a=[];for(let i=0;i<t.length;i++)a.push(this.itemType.flatten(t[i],e));return a},unflatten:async function(t,e){if(null==t)return null;let a=[];for(let i=0;i<t.length;i++)a.push(await this.itemType.unflatten(t[i],e));return a}})},Object:function(){return $9a009038ba51359c38a33ad94d1aa8c8$export$default.Type({properties:[],property:function(t,e,a=null){return this.properties.push({name:t,type:e,defvalue:a}),this},flatten:function(t,e){if(null==t)return null;let a;if(!0===e.symbolic){a={};for(let i=0;i<this.properties.length;i++)a[this.properties[i].name]=this.properties[i].type.flatten(t[this.properties[i].name],e)}else{a=[];for(let i=0;i<this.properties.length;i++)a.push(this.properties[i].type.flatten(t[this.properties[i].name],e))}return a},unflatten:async function(t,e){if(null==t)return null;let a={};if(!0===e.symbolic)for(let i=0;i<this.properties.length;i++)a[this.properties[i].name]=await this.properties[i].type.unflatten(this.properties[i].name in t?t[this.properties[i].name]:this.properties[i].defvalue,e);else for(let i=0;i<this.properties.length;i++)a[this.properties[i].name]=await this.properties[i].type.unflatten(i in t?t[i]:this.properties[i].defvalue,e);return a}})},Class:function(t){return $9a009038ba51359c38a33ad94d1aa8c8$export$default.Type({_constructor:t,constructor:function(t){return this._constructor=t,this},flatten:function(t,e){return null==t?null:t.flatten(e)},unflatten:async function(t,e){return null==t?null:await(new this._constructor).unflatten(t,e)}})},Property:function(t,e){return $9a009038ba51359c38a33ad94d1aa8c8$export$default.Type({property:t,type:e,name:function(t){return this.property=t,this},is:function(t){return this.type=t,this},flatten:function(t,e){if(null==t)return null;let a;return!0===e.symbolic?(a={},a[this.property]=this.type.flatten(t[this.property],e)):a=this.type.flatten(t[this.property],e),a},unflatten:async function(t,e){if(null==t)return null;let a={};return!0===e.symbolic?a[this.property]=await this.type.unflatten(t[this.property],e):a[this.property]=await this.type.unflatten(t,e),a}})},Map:function(){return $9a009038ba51359c38a33ad94d1aa8c8$export$default.Type({flatten:function(t,e){if(null==t)return null;if(!0===e.symbolic)return t;let a=[];for(let e in t)a.push(e),a.push(t[e]);return a},unflatten:function(t,e){if(null==t)return null;if(!0===e.symbolic)return t;let a={};for(let e=0;e<t.length;e+=2)a[t[e]]=t[e+1];return a}})}};var $3a66e437b208600598da21bd8b0d4418$export$default=$fcf834a5219b84862032cf1f9914c1a0$export$default.extend({className:"Flattenable",typeSchema:null,flatten:function(t){return this.typeSchema.flatten(this,t)},unflatten:async function(t,e){return Object.assign(this,await this.typeSchema.unflatten(t,e)),await this.onUnflattened(),this},onUnflattened:async function(){}}),$983368981f93a4e3743f96b069ab993e$export$default=$3a66e437b208600598da21bd8b0d4418$export$default.extend({className:"Collection",itemTypeSchema:null,items:null,__ctor:function(t){t||(t=this.itemTypeSchema),t&&(this.typeSchema=$9a009038ba51359c38a33ad94d1aa8c8$export$default.Property("items").is($9a009038ba51359c38a33ad94d1aa8c8$export$default.Array().of(t))),this.reset()},onUnflattened:function(){let t=this.items;this.reset();for(let e of t)this.add(e)},reset:function(){return this.items=[],this},clear:function(){var t=this.items;this.reset();for(var e=0;e<t.length;e++)this.onItemRemoved(t[e],0);return this},sort:function(t,e){return"function"!=typeof t?this.items.sort((function(a,i){return(a[t]<=i[t]?-1:1)*(!0===e?-1:1)})):this.items.sort(t),this},findItem:function(t,e){if(!this.items)return null;for(var a=0;a<this.items.length;a++)if((!e||!$e3192943c08c87b673a09591fd8bc1f0$export$default.partialCompare(this.items[a],e))&&$e3192943c08c87b673a09591fd8bc1f0$export$default.partialCompare(this.items[a],t))return this.items[a];return null},getItems:function(){return this.items},length:function(){return this.items.length},isEmpty:function(){return!this.items.length},indexOf:function(t){return this.items.indexOf(t)},getAt:function(t,e=!1){return t<0&&1==e&&(t+=this.items.length),t>=0&&t<this.items.length?this.items[t]:null},first:function(){return this.getAt(0)},last:function(){return this.getAt(-1,!0)},addAt:function(t,e){if(!e||!this.onBeforeItemAdded(e))return this;if(t<0&&(t=0),t>this.items.length&&(t=this.items.length),0==t)this.items.unshift(e);else if(t==this.items.length)this.items.push(e);else{var a=this.items.splice(0,t);a.push(e),this.items=a.concat(this.items)}return this.onItemAdded(e),this},unshift:function(t){return this.addAt(0,t)},push:function(t){return this.addAt(this.items.length,t)},add:function(t){return this.push(t)},removeAt:function(t,e=!1){if(t<0&&1==e&&(t+=this.items.length),t<0||t>=this.items.length)return null;var a=this.items[t];return this.items.splice(t,1),this.onItemRemoved(a,t),a},pop:function(t){return this.removeAt(-1,!0)},shift:function(t){return this.removeAt(0)},remove:function(t){return this.removeAt(this.indexOf(t))},forEach:function(t){if(this.isEmpty())return this;for(var e=0;e<this.items.length&&!1!==t(this.items[e],e,this);e++);return this},forEachCall:function(t,...e){if(this.isEmpty())return this;for(var a=0;a<this.items.length&&!1!==this.items[a][t](...e);a++);return this},forEachRev:function(t){if(this.isEmpty())return this;for(var e=this.items.length-1;e>=0&&!1!==t(this.items[e],e,this);e--);return this},forEachRevCall:function(t,...e){if(this.isEmpty())return this;for(var a=this.items.length-1;a>=0&&!1!==this.items[a][t](...e);a--);return this},onBeforeItemAdded:function(t){return!0},onItemAdded:function(t){},onItemRemoved:function(t){}});let $4a7f59f3f662b7182dbe0a3d05ca1b49$export$default={strict:!1,parseTemplate:function(t,e,a,i=!1,r=1){let n="string",s=null,f=0,o=0,d="",l=[],c=l,u=!1;function h(t,i){if("template"==t?i=$4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.parseTemplate(i,e,a,!0,0):"parse"==t?(i=$4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.parseTemplate(i,e,a,!1,0),t="base-string","array"==$e3192943c08c87b673a09591fd8bc1f0$export$default.typeOf(i)&&(t=i[0].type,i=i[0].data)):"parse-trim-merge"==t?i=$4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.parseTemplate(i.trim().split("\n").map((t=>t.trim())).join("\n"),e,a,!1,0):"parse-merge"==t?i=$4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.parseTemplate(i,e,a,!1,0):"parse-merge-alt"==t&&(i=$4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.parseTemplate(i,"{","}",!1,0)),"parse-merge"==t||"parse-merge-alt"==t||"parse-trim-merge"==t)for(let t=0;t<i.length;t++)l.push(i[t]);else l.push({type:t,data:i});u&&(c.push(l=[]),u=!1)}!0===i&&(t=t.trim(),n="identifier",f=10,c.push(l=[])),t+="\0";for(let i=0;i<t.length;i++)if("\\"!=t[i]){switch(f){case 0:"\0"==t[i]?s="string":t[i]==e&&"<"==t[i+1]?(f=1,o=1,s="string",n="parse-merge"):t[i]==e&&"@"==t[i+1]?(f=1,o=1,s="string",n="parse-trim-merge",i++):t[i]==e&&":"==t[i+1]?(f=12,o=1,s="string",n="string",i++):t[i]==e?(f=1,o=1,s="string",n="template"):d+=t[i];break;case 1:if("\0"==t[i])throw new Error("Parse error: Unexpected end of template");if(t[i]==a){if(o--,o<0)throw new Error("Parse error: Unmatched "+a);if(0==o){f=0,s=n;break}}else t[i]==e&&o++;d+=t[i];break;case 10:if("\0"==t[i]){s=n;break}if("."==t[i]){h(n,d),h("access","."),n="identifier",d="";break}if(null!=t[i].match(/[\t\n\r\f\v ]/)){for(s=n,n="identifier",u=!0;null!=t[i].match(/[\t\n\r\f\v ]/);)i++;i--;break}if(t[i]==e&&"<"==t[i+1]){d&&(s=n),f=11,o=1,n="parse-merge";break}if(t[i]==e&&"@"==t[i+1]){d&&(s=n),f=11,o=1,n="parse-trim-merge",i++;break}if('"'==t[i]){d&&(s=n),f=14,o=1,n="parse-merge";break}if("'"==t[i]){d&&(s=n),f=15,o=1,n="parse-merge";break}if("`"==t[i]){d&&(s=n),f=16,o=1,n="parse-merge-alt";break}if(t[i]==e&&":"==t[i+1]){d&&(s=n),f=13,o=1,n="string",i++;break}if(t[i]==e){d&&h(n,d),f=11,o=1,d="",n="parse",d+=t[i];break}"identifier"!=n&&(h(n,d),d="",n="identifier"),d+=t[i];break;case 11:if("\0"==t[i])throw new Error("Parse error: Unexpected end of template");if(t[i]==a){if(o--,o<0)throw new Error("Parse error: Unmatched "+a);if(0==o&&(f=10,"parse-merge"==n||"parse-merge-alt"==n||"parse-trim-merge"==n))break}else t[i]==e&&o++;d+=t[i];break;case 12:if("\0"==t[i])throw new Error("Parse error: Unexpected end of template");if(t[i]==a){if(o--,o<0)throw new Error("Parse error: Unmatched "+a);if(0==o){0!=d.length&&"<"!=d[0]&&"["!=d[0]&&" "!=d[0]&&(d=e+d+a),f=0,s=n;break}}else t[i]==e&&o++;d+=t[i];break;case 13:if("\0"==t[i])throw new Error("Parse error: Unexpected end of template");if(t[i]==a){if(o--,o<0)throw new Error("Parse error: Unmatched "+a);if(0==o){"<"!=d[0]&&"["!=d[0]&&" "!=d[0]&&(d=e+d+a),f=10;break}}else t[i]==e&&o++;d+=t[i];break;case 14:if("\0"==t[i])throw new Error("Parse error: Unexpected end of template");if('"'==t[i]){if(o--,o<0)throw new Error('Parse error: Unmatched "');if(0==o&&(f=10,"parse-merge"==n||"parse-merge-alt"==n||"parse-trim-merge"==n))break}d+=t[i];break;case 15:if("\0"==t[i])throw new Error("Parse error: Unexpected end of template");if("'"==t[i]){if(o--,o<0)throw new Error("Parse error: Unmatched '");if(0==o&&(f=10,"parse-merge"==n||"parse-merge-alt"==n||"parse-trim-merge"==n))break}d+=t[i];break;case 16:if("\0"==t[i])throw new Error("Parse error: Unexpected end of template");if("`"==t[i]){if(o--,o<0)throw new Error("Parse error: Unmatched `");if(0==o&&(f=10,"parse-merge"==n||"parse-merge-alt"==n||"parse-trim-merge"==n))break}d+=t[i]}s&&(h(s,d),s=d="")}else d+="\\",d+=t[++i];if(!i){let t=0;for(;t<c.length&&"string"==c[t].type&&""==c[t].data;)c.splice(t,1);for(t=c.length-1;t>0&&"string"==c[t].type&&""==c[t].data;)c.splice(t--,1);0==c.length&&c.push({type:"string",data:""})}return r&&function t(e){if("object"==typeof e){if(e instanceof Array)for(let a=0;a<e.length;a++)t(e[a]);else e.data=t(e.data);return e}for(let t=0;t<e.length;t++)if("\\"==e[t]){let a=e[t+1];switch(a){case"n":a="\n";break;case"r":a="\r";break;case"f":a="\f";break;case"v":a="\v";break;case"t":a="\t";break;case"s":a="s";break;case'"':a='"';break;case"'":a="'"}e=e.substr(0,t)+a+e.substr(t+2)}return e}(c),c},parse:function(t){return this.parseTemplate(t.trim(),"[","]",!1)},clean:function(t){for(let e=0;e<t.length;e++)"template"!=t[e].type&&(t.splice(e,1),e--);return t},expand:function(t,e,a="text",i="base-string"){let r=[];if("var"==i){let a=!0,i=!1,n=e,s=null,f=!0,o="";for(let r=0;r<t.length&&null!=e;r++)switch(t[r].type){case"identifier":case"string":o+=t[r].data,s=null;break;case"template":s=this.expand(t[r].data,n,"arg","template"),o+="object"!=typeof s?s:"";break;case"base-string":o+=this.expand(t[r].data,n,"arg","base-string"),s=null;break;case"access":if(s&&"object"==typeof s)e=s;else{for(""==o&&(o="this");;)if("!"==o[0])o=o.substr(1),a=!1;else{if("$"!=o[0])break;o=o.substr(1),i=!0}if("this"!=o&&null!=e){let t=e;null===(e=o in e?e[o]:null)&&f&&o in $4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.functions&&(e=$4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.functions[o](null,null,t)),f=!1}}o=""}for(;""!=o;)if("!"==o[0])o=o.substr(1),a=!1;else{if("$"!=o[0])break;o=o.substr(1),i=!0}if("this"!=o){let a=!1;if(null!=e?o in e?e=e[o]:(a=!0,e=null):a=!0,a&&1==t.length&&1==$4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.strict)throw new Error("Expression function `"+o+"` not found.")}"string"==typeof e&&(a&&(e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),i&&(e='"'+e+'"')),r.push(e)}if("varref"==a){let a=e,i=null,r=!0,n="";for(let s=0;s<t.length&&null!=e;s++)switch(t[s].type){case"identifier":case"string":n+=t[s].data,i=null;break;case"template":i=this.expand(t[s].data,a,"arg","template"),n+="object"!=typeof i?i:"";break;case"base-string":n+=this.expand(t[s].data,a,"arg","base-string"),i=null;break;case"access":if(i&&"object"==typeof i)e=i;else{for(""==n&&(n="this");;)if("!"==n[0])n=n.substr(1);else{if("$"!=n[0])break;n=n.substr(1)}if("this"!=n&&null!=e){let t=e;null===(e=n in e?e[n]:null)&&r&&n in $4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.functions&&(e=$4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.functions[n](null,null,t)),r=!1}}n=""}for(;""!=n;)if("!"==n[0])n=n.substr(1);else{if("$"!=n[0])break;n=n.substr(1)}return"this"!=n?[e,n]:null}if("fn"==i){var n=[];if(n.push($4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.expand(t[0],e,"text","base-string")),"_"+n[0]in $4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.functions&&(n[0]="_"+n[0]),!(n[0]in $4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.functions)){if(1==$4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.strict)throw new Error("Expression function `"+n[0]+"` not found.");return`(Unknown: ${n[0]})`}if("_"==n[0][0])return $4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.functions[n[0]](t,e);for(let a=1;a<t.length;a++)n.push($4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.expand(t[a],e,"arg","base-string"));r.push($4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.functions[n[0]](n,t,e))}if("template"==i){if(1==t.length){if(1==t[0].length&&"string"==t[0][0].type)return t[0][0].data;if(1==t[0].length&&"identifier"==t[0][0].type){let i=t[0][0].data;if(i in $4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.functions||"_"+i in $4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.functions)return $4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.expand(t,e,a,"fn")}return $4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.expand(t[0],e,a,"var")}return $4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.expand(t,e,a,"fn")}if("base-string"==i){let i=-1;for(let n of t){let s=null;switch(i++,n.type){case"template":s=$4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.expand(n.data,e,a,"template");break;case"string":case"identifier":s=n.data;break;case"base-string":s=$4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.expand(n.data,e,a,"base-string")}"void"!=a&&("last"==a&&i!=t.length-1||r.push(s))}}if("obj"==a)return r;if("last"==a)return"Rose\\Arry"==typeOf(r)&&(r=r[0]),r;if("void"==a)return null;if("arg"==a)return"array"==$e3192943c08c87b673a09591fd8bc1f0$export$default.typeOf(r)?1!=r.length?r.join(""):r[0]:r;if("text"==a&&"array"==$e3192943c08c87b673a09591fd8bc1f0$export$default.typeOf(r)){let t=e=>null!=e&&"object"==typeof e?"map"in e?e.map(t).join(""):"join"in e?e.join(""):e.toString():e;r=r.map(t).join("")}return r},compile:function(t){return t=$4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.parse(t),function(e=null,a="text"){return $4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.expand(t,e||{},a)}},eval:function(t,e=null,a="text"){return t=$4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.parse(t),$4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.expand(t,e||{},a)},value:function(t,e=null){return"array"!=$e3192943c08c87b673a09591fd8bc1f0$export$default.typeOf(t)?t:$4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.expand(t,e||{},"arg")},register:function(t,e){$4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.functions[t]=e},call:function(t,e,a=null){return t in $4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.functions?$4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.functions[t](e,null,a):null},getNamedValues:function(t,e,a=1,i=!0){let r={},n=0;for(;a<t.length;a+=2){let s=$4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.expand(t[a],e,"arg");n||(n=s.startsWith(":")?1:s.endsWith(":")?2:3),1==n?s=s.substr(1):2==n&&(s=s.substr(0,s.length-1)),r[s]=i?$4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.expand(t[a+1],e,"arg"):t[a+1]}return r}};$4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.functions={global:function(t){return globalThis},null:function(t){return null},true:function(t){return!0},false:function(t){return!1},len:function(t){return t[1].toString().length},int:function(t){return~~t[1]},str:function(t){return t[1].toString()},float:function(t){return parseFloat(t[1])},chr:function(t){return String.fromCharCode(t[1])},ord:function(t){return t[1].toString().charCodeAt(0)},not:function(t){return!t[1]},neg:function(t){return-t[1]},abs:function(t){return Math.abs(t[1])},and:function(t){for(let e=1;e<t.length;e++)if(!t[e])return!1;return!0},or:function(t){for(let e=1;e<t.length;e++)if(~~t[e])return!0;return!1},eq:function(t){return t[1]==t[2]},ne:function(t){return t[1]!=t[2]},lt:function(t){return t[1]<t[2]},le:function(t){return t[1]<=t[2]},gt:function(t){return t[1]>t[2]},ge:function(t){return t[1]>=t[2]},isnotnull:function(t){return!!t[1]},isnull:function(t){return!t[1]},iszero:function(t){return 0==parseInt(t[1])},"eq?":function(t){return t[1]==t[2]},"ne?":function(t){return t[1]!=t[2]},"lt?":function(t){return t[1]<t[2]},"le?":function(t){return t[1]<=t[2]},"gt?":function(t){return t[1]>t[2]},"ge?":function(t){return t[1]>=t[2]},"notnull?":function(t){return!!t[1]},"null?":function(t){return!t[1]},"zero?":function(t){return 0==parseInt(t[1])},typeof:function(t){return $e3192943c08c87b673a09591fd8bc1f0$export$default.typeOf(t[1])},"*":function(t){let e=t[1];for(let a=2;a<t.length;a++)e*=t[a];return e},"/":function(t){let e=t[1];for(let a=2;a<t.length;a++)e/=t[a];return e},"+":function(t){let e=t[1];for(let a=2;a<t.length;a++)e-=-t[a];return e},"-":function(t){let e=t[1];for(let a=2;a<t.length;a++)e-=t[a];return e},mul:function(t){let e=t[1];for(let a=2;a<t.length;a++)e*=t[a];return e},div:function(t){let e=t[1];for(let a=2;a<t.length;a++)e/=t[a];return e},sum:function(t){let e=t[1];for(let a=2;a<t.length;a++)e-=-t[a];return e},sub:function(t){let e=t[1];for(let a=2;a<t.length;a++)e-=t[a];return e},mod:function(t){let e=t[1];for(let a=2;a<t.length;a++)e%=t[a];return e},pow:function(t){let e=t[1];for(let a=2;a<t.length;a++)e=Math.pow(e,t[a]);return e},dump:function(t){return JSON.stringify(t[1])},_set:function(t,e){for(let a=1;a+1<t.length;a+=2){let i=$4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.value(t[a+1],e);if(t[a].length>1){let r=$4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.expand(t[a],e,"varref");null!=r&&(r[0][r[1]]=i)}else e[$4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.value(t[a],e)]=i}return""},_unset:function(t,e){for(let a=1;a<t.length;a++)if(t[a].length>1){let i=$4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.expand(t[a],e,"varref");null!=i&&delete i[0][i[1]]}else delete e[$4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.value(t[a],e)];return null},trim:function(t){return t[1]?"object"==typeof t[1]?t[1].map((t=>t.trim())):t[1].trim():""},upper:function(t){return t[1]?"object"==typeof t[1]?t[1].map((t=>t.toUpperCase())):t[1].toUpperCase():""},lower:function(t){return t[1]?"object"==typeof t[1]?t[1].map((t=>t.toLowerCase())):t[1].toLowerCase():""},substr:function(t){let e=t[t.length-1].toString(),a=0,i=null;return 4==t.length?(a=~~t[1],i=~~t[2]):(a=~~t[1],i=null),a<0&&(a+=e.length),i<0&&(i+=e.length),null===i&&(i=e.length-a),e.substr(a,i)},replace:function(t){return t[3].split(t[1]).join(t[2])},nl2br:function(t){return t[1]?"object"==typeof t[1]?t[1].map((t=>t.replace(/\n/g,"<br/>"))):t[1].replace(/\n/g,"<br/>"):""},"%":function(t){t.shift();var e=t.shift();let a="";for(let i=0;i<t.length;i++)if("array"==$e3192943c08c87b673a09591fd8bc1f0$export$default.typeOf(t[i])){a+=`<${e}>`;for(let e=0;e<t[i].length;e++)a+=t[i][e];a+=`</${e}>`}else a+=`<${e}>${t[i]}</${e}>`;return a},"%%":function(t){t.shift();var e=t.shift();let a="",i="";for(let e=0;e<t.length;e+=2)e+1<t.length?a+=` ${t[e]}="${t[e+1]}"`:i=t[e];return i?`<${e}${a}>${i}</${e}>`:`<${e}${a}/>`},join:function(t){return t[2]&&"array"==$e3192943c08c87b673a09591fd8bc1f0$export$default.typeOf(t[2])?t[2].join(t[1]):""},split:function(t){return t[2]&&"string"==typeof t[2]?t[2].split(t[1]):[]},keys:function(t){return t[1]&&"object"==typeof t[1]?Object.keys(t[1]):[]},values:function(t){return t[1]&&"object"==typeof t[1]?Object.values(t[1]):[]},_each:function(t,e){let a=$4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.expand(t[1],e,"arg"),i=$4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.expand(t[2],e,"arg"),r="",n=0;if(!i)return r;for(let s in i)e[a]=i[s],e[a+"##"]=n++,e[a+"#"]=s,r+=$4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.expand(t[3],e,"text");return delete e[a],delete e[a+"##"],delete e[a+"#"],r},_foreach:function(t,e){let a=$4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.expand(t[1],e,"arg"),i=$4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.expand(t[2],e,"arg"),r=0;if(!i)return null;for(let n in i)e[a]=i[n],e[a+"##"]=r++,e[a+"#"]=n,$4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.expand(t[3],e,"text");return delete e[a],delete e[a+"##"],delete e[a+"#"],null},"_?":function(t,e){return $4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.expand(t[1],e,"arg")?$4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.expand(t[2],e,"arg"):t.length>3?$4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.expand(t[3],e,"arg"):""},"_??":function(t,e){let a=$4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.expand(t[1],e,"arg");return a||$4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.expand(t[2],e,"arg")},_if:function(t,e){for(let a=0;a<t.length;a+=3){if("else"==$4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.expand(t[a],e,"arg"))return $4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.expand(t[a+1],e,"text");if($4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.expand(t[a+1],e,"arg"))return $4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.expand(t[a+2],e,"text")}return""},_switch:function(t,e){let a=$4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.expand(t[1],e,"arg");for(let i=2;i<t.length;i+=2){let r=$4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.expand(t[i],e,"arg");if(r==a||"default"==r)return $4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.expand(t[i+1],e,"text")}return""},_break:function(t,e){throw new Error("EXC_BREAK")},_continue:function(t,e){throw new Error("EXC_CONTINUE")},_repeat:function(t,e){if(t.length<3||1!=(1&t.length))return"(`repeat`: Wrong number of parameters)";let a=$4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.value(t[1],e),i=null,r=0,n=null,s=null;for(let a=2;a<t.length-1;a+=2){switch($4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.value(t[a],e).toLowerCase()){case"from":r=parseFloat($4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.value(t[a+1],e));break;case"to":n=parseFloat($4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.value(t[a+1],e));break;case"count":i=parseFloat($4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.value(t[a+1],e));break;case"step":s=parseFloat($4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.value(t[a+1],e))}}let f=t[t.length-1],o=[];if(null!==n)if(null===s&&(s=r>n?-1:1),s<0)for(let t=r;t>=n;t+=s)try{e[a]=t,o.push($4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.value(f,e))}catch(t){let e=t.message;if("EXC_BREAK"==e)break;if("EXC_CONTINUE"==e)continue;throw t}else for(let t=r;t<=n;t+=s)try{e[a]=t,o.push($4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.value(f,e))}catch(t){let e=t.message;if("EXC_BREAK"==e)break;if("EXC_CONTINUE"==e)continue;throw t}else if(null!==i){null===s&&(s=1);for(let t=r;i>0;i--,t+=s)try{e[a]=t,o.push($4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.value(f,e))}catch(t){let e=t.message;if("EXC_BREAK"==e)break;if("EXC_CONTINUE"==e)continue;throw t}}else{null===s&&(s=1);for(let t=r;;t+=s)try{e[a]=t,o.push($4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.value(f,e))}catch(t){let e=t.message;if("EXC_BREAK"==e)break;if("EXC_CONTINUE"==e)continue;throw t}}return delete e[a],o},_for:function(t,e){if(t.length<3||1!=(1&t.length))return"(`for`: Wrong number of parameters)";let a=$4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.value(t[1],e),i=null,r=0;to=null;let n=null;for(let a=2;a<t.length-1;a+=2)switch(value=$4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.value(t[a],e),value.toLowerCase()){case"from":r=parseFloat($4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.value(t[a+1],e));break;case"to":to=parseFloat($4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.value(t[a+1],e));break;case"count":i=parseFloat($4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.value(t[a+1],e));break;case"step":n=parseFloat($4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.value(t[a+1],e))}let s=t[t.length-1];if(null!==to)if(null===n&&(n=r>to?-1:1),n<0)for(let t=r;t>=to;t+=n)try{e[a]=t,$4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.value(s,e)}catch(t){let e=t.message;if("EXC_BREAK"==e)break;if("EXC_CONTINUE"==e)continue;throw t}else for(let t=r;t<=to;t+=n)try{e[a]=t,$4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.value(s,e)}catch(t){let e=t.message;if("EXC_BREAK"==e)break;if("EXC_CONTINUE"==e)continue;throw t}else if(null!==i){null===n&&(n=1);for(let t=r;i>0;i--,t+=n)try{e[a]=t,$4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.value(s,e)}catch(t){let e=t.message;if("EXC_BREAK"==e)break;if("EXC_CONTINUE"==e)continue;throw t}}else{null===n&&(n=1);for(let t=r;;t+=n)try{e[a]=t,$4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.value(s,e)}catch(t){let e=t.message;if("EXC_BREAK"==e)break;if("EXC_CONTINUE"==e)continue;throw t}}return delete e[a],null},_loop:function(t,e){if(t.length<2)return"(`loop`: Wrong number of parameters)";let a=t[1];for(;;)try{$4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.value(a,e)}catch(t){let e=t.message;if("EXC_BREAK"==e)break;if("EXC_CONTINUE"==e)continue;throw t}return null},_echo:function(t,e){let a="";for(let i=1;i<t.length;i++)a+=$4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.expand(t[i],e,"arg");return console.log(a),""},"_#":function(t,e){let a=[];for(let i=1;i<t.length;i++)a.push($4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.expand(t[i],e,"arg"));return a},"_##":function(t,e){let a=[];for(let e=1;e<t.length;e++)a.push(t[e]);return a},"_&":function(t,e){return $4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.getNamedValues(t,e,1,!0)},"_&&":function(t,e){return $4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.getNamedValues(t,e,1,!1)},contains:function(t,e,a){let i=t[1];if("object"!=typeof i)return a.err="Argument is not a Map",!1;let r="";for(let e=2;e<t.length;e++)t[e]in i||(r+=", "+t[e]);return""==r||(a.err=r.substr(1),!1)},has:function(t,e,a){let i=t[2];return"object"==$e3192943c08c87b673a09591fd8bc1f0$export$default.typeOf(i)&&t[1]in i},_map:function(t,e){let a=$4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.expand(t[1],e,"arg"),i=$4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.expand(t[2],e,"arg");if(!i)return i;let r="array"==$e3192943c08c87b673a09591fd8bc1f0$export$default.typeOf(i),n=r?[]:{},s=0;for(let f in i)e[a]=i[f],e[a+"##"]=s++,e[a+"#"]=f,r?n.push($4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.expand(t[3],e,"arg")):n[f]=$4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.expand(t[3],e,"arg");return delete e[a],delete e[a+"##"],delete e[a+"#"],n},_filter:function(t,e){let a=$4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.expand(t[1],e,"arg"),i=$4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.expand(t[2],e,"arg");if(!i)return i;let r="array"==$e3192943c08c87b673a09591fd8bc1f0$export$default.typeOf(i),n=r?[]:{},s=0;for(let f in i)e[a]=i[f],e[a+"##"]=s++,e[a+"#"]=f,~~$4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.expand(t[3],e,"arg")&&(r?n.push(i[f]):n[f]=i[f]);return delete e[a],delete e[a+"##"],delete e[a+"#"],n},expand:function(t,e,a){return $4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.expand($4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.parseTemplate(t[1],"{","}"),3==t.length?t[2]:a)},_call:function(t,e){let a=$4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.expand(t[1],e,"varref");if(!a||"function"!=typeof a[0][a[1]])throw new Error("Expression is not a function: "+$4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.expand(t[1],e,"obj").map((t=>null==t?".":t)).join(""));let i=[];for(let a=2;a<t.length;a++)i.push($4a7f59f3f662b7182dbe0a3d05ca1b49$export$default.value(t[a],e));return a[0][a[1]](...i)}};const $9a13317101bee2e2b4637862b0c16235$export$Rin=$e3192943c08c87b673a09591fd8bc1f0$export$default,$9a13317101bee2e2b4637862b0c16235$export$Class=$fcf834a5219b84862032cf1f9914c1a0$export$default,$9af60d516d7ae058cd367aeed84acd99$var$rol16=function(t,e){return 65535&(t<<e|t>>>16-e&(1<<e)-1)},$9af60d516d7ae058cd367aeed84acd99$var$ror16=function(t,e){return 65535&(t>>>e|(t&(1<<e)-1)<<16-e)},$9af60d516d7ae058cd367aeed84acd99$var$add16=function(t,e){return t+e&65535},$9af60d516d7ae058cd367aeed84acd99$var$sub16=function(t,e){return t-e&65535},$9af60d516d7ae058cd367aeed84acd99$var$xor16=function(t,e){return 65535&(t^e)},$9af60d516d7ae058cd367aeed84acd99$export$default=$9a13317101bee2e2b4637862b0c16235$export$Class.extend({seed:0,a:0,b:0,last:0,__ctor:function(t=3672614355){this.setSeed(t)},setSeed:function(t){return this.seed=t,this.a=t>>16&65535,this.b=t>>0&65535,this.last=this.a>>4&255|this.b<<4&65280,this},nextInt16:function(){let t=this.last;return t=$9af60d516d7ae058cd367aeed84acd99$var$add16(t,this.a),t=$9af60d516d7ae058cd367aeed84acd99$var$xor16(t,5397),this.a=$9af60d516d7ae058cd367aeed84acd99$var$xor16(this.a,20897),this.a=$9af60d516d7ae058cd367aeed84acd99$var$sub16(this.a,this.b),this.b=$9af60d516d7ae058cd367aeed84acd99$var$xor16(this.b,6677),t=$9af60d516d7ae058cd367aeed84acd99$var$rol16(t,15&this.b),65535&(this.last=t)},nextInt8:function(){return 255&this.nextInt16()},nextFloat:function(){return this.nextInt16()/65535}}),$9090bbb3a64d2ec244e10e9978e1deb1$export$default={viewport:null,debugBounds:!1,debugId:!1,rand0:new $9af60d516d7ae058cd367aeed84acd99$export$default,rand1:new $9af60d516d7ae058cd367aeed84acd99$export$default,rand2:new $9af60d516d7ae058cd367aeed84acd99$export$default};$parcel$global.px=function(t){return t*C.SCALE},$parcel$global.dispose=function(t){if(t)return"free"in t?t.free():"dispose"in t?t.dispose():void("__dtor"in t&&t.__dtor())},$parcel$global.audioContext="AudioContext"in $parcel$global?new AudioContext:null,$parcel$global.fetchd=function(t,e){return new Promise(((a,i)=>{e||(e={}),"responseType"in e||(e.responseType="arraybuffer");var r=new XMLHttpRequest;r.open("GET",t,!0);for(let t in e)r[t]=e[t];r.onload=function(){a(r.response)},r.onerror=function(){i("Unable to fetch specified resource.")},r.send()}))},$parcel$global.fetchAudioBuffer=function(t){return new Promise(((e,a)=>{$parcel$global.audioContext?fetchd(t).then((t=>audioContext.decodeAudioData(t))).then((t=>e(t))).catch((t=>a(t))):a("AudioContext is not available.")}))},$parcel$global.int=function(t){return t>>0},$parcel$global.bool=function(t){return!0===t||!1===t?t:"true"==t||"false"!=t&&!!t},$parcel$global.float=function(t){return parseFloat(t)},$parcel$global.float2=function(t){return int(100*t)/100},$parcel$global.float3=function(t){return int(1e3*t)/1e3},$parcel$global.float4=function(t){return int(1e4*t)/1e4},$parcel$global.rad=function(t){return t*Math.PI/180},$parcel$global.deg=function(t){return t/Math.PI*180},$parcel$global.rand=function(){return $9090bbb3a64d2ec244e10e9978e1deb1$export$default.rand0.nextInt16()},$parcel$global.randf=function(){return $9090bbb3a64d2ec244e10e9978e1deb1$export$default.rand0.nextFloat()},$parcel$global.randrf=function(t,e){let a=$9090bbb3a64d2ec244e10e9978e1deb1$export$default.rand0.nextFloat();return a*e+(1-a)*t},$parcel$global.randr=function(t,e){let a=$9090bbb3a64d2ec244e10e9978e1deb1$export$default.rand0.nextFloat();return int(a*e+(1-a)*t)},$parcel$global.randtf=function(t,e,a){for(var i=[],r=0;r<a;r++)i.push(randrf(t,e));return i},$parcel$global.hrnow=function(){return performance.now()},$parcel$global.randvar=function(t,e){return function(){return randr(t,e)}},$parcel$global.randitem=function(t,e,a){return e||(e=0),a||(a=t.length-1),function(){return t[randr(e,a)]}},$parcel$global.getLineSegmentIntersection=function(t,e,a,i,r,n,s,f){if(t==r&&e==n&&a==s&&i==f)return 0;var o=i-e,d=a-t,l=f-n,c=s-r;if(0==o&&0==l){if(e!=n)return 2;var u=Math.max(t,r);return u>Math.min(a,s)?2:(u-t)/d}if(0==d&&0==c){if(t!=r)return 2;var h=Math.max(e,n);return h>Math.min(i,f)?2:(h-e)/o}if(0==d)return 0>(b=(l*(t-r)+c*(n-e))/(c*o))||b>1||0>($=(t-r)/c)||$>1?2:b;var $,b,p=l*d-c*o;return 0==p||0>($=(o*(r-t)+d*(e-n))/p)||$>1||0>(b=(c*$+r-t)/d)||b>1?2:b},$parcel$global.lineSegmentIntersects=function(t,e,a,i,r,n,s,f){let o=getLineSegmentIntersection(t,e,a,i,r,n,s,f);return o>=0&&o<=1},$parcel$global.rotatePoint=function(t,e,a){return"object"==Rin.typeOf(t)?{x:e*t.x+a*t.y,y:a*t.x-e*t.y}:{x:e*Math.cos(t)+a*Math.sin(t),y:a*Math.cos(t)-e*Math.sin(t)}},$parcel$global.stepValue=function(t,e,a,i){return Math.round(i*(t-e)/(a-e))/i*(a-e)+e},$parcel$global.alignValue=function(t,e){return Math.round(t/e)*e};var $61aea493ae1cab8fd79b97073b980cf5$export$default={BACKSPACE:8,TAB:9,ENTER:13,ESC:27,SPACE:32,PGUP:33,PGDN:34,END:35,HOME:36,INS:45,DEL:46,LEFT:37,UP:38,RIGHT:39,DOWN:40,NUM_PLUS:107,NUM_MINUS:109,NUM_ASTERISK:106,NUM_SLASH:111,NUM_DOT:110,NUM_0:96,NUM_1:97,NUM_2:98,NUM_3:99,NUM_4:100,NUM_5:101,NUM_6:102,NUM_7:103,NUM_8:104,NUM_9:105,D0:48,D1:49,D2:50,D3:51,D4:52,D5:53,D6:54,D7:55,D8:56,D9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90};const $676b148d00bde05a65142d5a5b8bf91f$var$recyclingFacilities={},$676b148d00bde05a65142d5a5b8bf91f$export$default={};let $676b148d00bde05a65142d5a5b8bf91f$var$constructorAllowed=0;$676b148d00bde05a65142d5a5b8bf91f$export$default.attachTo=function(t,e=2048,a=1024){if(!t.prototype.className)throw new Error("Unable to attach recycler functions to unnamed class.");if(!("__dtor"in t.prototype))throw new Error("Recycler: Class "+t.prototype.className+" requires `__dtor` method.");if(!("init"in t.prototype))throw new Error("Recycler: Class "+t.prototype.className+" requires `init` method.");$676b148d00bde05a65142d5a5b8bf91f$var$recyclingFacilities[t.prototype.className]=t,t.recyclerPool=[],t.prototype.objectId=0,t.recyclerNextObjectId=0,t.recyclerCreated=0,t.recyclerRecycled=0,t.recyclerMissed=0,t.recyclerLength=0,t.recyclerActive=0;for(let e=0;e<a;e++)t.recyclerPool.push(new t),t.recyclerLength++;const i=t.prototype.__ctor;t.prototype.__ctor=function(){if(!$676b148d00bde05a65142d5a5b8bf91f$var$constructorAllowed)throw new Error("Recycler: Constructor blocked for class "+t.prototype.className+", use alloc() instead.");i.call(this)},t.alloc=function(){let e;return this.recyclerLength?(e=this.recyclerPool[--this.recyclerLength],t.recyclerRecycled++):($676b148d00bde05a65142d5a5b8bf91f$var$constructorAllowed++,e=new t,$676b148d00bde05a65142d5a5b8bf91f$var$constructorAllowed--,t.recyclerCreated++),t.recyclerActive++,e.objectId=++this.recyclerNextObjectId,this.recyclerNextObjectId&=2147483647,e},t.calloc=function(){return t.alloc().init()},t.free=function(t){return t?t.free():t},t.prototype.free=function(){return 0==this.objectId?(console.error("Already freed ("+t.prototype.className+")"),this):(this.__dtor(),this.objectId=0,t.recyclerLength>=t.recyclerPool.length?t.recyclerMissed++:t.recyclerPool[t.recyclerLength++]=this,t.recyclerActive--,this)}},$676b148d00bde05a65142d5a5b8bf91f$export$default.showStats=function(){console.group("Recycling Facilities");for(let t in $676b148d00bde05a65142d5a5b8bf91f$var$recyclingFacilities){let e=$676b148d00bde05a65142d5a5b8bf91f$var$recyclingFacilities[t];console.debug(t+": "+(e.recyclerCreated/e.recyclerPool.length*100).toFixed(1)+"%  =>  overhead="+e.recyclerCreated+", active="+e.recyclerActive+", capacity="+e.recyclerPool.length+", recycled="+e.recyclerRecycled+", in-recycler="+e.recyclerLength+", missed="+e.recyclerMissed+", space="+(e.recyclerPool.length-e.recyclerLength))}console.groupEnd()};const $38decb76335a4f247b53445a3654d5f4$export$default=$9a13317101bee2e2b4637862b0c16235$export$Class.extend({className:"Linkable",prev:null,next:null,value:null,init:function(t){return this.value=t,this.clear(),this},__dtor:function(){this.unlink()},clear:function(){return this.next=this.prev=null,this},linkAfter:function(t){this.prev=t,this.next=t?t.next:null,t&&(t.next&&(t.next.prev=this),t.next=this)},linkBefore:function(t){this.prev=t?t.prev:null,this.next=t,t&&(t.prev&&(t.prev.next=this),t.prev=this)},unlink:function(){return this.prev&&(this.prev.next=this.next),this.next&&(this.next.prev=this.prev),this.clear()}});$676b148d00bde05a65142d5a5b8bf91f$export$default.attachTo($38decb76335a4f247b53445a3654d5f4$export$default,16384,4096);const $31e77c88cc6920b604cc8697a03a7b4c$export$default=$9a13317101bee2e2b4637862b0c16235$export$Class.extend({className:"List",top:null,bottom:null,length:0,init:function(){return this.top=null,this.bottom=null,this.length=0,this},__dtor:function(){this.reset()},clone:function(){let t=$31e77c88cc6920b604cc8697a03a7b4c$export$default.calloc();for(let e=this.top;e;e=e.next)t.push($9a13317101bee2e2b4637862b0c16235$export$Rin.clone(e.value));return t},clear:function(){let t,e;for(t=this.top;null!=t;t=e)e=t.next,dispose(t.free().value);return this.top=this.bottom=null,this.length=0,this},reset:function(){let t,e;for(t=this.top;null!=t;t=e)e=t.next,t.free();return this.top=this.bottom=null,this.length=0,this},first:function(){return null!==this.top?this.top.value:null},last:function(){return null!==this.bottom?this.bottom.value:null},getAt:function(t){let e=null;for(e=this.top;e&&t--;e=e.next);return null!=e?e.value:null},getNodeAt:function(t){let e=null;for(e=this.top;e&&t--;e=e.next);return e},sgetNode:function(t){for(let e=this.top;e;e=e.next)if(e.value===t)return e;return null},remove:function(t){return null==t||"isInstanceOf"in t&&t.isInstanceOf($38decb76335a4f247b53445a3654d5f4$export$default)||(t=this.sgetNode(t)),t?(t.prev||(this.top=t.next),t.next||(this.bottom=t.prev),this.length--,t.free().value):null},insertBefore:function(t,e){if(!t)return this;let a=$38decb76335a4f247b53445a3654d5f4$export$default.alloc().init(e);return a.linkBefore(t),t==this.top&&(this.top=a),this.length++,e},insertAfter:function(t,e){if(!t)return this;let a=$38decb76335a4f247b53445a3654d5f4$export$default.alloc().init(e);return a.linkAfter(t),t==this.bottom&&(this.bottom=a),this.length++,e},unshift:function(t){let e=$38decb76335a4f247b53445a3654d5f4$export$default.alloc().init(t);return e.linkBefore(this.top),this.bottom||(this.bottom=e),this.top=e,this.length++,t},shift:function(){let t=this.top;return t?((this.top=t.next)||(this.bottom=null),this.length--,t.free().value):null},push:function(t){let e=$38decb76335a4f247b53445a3654d5f4$export$default.alloc().init(t);return e.linkAfter(this.bottom),this.top||(this.top=e),this.bottom=e,this.length++,t},pop:function(){let t=this.bottom;return t?((this.bottom=t.prev)||(this.top=null),this.length--,t.free().value):null},append:function(t){for(let e=t.top;e;e=e.next)this.push(e.value);return this},forEach:function(t,e=null){let a;for(let i=this.top;i;i=a)if(a=i.next,!1===t(i.value,i,this,e))return!1;return!0},forEachRev:function(t,e=null){let a;for(let i=this.bottom;i;i=a)if(a=i.prev,!1===t(i.value,i,this,e))return!1;return!0},find:function(t,e=null){for(let a=this.top;a;a=a.next)if(t(a.value,e))return a.value;return null},filter:function(t,e=null){let a=$31e77c88cc6920b604cc8697a03a7b4c$export$default.calloc();for(let i=this.top;i;i=i.next)t(i.value,e)&&a.push(i.value);return a},toArray:function(){let t=[];for(let e=this.top;e;e=e.next)t.push(e.value);return t}});$676b148d00bde05a65142d5a5b8bf91f$export$default.attachTo($31e77c88cc6920b604cc8697a03a7b4c$export$default,16384,4096);const $4f606ba1a8ba03c9bc8fddfdc76bf0fb$export$default=function(t,e,a){this.callback=a,this.interval=e,this.vsync=t,this.isRunning=!1,this.startTime=0,this.rTime=0,this.sTime=0,this.lTime=0,this.tDelta=0,this._onTimeout=()=>{this.onTimeout()},this._onTimeout_b=()=>{this.runNow()}};$4f606ba1a8ba03c9bc8fddfdc76bf0fb$export$default.prototype.onTimeout=function(){if(!this.isRunning)return;this.rTime=hrnow()-this.startTime;let t=this.rTime-(this.sTime+this.interval);t<0?this.runAfter(-t):(this.sTime+=this.interval*(1+int(t/this.interval)),this.tDelta=t<0?this.interval:this.rTime-this.lTime,this.lTime=this.rTime,this.runAfter(this.sTime+this.interval-(hrnow()-this.startTime)),this.callback(this.tDelta,this))},$4f606ba1a8ba03c9bc8fddfdc76bf0fb$export$default.prototype.onStart=function(){},$4f606ba1a8ba03c9bc8fddfdc76bf0fb$export$default.prototype.start=function(t=!1,e=1){this.startTime=hrnow(),this.isRunning=!0,this.sTime=0,this.lTime=0,this.onStart(),t&&this.callback(0,this),this.runAfter(this.interval*e)},$4f606ba1a8ba03c9bc8fddfdc76bf0fb$export$default.prototype.runAfter=function(t){this.vsync?requestAnimationFrame(this._onTimeout_b):setTimeout(this._onTimeout,0)},$4f606ba1a8ba03c9bc8fddfdc76bf0fb$export$default.prototype.runNow=function(){setTimeout(this._onTimeout,0)},$4f606ba1a8ba03c9bc8fddfdc76bf0fb$export$default.prototype.stop=function(){this.isRunning=!1};const $9f696c71198127b10adca449bf8b758f$export$default=$9a13317101bee2e2b4637862b0c16235$export$Class.extend({className:"Vec2",x:0,y:0,init:function(t=null,e=null){return this.set(t,e)},clone:function(){return $9f696c71198127b10adca449bf8b758f$export$default.alloc().init(this)},set:function(t,e=null){if(null===t)t=0,e=0;else if(null===e){let a=t;t=a.x,e=a.y}return this.x=t,this.y=e,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},zero:function(){return this.set(0,0)},isZero:function(){return 0==this.x&&0==this.y},equals:function(t,e=null){if(null===e){let a=t;t=a.x,e=a.y}return this.x==t&&this.y==e},neg:function(){return this.x=-this.x,this.y=-this.y,this},inv:function(){return this.x=1/this.x,this.y=1/this.y,this},abs:function(){return this.x=this.x<0?-this.x:this.x,this.y=this.y<0?-this.y:this.y,this},translate:function(t,e=null){if(null===e){let a=t;t=a.x,e=a.y}return this.x+=t,this.y+=e,this},add:function(t,e=null){if(null===e){let a=t;t=a.x,e=a.y}return this.x+=t,this.y+=e,this},sub:function(t,e){if(null===e){let a=t;t=a.x,e=a.y}return this.x-=t,this.y-=e,this},scale:function(t,e=null){if(null===e)if($9f696c71198127b10adca449bf8b758f$export$default.isInstance(t)){let a=t;t=a.x,e=a.y}else e=t;return this.x*=t,this.y*=e,this},floor:function(){return this.x=int(this.x),this.y=int(this.y),this},fract:function(){return this.x=this.x-int(this.x),this.y=this.y-int(this.y),this},dot:function(t,e=null){if(null===e){let a=t;t=a.x,e=a.y}return this.x*t+this.y*e},magnitude:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){return this.isZero()?this:this.scale(1/this.magnitude())},majorAxis:function(){return Math.abs(this.x)>Math.abs(this.y)?this.y=0:this.x=0,this},minorAxis:function(){return Math.abs(this.x)<Math.abs(this.y)?this.y=0:this.x=0,this},sign:function(){return this.x=this.x?this.x<0?-1:1:0,this.y=this.y?this.y<0?-1:1:0,this},toString:function(){return`(${this.x}, ${this.y})`}});$676b148d00bde05a65142d5a5b8bf91f$export$default.attachTo($9f696c71198127b10adca449bf8b758f$export$default,1024);const $a7a410b4caa5be623e4b43a7a516b0fd$var$temp=new Float32Array(9).fill(0),$a7a410b4caa5be623e4b43a7a516b0fd$var$temp2=new Float32Array(9).fill(0),$a7a410b4caa5be623e4b43a7a516b0fd$export$default=$9a13317101bee2e2b4637862b0c16235$export$Class.extend({className:"Matrix",__ctor:function(){this.data=new Float32Array(9)},init:function(t=null){return null!==t?this.set(t):this.identity(),this},zero:function(){return this.data.fill(0),this},fill:function(t){return this.data.fill(t),this},set:function(t){if($a7a410b4caa5be623e4b43a7a516b0fd$export$default.isInstance(t))for(let e=0;e<9;e++)this.data[e]=t.data[e];else for(let e=0;e<9;e++)this.data[e]=t[e];return this},identity:function(t=null){return null===t&&(t=this.data),t.fill(0),t[0]=t[4]=t[8]=1,this},scalef:function(t){for(let e=0;e<9;e++)this.data[e]*=t;return this},clone:function(){return $a7a410b4caa5be623e4b43a7a516b0fd$export$default.alloc().init(this)},append:function(t){t instanceof $a7a410b4caa5be623e4b43a7a516b0fd$export$default&&(t=t.data);for(let t=0;t<9;t++)$a7a410b4caa5be623e4b43a7a516b0fd$var$temp[t]=this.data[t];return this.data[0]=t[0]*$a7a410b4caa5be623e4b43a7a516b0fd$var$temp[0]+t[1]*$a7a410b4caa5be623e4b43a7a516b0fd$var$temp[3]+t[2]*$a7a410b4caa5be623e4b43a7a516b0fd$var$temp[6],this.data[1]=t[0]*$a7a410b4caa5be623e4b43a7a516b0fd$var$temp[1]+t[1]*$a7a410b4caa5be623e4b43a7a516b0fd$var$temp[4]+t[2]*$a7a410b4caa5be623e4b43a7a516b0fd$var$temp[7],this.data[2]=t[0]*$a7a410b4caa5be623e4b43a7a516b0fd$var$temp[2]+t[1]*$a7a410b4caa5be623e4b43a7a516b0fd$var$temp[5]+t[2]*$a7a410b4caa5be623e4b43a7a516b0fd$var$temp[8],this.data[3]=t[3]*$a7a410b4caa5be623e4b43a7a516b0fd$var$temp[0]+t[4]*$a7a410b4caa5be623e4b43a7a516b0fd$var$temp[3]+t[5]*$a7a410b4caa5be623e4b43a7a516b0fd$var$temp[6],this.data[4]=t[3]*$a7a410b4caa5be623e4b43a7a516b0fd$var$temp[1]+t[4]*$a7a410b4caa5be623e4b43a7a516b0fd$var$temp[4]+t[5]*$a7a410b4caa5be623e4b43a7a516b0fd$var$temp[7],this.data[5]=t[3]*$a7a410b4caa5be623e4b43a7a516b0fd$var$temp[2]+t[4]*$a7a410b4caa5be623e4b43a7a516b0fd$var$temp[5]+t[5]*$a7a410b4caa5be623e4b43a7a516b0fd$var$temp[8],this.data[6]=t[6]*$a7a410b4caa5be623e4b43a7a516b0fd$var$temp[0]+t[7]*$a7a410b4caa5be623e4b43a7a516b0fd$var$temp[3]+t[8]*$a7a410b4caa5be623e4b43a7a516b0fd$var$temp[6],this.data[7]=t[6]*$a7a410b4caa5be623e4b43a7a516b0fd$var$temp[1]+t[7]*$a7a410b4caa5be623e4b43a7a516b0fd$var$temp[4]+t[8]*$a7a410b4caa5be623e4b43a7a516b0fd$var$temp[7],this.data[8]=t[6]*$a7a410b4caa5be623e4b43a7a516b0fd$var$temp[2]+t[7]*$a7a410b4caa5be623e4b43a7a516b0fd$var$temp[5]+t[8]*$a7a410b4caa5be623e4b43a7a516b0fd$var$temp[8],this},translate:function(t,e){if(0==t&&0==e)return this;for(let t=0;t<9;t++)$a7a410b4caa5be623e4b43a7a516b0fd$var$temp[t]=this.data[t];return this.data[6]=t*$a7a410b4caa5be623e4b43a7a516b0fd$var$temp[0]+e*$a7a410b4caa5be623e4b43a7a516b0fd$var$temp[3]+$a7a410b4caa5be623e4b43a7a516b0fd$var$temp[6],this.data[7]=t*$a7a410b4caa5be623e4b43a7a516b0fd$var$temp[1]+e*$a7a410b4caa5be623e4b43a7a516b0fd$var$temp[4]+$a7a410b4caa5be623e4b43a7a516b0fd$var$temp[7],this.data[8]=t*$a7a410b4caa5be623e4b43a7a516b0fd$var$temp[2]+e*$a7a410b4caa5be623e4b43a7a516b0fd$var$temp[5]+$a7a410b4caa5be623e4b43a7a516b0fd$var$temp[8],this},rotate:function(t){if(0==t)return this;this.identity($a7a410b4caa5be623e4b43a7a516b0fd$var$temp2);let e=Math.cos(t),a=Math.sin(t);return $a7a410b4caa5be623e4b43a7a516b0fd$var$temp2[0]=e,$a7a410b4caa5be623e4b43a7a516b0fd$var$temp2[1]=-a,$a7a410b4caa5be623e4b43a7a516b0fd$var$temp2[3]=a,$a7a410b4caa5be623e4b43a7a516b0fd$var$temp2[4]=e,this.append($a7a410b4caa5be623e4b43a7a516b0fd$var$temp2)},scale:function(t,e){return 1==t&&1==e?this:(this.identity($a7a410b4caa5be623e4b43a7a516b0fd$var$temp2),$a7a410b4caa5be623e4b43a7a516b0fd$var$temp2[0]=t,$a7a410b4caa5be623e4b43a7a516b0fd$var$temp2[4]=e,this.append($a7a410b4caa5be623e4b43a7a516b0fd$var$temp2))},applyTo:function(t,e=null){if(null===e){const a=t;t=a.x,e=a.y}let a=this.data[0]*t+this.data[3]*e+this.data[6],i=this.data[1]*t+this.data[4]*e+this.data[7];return $9f696c71198127b10adca449bf8b758f$export$default.alloc().init(a,i)},transpose:function(){$a7a410b4caa5be623e4b43a7a516b0fd$var$temp.fill(0);for(let t=0;t<3;t++)for(let e=0;e<3;e++)$a7a410b4caa5be623e4b43a7a516b0fd$var$temp[3*t+e]=this.data[3*e+t];for(let t=0;t<9;t++)this.data[t]=$a7a410b4caa5be623e4b43a7a516b0fd$var$temp[t];return this},det:function(){return this.data[0]*(this.data[4]*this.data[8]-this.data[5]*this.data[7])-this.data[1]*(this.data[3]*this.data[8]-this.data[5]*this.data[6])+this.data[2]*(this.data[3]*this.data[7]-this.data[4]*this.data[6])},adj:function(){throw new Error("NOT IMPLEMENTED")},inverse:function(){let t=this.det();return t?this.adj().scalef(1/t):null},toString:function(){return`[${this.data[0]}, ${this.data[3]}, ${this.data[6]}]\n[${this.data[1]}, ${this.data[4]}, ${this.data[7]}]\n[${this.data[2]}, ${this.data[5]}, ${this.data[8]}]\n`}});$676b148d00bde05a65142d5a5b8bf91f$export$default.attachTo($a7a410b4caa5be623e4b43a7a516b0fd$export$default,4096);const $e93d17ded3c815db66b20fa184665246$export$default=function(t=null){let e={elem:null,gl:!1,background:"#000",width:0,height:0,hidden:!0,absolute:!1,antialias:!1,...t};null==e.elem?(this.elem=$parcel$global.document?$parcel$global.document.createElement("canvas"):$9a13317101bee2e2b4637862b0c16235$export$Rin.clone($e93d17ded3c815db66b20fa184665246$export$default.passThruCanvas),$parcel$global.document&&1!=e.hidden&&($parcel$global.document.body.appendChild(this.elem),!0===e.absolute&&(this.elem.style.position="absolute",this.elem.style.left="0",this.elem.style.top="0"))):this.elem=elem,this.elem.getContext&&(!0===e.gl?(this.gl=this.elem.getContext("webgl2",{desynchronized:!1}),this.context=null,console.log(this.gl.getParameter(this.gl.VERSION)),console.log(this.gl.getParameter(this.gl.SHADING_LANGUAGE_VERSION))):(this.context=this.elem.getContext("2d",{desynchronized:!1}),this.gl=null),this.antialias=e.antialias,this.setBackground(e.background),this.matrixStack=[],this.alphaStack=[],this.matr=$a7a410b4caa5be623e4b43a7a516b0fd$export$default.calloc(),this.transform=$a7a410b4caa5be623e4b43a7a516b0fd$export$default.calloc(),this._alpha=1,this._globalScale=1,this.updateTransform(),this.strokeStyle("#fff"),this.fillStyle("#fff"),this.resize(e.width,e.height),!0===e.gl&&this.initGl())};$e93d17ded3c815db66b20fa184665246$export$default.passThruCanvas={parentNode:null,imageSmoothingEnabled:!0,style:{},width:950,height:540,getContext:function(t){return this},pushClip:function(){},popClip:function(){},scale:function(t,e){},rotate:function(t){},translate:function(t,e){},setTransform:function(t,e,a,i,r,n){},updateTransform:function(){},toDataURL:function(t,e){return""},beginPath:function(){},moveTo:function(t,e){},closePath:function(){},lineTo:function(){},rect:function(t,e,a,i){},fill:function(){},stroke:function(){},fillRect:function(t,e,a,i){},strokeRect:function(t,e,a,i){},clip:function(){},quadraticCurveTo:function(t,e,a,i){},bezierCurveTo:function(t,e,a,i,r,n){},arc:function(t,e,a,i,r,n){},arcTo:function(t,e,a,i,r){},fillText:function(t,e,a,i){},strokeText:function(t,e,a,i){},measureText:function(t){return{width:0}},createImageData:function(t,e){return{width:t,height:e}},getImageData:function(t,e,a,i){return{width:a,height:i,data:[]}},putImageData:function(t,e,a){},drawImage:function(t,e=0,a=0,i=null,r=null,n=null,s=null,f=null,o=null){},getBoundingClientRect:function(){return{left:0,top:0}}},$e93d17ded3c815db66b20fa184665246$export$default.prototype.buildShader=function(t,e,a){const i=this.gl,r=i.createShader(e);if(i.shaderSource(r,a),i.compileShader(r),!i.getShaderParameter(r,i.COMPILE_STATUS))throw new Error("compilerShader: "+i.getShaderInfoLog(r));i.attachShader(t,r)},$e93d17ded3c815db66b20fa184665246$export$default.prototype.initGl=function(){let t=this.gl;if(t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),this.gl_array_buffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.gl_array_buffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,1,1]),t.STATIC_DRAW),this.gl_program=t.createProgram(),this.buildShader(this.gl_program,t.VERTEX_SHADER,"#version 300 es\n\n\t\tin vec2 location;\n\n\t\tuniform vec2 screen_size;\n\t\tuniform vec2 texture_size;\n\t\tuniform mat3 location_matrix;\n\t\tuniform mat3 texture_matrix;\n\t\tuniform mat3 current_matrix;\n\t\tuniform sampler2D texture;\n\t\tuniform float zvalue;\n\n\t\tout vec2 f_texcoords;\n\n\t\tvoid main() {\n\t\t\tgl_Position = vec4(((vec2(current_matrix*location_matrix*vec3(location, 1.0))/screen_size)*2.0-vec2(1.0, 1.0))*vec2(1.0, -1.0), zvalue/16777216.0, 1.0);\n\t\t\tf_texcoords = vec2(texture_matrix*vec3(location, 1.0))/texture_size;\n\t\t}\n\t"),this.buildShader(this.gl_program,t.FRAGMENT_SHADER,"#version 300 es\n\n\t\tprecision highp float;\n\n\t\tuniform sampler2D tex;\n\t\tin vec2 f_texcoords;\n\n\t\tout vec4 color;\n\n\t\tvoid main() {\n\t\t\tcolor = texture(tex, f_texcoords);\n\t\t\tif (color.a == 0.0) discard;\n\t\t}\n\t"),t.bindAttribLocation(this.gl_program,0,"location"),t.linkProgram(this.gl_program),!t.getProgramParameter(this.gl_program,t.LINK_STATUS))throw new Error("linkProgram: "+t.getProgramInfoLog(program));t.useProgram(this.gl_program),t.clearColor(0,0,0,0),t.enable(t.DEPTH_TEST),t.clearDepth(0),t.depthFunc(t.GEQUAL),t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA),this.gl_attrib_location=t.getAttribLocation(this.gl_program,"location"),this.gl_uniform_screen_size=t.getUniformLocation(this.gl_program,"screen_size"),this.gl_uniform_texture_size=t.getUniformLocation(this.gl_program,"texture_size"),this.gl_uniform_texture=t.getUniformLocation(this.gl_program,"texture"),this.gl_uniform_matrix=t.getUniformLocation(this.gl_program,"location_matrix"),this.gl_uniform_current_matrix=t.getUniformLocation(this.gl_program,"current_matrix"),this.gl_uniform_texture_matrix=t.getUniformLocation(this.gl_program,"texture_matrix"),this.gl_uniform_zvalue=t.getUniformLocation(this.gl_program,"zvalue"),t.enableVertexAttribArray(this.gl_attrib_location),t.vertexAttribPointer(this.gl_attrib_location,2,t.FLOAT,t.FALSE,2*Float32Array.BYTES_PER_ELEMENT,0*Float32Array.BYTES_PER_ELEMENT),this.location_matrix=new Float32Array(9).fill(0),this.texture_matrix=new Float32Array(9).fill(0),this.texture_size=new Float32Array(2).fill(0),this.zvalue=0,this.transform.identity(this.location_matrix),this.transform.identity(this.texture_matrix),this.drawImage=function(e,a=0,i=0,r=null,n=null,s=null,f=null,o=null,d=null){if(e.gl_ready){if(this.gl_active_texture!=e.gl_texture&&(this.gl.activeTexture(t.TEXTURE0),this.gl.bindTexture(t.TEXTURE_2D,e.gl_texture),this.gl.uniform1i(this.gl_uniform_texture,0),this.texture_size[0]=e.width,this.texture_size[1]=e.height,this.gl.uniform2fv(this.gl_uniform_texture_size,this.texture_size),this.gl_active_texture=e.gl_texture),null===r)return this.location_matrix[0]=e.width,this.location_matrix[4]=e.height,this.location_matrix[6]=a,this.location_matrix[7]=i,this.texture_matrix[0]=e.width,this.texture_matrix[4]=e.height,this.texture_matrix[6]=0,this.texture_matrix[7]=0,this.gl.uniformMatrix3fv(this.gl_uniform_current_matrix,!1,this.transform.data),this.gl.uniformMatrix3fv(this.gl_uniform_matrix,!1,this.location_matrix),this.gl.uniformMatrix3fv(this.gl_uniform_texture_matrix,!1,this.texture_matrix),this.gl.uniform1f(this.gl_uniform_zvalue,this.zvalue),void this.gl.drawArrays(t.TRIANGLE_STRIP,0,4);null!==s&&(this.location_matrix[0]=o,this.location_matrix[4]=d,this.location_matrix[6]=s,this.location_matrix[7]=f,this.texture_matrix[0]=r,this.texture_matrix[4]=n,this.texture_matrix[6]=a,this.texture_matrix[7]=i,this.gl.uniformMatrix3fv(this.gl_uniform_current_matrix,!1,this.transform.data),this.gl.uniformMatrix3fv(this.gl_uniform_matrix,!1,this.location_matrix),this.gl.uniformMatrix3fv(this.gl_uniform_texture_matrix,!1,this.texture_matrix),this.gl.uniform1f(this.gl_uniform_zvalue,this.zvalue),this.gl.drawArrays(t.TRIANGLE_STRIP,0,4))}}},$e93d17ded3c815db66b20fa184665246$export$default.prototype.prepareImage=function(t){let e=this.gl;if(null==e)return!1;let a=e.createTexture();return e.bindTexture(e.TEXTURE_2D,a),e.texStorage2D(e.TEXTURE_2D,1,e.RGBA8,t.width,t.height),e.texSubImage2D(e.TEXTURE_2D,0,0,0,t.width,t.height,e.RGBA,e.UNSIGNED_BYTE,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),t.gl_texture=a,t.gl_ready=!0,!0},$e93d17ded3c815db66b20fa184665246$export$default.prototype.depthTest=function(t){let e=this.gl;null!==e&&(t?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST))},$e93d17ded3c815db66b20fa184665246$export$default.prototype.applyConfig=function(){0==this.antialias?(null!=this.context&&(this.context.imageSmoothingEnabled=!1),this.elem.style.imageRendering="crisp-edges"):(null!=this.context&&(this.context.imageSmoothingEnabled=!0),this.elem.style.imageRendering="auto")},$e93d17ded3c815db66b20fa184665246$export$default.prototype.dispose=function(){this.elem.parentNode&&this.elem.parentNode.removeChild(this.elem),this.matrixStack=null,this.alphaStack=null,this.matr=null,this.context=null,this.elem=null},$e93d17ded3c815db66b20fa184665246$export$default.prototype.setBackground=function(t){this.elem.style.background=t,this.backgroundColor=t},$e93d17ded3c815db66b20fa184665246$export$default.prototype.resize=function(t,e){let a=this.elem.getBoundingClientRect();return t||(t=a.width),e||(e=a.height),this.elem.width=t,this.elem.height=e,this.width=this.elem.width,this.height=this.elem.height,this._width=int(this.width/this._globalScale),this._height=int(this.height/this._globalScale),null!=this.gl&&(this.gl.viewport(0,0,t,e),this.gl_uniform_screen_size&&this.gl.uniform2fv(this.gl_uniform_screen_size,[t,e]),this.gl.enable(this.gl.SCISSOR_TEST),this.gl.scissor(0,0,t,e)),this.applyConfig(),this},$e93d17ded3c815db66b20fa184665246$export$default.prototype.globalScale=function(t){return this._globalScale=t,this._width=int(this.width/this._globalScale),this._height=int(this.height/this._globalScale),this.loadIdentity(),this.scale(t,t),this},$e93d17ded3c815db66b20fa184665246$export$default.prototype.flipped=function(t){return t?(this._width=int(this.height/this._globalScale),this._height=int(this.width/this._globalScale)):(this._width=int(this.width/this._globalScale),this._height=int(this.height/this._globalScale)),this.isFlipped=t,this},$e93d17ded3c815db66b20fa184665246$export$default.prototype.pushClip=function(){return this},$e93d17ded3c815db66b20fa184665246$export$default.prototype.popClip=function(){return null!=this.gl&&this.gl.scissor(0,0,this.width,this.height),this},$e93d17ded3c815db66b20fa184665246$export$default.prototype.toDataUrl=function(t="image/png",e=null){return this.elem.toDataURL(t,e)},$e93d17ded3c815db66b20fa184665246$export$default.prototype.toPng64=function(){return this.elem.toDataURL("image/png").substr(22)},$e93d17ded3c815db66b20fa184665246$export$default.prototype._contextAttribute=function(t,e=null){if(this.context)return null!==e?(this.context[t]=e,this):this.context[t]},$e93d17ded3c815db66b20fa184665246$export$default.prototype.fillStyle=function(t){return this._contextAttribute("fillStyle",t)},$e93d17ded3c815db66b20fa184665246$export$default.prototype.strokeStyle=function(t){return this._contextAttribute("strokeStyle",t)},$e93d17ded3c815db66b20fa184665246$export$default.prototype.lineCap=function(t){return this._contextAttribute("lineCap",t)},$e93d17ded3c815db66b20fa184665246$export$default.prototype.lineJoin=function(t){return this._contextAttribute("lineJoin",t)},$e93d17ded3c815db66b20fa184665246$export$default.prototype.lineWidth=function(t){return this._contextAttribute("lineWidth",t)},$e93d17ded3c815db66b20fa184665246$export$default.prototype.miterLimit=function(t){return this._contextAttribute("miterLimit",t)},$e93d17ded3c815db66b20fa184665246$export$default.prototype.shadowColor=function(t){return this._contextAttribute("shadowColor",t)},$e93d17ded3c815db66b20fa184665246$export$default.prototype.shadowOffsetX=function(t){return this._contextAttribute("shadowOffsetX",t)},$e93d17ded3c815db66b20fa184665246$export$default.prototype.shadowOffsetY=function(t){return this._contextAttribute("shadowOffsetY",t)},$e93d17ded3c815db66b20fa184665246$export$default.prototype.shadowBlur=function(t){return this._contextAttribute("shadowBlur",t)},$e93d17ded3c815db66b20fa184665246$export$default.prototype.font=function(t){return this._contextAttribute("font",t)},$e93d17ded3c815db66b20fa184665246$export$default.prototype.textAlign=function(t){return this._contextAttribute("textAlign",t)},$e93d17ded3c815db66b20fa184665246$export$default.prototype.textBaseline=function(t){return this._contextAttribute("textBaseline",t)},$e93d17ded3c815db66b20fa184665246$export$default.prototype.globalAlpha=function(t){return void 0===t?this._alpha:(this._alpha=t,this.alpha(1))},$e93d17ded3c815db66b20fa184665246$export$default.prototype.alpha=function(t){return this._alpha*=t,this.context&&(this.context.globalAlpha=this._alpha),this},$e93d17ded3c815db66b20fa184665246$export$default.prototype.globalCompositeOperation=function(t){return this._contextAttribute("globalCompositeOperation",t)},$e93d17ded3c815db66b20fa184665246$export$default.prototype.updateTransform=function(){return this.setTransform(this.matr.data[0],this.matr.data[1],this.matr.data[3],this.matr.data[4],this.matr.data[6],this.matr.data[7]),this},$e93d17ded3c815db66b20fa184665246$export$default.prototype.setTransform=function(t,e,a,i,r,n){return null===this.context?(this.transform.data[0]=t,this.transform.data[1]=e,this.transform.data[2]=0,this.transform.data[3]=a,this.transform.data[4]=i,this.transform.data[5]=0,this.transform.data[6]=int(r),this.transform.data[7]=int(n),this.transform.data[8]=1,this):(this.context.setTransform(t,e,a,i,int(r),int(n)),this)},$e93d17ded3c815db66b20fa184665246$export$default.prototype.fillRect=function(t,e,a,i){return this.context.fillRect(t,e,a,i),this},$e93d17ded3c815db66b20fa184665246$export$default.prototype.strokeRect=function(t,e,a,i){return this.context.strokeRect(t,e,a,i),this},$e93d17ded3c815db66b20fa184665246$export$default.prototype.clearRect=function(t,e,a,i){return this.context.clearRect(t,e,a,i),this},$e93d17ded3c815db66b20fa184665246$export$default.prototype.beginPath=function(){return this.context.beginPath(),this},$e93d17ded3c815db66b20fa184665246$export$default.prototype.moveTo=function(t,e){return this.context.moveTo(t,e),this},$e93d17ded3c815db66b20fa184665246$export$default.prototype.closePath=function(){return this.context.closePath(),this},$e93d17ded3c815db66b20fa184665246$export$default.prototype.lineTo=function(t,e){return this.context.lineTo(t,e),this},$e93d17ded3c815db66b20fa184665246$export$default.prototype.rect=function(t,e,a,i){return this.context.rect(t,e,a,i),this},$e93d17ded3c815db66b20fa184665246$export$default.prototype.fill=function(t=null){return t&&this.fillStyle(t),this.context.fill(),this},$e93d17ded3c815db66b20fa184665246$export$default.prototype.stroke=function(t=null){return t&&this.strokeStyle(t),this.context.stroke(),this},$e93d17ded3c815db66b20fa184665246$export$default.prototype.clip=function(t,e,a,i){return null!==this.gl&&(t*=this._globalScale,e*=this._globalScale,a*=this._globalScale,i*=this._globalScale,this.isFlipped?this.gl.scissor(this.width-e-i-1,this.height-t-a-1,i,a):this.gl.scissor(t,this.height-e-i-1,a,i)),this},$e93d17ded3c815db66b20fa184665246$export$default.prototype.quadraticCurveTo=function(t,e,a,i){return this.context.quadraticCurveTo(t,e,a,i),this},$e93d17ded3c815db66b20fa184665246$export$default.prototype.bezierCurveTo=function(t,e,a,i,r,n){return this.context.bezierCurveTo(t,e,a,i,r,n),this},$e93d17ded3c815db66b20fa184665246$export$default.prototype.arc=function(t,e,a,i,r,n){return this.context.arc(t,e,a,i,r,n),this},$e93d17ded3c815db66b20fa184665246$export$default.prototype.arcTo=function(t,e,a,i,r){return this.context.arcTo(t,e,a,i,r),this},$e93d17ded3c815db66b20fa184665246$export$default.prototype.fillText=function(t,e,a,i=1e3){return this.context.fillText(t,e,a,i),this},$e93d17ded3c815db66b20fa184665246$export$default.prototype.strokeText=function(t,e,a,i=1e3){return this.context.strokeText(t,e,a,i),this},$e93d17ded3c815db66b20fa184665246$export$default.prototype.measureText=function(t){return this.context.measureText(t).width},$e93d17ded3c815db66b20fa184665246$export$default.prototype.createImageData=function(t,e){return this.context.createImageData(t,e)},$e93d17ded3c815db66b20fa184665246$export$default.prototype.getImageData=function(t,e,a,i){return this.context.getImageData(t,e,a,i)},$e93d17ded3c815db66b20fa184665246$export$default.prototype.putImageData=function(t,e,a){return this.context.putImageData(t,e,a),this},$e93d17ded3c815db66b20fa184665246$export$default.prototype.drawImage=function(t,e=0,a=0,i=null,r=null,n=null,s=null,f=null,o=null){if(null===i)this.context.drawImage(t,int(e),int(a));else if(null===n)this.context.drawImage(t,int(e),int(a),int(i),int(r));else{let d=int(i),l=int(r);if(!d||!l)return this;let c=int(f),u=int(o);if(!c||!u)return this;this.context.drawImage(t,int(e),int(a),d,l,int(n),int(s),c,u)}return this},$e93d17ded3c815db66b20fa184665246$export$default.prototype.clear=function(t=null){return null!=this.gl?(this.gl.clear(this.gl.DEPTH_BUFFER_BIT|this.gl.COLOR_BUFFER_BIT),this.gl_active_texture=null,this):(t?this.globalCompositeOperation("source-over").globalAlpha(1).fillStyle(!0!==t?t:this.backgroundColor).fillRect(0,0,this._width,this._height):(this.elem.width=this.width,this.applyConfig()),this.updateTransform(),this)},$e93d17ded3c815db66b20fa184665246$export$default.prototype.reset=function(t=!1){return this.fillStyle("#000000").strokeStyle("#000000").lineCap("butt").lineJoin("miter").lineWidth("1").miterLimit("10").shadowColor("#000000").shadowOffsetX("0").shadowOffsetY("0").shadowBlur("0").globalAlpha("1.0").globalCompositeOperation("source-over"),t&&this.beginPath().closePath(),this},$e93d17ded3c815db66b20fa184665246$export$default.prototype.pushMatrix=function(){return this.matrixStack.push(this.matr),this.matr=this.matr.clone(),this},$e93d17ded3c815db66b20fa184665246$export$default.prototype.popMatrix=function(){return this.matr.free(),this.matr=this.matrixStack.pop(),this.updateTransform()},$e93d17ded3c815db66b20fa184665246$export$default.prototype.pushAlpha=function(){return this.alphaStack.push(this.globalAlpha()),this},$e93d17ded3c815db66b20fa184665246$export$default.prototype.popAlpha=function(){return this.globalAlpha(this.alphaStack.pop()),this},$e93d17ded3c815db66b20fa184665246$export$default.prototype.loadIdentity=function(){return this.matr.identity(),this.updateTransform()},$e93d17ded3c815db66b20fa184665246$export$default.prototype.loadMatrix=function(t){return this.matr.set(t),this.updateTransform()},$e93d17ded3c815db66b20fa184665246$export$default.prototype.getMatrix=function(){return this.matr.clone()},$e93d17ded3c815db66b20fa184665246$export$default.prototype.appendMatrix=function(t){return this.matr.append(t),this.updateTransform()},$e93d17ded3c815db66b20fa184665246$export$default.prototype.scale=function(t,e,a){return a?(this.context.scale(t,e),this):(this.matr.scale(t,e),this.updateTransform())},$e93d17ded3c815db66b20fa184665246$export$default.prototype.rotate=function(t,e){return e?(this.context.rotate(t),this):(this.matr.rotate(t),this.updateTransform())},$e93d17ded3c815db66b20fa184665246$export$default.prototype.translate=function(t,e,a){return a?(this.context.translate(t,e),this):(this.matr.translate(t,e),this.updateTransform())},$e93d17ded3c815db66b20fa184665246$export$default.prototype.ellipse=function(t,e,a,i){var r=a/2*.5522848,n=i/2*.5522848,s=t+a-1,f=e+i-1,o=t+a/2,d=e+i/2;return this.beginPath().moveTo(t,d),this.bezierCurveTo(t,d-n,o-r,e,o,e),this.bezierCurveTo(o+r,e,s,d-n,s,d),this.bezierCurveTo(s,d+n,o+r,f,o,f),this.bezierCurveTo(o-r,f,t,d+n,t,d),this.closePath(),this},$e93d17ded3c815db66b20fa184665246$export$default.prototype.circle=function(t,e,a,i){return this.beginPath(),this.arc(t,e,a,0,2*Math.PI),this.closePath(),i&&this.stroke(i),this},$e93d17ded3c815db66b20fa184665246$export$default.prototype.line=function(t,e,a,i,r){return this.beginPath(),this.moveTo(t,e),this.lineTo(a,i),this.closePath(),r&&this.stroke(r),this},$e93d17ded3c815db66b20fa184665246$export$default.prototype.enablePointerEvents=function(){if(this.pointerHandler)return this;this.pointerScale={sx:1,sy:1},this.pointerOffset={x:0,y:0};var t=this,e={action:"",buttons:0,lbuttons:0,x:0,y:0,containedBy:function(t,e,a,i){return this.x>=t&&this.x<=t+a-1&&this.y>=e&&this.y<=e+i-1}};return this.pointerHandlers=[],this.pointerHandler=function(a,i){var r=this.elem.getBoundingClientRect();e.action=a,e.buttons=i.buttons,e.x=e.rx=int(i.clientX-r.left),e.y=e.ry=int(i.clientY-r.top),e.x=(e.x-t.pointerOffset.x-0*t.pointerScale.sx)/t.pointerScale.sx,e.y=(e.y-t.pointerOffset.y-0*t.pointerScale.sy)/t.pointerScale.sy,e.dragging=!1,e.buttons&&!e.lbuttons&&(e.sx=e.x,e.sy=e.y,e.ldx=e.ldy=0),e.buttons&&e.lbuttons&&(e.dragging=!0,e.dx=e.x-e.sx,e.dy=e.y-e.sy,e.ddx=e.dx-e.ldx,e.ddy=e.dy-e.ldy,e.ldx=e.dx,e.ldy=e.dy),e.lbuttons=e.buttons;for(var n=0;n<this.pointerHandlers.length&&!1!==this.pointerHandlers[n][1](e,this.pointerHandlers[n][2]);n++);},this.elem.onmousedown=function(e){t.pointerHandler("DOWN",e)},this.elem.onmouseup=function(e){t.pointerHandler("UP",e)},this.elem.onmousemove=function(e){t.pointerHandler("MOVE",e)},this},$e93d17ded3c815db66b20fa184665246$export$default.prototype.setPointerScale=function(t,e){return this.pointerScale={sx:t,sy:e},this},$e93d17ded3c815db66b20fa184665246$export$default.prototype.setPointerOffset=function(t,e){return this.pointerOffset={x:t,y:e},this},$e93d17ded3c815db66b20fa184665246$export$default.prototype.addPointerHandler=function(t,e){return this.enablePointerEvents(),this.pointerHandlers.push([this.pointerHandlers.length+"_"+int(1e6*Math.random()),t,e]),this.pointerHandlers[this.pointerHandlers.length-1][0]},$e93d17ded3c815db66b20fa184665246$export$default.prototype.removePointerHandler=function(t){if(this.pointerHandlers)for(var e=0;e<this.pointerHandlers.length;e++)if(this.pointerHandlers[e][0]==t){this.pointerHandlers.splice(e,1);break}},$e93d17ded3c815db66b20fa184665246$export$default.prototype.drawImageResource=function(t,e=0,a=0,i=null,r=null){return null==i?this.drawImage(t.data,0,0,t.data.width,t.data.height,e,a,t.width,t.height):this.drawImage(t.data,0,0,t.data.width,t.data.height,e,a,i,r)},$e93d17ded3c815db66b20fa184665246$export$default.renderImage=function(t,e,a,i){let r=new $e93d17ded3c815db66b20fa184665246$export$default({width:t,height:e});a(r);let n=new Image;n.onload=()=>{$0d1da0ba321c96eb37e350fa4ffa1902$export$default.displayBuffer.prepareImage(n),i(n)},n.src=r.toDataUrl(),r.dispose()};const $0d1da0ba321c96eb37e350fa4ffa1902$export$default={flags:{renderingEnabled:!1,renderingPaused:!1},EVT_KEY_DOWN:1,EVT_KEY_UP:2,EVT_POINTER_DOWN:16,EVT_POINTER_UP:17,EVT_POINTER_MOVE:18,EVT_POINTER_DRAG_START:19,EVT_POINTER_DRAG_MOVE:20,EVT_POINTER_DRAG_STOP:21,DEFAULT:"default",LANDSCAPE:"landscape",PORTRAIT:"portrait",AUTOMATIC:"automatic",defaultOptions:{background:"#000",gl:!1,overdraw:!1,canvas:null,canvas2:null,canvas3:null,fps:144,minFps:15,vsync:!0,context:null,antialias:!0,screenWidth:null,screenHeight:null,orientation:0,extraScaleFactor:1,fullscreen:!1},screenWidth:0,screenHeight:0,orientation:0,offsX:0,offsY:0,devicePixelRatio:1,backingStoreRatio:1,canvasPixelRatio:1,canvasScaleFactor:1,scaleFactor:1,initialMatrix:null,displayBuffer:null,displayBuffer2:null,displayBuffer3:null,tempDisplayBuffer:null,keyState:{time:0,shift:!1,ctrl:!1,alt:!1,keyCode:0},pointerState:{},updateQueue:null,drawQueue:null,timeScale:1,frameInterval:0,fixedFrameInterval:0,maxFrameInterval:0,frameDelta:0,frameTime:0,frameNumber:0,perf:{startTime:0,lastTime:0,numFrames:0,numSamples:0,updateTimeTotal:0,drawTimeTotal:0,extraTimeTotal:0,fps:0,averageFps:0,averageUpdateTime:0,averageDrawTime:0,averageExtraTime:0},init:function(t){let e={},a=this;Object.assign(e,this.defaultOptions),t&&Object.assign(e,t),this.options=e,e.screenWidth&&e.screenHeight&&e.orientation==$0d1da0ba321c96eb37e350fa4ffa1902$export$default.DEFAULT&&(e.orientation=e.screenWidth>e.screenHeight?$0d1da0ba321c96eb37e350fa4ffa1902$export$default.LANDSCAPE:$0d1da0ba321c96eb37e350fa4ffa1902$export$default.PORTRAIT),this.orientation=e.orientation,this.updateQueue=$31e77c88cc6920b604cc8697a03a7b4c$export$default.calloc(),this.drawQueue=$31e77c88cc6920b604cc8697a03a7b4c$export$default.calloc(),this.frameInterval=1e3/e.fps,this.maxFrameInterval=1e3/e.minFps,$parcel$global.onresize=function(){a.onWindowResized()},this.frameTimer=new $4f606ba1a8ba03c9bc8fddfdc76bf0fb$export$default(e.vsync,this.frameInterval,(t=>this.onFrame(t))),this.displayBuffer=new $e93d17ded3c815db66b20fa184665246$export$default({gl:e.gl,elem:e.canvas,absolute:!0,hidden:!1,antialias:e.antialias,background:e.background}),this.displayBuffer2=new $e93d17ded3c815db66b20fa184665246$export$default({gl:!1,elem:e.canvas2,absolute:!0,hidden:!1,antialias:e.antialias,background:"none"}),this.displayBuffer2.elem.style.pointerEvents="none",this.displayBuffer3=new $e93d17ded3c815db66b20fa184665246$export$default({gl:!1,elem:e.canvas3,absolute:!0,hidden:!1,antialias:e.antialias,background:"none"}),this.displayBuffer3.elem.style.pointerEvents="none",this.tempDisplayBuffer=new $e93d17ded3c815db66b20fa184665246$export$default({hidden:!0,antialias:e.antialias}).resize(320,240);let i=this.displayBuffer.elem;this.devicePixelRatio=$parcel$global.devicePixelRatio||1,this.backingStoreRatio=1==e.gl?1:this.displayBuffer.context.webkitBackingStorePixelRatio||this.displayBuffer.context.mozBackingStorePixelRatio||this.displayBuffer.context.msBackingStorePixelRatio||this.displayBuffer.context.oBackingStorePixelRatio||this.displayBuffer.context.backingStorePixelRatio||1,this.canvasPixelRatio=this.devicePixelRatio/this.backingStoreRatio,$0d1da0ba321c96eb37e350fa4ffa1902$export$default.onWindowResized(!0),$parcel$global.onkeydown=function(t){if(t.target===$parcel$global.document.body){if(a.keyState[t.keyCode])return!1;switch(a.keyState[t.keyCode]=!0,a.keyState.keyCode=t.keyCode,a.keyState.startTime=hrnow(),t.keyCode){case 16:a.keyState.shift=!0;break;case 17:a.keyState.ctrl=!0;break;case 18:a.keyState.alt=!0}return a.keyState.ctrl&&t.keyCode==$61aea493ae1cab8fd79b97073b980cf5$export$default.TAB?(a.keyState[t.keyCode]=!1,!0):!1!==a.onKeyboardEvent(a.EVT_KEY_DOWN,t.keyCode,a.keyState)&&void 0}},$parcel$global.onkeyup=function(t){if(t.target===$parcel$global.document.body){if(!a.keyState[t.keyCode])return!1;switch(a.keyState[t.keyCode]=!1,a.keyState.endTime=hrnow(),a.keyState.keyCode=t.keyCode,t.keyCode){case 16:a.keyState.shift=!1;break;case 17:a.keyState.ctrl=!1;break;case 18:a.keyState.alt=!1}return!1!==a.onKeyboardEvent(a.EVT_KEY_UP,t.keyCode,a.keyState)&&void 0}};const r=function(t,e){return $0d1da0ba321c96eb37e350fa4ffa1902$export$default.reverseRender?int($0d1da0ba321c96eb37e350fa4ffa1902$export$default.screenWidth-1-(e-$0d1da0ba321c96eb37e350fa4ffa1902$export$default.offsY)/$0d1da0ba321c96eb37e350fa4ffa1902$export$default.canvasScaleFactor):int((t-$0d1da0ba321c96eb37e350fa4ffa1902$export$default.offsX)/$0d1da0ba321c96eb37e350fa4ffa1902$export$default.canvasScaleFactor)},n=function(t,e){return $0d1da0ba321c96eb37e350fa4ffa1902$export$default.reverseRender?int((t-$0d1da0ba321c96eb37e350fa4ffa1902$export$default.offsX)/$0d1da0ba321c96eb37e350fa4ffa1902$export$default.canvasScaleFactor):int((e-$0d1da0ba321c96eb37e350fa4ffa1902$export$default.offsY)/$0d1da0ba321c96eb37e350fa4ffa1902$export$default.canvasScaleFactor)};"ontouchstart"in $parcel$global?(i.ontouchstart=function(t){t.preventDefault();let e=t.changedTouches;for(let t=0;t<e.length;t++){$0d1da0ba321c96eb37e350fa4ffa1902$export$default.pointerState[e[t].identifier]||($0d1da0ba321c96eb37e350fa4ffa1902$export$default.pointerState[e[t].identifier]={id:e[t].identifier,isActive:!1,isDragging:!1,sx:0,sy:0,x:0,y:0,dx:0,dy:0,button:0});let a=$0d1da0ba321c96eb37e350fa4ffa1902$export$default.pointerState[e[t].identifier];a.isActive=!0,a.isDragging=!1,a.button=1,a.startTime=hrnow(),a.x=a.sx=r(e[t].clientX,e[t].clientY),a.y=a.sy=n(e[t].clientX,e[t].clientY),$0d1da0ba321c96eb37e350fa4ffa1902$export$default.onPointerEvent($0d1da0ba321c96eb37e350fa4ffa1902$export$default.EVT_POINTER_DOWN,a,$0d1da0ba321c96eb37e350fa4ffa1902$export$default.pointerState)}return!1},i.ontouchend=function(t){t.preventDefault();let e=t.changedTouches;for(let t=0;t<e.length;t++){if(!$0d1da0ba321c96eb37e350fa4ffa1902$export$default.pointerState[e[t].identifier])continue;let a=$0d1da0ba321c96eb37e350fa4ffa1902$export$default.pointerState[e[t].identifier];a.endTime=hrnow(),a.deltaTime=a.endTime-a.startTime,a.x=r(e[t].clientX,e[t].clientY),a.y=n(e[t].clientX,e[t].clientY),a.isDragging&&$0d1da0ba321c96eb37e350fa4ffa1902$export$default.onPointerEvent($0d1da0ba321c96eb37e350fa4ffa1902$export$default.EVT_POINTER_DRAG_STOP,a,$0d1da0ba321c96eb37e350fa4ffa1902$export$default.pointerState),$0d1da0ba321c96eb37e350fa4ffa1902$export$default.onPointerEvent($0d1da0ba321c96eb37e350fa4ffa1902$export$default.EVT_POINTER_UP,a,$0d1da0ba321c96eb37e350fa4ffa1902$export$default.pointerState),a.isActive=!1,a.isDragging=!1,a.button=0}return!1},i.ontouchcancel=function(t){t.preventDefault();let e=t.changedTouches;for(let t=0;t<e.length;t++){if(!$0d1da0ba321c96eb37e350fa4ffa1902$export$default.pointerState[e[t].identifier])continue;let a=$0d1da0ba321c96eb37e350fa4ffa1902$export$default.pointerState[e[t].identifier];a.x=r(e[t].clientX,e[t].clientY),a.y=n(e[t].clientX,e[t].clientY),$0d1da0ba321c96eb37e350fa4ffa1902$export$default.onPointerEvent(a.isDragging?$0d1da0ba321c96eb37e350fa4ffa1902$export$default.EVT_POINTER_DRAG_STOP:$0d1da0ba321c96eb37e350fa4ffa1902$export$default.EVT_POINTER_UP,a,$0d1da0ba321c96eb37e350fa4ffa1902$export$default.pointerState),a.isActive=!1,a.isDragging=!1,a.button=0}return!1},i.ontouchmove=function(t){t.preventDefault();let e=t.changedTouches;for(let t=0;t<e.length;t++){if(!$0d1da0ba321c96eb37e350fa4ffa1902$export$default.pointerState[e[t].identifier])continue;let a=$0d1da0ba321c96eb37e350fa4ffa1902$export$default.pointerState[e[t].identifier];a.isActive&&!a.isDragging&&($0d1da0ba321c96eb37e350fa4ffa1902$export$default.onPointerEvent($0d1da0ba321c96eb37e350fa4ffa1902$export$default.EVT_POINTER_DRAG_START,a,$0d1da0ba321c96eb37e350fa4ffa1902$export$default.pointerState),a.isDragging=!0),a.x=r(e[t].clientX,e[t].clientY),a.y=n(e[t].clientX,e[t].clientY),a.dx=a.x-a.sx,a.dy=a.y-a.sy,$0d1da0ba321c96eb37e350fa4ffa1902$export$default.onPointerEvent(a.isDragging?$0d1da0ba321c96eb37e350fa4ffa1902$export$default.EVT_POINTER_DRAG_MOVE:$0d1da0ba321c96eb37e350fa4ffa1902$export$default.EVT_POINTER_MOVE,a,$0d1da0ba321c96eb37e350fa4ffa1902$export$default.pointerState)}return!1}):(i.onmousedown=function(t){t.preventDefault(),$0d1da0ba321c96eb37e350fa4ffa1902$export$default.pointerState[0]||($0d1da0ba321c96eb37e350fa4ffa1902$export$default.pointerState[0]={id:0,isActive:!1,isDragging:!1,button:0,sx:0,sy:0,x:0,y:0,dx:0,dy:0});let e=$0d1da0ba321c96eb37e350fa4ffa1902$export$default.pointerState[0];return e.isActive=!0,e.isDragging=!1,e.button=t.which,e.x=e.sx=r(t.clientX,t.clientY),e.y=e.sy=n(t.clientX,t.clientY),$0d1da0ba321c96eb37e350fa4ffa1902$export$default.onPointerEvent($0d1da0ba321c96eb37e350fa4ffa1902$export$default.EVT_POINTER_DOWN,e,$0d1da0ba321c96eb37e350fa4ffa1902$export$default.pointerState),!1},i.onmouseup=function(t){if(t.preventDefault(),!$0d1da0ba321c96eb37e350fa4ffa1902$export$default.pointerState[0])return!1;let e=$0d1da0ba321c96eb37e350fa4ffa1902$export$default.pointerState[0];e.x=r(t.clientX,t.clientY),e.y=n(t.clientX,t.clientY),e.isDragging&&$0d1da0ba321c96eb37e350fa4ffa1902$export$default.onPointerEvent($0d1da0ba321c96eb37e350fa4ffa1902$export$default.EVT_POINTER_DRAG_STOP,e,$0d1da0ba321c96eb37e350fa4ffa1902$export$default.pointerState),$0d1da0ba321c96eb37e350fa4ffa1902$export$default.onPointerEvent($0d1da0ba321c96eb37e350fa4ffa1902$export$default.EVT_POINTER_UP,e,$0d1da0ba321c96eb37e350fa4ffa1902$export$default.pointerState),e.isActive=!1,e.isDragging=!1,e.button=0},i.onmousemove=function(t){if(t.preventDefault(),!$0d1da0ba321c96eb37e350fa4ffa1902$export$default.pointerState[0])return!1;let e=$0d1da0ba321c96eb37e350fa4ffa1902$export$default.pointerState[0];return e.isActive&&!e.isDragging&&($0d1da0ba321c96eb37e350fa4ffa1902$export$default.onPointerEvent($0d1da0ba321c96eb37e350fa4ffa1902$export$default.EVT_POINTER_DRAG_START,e,$0d1da0ba321c96eb37e350fa4ffa1902$export$default.pointerState),e.isDragging=!0),e.x=r(t.clientX,t.clientY),e.y=n(t.clientX,t.clientY),e.dx=e.x-e.sx,e.dy=e.y-e.sy,$0d1da0ba321c96eb37e350fa4ffa1902$export$default.onPointerEvent(e.isDragging?$0d1da0ba321c96eb37e350fa4ffa1902$export$default.EVT_POINTER_DRAG_MOVE:$0d1da0ba321c96eb37e350fa4ffa1902$export$default.EVT_POINTER_MOVE,e,$0d1da0ba321c96eb37e350fa4ffa1902$export$default.pointerState),!1})},time:function(){return this.frameTime},start:function(){this.onWindowResized(),this.flags.renderingPaused=!1,this.frameTimer.start()},stop:function(){this.flags.renderingPaused=!0,this.frameTimer.stop()},pause:function(){this.flags.renderingPaused=!0},resume:function(){this.flags.renderingPaused=!1,this.resetPerf()},onFrame:function(t){let e,a=hrnow();t>this.maxFrameInterval&&(t=this.maxFrameInterval),0!==this.fixedFrameInterval&&(t=this.fixedFrameInterval),this.flags.renderingEnabled&&!this.flags.renderingPaused?(t*=this.timeScale,this.frameDelta=t/1e3,this.frameTime+=this.frameDelta,this.frameNumber++,e=hrnow(),this.draw(this.displayBuffer),this.perf.drawTimeTotal+=hrnow()-e,e=hrnow(),this.update(this.frameDelta),this.perf.updateTimeTotal+=hrnow()-e,this.perf.lastTime=a,this.perf.numFrames++,(t=this.perf.lastTime-this.perf.startTime)>1e3&&(this.perf.fps=int(1e3*this.perf.numFrames/t),this.perf.averageFps=int((this.perf.averageFps*this.perf.numSamples+this.perf.fps)/(this.perf.numSamples+1)),this.perf.averageUpdateTime=int((this.perf.averageUpdateTime*this.perf.numSamples+1e3*this.perf.updateTimeTotal/this.perf.numFrames)/(this.perf.numSamples+1)),this.perf.averageDrawTime=int((this.perf.averageDrawTime*this.perf.numSamples+1e3*this.perf.drawTimeTotal/this.perf.numFrames)/(this.perf.numSamples+1)),this.perf.averageExtraTime=int((this.perf.averageExtraTime*this.perf.numSamples+1e3*this.perf.extraTimeTotal/this.perf.numFrames)/(this.perf.numSamples+1)),this.perf.numSamples++,this.perf.startTime=a,this.perf.lastTime=a,this.perf.numFrames=0,this.perf.updateTimeTotal=0,this.perf.drawTimeTotal=0,this.perf.extraTimeTotal=0)):this.draw(this.displayBuffer)},onWindowResized:function(t=!1){if("document"in $parcel$global)this.options.fullscreen?(this._screenWidth=int($parcel$global.screen.width),this._screenHeight=int($parcel$global.screen.height)):(this._screenWidth=$parcel$global.innerWidth,this._screenHeight=$parcel$global.innerHeight);else if(this._screenWidth=this.options.screenWidth,this._screenHeight=this.options.screenHeight,null==this.options.screenWidth&&null==this.options.screenHeight)throw new Error("At least one screen dimension must be specified in headless mode.");this._screenWidth<this._screenHeight&&this.orientation==$0d1da0ba321c96eb37e350fa4ffa1902$export$default.LANDSCAPE||this._screenWidth>this._screenHeight&&this.orientation==$0d1da0ba321c96eb37e350fa4ffa1902$export$default.PORTRAIT?(this.screenWidth=this._screenHeight,this.screenHeight=this._screenWidth,this.reverseRender=!0):(this.screenWidth=this._screenWidth,this.screenHeight=this._screenHeight,this.reverseRender=!1);let e=this.options.screenWidth,a=this.options.screenHeight;null!=e&&null!=a||(null==e?e=int(this.screenWidth*(this.options.screenHeight/this.screenHeight)):null==a&&(a=int(this.screenHeight*(this.options.screenWidth/this.screenWidth))));let i=e,r=a;this.orientation==$0d1da0ba321c96eb37e350fa4ffa1902$export$default.AUTOMATIC&&i&&r&&(i>r&&this.screenWidth<this.screenHeight||i<r&&this.screenWidth>this.screenHeight)&&(i=r,r=e),this.canvasScaleFactor=1,i&&r?this.canvasScaleFactor=Math.min(this.screenWidth/i,this.screenHeight/r):i?this.canvasScaleFactor=this.screenWidth/i:r&&(this.canvasScaleFactor=this.screenHeight/r);let n=this.screenWidth,s=this.screenHeight;if(i&&(this.screenWidth=i),r&&(this.screenHeight=r),this.offsX=int(.5*(n-this.screenWidth*this.canvasScaleFactor)),this.offsY=int(.5*(s-this.screenHeight*this.canvasScaleFactor)),this.reverseRender){let t=this.offsX;this.offsX=this.offsY,this.offsY=t}this.scaleFactor=this.canvasScaleFactor*this.canvasPixelRatio,this.scaleFactor=int(.7+this.scaleFactor),this.flags.renderingEnabled=!1,"document"in $parcel$global&&($parcel$global.document.body.style.backgroundColor=this.displayBuffer.backgroundColor),this.reverseRender?(this.displayBuffer.resize(this.screenHeight*this.scaleFactor,this.screenWidth*this.scaleFactor),this.displayBuffer.elem.style.width=this.screenHeight*this.canvasScaleFactor+"px",this.displayBuffer.elem.style.height=this.screenWidth*this.canvasScaleFactor+"px",this.displayBuffer2.resize(this.screenHeight*this.scaleFactor,this.screenWidth*this.scaleFactor),this.displayBuffer2.elem.style.width=this.screenHeight*this.canvasScaleFactor+"px",this.displayBuffer2.elem.style.height=this.screenWidth*this.canvasScaleFactor+"px",this.displayBuffer3.resize(s,n),this.displayBuffer3.elem.style.width=s+"px",this.displayBuffer3.elem.style.height=n+"px"):(this.displayBuffer.resize(this.screenWidth*this.scaleFactor,this.screenHeight*this.scaleFactor),this.displayBuffer.elem.style.width=this.screenWidth*this.canvasScaleFactor+"px",this.displayBuffer.elem.style.height=this.screenHeight*this.canvasScaleFactor+"px",this.displayBuffer2.resize(this.screenWidth*this.scaleFactor,this.screenHeight*this.scaleFactor),this.displayBuffer2.elem.style.width=this.screenWidth*this.canvasScaleFactor+"px",this.displayBuffer2.elem.style.height=this.screenHeight*this.canvasScaleFactor+"px",this.displayBuffer3.resize(n,s),this.displayBuffer3.elem.style.width=n+"px",this.displayBuffer3.elem.style.height=s+"px"),this.displayBuffer.elem.style.marginLeft=this.offsX+"px",this.displayBuffer.elem.style.marginTop=this.offsY+"px",this.displayBuffer2.elem.style.marginLeft=this.offsX+"px",this.displayBuffer2.elem.style.marginTop=this.offsY+"px",this.displayBuffer.loadIdentity(),this.displayBuffer2.loadIdentity(),this.displayBuffer3.loadIdentity(),1!=this.scaleFactor&&(this.displayBuffer.globalScale(this.scaleFactor),this.displayBuffer2.globalScale(this.scaleFactor)),this.reverseRender?(this.displayBuffer.rotate(Math.PI/2),this.displayBuffer.translate(-this.screenWidth,0),this.displayBuffer.flipped(!0),this.displayBuffer2.rotate(Math.PI/2),this.displayBuffer2.translate(-this.screenWidth,0),this.displayBuffer2.flipped(!0),this.displayBuffer3.rotate(Math.PI/2),this.displayBuffer3.translate(-n,0),this.displayBuffer3.flipped(!0)):(this.displayBuffer.flipped(!1),this.displayBuffer2.flipped(!1),this.displayBuffer3.flipped(!1)),this.scaleFactor*=this.options.extraScaleFactor,this.integerScaleFactor=int(this.scaleFactor+.9),this.resetPerf(),this.initialMatrix&&this.initialMatrix.free(),this.initialMatrix=this.displayBuffer.getMatrix(),1!=t&&(this.flags.renderingEnabled=!0,this.onCanvasResized(this.screenWidth,this.screenHeight))},onCanvasResized:function(t,e){},resetPerf:function(){this.perf.startTime=hrnow(),this.perf.lastTime=hrnow(),this.perf.numFrames=0,this.perf.updateTimeTotal=0,this.perf.drawTimeTotal=0,this.perf.extraTimeTotal=0,this.perf.numSamples=0,this.perf.fps=0,this.perf.averageFps=0,this.perf.averageUpdateTime=0,this.perf.averageDrawTime=0,this.perf.averageExtraTime=0},updateQueueAdd:function(t){return this.updateQueue.push(t),this.updateQueue.bottom},updateQueueRemove:function(t){this.updateQueue.remove(t instanceof $38decb76335a4f247b53445a3654d5f4$export$default?t:this.updateQueue.sgetNode(t))},drawQueueAdd:function(t){return this.drawQueue.push(t),this.drawQueue.bottom},drawQueueRemove:function(t){this.drawQueue.remove(t instanceof $38decb76335a4f247b53445a3654d5f4$export$default?t:this.drawQueue.sgetNode(t))},queueAdd:function(t){return this.updateQueue.push(t),this.drawQueue.push(t),t},queueRemove:function(t){this.updateQueue.remove(this.updateQueue.sgetNode(t)),this.drawQueue.remove(this.drawQueue.sgetNode(t))},update:function(t){try{let e;for(let a=this.updateQueue.top;a;a=e)e=a.next,a.value.update(t)}catch(t){throw $0d1da0ba321c96eb37e350fa4ffa1902$export$default.stop(),t}},draw:function(t){this.options.overdraw||t.clear();try{let e;for(let a=this.drawQueue.top;a;a=e)e=a.next,a.value.draw(t)}catch(t){throw $0d1da0ba321c96eb37e350fa4ffa1902$export$default.stop(),t}},interpolate:function(t,e,a,i,r){let n={},s={},f=0;for(let e in t)n[e]=0,s[e]=t[e],f++;let o={update:function(d){for(let r in n){if(n[r]==a[r])continue;n[r]+=d,n[r]>=a[r]&&(n[r]=a[r],f--);let o=i[r](n[r]/a[r]);s[r]=(1-o)*t[r]+o*e[r]}r(s,0==f),0==f&&$0d1da0ba321c96eb37e350fa4ffa1902$export$default.updateQueueRemove(o)}};$0d1da0ba321c96eb37e350fa4ffa1902$export$default.updateQueueAdd(o),o.update(0)},onKeyboardEvent:function(t,e,a){},onPointerEvent:function(t,e,a){}},$b9107488ce5913a1d94bf85f6a2b2916$export$default=function(t,e){this.data=[],this.accumSize=t,this.expectedValue=e,this.stdSum=0,this.stdCount=0};$b9107488ce5913a1d94bf85f6a2b2916$export$default.SAMPLES=1,$b9107488ce5913a1d94bf85f6a2b2916$export$default.MIN=2,$b9107488ce5913a1d94bf85f6a2b2916$export$default.MAX=4,$b9107488ce5913a1d94bf85f6a2b2916$export$default.AVG=8,$b9107488ce5913a1d94bf85f6a2b2916$export$default.EXPECTED=16,$b9107488ce5913a1d94bf85f6a2b2916$export$default.STDDEV=32,$b9107488ce5913a1d94bf85f6a2b2916$export$default.AVG_STDDEV=64,$b9107488ce5913a1d94bf85f6a2b2916$export$default.ALL=255,$b9107488ce5913a1d94bf85f6a2b2916$export$default.prototype.begin=function(){this.startTime=performance.now()},$b9107488ce5913a1d94bf85f6a2b2916$export$default.prototype.end=function(){this.feed(performance.now()-this.startTime)},$b9107488ce5913a1d94bf85f6a2b2916$export$default.prototype.feed=function(t){this.data.push(t),this.data.length==this.accumSize&&(this.report(),this.data=[])},$b9107488ce5913a1d94bf85f6a2b2916$export$default.prototype.update=function(){let t=null,e=null,a=0,i=0;for(let i=0;i<this.data.length;i++)t=null===t?this.data[i]:Math.min(t,this.data[i]),e=null===e?this.data[i]:Math.max(e,this.data[i]),a+=this.data[i];a/=this.data.length;let r=void 0!==this.expectedValue?this.expectedValue:a;for(let t=0;t<this.data.length;t++)i+=Math.pow(this.data[t]-r,2);return i=Math.sqrt(i/this.data.length),this.stdSum+=i,this.stdCount++,this.min=t,this.max=e,this.avg=a,this.std=i,this},$b9107488ce5913a1d94bf85f6a2b2916$export$default.prototype.report=function(t=255){let e="";return t&$b9107488ce5913a1d94bf85f6a2b2916$export$default.SAMPLES&&(e+="n: "+this.stdCount),t&$b9107488ce5913a1d94bf85f6a2b2916$export$default.MIN&&(e+=(""!=e?", ":"")+"min: "+this.min),t&$b9107488ce5913a1d94bf85f6a2b2916$export$default.MAX&&(e+=(""!=e?", ":"")+"max: "+this.max),t&$b9107488ce5913a1d94bf85f6a2b2916$export$default.AVG&&(e+=(""!=e?", ":"")+"avg: "+this.avg.toFixed(2)),t&$b9107488ce5913a1d94bf85f6a2b2916$export$default.EXPECTED&&(e+=(""!=e?", ":"")+(void 0!==this.expectedValue?"e: "+this.expectedValue:"")),t&$b9107488ce5913a1d94bf85f6a2b2916$export$default.STDDEV&&(e+=(""!=e?", ":"")+"stddev: "+this.std.toFixed(2)),t&$b9107488ce5913a1d94bf85f6a2b2916$export$default.AVG_STDDEV&&(e+=(""!=e?", ":"")+"avg_stddev: "+(this.stdSum/this.stdCount).toFixed(2)),e};const $db4dfe743083e943dfb25a6ea298ffb6$export$default={activated:!1,paused:!1,data:$31e77c88cc6920b604cc8697a03a7b4c$export$default.calloc(),count:0,maxsize:30,debugEcho:!1,color:"#fff",background:"#cf266a",vars:{},write:function(t){for(this.data.push(t),this.count++;this.data.length>this.maxsize;)this.data.shift();this.debugEcho&&console.debug(this.count+": "+t)},clear:function(){this.data.reset(),this.count=0},enable:function(t,e,a,i,r){if(this.activated)return;this.activated=!0,t||(t=0),e||(e=0),a||(a=9.5),!1===i&&(e-=16);let n=e;$0d1da0ba321c96eb37e350fa4ffa1902$export$default.drawQueueAdd({draw:function(){if($db4dfe743083e943dfb25a6ea298ffb6$export$default.paused)return;let s=hrnow();const f=$0d1da0ba321c96eb37e350fa4ffa1902$export$default.displayBuffer3;f.clear(),f.font("bold "+a+"pt Monospace"),f.textBaseline("top");let o="";e=n,!1!==i&&0!=$0d1da0ba321c96eb37e350fa4ffa1902$export$default.perf.fps&&(o="fps: "+$0d1da0ba321c96eb37e350fa4ffa1902$export$default.perf.fps+"/"+$0d1da0ba321c96eb37e350fa4ffa1902$export$default.perf.averageFps+", update: "+$0d1da0ba321c96eb37e350fa4ffa1902$export$default.perf.averageUpdateTime+", draw: "+$0d1da0ba321c96eb37e350fa4ffa1902$export$default.perf.averageDrawTime+", extra: "+$0d1da0ba321c96eb37e350fa4ffa1902$export$default.perf.averageExtraTime,$db4dfe743083e943dfb25a6ea298ffb6$export$default.background&&(f.fillStyle($db4dfe743083e943dfb25a6ea298ffb6$export$default.background),f.fillRect(t-3,e-1,f.measureText(o)+6,a+5)),f.fillStyle($db4dfe743083e943dfb25a6ea298ffb6$export$default.color),f.fillText(o,t,e)),o="";for(let t in $db4dfe743083e943dfb25a6ea298ffb6$export$default.vars)o+=t+": "+$db4dfe743083e943dfb25a6ea298ffb6$export$default.vars[t]+"  ";""!==o&&(e+=24,$db4dfe743083e943dfb25a6ea298ffb6$export$default.background&&(f.fillStyle($db4dfe743083e943dfb25a6ea298ffb6$export$default.background),f.fillRect(t-3,e-1,f.measureText(o)+6,a+5)),f.fillStyle($db4dfe743083e943dfb25a6ea298ffb6$export$default.color),f.fillText(o,t,e));let d=0;for(let i=$db4dfe743083e943dfb25a6ea298ffb6$export$default.data.top;i;i=i.next,d++)o=(!1!==r?"#"+($db4dfe743083e943dfb25a6ea298ffb6$export$default.count-$db4dfe743083e943dfb25a6ea298ffb6$export$default.data.length+d+1)+": ":"> ")+i.value,$db4dfe743083e943dfb25a6ea298ffb6$export$default.background&&(f.fillStyle($db4dfe743083e943dfb25a6ea298ffb6$export$default.background),f.fillRect(t-3,e-1+7+(a+5)*(d+1)-1,f.measureText(o)+6,a+5)),f.fillStyle($db4dfe743083e943dfb25a6ea298ffb6$export$default.color),f.fillText(o,t,e-1+7+(a+5)*(d+1));s=hrnow()-s,$0d1da0ba321c96eb37e350fa4ffa1902$export$default.perf.drawTimeTotal-=s,$0d1da0ba321c96eb37e350fa4ffa1902$export$default.perf.extraTimeTotal+=s}})},pause:function(){this.paused=!0},resume:function(){this.paused=!1}};var $849cbcf6aa1a6feafe4b4558128535c4$exports={};const $cd1d8345f0557778dc789d008e093429$export$default={};Object.assign($cd1d8345f0557778dc789d008e093429$export$default,{integerScaling:!0,pixelated:!1,init:function(t=null){t&&Object.assign(this,t)},load:function(t,e,a,i,r){if(!i){i=Object.keys(t);for(let e in i)"__loaded"in t[i[e]]||(t[i[e]].__clone=$9a13317101bee2e2b4637862b0c16235$export$Rin.clone(t[i[e]]));r=0}for(;r<i.length&&"__loaded"in t[i[r]];)r++;if(e&&e(r,i.length,r/i.length),r==i.length)return void(a&&a(t));let n=t[i[r]];switch(n.resName=i[r],n.type){case"image":n.data=new Image,n.data.onload=function(){var s=n.data.width/n.data.height;n.scale&&(n.width=int(n.data.width*n.scale),n.height=int(n.data.height*n.scale)),n.width||n.height?n.width&&!n.height?n.height=int(n.width/s):!n.width&&n.height&&(n.width=int(s*n.height)):(n.width=n.data.width,n.height=n.data.height),n.owidth=n.data.width,n.oheight=n.data.height,null!==n.pixelated&&n.hasOwnProperty("pixelated")||(n.pixelated=$cd1d8345f0557778dc789d008e093429$export$default.pixelated),(n.data.width!=n.width||n.data.height!=n.height||!0!==n.original&&1!=$0d1da0ba321c96eb37e350fa4ffa1902$export$default.scaleFactor)&&(!0===n.original?n.data=$cd1d8345f0557778dc789d008e093429$export$default.resizeImage(n,n.width,n.height,n.pixelated,!0):n.data=$cd1d8345f0557778dc789d008e093429$export$default.resizeImage(n,n.width*(n.pixelated?$0d1da0ba321c96eb37e350fa4ffa1902$export$default.integerScaleFactor:$0d1da0ba321c96eb37e350fa4ffa1902$export$default.scaleFactor),n.height*(n.pixelated?$0d1da0ba321c96eb37e350fa4ffa1902$export$default.integerScaleFactor:$0d1da0ba321c96eb37e350fa4ffa1902$export$default.scaleFactor),n.pixelated,!0)),n.rscale=n.data.width/n.width,$0d1da0ba321c96eb37e350fa4ffa1902$export$default.tempDisplayBuffer.drawImage(n.data,0,0),$0d1da0ba321c96eb37e350fa4ffa1902$export$default.displayBuffer.prepareImage(n.data),$cd1d8345f0557778dc789d008e093429$export$default.onLoaded(t,i[r]),$cd1d8345f0557778dc789d008e093429$export$default.load(t,e,a,i,r+1)},n.data.onerror=function(){console.error("Error: Unable to load: "+n.resName)},n.data.src=n.src+"?r="+Math.random();break;case"images":var s=(o=n.src).indexOf("#"),f=(d=o.lastIndexOf("#"))-s+1;if(-1==s)return void console.error("Unable to load: "+n.resName+"\nError: The 'src' attribute requires one or more '#' marks.");if(!n.count)return void console.error("Unable to load: "+n.resName+"\nError: The 'count' attribute was not found.");n._i=0,n.data=[],(l=function(){if(n._i==n.count)return $cd1d8345f0557778dc789d008e093429$export$default.onLoaded(t,i[r]),void $cd1d8345f0557778dc789d008e093429$export$default.load(t,e,a,i,r+1);var o={type:"image",width:n.width,height:n.height,scale:n.scale};o.src=n.src.substr(0,s)+(n._i++/Math.pow(10,f)).toFixed(f).substr(2)+n.src.substr(d+1),o.data=new Image,o.resName=n.resName+"#"+(n._i-1),o.data.onload=function(){var t=o.data.width/o.data.height;o.scale&&(o.width=int(o.data.width*o.scale),o.height=int(o.data.height*o.scale)),o.width||o.height?o.width&&!o.height?o.height=int(o.width/t):!o.width&&o.height&&(o.width=int(t*o.height)):(o.width=o.data.width,o.height=o.data.height),1==n._i&&(n.owidth=o.data.width,n.oheight=o.data.height),(o.data.width!=o.width||o.data.height!=o.height||!0!==o.original&&1!=$0d1da0ba321c96eb37e350fa4ffa1902$export$default.scaleFactor)&&(null!==n.pixelated&&n.hasOwnProperty("pixelated")||(n.pixelated=$cd1d8345f0557778dc789d008e093429$export$default.pixelated),!0===o.original?o.data=$cd1d8345f0557778dc789d008e093429$export$default.resizeImage(o,o.width,o.height,n.pixelated,!0):o.data=$cd1d8345f0557778dc789d008e093429$export$default.resizeImage(o,o.width*(n.pixelated?$0d1da0ba321c96eb37e350fa4ffa1902$export$default.integerScaleFactor:$0d1da0ba321c96eb37e350fa4ffa1902$export$default.scaleFactor),o.height*(n.pixelated?$0d1da0ba321c96eb37e350fa4ffa1902$export$default.integerScaleFactor:$0d1da0ba321c96eb37e350fa4ffa1902$export$default.scaleFactor),n.pixelated,!0)),o.rscale=o.data.width/o.width,1==n._i&&(n.width=o.width,n.height=o.height,n.rscale=o.rscale),$0d1da0ba321c96eb37e350fa4ffa1902$export$default.tempDisplayBuffer.drawImage(o.data,0,0),$0d1da0ba321c96eb37e350fa4ffa1902$export$default.displayBuffer.prepareImage(o.data),n.data.push(o),l()},o.data.onerror=function(){console.error("Error: Unable to load: "+o.resName)},o.data.src=o.src+"?r="+Math.random()})();break;case"audio":if(n.track||(n.track="sfx"),$parcel$global.plugins&&$parcel$global.plugins.NativeAudio&&"sfx"==n.track){n.engine=$849cbcf6aa1a6feafe4b4558128535c4$export$Sound.ENGINE_NATIVEAUDIO,n.data="snd_"+r,$parcel$global.plugins.NativeAudio.preloadSimple(n.data,n.src,(function(){$cd1d8345f0557778dc789d008e093429$export$default.onLoaded(t,i[r]),$cd1d8345f0557778dc789d008e093429$export$default.load(t,e,a,i,r+1)}),(function(t){console.error("Error: Unable to load (sfx): "+n.resName+"\n"+t)}));break}if($parcel$global.audioContext){n.engine=$849cbcf6aa1a6feafe4b4558128535c4$export$Sound.ENGINE_WEBAUDIO,fetchAudioBuffer(n.src+"?r="+Math.random()).then((s=>{n.data=s,$cd1d8345f0557778dc789d008e093429$export$default.onLoaded(t,i[r]),$cd1d8345f0557778dc789d008e093429$export$default.load(t,e,a,i,r+1)})).catch((t=>{console.error("Error: Unable to load: "+n.resName)}));break}n.data=new Audio,n.engine=$849cbcf6aa1a6feafe4b4558128535c4$export$Sound.ENGINE_HTML5,n.data.oncanplaythrough=function(){$cd1d8345f0557778dc789d008e093429$export$default.onLoaded(t,i[r]),$cd1d8345f0557778dc789d008e093429$export$default.load(t,e,a,i,r+1)},n.data.onerror=function(){console.error("Error: Unable to load: "+n.resName)},n.data.src=n.src+"?r="+Math.random();break;case"audios":var o,d,l;s=(o=n.src).indexOf("#"),f=(d=o.lastIndexOf("#"))-s+1;if(-1==s)return void console.error("Unable to load: "+n.resName+"\nError: The 'src' attribute requires one or more '#' marks.");if(!n.count)return void console.error("Unable to load: "+n.resName+"\nError: The 'count' attribute was not found.");n._i=0,n.data=[],(l=function(){if(n._i==n.count)return $cd1d8345f0557778dc789d008e093429$export$default.onLoaded(t,i[r]),void $cd1d8345f0557778dc789d008e093429$export$default.load(t,e,a,i,r+1);var o={type:"audio",track:n.track};return o.src=n.src.substr(0,s)+(n._i++/Math.pow(10,f)).toFixed(f).substr(2)+n.src.substr(d+1),o.resName=n.resName+"#"+(n._i-1),o.track||(o.track="sfx"),$parcel$global.plugins&&$parcel$global.plugins.NativeAudio&&"sfx"==o.track?(o.engine=$849cbcf6aa1a6feafe4b4558128535c4$export$Sound.ENGINE_NATIVEAUDIO,o.data="snd_"+r+"_"+n._i,void $parcel$global.plugins.NativeAudio.preloadSimple(o.data,o.src,(function(){n.data.push(o),l()}),(function(t){console.error("Error: Unable to load (sfx): "+o.resName+"\n"+t)}))):$parcel$global.audioContext?(o.engine=$849cbcf6aa1a6feafe4b4558128535c4$export$Sound.ENGINE_WEBAUDIO,void fetchAudioBuffer(o.src+"?r="+Math.random()).then((t=>{o.data=t,n.data.push(o),l()})).catch((t=>{console.error("Error: Unable to load: "+o.resName)}))):(o.data=new Audio,o.engine=$849cbcf6aa1a6feafe4b4558128535c4$export$Sound.ENGINE_HTML5,o.data.oncanplaythrough=function(){n.data.push(o),l()},o.data.onerror=function(){console.error("Error: Unable to load: "+o.resName)},void(o.data.src=o.src+"?r="+Math.random()))})();break;case"json":fetchd(n.src+"?r="+Math.random(),{responseType:"json"}).then((function(s){n.data=s,$cd1d8345f0557778dc789d008e093429$export$default.onLoaded(t,i[r]),$cd1d8345f0557778dc789d008e093429$export$default.load(t,e,a,i,r+1)})).catch((function(t){console.error("Error: Unable to load: "+n.resName+". Error: "+t)}));break;case"object":n.data={},$cd1d8345f0557778dc789d008e093429$export$default.onLoaded(t,i[r]),$cd1d8345f0557778dc789d008e093429$export$default.load(t,e,a,i,r+1)}},unload:function(t){throw new Error("IMPLEMENTED UNLOAD!")},onLoaded:function(t,e){var a=t[e];a.wrapper&&a.wrapper in $849cbcf6aa1a6feafe4b4558128535c4$exports&&(t[e]=new $849cbcf6aa1a6feafe4b4558128535c4$exports[a.wrapper](a),t[e].__loaded=!0)},resizeImage:function(t,e,a,i,r){var n=t.data.width,s=t.data.height;if(e=int(e),a=int(a),n==e&&s==a)return t.data;if(!this.integerScaling&&i&&(i=null),i){if(int(e/n)>0){var f,o=int(e/n+.9),d=(e=o*n)/n,l=(a=o*s)/s;b=new $e93d17ded3c815db66b20fa184665246$export$default({hidden:!0,antialias:!1}).resize(e,a);(f=new $e93d17ded3c815db66b20fa184665246$export$default({hidden:!0,antialias:!1}).resize(n,s)).drawImage(t.data,0,0);for(var c=0;c<s;c++)for(var u=f.getImageData(0,c,n,1).data,h=0,$=0;$<n&&h<u.length;$++,h+=4)b.fillStyle("rgba("+u[h]+","+u[h+1]+","+u[h+2]+","+u[h+3]/255+")"),b.fillRect($*d,c*l,d,l);return f.dispose(),b.elem}return this.resizeImage(t,e,a,null,r)}for((f=new $e93d17ded3c815db66b20fa184665246$export$default({hidden:!0,antialias:i=null!==i}).resize(n,s)).drawImage(t.data,0,0);;){var b,p=n>>1,x=s>>1;if(p<=e||x<=a)break;(b=new $e93d17ded3c815db66b20fa184665246$export$default({hidden:!0,antialias:i}).resize(p,x)).drawImage(f.elem,0,0,p,x),f.dispose(),n=p,s=x,f=b}return(b=new $e93d17ded3c815db66b20fa184665246$export$default({hidden:!0,antialias:i}).resize(e,a)).drawImage(f.elem,0,0,e,a),f.dispose(),r&&dispose(t.data),b.elem},flipImageHorz:function(t){var e=new $e93d17ded3c815db66b20fa184665246$export$default({hidden:!0}).resize(t.data.width,t.data.height);return e.translate(t.data.width,0),e.scale(-1,1),e.drawImage(t.data,0,0),e.elem},showDownload:function(t,e){var a=document.createElement("a");a.href=e,a.style.display="none",a.download=t,a.target="_blank",document.body.appendChild(a),a.click(),document.body.removeChild(a)},showFilePicker:function(t,e,a){var i=document.createElement("input");i.type="file",i.accept=e,i.style.display="none",i.multiple=t,document.body.appendChild(i),i.onchange=function(){a(i.files)},document.body.onfocus=function(){document.body.onfocus=null,document.body.removeChild(i)},i.click()},loadAsDataURL:function(t,e){var a=new FileReader;a.onload=function(t){e(t.target.result)},a.readAsDataURL(t)},loadAsText:function(t,e){var a=new FileReader;a.onload=function(t){e(t.target.result)},a.readAsText(t)},loadAsArrayBuffer:function(t,e){var a=new FileReader;a.onload=function(t){e(t.target.result)},a.readAsArrayBuffer(t)},loadAllAsDataURL:function(t,e){var a=[];if(t&&t.length){var i=function(r){r!=t.length?$cd1d8345f0557778dc789d008e093429$export$default.loadAsDataURL(t[r],(function(e){a.push({name:t[r].name,size:t[r].size,url:e}),i(r+1)})):e(a)};i(0)}else e(a)}});var $3916daefc4ab63ae76121ea1b3227c35$export$default=$9a13317101bee2e2b4637862b0c16235$export$Class.extend({className:"Drawable",width:null,height:null,__ctor:function(t){if("image"!=t.type)throw new Error("Resource is not an image.");this.width=t.width,this.height=t.height,this.r=t,this.r.wrapper=this},draw:function(t,e=0,a=0,i=null,r=null){null==i?t.drawImageResource(this.r,e,a):t.drawImageResource(this.r,e,a,i,r)},getDrawable:function(){return this}});$cd1d8345f0557778dc789d008e093429$export$default.Image=function(t,e=null){return{type:"image",wrapper:"Drawable",src:t,pixelated:null,...e}};var $77ed6c40f9d2b28cff0fa8c54bfdddc6$export$default=$9a13317101bee2e2b4637862b0c16235$export$Class.extend({className:"Placeholder",width:null,height:null,__ctor:function(t){if("object"!=t.type)throw new Error("Resource is not an object.");this.width=t.width,this.height=t.height,this.r=t,this.r.wrapper=this,this.data=null,$e93d17ded3c815db66b20fa184665246$export$default.renderImage(t.width,t.height,(e=>{e.fillStyle(this.r.color),e.fillRect(0,0,t.width,t.height)}),(t=>{this.data=t}))},draw:function(t,e=0,a=0,i=null,r=null){this.data&&t.drawImageResource(this,e,a,i,r)},getDrawable:function(){return this}});$cd1d8345f0557778dc789d008e093429$export$default.Placeholder=function(t,e,a="#ff0000",i=null){return{type:"object",wrapper:"Placeholder",width:t,height:e,color:a,...i}};var $17cb9acbdc6a9df7ff3a270af4822113$export$default=$9a13317101bee2e2b4637862b0c16235$export$Class.extend({className:"Spritesheet",width:0,height:0,numCols:0,numFrames:0,drawableCache:null,__ctor:function(t){if("image"!=t.type&&"images"!=t.type)throw new Error("Resource is not a sprite sheet.");var e,a;if("image"==t.type){if(!(t.config.sheetWidth||t.config.numFrames&&t.config.frameWidth))throw new Error("Required sheetWidth or numFrames+frameWidth");t.config.sheetWidth||(t.config.sheetWidth=t.config.numFrames*t.config.frameWidth),t.config.frameHeight||(t.config.frameHeight=t.data.height),e=t.data.width/t.config.sheetWidth,a=t.width/t.config.sheetWidth}else t.config||(t.config={}),t.config.frameWidth||(t.config.frameWidth=t.data[0].width),t.config.frameHeight||(t.config.frameHeight=t.data[0].height),e=t.data[0].data.width/t.config.frameWidth,a=t.data[0].width/t.config.frameWidth;var i=t.config.frameWidth,r=t.config.frameHeight;this.r_frameWidth=i*e,this.r_frameHeight=r*e,this.width=i*a,this.height=r*a,"image"==t.type?(this.numCols=int(t.data.width/this.r_frameWidth),this.numRows=Math.ceil(t.data.height/this.r_frameHeight),this.numFrames=t.config.numFrames||this.numCols*this.numRows):(this.numCols=this.numRows=0,this.numFrames=t.data.length),this.drawableCache={},this.r=t,this.r.wrapper=this},drawFrame:function(t,e,a,i,r=0,n=0){if(!(i<0||i>=this.numFrames))if(r||(r=this.width),n||(n=this.height),0!=this.numCols){var s=int(i/this.numCols)*this.r_frameHeight,f=i%this.numCols*this.r_frameWidth;t.drawImage(this.r.data,f,s,this.r_frameWidth,this.r_frameHeight,e,a,r,n)}else t.drawImage(this.r.data[i].data,0,0,this.r_frameWidth,this.r_frameHeight,e,a,r,n)},getFrame:function(t,e=null){let a;if(a=null!==e?e*this.numCols+t:t,a<0||a>=this.numFrames)throw new Error("frameIndex out of range");return this.drawableCache[a]||(this.drawableCache[a]={width:this.width,height:this.height,frameIndex:a,r:this,draw:function(t,e=0,a=0,i=0,r=0){t.drawFrame(this.r,e,a,this.frameIndex,i,r)},getDrawable:function(){return this}}),this.drawableCache[a]},getDrawable:function(){return this.getFrame(0)}});$e93d17ded3c815db66b20fa184665246$export$default.prototype.drawFrame=function(t,e,a,i,r,n){t.drawFrame(this,e,a,i,r,n)};const $8dc2074b8289108cda5d43955e758c26$export$Animation=$9a13317101bee2e2b4637862b0c16235$export$Class.extend({className:"Animation",width:null,height:null,seq:null,seq_i:0,trans:null,trans_i:0,trans_t:null,queue:null,fps:0,frameSeconds:0,time:0,frameNumber:-1,finished:!1,paused:!1,finishedCallback:null,finishedCallbackHandler:null,finishedCallbackContext:null,frameCallback:null,init:function(t,e,a){return this.anim=t,this.queue=$31e77c88cc6920b604cc8697a03a7b4c$export$default.calloc(),this.seq=e,this.seq_i=0,this.trans=null,this.trans_i=0,this.trans_t=null,this.width=t.width,this.height=t.height,this.frameNumber=-1,this.finished=!1,this.paused=!1,this.finishedCallback=null,this.finishedCallbackHandler=null,this.finishedCallbackContext=null,this.frameCallback=null,this.fps=a,this.setFps(this.seq.fps||this.fps),this},__dtor:function(){this.queue.free(),this.finishedCallbackHandler&&this.finishedCallbackHandler.free(),this.finishedCallbackContext&&this.finishedCallbackContext.free()},setFps:function(t){return this.frameSeconds=1/t,this.time=0,this},setPaused:function(t){return this.paused=t,this},setInitialDelay:function(t){return this.time=-t,this},onFinished:function(t){return this.finishedCallback=t,this},then:function(t,e=null){return this.finishedCallback!==this.thenCallback&&(this.finishedCallback=this.thenCallback,this.finishedCallbackHandler=$31e77c88cc6920b604cc8697a03a7b4c$export$default.calloc(),this.finishedCallbackContext=$31e77c88cc6920b604cc8697a03a7b4c$export$default.calloc()),this.finishedCallbackHandler.push(t),this.finishedCallbackContext.push(e),this},thenCallback:function(){if(!this.finishedCallbackHandler.length)return!1;let t=this.finishedCallbackContext.shift();this.finishedCallbackHandler.shift()(this,t)},onFrame:function(t){return this.frameCallback=t,this},setFrame:function(t){return this.seq_i=t%this.seq.group.length,this},getFrame:function(t){return!0===t?this.seq_i/(this.seq.group.length-1):this.seq_i},getLength:function(){return this.seq.group.length},draw:function(t,e=0,a=0){if(this.time<0)return this.paused||(this.time+=this.frameNumber==$0d1da0ba321c96eb37e350fa4ffa1902$export$default.frameNumber?0:$0d1da0ba321c96eb37e350fa4ffa1902$export$default.frameDelta,this.frameNumber=$0d1da0ba321c96eb37e350fa4ffa1902$export$default.frameNumber),void(this.time>0&&(this.time=0));if(this.seq_i==this.seq.group.length){let i=this.seq.group[this.seq_i-1];if(null!=t)for(let r=0;r<i.length;r++)t.drawFrame(this.anim,e,a,i[r]);return}let i=this.seq.group[this.seq_i];if(null!=t)for(let r=0;r<i.length;r++)t.drawFrame(this.anim,e,a,i[r]);if(this.paused||(this.time+=this.frameNumber==$0d1da0ba321c96eb37e350fa4ffa1902$export$default.frameNumber?0:$0d1da0ba321c96eb37e350fa4ffa1902$export$default.frameDelta,this.frameNumber=$0d1da0ba321c96eb37e350fa4ffa1902$export$default.frameNumber),this.time>=this.frameSeconds){const t=this.seq_i;this.time-=this.frameSeconds,this.seq_i++,this.seq_i==this.seq.group.length&&(null!=this.trans?(++this.trans_i==this.trans.length?(this.trans=null,this.seq=this.trans_t):this.seq=this.trans[this.trans_i],this.seq_i=0,this.time=0,this.finished=!1):(this.seq.loop?this.seq_i=0:(this.finished=!0,this.finishedCallback&&!1===this.finishedCallback(this)&&(this.finishedCallback=null)),this.queue.length&&this.use(this.queue.shift(),!0))),this.frameCallback&&!1===this.frameCallback(t,this.seq.group.length-1,this)&&(this.frameCallback=null)}},getDrawable:function(){return this},advance:function(){this.setPaused(!1),this.draw(null,0,0)},getName:function(){return(null==this.trans?this.seq:this.trans_t).name},use:function(t,e=!1){let a=null==this.trans?this.seq:this.trans_t;return a.name!=t||this.finished||!0===e?(a.trans&&a.trans[t]?(this.trans_t=this.anim.a.seq[t],this.trans=a.trans[t],this.trans_i=0,this.seq=this.trans[this.trans_i]):(this.seq=this.anim.a.seq[t],this.setFps(this.seq.fps||this.fps)),this.seq_i=0,this.time=0,this.finished=!1,this):this},setQueue:function(t){if(!$31e77c88cc6920b604cc8697a03a7b4c$export$default.isInstance(t))throw new Error("setQueue: Parameter must be an instance of List");null!=this.queue&&this.queue.clear().free(),this.queue=t,this.use(this.queue.shift(),!0)},enqueue:function(t,e=!1){let a=null==this.trans?this.seq:this.trans_t,i=this.queue.length>0?this.queue[this.queue.length-1]:a.name;return a.name==t&&a.loop?this:i!=t||e?a.loop||this.finished?(this.use(t,!0),this):(this.queue.push(t),this):this}});$676b148d00bde05a65142d5a5b8bf91f$export$default.attachTo($8dc2074b8289108cda5d43955e758c26$export$Animation);var $8dc2074b8289108cda5d43955e758c26$export$default=$17cb9acbdc6a9df7ff3a270af4822113$export$default.extend({className:"SpritesheetAnimation",defaultDrawable:null,__ctor:function(t){if(!t.anim)throw new Error("Animation descriptors not found.");this._super.Spritesheet.__ctor(t),this.r=t,this.r.wrapper=this;let e=this.a=this.r.anim;if(e.initialized)return;if(e.def||(e.def="def"),e.seq||(e.seq={}),!e.seq[e.def]&&("def"==e.def||"defloop"==e.def)){let t={loop:"def"!=e.def,group:[]};for(let e=0;e<this.numFrames;e++)t.group.push([e]);e.seq[e.def]=t}if(!e.seq[e.def])throw new Error("Undefined default sequence: "+e.def);e.fps||(e.fps=25),e.def=e.seq[e.def];let a=0;for(let t in e.seq)if(e.seq[t].name=t,e.seq[t].loop||(e.seq[t].loop=!1),"string"==typeof e.seq[t].group){let i,r,n;if(-1!=e.seq[t].group.indexOf(" ")){i=e.seq[t].group.split(" "),e.seq[t].group=[];for(let a in i)e.seq[t].group.push([int(i[a])])}else if(-1!=e.seq[t].group.indexOf(","))for(n=e.seq[t].group.split(","),i=int(n[0]),r=int(n[1]),e.seq[t].group=[],n=i;n<=r;n++)e.seq[t].group.push([n]);else for(i=int(e.seq[t].group),e.seq[t].group=[];i--;)e.seq[t].group.push([a++])}if(e.trans)for(let t in e.trans){e.seq[t].trans=e.trans[t];for(let a in e.trans[t])for(let i=0;i<e.trans[t][a].length;i++){let r=e.trans[t][a][i];if(!e.seq[r])throw new Error("Undefined sequence: "+r);e.trans[t][a][i]=e.seq[r]}}e.initialized=!0},getAnimation:function(t=null,e=null){return $8dc2074b8289108cda5d43955e758c26$export$Animation.alloc().init(this,t?this.a.seq[t]:this.a.def,e||this.a.fps)},getDrawable:function(){return null===this.defaultDrawable&&(this.defaultDrawable=this.getAnimation()),this.defaultDrawable}}),$a5f1e9e88ad1baf46383cfb66b6ed6bc$export$default=$9a13317101bee2e2b4637862b0c16235$export$Class.extend({__ctor:function(t){if("image"!=t.type||!t.font)throw new Error("Resource is not a sprite font.");var e=t.data.width/t.font.sheetWidth,a=t.width/t.font.sheetWidth;this.r_charWidth=t.font.charWidth*e,this.r_charHeight=t.font.charHeight*e,this.charWidth=t.font.charWidth*a,this.charHeight=t.font.charHeight*a;var i=int(t.font.sheetWidth/t.font.charWidth);this.r=t,this.r.wrapper=this;var r=t.font.charset.length,n=0,s=0;for(this.charTable={},this.charTable[" "]={charWidth:this.charWidth>>1,r_charWidth:this.r_charWidth};n<r;){for(var f=0,o=0;o<i&&n<r;o++){var d=t.font.charset[n++];this.charTable[d]={x:f,y:s,charWidth:this.charWidth,r_charWidth:this.r_charWidth},f+=this.r_charWidth}s+=this.r_charHeight}if(t.font.widths)for(r=t.font.widths.length,o=0;o<r;o+=2)for(var l=t.font.widths[o]*a,c=t.font.widths[o]*e,u=t.font.widths[o+1],h=0;h<u.length;h++)this.charTable[u[h]].charWidth=l,this.charTable[u[h]].r_charWidth=c},draw:function(t,e,a,i){for(var r=i.length,n=0;n<r;n++)if(" "!=i[n]){var s=this.charTable[i[n]];s&&(t.drawImage(this.r.data,s.x,s.y,s.r_charWidth,this.r_charHeight,e,a,s.charWidth,this.charHeight),e+=s.charWidth)}else e+=this.charTable[i[n]].charWidth},measureWidth:function(t){for(var e=t.length,a=0,i=0;i<e;i++){var r=this.charTable[t[i]];r&&(a+=r.charWidth)}return a},measureHeight:function(t){return this.charHeight}});$e93d17ded3c815db66b20fa184665246$export$default.prototype.drawText=function(t,e,a,i){t.draw(this,e,a,i.toString())},$e93d17ded3c815db66b20fa184665246$export$default.prototype.drawTextAligned=function(t,e,a,i,r,n,s,f){f=f.toString(),0==n?e+=i-t.measureWidth(f)>>1:n<0?e=e-n-1:n>0&&(e=e+i-n+1-t.measureWidth(f)),0==s?a+=r-t.measureHeight(f)>>1:s<0?a=a-s-1:s>0&&(a=a+r-s+1-t.measureHeight(f)),t.draw(this,e,a,f)},$e93d17ded3c815db66b20fa184665246$export$default.prototype.drawTextAligned2=function(t,e,a,i,r){this.drawTextAligned(t,e.x1,e.y1,e.width(),e.height(),a,i,r)};const $8d93a23512732c0b7cf6ccf8fca7939d$export$default=$9a13317101bee2e2b4637862b0c16235$export$Class.extend({r:null,__ctor:function(t){if("audio"!=t.type)throw new Error("Resource is not audio.");this.r=t,this.r.wrapper=this,this.track=$8d93a23512732c0b7cf6ccf8fca7939d$export$default[this.r.track.toUpperCase()]},play:function(t,e){return $8d93a23512732c0b7cf6ccf8fca7939d$export$default.play(this,t,e)},playLoop:function(t,e){return $8d93a23512732c0b7cf6ccf8fca7939d$export$default.playLoop(this,t,e)}});$8d93a23512732c0b7cf6ccf8fca7939d$export$default.ENGINE_HTML5=1,$8d93a23512732c0b7cf6ccf8fca7939d$export$default.ENGINE_WEBAUDIO=2,$8d93a23512732c0b7cf6ccf8fca7939d$export$default.ENGINE_NATIVEAUDIO=3,Object.assign($8d93a23512732c0b7cf6ccf8fca7939d$export$default,{MASTER:{enabled:!0,volume:1},SFX:{enabled:!0,volume:1},MUSIC:{enabled:!0,volume:.8},VOICE:{enabled:!0,volume:1},MAX_POOL_SIZE:100,pool:[],active:[],register:function(t){t.registered||(t.registered=!0,this.active.push(t))},unregister:function(t){if(t.registered){t.registered=!1;var e=$8d93a23512732c0b7cf6ccf8fca7939d$export$default.active.indexOf(t);-1!=e&&$8d93a23512732c0b7cf6ccf8fca7939d$export$default.active.splice(e,1)}},updateNode:function(t,e){switch(t.snd.r.engine){case $8d93a23512732c0b7cf6ccf8fca7939d$export$default.ENGINE_WEBAUDIO:return this.updateNode_webaudio(t,e);case $8d93a23512732c0b7cf6ccf8fca7939d$export$default.ENGINE_NATIVEAUDIO:return this.updateNode_nativeaudio(t,e)}return this.updateNode_audio(t,e)},alloc_webaudio:function(t){t.gainNode=audioContext.createGain(),t.gainNode.gain.value=0,t.gainNode.connect(audioContext.destination),t.res=audioContext.createBufferSource(),t.res.buffer=t.snd.r.data,t.res.loop=!1,t.res.connect(t.gainNode),t.res.node=t},free_webaudio:function(t){t.res&&(t.gainNode.disconnect(),t.res=null,t.gainNode=null)},alloc_nativeaudio:function(t){t.res=!0},free_nativeaudio:function(t){t.res=!1},alloc_audio:function(t){return this.pool.length?item=this.pool.pop():item=t.cloneNode(),item._src=t.src,item},free_audio:function(t){this.pool.length!=this.MAX_POOL_SIZE&&this.pool.push(t)},updateNode_webaudio:function(t,e){if(!t)return null;var a=$8d93a23512732c0b7cf6ccf8fca7939d$export$default.MASTER.volume*t.snd.track.volume*t.volume;switch(e){case"play":if(t.playing)break;t.res||$8d93a23512732c0b7cf6ccf8fca7939d$export$default.alloc_webaudio(t),t.playTime=hrnow(),t.playing=!0,t.pause=!1,t.res.onended=$8d93a23512732c0b7cf6ccf8fca7939d$export$default.onended_webaudio,t.gainNode.gain.value=a;try{t.res.start(0,t.startTime/1e3)}catch(e){return $8d93a23512732c0b7cf6ccf8fca7939d$export$default.free_webaudio(t),null}$8d93a23512732c0b7cf6ccf8fca7939d$export$default.register(t);break;case"setvolume":if(!t.res)break;t.gainNode.gain.value=a;break;case"stop":if(!t.playing&&t.paused){t.startTime=0,t.paused=!1,$8d93a23512732c0b7cf6ccf8fca7939d$export$default.free_webaudio(t),t.callback&&t.callback();break}if(!t.res)break;t.startTime=0,t.playing=!1,t.pause=!1,t.res.onended=null,$8d93a23512732c0b7cf6ccf8fca7939d$export$default.unregister(t),t.res.stop(),$8d93a23512732c0b7cf6ccf8fca7939d$export$default.free_webaudio(t),t.callback&&t.callback();break;case"pause":if(!t.playing||!t.res)break;t.startTime+=hrnow()-t.playTime,t.playing=!1,t.pause=!0,t.res.onended=null,$8d93a23512732c0b7cf6ccf8fca7939d$export$default.unregister(t),t.res.stop(),$8d93a23512732c0b7cf6ccf8fca7939d$export$default.free_webaudio(t);break;case"softstop":if(!t.playing&&t.paused){t.startTime=0,t.paused=!1;break}if(!t.playing||!t.res)break;t.startTime=0,t.playing=!1,t.pause=!1,t.res.loop=!1}return t},onended_webaudio:function(t){var e=t.currentTarget.node;if(e.playing&&0!=e.loop)return $8d93a23512732c0b7cf6ccf8fca7939d$export$default.free_webaudio(e),-1!=e.loop&&e.loop--,e.startTime=0,e.playing=!1,e.pause=!1,void $8d93a23512732c0b7cf6ccf8fca7939d$export$default.updateNode_webaudio(e,"play");e.res.onended=null,e.res.volume=0,$8d93a23512732c0b7cf6ccf8fca7939d$export$default.updateNode_webaudio(e,"stop")},updateNode_nativeaudio:function(t,e){if(!t)return null;switch(e){case"play":if(t.playing)break;t.res||$8d93a23512732c0b7cf6ccf8fca7939d$export$default.alloc_nativeaudio(t),t.playing=!0,t.pause=!1;try{$parcel$global.plugins.NativeAudio.play(t.snd.r.data,null,null,(function(){$8d93a23512732c0b7cf6ccf8fca7939d$export$default.onended_nativeaudio(t)}))}catch(e){return $8d93a23512732c0b7cf6ccf8fca7939d$export$default.free_nativeaudio(t),null}$8d93a23512732c0b7cf6ccf8fca7939d$export$default.register(t);break;case"setvolume":break;case"stop":if(!t.res)break;t.playing=!1,t.pause=!1,$8d93a23512732c0b7cf6ccf8fca7939d$export$default.unregister(t),$parcel$global.plugins.NativeAudio.stop(t.snd.r.data,null),$8d93a23512732c0b7cf6ccf8fca7939d$export$default.free_nativeaudio(t),t.callback&&t.callback()}return t},onended_nativeaudio:function(t){$8d93a23512732c0b7cf6ccf8fca7939d$export$default.updateNode_nativeaudio(t,"stop")},updateNode_audio:function(t,e){if(!t)return null;var a=$8d93a23512732c0b7cf6ccf8fca7939d$export$default.MASTER.volume*t.snd.track.volume*t.volume;switch(e){case"play":if(t.playing)break;t.res||(t.res=$8d93a23512732c0b7cf6ccf8fca7939d$export$default.alloc_audio(t.snd.r.data),t.res.node=t,t.res.src=t.res._src),t.playTime=hrnow(),t.playing=!0,t.pause=!1,t.res.onended=$8d93a23512732c0b7cf6ccf8fca7939d$export$default.onended_audio,t.res.currentTime=t.startTime/1e3,t.res.volume=a;try{t.res.play()}catch(e){return $8d93a23512732c0b7cf6ccf8fca7939d$export$default.free_audio(t.res),t.res=null,null}$8d93a23512732c0b7cf6ccf8fca7939d$export$default.register(t);break;case"setvolume":if(!t.res)break;t.res.volume=a;break;case"stop":if(!t.playing&&t.paused){t.startTime=0,t.paused=!1,$8d93a23512732c0b7cf6ccf8fca7939d$export$default.free_audio(t.res),t.res=null,t.callback&&t.callback();break}if(!t.res)break;t.startTime=0,t.playing=!1,t.pause=!1,$8d93a23512732c0b7cf6ccf8fca7939d$export$default.unregister(t),t.res.pause(),$8d93a23512732c0b7cf6ccf8fca7939d$export$default.free_audio(t.res),t.res=null,t.callback&&t.callback();break;case"pause":if(!t.playing||!t.res)break;t.startTime+=hrnow()-t.playTime,t.playing=!1,t.pause=!0,$8d93a23512732c0b7cf6ccf8fca7939d$export$default.unregister(t),t.res.pause();break;case"softstop":if(!t.playing&&t.paused){t.startTime=0,t.paused=!1;break}if(!t.playing||!t.res)break;t.startTime=0,t.playing=!1,t.pause=!1}return t},onended_audio:function(t){var e=t.currentTarget.node;if(e.playing&&0!=e.loop)return-1!=e.loop&&e.loop--,e.startTime=0,e.playing=!1,e.pause=!1,void $8d93a23512732c0b7cf6ccf8fca7939d$export$default.updateNode_audio(e,"play");e.res.onended=null,e.res.volume=0,$8d93a23512732c0b7cf6ccf8fca7939d$export$default.updateNode_audio(e,"stop")},enableTrack:function(t){t&&(t.enabled=!0)},disableTrack:function(t){t&&(t.enabled=!1)},setVolume:function(t,e){t&&(t.volume=e)},createNode:function(t,e){var a={};return a.startVolume=e,a.volume=e,a.snd=t,a.loop=0,a.playing=!1,a.paused=!1,a.startTime=0,a.playTime=0,a.callback=null,a.timer=null,a.res=null,a},play:function(t,e,a){if(!this.MASTER.enabled||!t||!t.track.enabled)return null;a=null!=a?a:1;var i=this.createNode(t,a);return i.callback=e,this.updateNode(i,"play")},playLoop:function(t,e,a){if(!this.MASTER.enabled||!t||!t.track.enabled)return null;a=null!=a?a:1;var i=this.createNode(t,a);return i.callback=e,i.loop=-1,this.updateNode(i,"play")},stop:function(t,e){return t?(e&&!0!==e&&(t.callback=e),this.updateNode(t,!0===e?"stop":"softstop")):null},pause:function(t){return t?this.updateNode(t,"pause"):null},resume:function(t){return t?this.updateNode(t,"play"):null},fadeOut:function(t,e,a){if(t)if(t.playing&&!t.timer){var i=hrnow();t.startVolume=t.volume,t.timer=setInterval((function(){var r=(hrnow()-i)/e;r>1&&(r=1),t.volume=t.startVolume*(1-r),$8d93a23512732c0b7cf6ccf8fca7939d$export$default.updateNode(t,"setvolume"),1==r&&(clearInterval(t.timer),t.timer=null,!0===a?$8d93a23512732c0b7cf6ccf8fca7939d$export$default.updateNode(t,"stop"):$8d93a23512732c0b7cf6ccf8fca7939d$export$default.updateNode(t,"pause"),a&&!0!==a&&a())}),50)}else a&&a()},fadeIn:function(t,e,a){if(t)if(t.playing||t.timer)a&&a();else{var i=hrnow();t.volume=0,this.updateNode(t,"play"),t.timer=setInterval((function(){var r=(hrnow()-i)/e;r>1&&(r=1),t.volume=t.startVolume*r,$8d93a23512732c0b7cf6ccf8fca7939d$export$default.updateNode(t,"setvolume"),1==r&&(clearInterval(t.timer),t.timer=null,a&&a())}),50)}}}),$cd1d8345f0557778dc789d008e093429$export$default.Audio=function(t,e=null){return{type:"audio",wrapper:"Sound",src:t,...e}};var $3c92d0ea43ba43f8109d4eef0ba0f300$export$default=$9a13317101bee2e2b4637862b0c16235$export$Class.extend({r:null,__ctor:function(t){if("audios"!=t.type)throw new Error("Resource is not audios.");this.r=t,this.r.wrapper=this,this.r.track||(this.r.track="sfx"),this.r.mode||(this.r.mode="random"),this.track=$8d93a23512732c0b7cf6ccf8fca7939d$export$default[this.r.track.toUpperCase()],this.sounds=[],this.lastIndex=-1;for(var e=0;e<this.r.data.length;e++)this.sounds.push(new $8d93a23512732c0b7cf6ccf8fca7939d$export$default(Object.assign(this.r.data[e],{track:this.r.track})))},getRandomSound:function(){return"random"==this.r.mode?this.sounds[randr(0,this.sounds.length-1)]:(this.lastIndex=++this.lastIndex%this.sounds.length,this.sounds[this.lastIndex])},play:function(t,e){return $8d93a23512732c0b7cf6ccf8fca7939d$export$default.play(this.getRandomSound(),t,e)},playLoop:function(t,e){return $8d93a23512732c0b7cf6ccf8fca7939d$export$default.playLoop(this.getRandomSound(),t,e)},playAt:function(t,e,a){return $8d93a23512732c0b7cf6ccf8fca7939d$export$default.play(this.sounds[t%this.sounds.length],e,a)},playLoopAt:function(t,e,a){return $8d93a23512732c0b7cf6ccf8fca7939d$export$default.playLoop(this.sounds[t%this.sounds.length],e,a)}});const $849cbcf6aa1a6feafe4b4558128535c4$export$Drawable=$3916daefc4ab63ae76121ea1b3227c35$export$default;$parcel$export($849cbcf6aa1a6feafe4b4558128535c4$exports,"Drawable",(function(){return $849cbcf6aa1a6feafe4b4558128535c4$export$Drawable}));const $849cbcf6aa1a6feafe4b4558128535c4$export$Placeholder=$77ed6c40f9d2b28cff0fa8c54bfdddc6$export$default;$parcel$export($849cbcf6aa1a6feafe4b4558128535c4$exports,"Placeholder",(function(){return $849cbcf6aa1a6feafe4b4558128535c4$export$Placeholder}));const $849cbcf6aa1a6feafe4b4558128535c4$export$Spritesheet=$17cb9acbdc6a9df7ff3a270af4822113$export$default;$parcel$export($849cbcf6aa1a6feafe4b4558128535c4$exports,"Spritesheet",(function(){return $849cbcf6aa1a6feafe4b4558128535c4$export$Spritesheet}));const $849cbcf6aa1a6feafe4b4558128535c4$export$SpritesheetAnimation=$8dc2074b8289108cda5d43955e758c26$export$default;$parcel$export($849cbcf6aa1a6feafe4b4558128535c4$exports,"SpritesheetAnimation",(function(){return $849cbcf6aa1a6feafe4b4558128535c4$export$SpritesheetAnimation}));const $849cbcf6aa1a6feafe4b4558128535c4$export$SpriteFont=$a5f1e9e88ad1baf46383cfb66b6ed6bc$export$default;$parcel$export($849cbcf6aa1a6feafe4b4558128535c4$exports,"SpriteFont",(function(){return $849cbcf6aa1a6feafe4b4558128535c4$export$SpriteFont}));const $849cbcf6aa1a6feafe4b4558128535c4$export$Sound=$8d93a23512732c0b7cf6ccf8fca7939d$export$default;$parcel$export($849cbcf6aa1a6feafe4b4558128535c4$exports,"Sound",(function(){return $849cbcf6aa1a6feafe4b4558128535c4$export$Sound}));const $849cbcf6aa1a6feafe4b4558128535c4$export$SoundArray=$3c92d0ea43ba43f8109d4eef0ba0f300$export$default;$parcel$export($849cbcf6aa1a6feafe4b4558128535c4$exports,"SoundArray",(function(){return $849cbcf6aa1a6feafe4b4558128535c4$export$SoundArray}));var $761d290cf3c7f70d27120f82a7918e29$export$default=$9a13317101bee2e2b4637862b0c16235$export$Class.extend({className:"PriorityQueue",queue:null,queueKeys:null,order:null,__ctor:function(){this.queue={},this.queueKeys=[]},add:function(t){if(null==t)return null;if(!("priority"in t))throw new Error("PriorityQueue (add): Object has no `priority` property.");return t.priority in this.queue||(this.queue[t.priority]={is_dirty:!1,list:[]},this.queueKeys.push(t.priority),this.order=Object.keys(this.queue).sort(((t,e)=>t-e))),-1===this.queue[t.priority].list.indexOf(t)&&this.queue[t.priority].list.push(t),t},remove:function(t){if(null==t)return null;if(!("priority"in t))throw new Error("PriorityQueue (remove): Object has no `priority` property.");if(!(t.priority in this.queue))return t;let e=this.queue[t.priority].list.indexOf(t);return-1===e||(this.queue[t.priority].is_dirty=!0,this.queue[t.priority].list[e]=null),t},cleanup:function(){for(let t=0;t<this.queueKeys.length;t++){let e=this.queue[this.queueKeys[t]];if(e.is_dirty){for(let t=0;t<e.list.length;t++)null==e.list[t]&&(console.log("CLEANUP CALLED"),e.list[t--].splice(1,0));e.is_dirty=!1}}},forEach:function(t){let e=!1,a=!1;for(let i=0;!a&&i<this.order.length;i++){let r=this.queue[this.order[i]].list;for(let i=0;!a&&i<r.length;i++)null!=r[i]&&!1===t(r[i])&&(a=!0),null==r[i]&&(e=!0)}e&&this.cleanup()},forEachRev:function(t){let e=!1,a=!1;for(let i=this.order.length-1;!a&&i>=0;i--){let r=this.queue[this.order[i]].list;for(let i=r.length-1;!a&&i>=0;i--)null!=r[i]&&!1===t(r[i])&&(a=!0),null==r[i]&&(e=!0)}e&&this.cleanup()},forEachAsync:function(t,e=null){let a=this,i=!1,r=!1,n=-1,s=-1,f=null,o=function(){s++,!r&&s<f.length?(null!=f[s]&&!1===t(f[s],o)&&(r=!0),null==f[s]&&(i=!0),r&&o()):d()},d=function(){n++,!r&&n<a.order.length?(f=a.queue[a.order[n]].list,s=-1,o()):(i&&a.cleanup(),e&&e())};d()},forEachRevAsync:function(t){alert("NOT IMPLEMENTED: forEachRevAsync")}});const $47dfa55e168cc2702b5fb60cb5bccec9$export$default=$9a13317101bee2e2b4637862b0c16235$export$Class.extend({className:"Callback",callback:null,context:null,arg1:null,arg2:null,arg3:null,arg4:null,prev:null,next:null,init:function(t,e=null,a=null,i=null,r=null,n=null){return this.callback=t,this.context=e,this.arg1=a,this.arg2=i,this.arg3=r,this.arg4=n,this.prev=null,this.next=null,this},__dtor:function(){this.callback=null,this.context=null,this.arg1=null,this.arg2=null,this.arg3=null,this.arg4=null,this.prev=null,this.next=null},isEqual:function(t=null,e=null,a=null,i=null,r=null,n=null){return null!==t&&$47dfa55e168cc2702b5fb60cb5bccec9$export$default.isInstance(t)?t===this:(null===t||this.callback===t)&&((null===e||this.context===e)&&((null===a||this.arg1===a)&&((null===i||this.arg2===i)&&((null===r||this.arg3===r)&&(null===n||this.arg4===n)))))},exec:function(t){return null===this.callback||this.callback(t,this.context,this.arg1,this.arg2,this.arg3,this.arg4)}});$676b148d00bde05a65142d5a5b8bf91f$export$default.attachTo($47dfa55e168cc2702b5fb60cb5bccec9$export$default);const $ddb59e07af6f4d6f63ac124d8ae48842$export$default=$9a13317101bee2e2b4637862b0c16235$export$Class.extend({className:"Handler",host:null,top:null,bottom:null,init:function(t){return this.host=t,this.top=null,this.bottom=null,this},__dtor:function(){this.remove()},add:function(t,e=null,a=null,i=null,r=null,n=null){let s=$47dfa55e168cc2702b5fb60cb5bccec9$export$default.isInstance(t)?t:$47dfa55e168cc2702b5fb60cb5bccec9$export$default.alloc().init(t,e,a,i,r,n);return s.prev=this.bottom,null!==this.bottom&&(this.bottom.next=s),this.bottom=s,null===this.top&&(this.top=s),s},unlink:function(t){t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),this.top===t&&(this.top=t.next),this.bottom===t&&(this.bottom=t.prev),t.prev=null,t.next=null,dispose(t)},remove:function(t=null,e=null,a=null,i=null,r=null,n=null){if(null!==t&&$47dfa55e168cc2702b5fb60cb5bccec9$export$default.isInstance(t))return this.unlink(t),this;let s=this.top;for(;null!==s;){let f=s.next;s.isEqual(t,e,a,i,r,n)&&this.unlink(s),s=f}return this},find:function(t,e=null,a=null,i=null,r=null,n=null){let s=this.top;for(;null!==s;){if(s.isEqual(t,e,a,i,r,n))return s;s=s.next}return null},exec:function(){let t=this.top;for(;null!==t;){let e=t.next;!1===t.exec(this.host)&&this.unlink(t),t=e}},execf:function(t=null,e=null,a=null,i=null,r=null,n=null){let s=this.top;for(;null!==s;){let f=s.next;if(s.isEqual(t,e,a,i,r,n)){!1===s.exec(this.host)&&this.unlink(s);break}s=f}},execc:function(t){!1===t.exec(this.host)&&this.unlink(t)}});$676b148d00bde05a65142d5a5b8bf91f$export$default.attachTo($ddb59e07af6f4d6f63ac124d8ae48842$export$default);const $79348bb5e8be132355fb58346e1088e3$export$default=$9a13317101bee2e2b4637862b0c16235$export$Class.extend({className:"Rect",cx:0,cy:0,x1:0,y1:0,x2:0,y2:0,init:function(t=null,e=null,a=null,i=null){return null===t?(this.x1=this.y1=this.x2=this.y2=this.cx=this.cy=0,this):null===a?(this.set(0,0,0,0),this.resize(t,e),this):this.set(t,e,a,i)},__dtor:function(){},clone:function(){return $79348bb5e8be132355fb58346e1088e3$export$default.alloc().init(this.x1,this.y1,this.x2,this.y2)},zero:function(){return this.cx=0,this.cy=0,this.x1=0,this.y1=0,this.x2=0,this.y2=0,this},reset:function(){return this.cx=null,this.cy=null,this.x1=null,this.y1=null,this.x2=null,this.y2=null,this},extendWithPoint:function(t,e=null){if(null===e){const a=t;t=a.x,e=a.y}return(null===this.x1||t<this.x1)&&(this.x1=t),(null===this.y1||e<this.y1)&&(this.y1=e),(null===this.x2||t>this.x2)&&(this.x2=t),(null===this.y2||e>this.y2)&&(this.y2=e),this.cx=(this.x1+this.x2)/2,this.cy=(this.y1+this.y2)/2,this},translate:function(t,e){return this.x1+=t,this.y1+=e,this.x2+=t,this.y2+=e,this.cx+=t,this.cy+=e,this},centerAt:function(t,e,a=!1){return 1==a&&(t=this.x1+t*(this.x2-this.x1),e=this.y1+e*(this.y2-this.y1)),this.translate(t-this.cx,e-this.cy)},set:function(t,e=null,a=null,i=null){if(null===e){const r=t;t=r.x1,e=r.y1,a=r.x2,i=r.y2}return this.cx=(t+a)/2,this.cy=(e+i)/2,this.x1=t,this.y1=e,this.x2=a,this.y2=i,this},equals:function(t,e=null,a=null,i=null){if(null===e){const r=t;t=r.x1,e=r.y1,a=r.x2,i=r.y2}return t==this.x1&&a==this.x2&&e==this.y1&&i==this.y2},contains:function(t,e=null,a=null,i=null){if(null===e){const r=t;t=r.x1,e=r.y1,a=r.x2,i=r.y2}return t==Math.max(this.x1,t)&&e==Math.max(this.y1,e)&&a==Math.min(this.x2,a)&&i==Math.min(this.y2,i)},setAsUnion:function(t,e=null,a=null,i=null){if(null===e){const r=t;t=r.x1,e=r.y1,a=r.x2,i=r.y2}return this.x1=Math.min(this.x1,t),this.y1=Math.min(this.y1,e),this.x2=Math.max(this.x2,a),this.y2=Math.max(this.y2,i),this},intersects:function(t,e=null,a=null,i=null){if(null===e){const r=t;t=r.x1,e=r.y1,a=r.x2,i=r.y2}let r=Math.max(this.x1,t),n=Math.max(this.y1,e),s=Math.min(this.x2,a),f=Math.min(this.y2,i);return Math.max(0,f-n)*Math.max(0,s-r)>0},setAsIntersection:function(t,e=null,a=null,i=null){if(null===e){const r=t;t=r.x1,e=r.y1,a=r.x2,i=r.y2}return this.x1=Math.max(this.x1,t),this.y1=Math.max(this.y1,e),this.x2=Math.min(this.x2,a),this.y2=Math.min(this.y2,i),Math.max(0,this.y2-this.y1)*Math.max(0,this.x2-this.x1)>0},resize:function(t,e,a=!1,i=!1){return 1==a&&(t*=this.x2-this.x1,e*=this.y2-this.y1),1==i?(this.x2=this.x1+t,this.y2=this.y1+e):(t/=2,e/=2,this.x1=this.cx-t,this.y1=this.cy-e,this.x2=this.cx+t,this.y2=this.cy+e),this},resizeBy:function(t,e,a=!1){return 1==a?(this.x2+=t,this.y2+=e):(t/=2,e/=2,this.x1-=t,this.y1-=e,this.x2+=t,this.y2+=e),this},width:function(){return this.x2-this.x1},height:function(){return this.y2-this.y1},ncx:function(){return(this.cx-this.x1)/(this.x2-this.x1)},ncy:function(){return(this.cy-this.y1)/(this.y2-this.y1)},isRight:function(){return this.x1<=this.x2&&this.y1<=this.y2},containsPoint:function(t,e,a=0){return this.x1-a<=t&&t<=this.x2+a&&this.y1-a<=e&&e<=this.y2+a},area:function(t){return t?this.isRight()?(this.y2-this.y1)*(this.x2-this.x1):0:(this.y2-this.y1)*(this.x2-this.x1)},floor:function(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.floor(this.x2),this.y2=Math.floor(this.y2),this.cx=Math.floor(this.cx),this.cy=Math.floor(this.cy),this},ceil:function(){return this.x1=Math.ceil(this.x1),this.y1=Math.ceil(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this.cx=Math.ceil(this.cx),this.cy=Math.ceil(this.cy),this},toString:function(){return"("+this.x1.toFixed(2)+", "+this.y1.toFixed(2)+", "+this.x2.toFixed(2)+", "+this.y2.toFixed(2)+")"},flatten:function(){return[this.x1,this.y1,this.x2,this.y2]},unflatten:function(t){return this.set(t[0],t[1],t[2],t[3]),this}});$676b148d00bde05a65142d5a5b8bf91f$export$default.attachTo($79348bb5e8be132355fb58346e1088e3$export$default,1024);const $c05de945fb6d27bc1e9b892510a754e1$export$default=$9a13317101bee2e2b4637862b0c16235$export$Class.extend({className:"TFunction",t:null,y:null,f:null,__ctor:function(t){this.reset(t)},reset:function(t=0){return this.t=[0],this.y=[t],this.f=[null],this},copyFrom:function(t,e,a){if(this.t=[],this.y=[],this.f=[],null==e&&null==a){for(let e=0;e<t.t.length;e++)this.t.push(t.t[e]),this.y.push(t.y[e]),this.f.push(t.f[e]);return this}null==e&&(e=t.t[0]),null==a&&(a=t.t[t.t.length-1]),e<t.t[0]&&(e=t.t[0]);let i=t.find(e),r=t.find(a);if(null==i)return null;if(null==r)return null;t.t[i]!=e&&(this.set(e,t.getAt(e),t.f[i]),i++);for(let e=i;e<=r;e++)this.set(t.t[e],t.y[e],t.f[e]);if(t.t[r]!=a){let e=(a-t.t[r])/Math.ceil(Math.log(a-t.t[r])),i=this.t[this.t.length-1];for(e<=0&&(e=1),e=a-i;i!=a;)i+e>a&&(e=a-i),i+=e,this.set(float4(i),t.getAt(i),t.f[r])}return this},clone:function(t,e){return(new $c05de945fb6d27bc1e9b892510a754e1$export$default).copyFrom(this,t,e)},endTime:function(t=0){return this.t[this.t.length-1]+t},startTime:function(t=0){return this.t[0]+t},find:function(t){if(t<this.t[0])return null;const e=this.t.length;for(let a=1;a<e;a++)if(t<this.t[a])return a-1;return e-1},set:function(t,e,a=null){let i=this.find(t);return null!=i&&(this.t[i]==t?(this.y[i]=e,null!=a&&(this.f[i]=a)):(i++,this.t.splice(i,0,t),this.y.splice(i,0,e),this.f.splice(i,0,a)),!0)},get:function(){return this.y[this.y.length-1]},getAt:function(t){let e=this.find(t);if(null==e)return 0;let a=e+1;if(this.t[e]==t||a>=this.t.length||this.y[e]==this.y[a]||null==this.f[e])return this.y[e];if(null==this.f[e])return this.y[e];let i=t,r=this.t[e],n=this.t[a],s=this.y[e],f=this.y[a];return t=(i-r)/(n-r),(t=this.f[e](t))*f+(1-t)*s},integral:function(t=null,e=null,a=0){null==t&&(t=this.t[0]),null==e&&(e=this.t[this.t.length-1]),t<this.t[0]&&(t=this.t[0]);let i=1;if(t>e){let a;a=t,t=e,e=a,i=-1}let r=a;for(let a=t;a<e;){let t=this.find(a);if(null==t)return 0;let i=t+1,n=Math.max(this.t[t],a),s=Math.min(i<this.t.length?this.t[i]:e,e),f=this.getAt(n),o=s-n,d=this.getAt(s)-f;null==this.f[t]?r+=f*o:r+=.5*d*(s+n)-n*d+f*o,a+=o}return i*r},second_integral:function(t=null,e=null,a=0){null==t&&(t=this.t[0]),null==e&&(e=this.t[this.t.length-1]);let i=$c05de945fb6d27bc1e9b892510a754e1$export$default.Temp1.copyFrom(this,this.t[0],t).integrate(a).integral();return $c05de945fb6d27bc1e9b892510a754e1$export$default.Temp2.copyFrom(this,this.t[0],e).integrate(a).integral()-i},integrate:function(t=0){let e=[];e.push(t);for(let t=1;t<this.t.length;t++)e.push(e[t-1]+this.integral(this.t[t-1],this.t[t]));return this.y=e,this},accumulate:function(t=0){this.y[0]+=t;for(let t=1;t<this.t.length;t++)this.y[t]+=this.y[t-1];return this},chopLeft:function(t){return this.t.splice(0,t),this.f.splice(0,t),this.y.splice(0,t),this},chopRight:function(t){return this.t.splice(t+1,this.t.length-t-1),this.f.splice(t+1,this.f.length-t-1),this.y.splice(t+1,this.y.length-t-1),this},map:function(t){for(let e=0;e<this.y.length;e++)this.y[e]=t(this.y[e],this.t[e],e);return this},toString:function(t=0){let e="",a=10;const i=function(t,e,a){for(t=t.toString(),null==a&&(a=" "),a=a[0];t.length<e;)t+=a;return t};e+="\n",e+=i(" Time",a)+" "+i(" Value",a)+" "+i(" Integral",a)+"\n",e+=i("",a,"-")+" "+i("",a,"-")+" "+i("",a,"-")+"\n";for(let r=0;r<this.t.length;r++)e+=i(" "+float4(this.t[r]),a)+" "+i(" "+float4(this.y[r]),a)+" "+i(" "+float4(this.integral(this.t[0],this.t[r],t)),a)+"\n";return e}});$c05de945fb6d27bc1e9b892510a754e1$export$default.Temp1=new $c05de945fb6d27bc1e9b892510a754e1$export$default,$c05de945fb6d27bc1e9b892510a754e1$export$default.Temp2=new $c05de945fb6d27bc1e9b892510a754e1$export$default;const $b7d1121d86f4637d4af87b487a4f2e70$var$BITS=4,$b7d1121d86f4637d4af87b487a4f2e70$var$UPSCALE=t=>t*(1<<$b7d1121d86f4637d4af87b487a4f2e70$var$BITS)>>0,$b7d1121d86f4637d4af87b487a4f2e70$var$DOWNSCALE=t=>((1-((t>>31&1)<<1))*t>>$b7d1121d86f4637d4af87b487a4f2e70$var$BITS)*(1-((t>>31&1)<<1)),$b7d1121d86f4637d4af87b487a4f2e70$export$default=$9a13317101bee2e2b4637862b0c16235$export$Class.extend({className:"Point2",ux:0,uy:0,x:0,y:0,init:function(t=null,e=null){return this.set(t,e)},downscale:function(){return this.x=$b7d1121d86f4637d4af87b487a4f2e70$var$DOWNSCALE(this.ux),this.y=$b7d1121d86f4637d4af87b487a4f2e70$var$DOWNSCALE(this.uy),this},clone:function(){return $b7d1121d86f4637d4af87b487a4f2e70$export$default.alloc().init(this)},set:function(t,e=null){return null===t?(t=0,e=0):null===e?$b7d1121d86f4637d4af87b487a4f2e70$export$default.isInstance(t)?(e=t.uy,t=t.ux):(e=$b7d1121d86f4637d4af87b487a4f2e70$var$UPSCALE(t.y),t=$b7d1121d86f4637d4af87b487a4f2e70$var$UPSCALE(t.x)):(t=$b7d1121d86f4637d4af87b487a4f2e70$var$UPSCALE(t),e=$b7d1121d86f4637d4af87b487a4f2e70$var$UPSCALE(e)),this.ux=t,this.uy=e,this.downscale(this)},setX:function(t){return this.ux=$b7d1121d86f4637d4af87b487a4f2e70$var$UPSCALE(t),this.downscale(this)},setY:function(t){return this.uy=$b7d1121d86f4637d4af87b487a4f2e70$var$UPSCALE(t),this.downscale(this)},zero:function(){return this.set(0,0)},isZero:function(){return 0==this.x&&0==this.y},equals:function(t,e=null){return null===e?$b7d1121d86f4637d4af87b487a4f2e70$export$default.isInstance(t)?(e=t.y,t=t.x):(e=int(t.y),t=int(t.x)):(t=int(t),e=int(e)),this.x==t&&this.y==e},add:function(t,e=null){return null===e?$b7d1121d86f4637d4af87b487a4f2e70$export$default.isInstance(t)?(e=t.uy,t=t.ux):(e=$b7d1121d86f4637d4af87b487a4f2e70$var$UPSCALE(t.y),t=$b7d1121d86f4637d4af87b487a4f2e70$var$UPSCALE(t.x)):(t=$b7d1121d86f4637d4af87b487a4f2e70$var$UPSCALE(t),e=$b7d1121d86f4637d4af87b487a4f2e70$var$UPSCALE(e)),this.ux+=t,this.uy+=e,this.downscale()},sub:function(t,e){return null===e?$b7d1121d86f4637d4af87b487a4f2e70$export$default.isInstance(t)?(e=t.uy,t=t.ux):(e=$b7d1121d86f4637d4af87b487a4f2e70$var$UPSCALE(t.y),t=$b7d1121d86f4637d4af87b487a4f2e70$var$UPSCALE(t.x)):(t=$b7d1121d86f4637d4af87b487a4f2e70$var$UPSCALE(t),e=$b7d1121d86f4637d4af87b487a4f2e70$var$UPSCALE(e)),this.ux-=t,this.uy-=e,this.downscale()},toString:function(){return`(${this.x}, ${this.y})`}});$676b148d00bde05a65142d5a5b8bf91f$export$default.attachTo($b7d1121d86f4637d4af87b487a4f2e70$export$default,1024);const $7c24fbc0cd5f24a2e238b3d18e22ccd0$var$BITS=4,$7c24fbc0cd5f24a2e238b3d18e22ccd0$var$UPSCALE=t=>t*(1<<$7c24fbc0cd5f24a2e238b3d18e22ccd0$var$BITS)>>0,$7c24fbc0cd5f24a2e238b3d18e22ccd0$var$DOWNSCALE=t=>((1-((t>>31&1)<<1))*t>>$7c24fbc0cd5f24a2e238b3d18e22ccd0$var$BITS)*(1-((t>>31&1)<<1)),$7c24fbc0cd5f24a2e238b3d18e22ccd0$export$default=$9a13317101bee2e2b4637862b0c16235$export$Class.extend({className:"Bounds2",cx:0,cy:0,x1:0,y1:0,x2:0,y2:0,ucx:0,ucy:0,ux1:0,uy1:0,ux2:0,uy2:0,init:function(t=null,e=null,a=null,i=null,r=!1){return null===t?(this.ux1=this.uy1=this.ux2=this.uy2=this.ucx=this.ucy=0,this.downscale()):null!==e&&null===a?this.set(0,0,0,0).resize(t,e):this.set(t,e,a,i,r)},downscale:function(){return this.x1=$7c24fbc0cd5f24a2e238b3d18e22ccd0$var$DOWNSCALE(this.ux1),this.y1=$7c24fbc0cd5f24a2e238b3d18e22ccd0$var$DOWNSCALE(this.uy1),this.x2=$7c24fbc0cd5f24a2e238b3d18e22ccd0$var$DOWNSCALE(this.ux2),this.y2=$7c24fbc0cd5f24a2e238b3d18e22ccd0$var$DOWNSCALE(this.uy2),this.cx=$7c24fbc0cd5f24a2e238b3d18e22ccd0$var$DOWNSCALE(this.ucx),this.cy=$7c24fbc0cd5f24a2e238b3d18e22ccd0$var$DOWNSCALE(this.ucy),this},clone:function(){return $7c24fbc0cd5f24a2e238b3d18e22ccd0$export$default.alloc().init(this.ux1,this.uy1,this.ux2,this.uy2,!0)},zero:function(){return this.ux1=0,this.uy1=0,this.ux2=0,this.uy2=0,this.ucx=0,this.ucy=0,this.downscale()},reset:function(){return this.ux1=null,this.uy1=null,this.ux2=null,this.uy2=null,this.ucx=null,this.ucy=null,this.x1=null,this.y1=null,this.x2=null,this.y2=null,this.cx=null,this.cy=null,this},translate:function(t,e=null,a=!1){return null===e?$b7d1121d86f4637d4af87b487a4f2e70$export$default.isInstance(t)?(e=t.uy,t=t.ux):(e=$7c24fbc0cd5f24a2e238b3d18e22ccd0$var$UPSCALE(t.y),t=$7c24fbc0cd5f24a2e238b3d18e22ccd0$var$UPSCALE(t.x)):a||(t=$7c24fbc0cd5f24a2e238b3d18e22ccd0$var$UPSCALE(t),e=$7c24fbc0cd5f24a2e238b3d18e22ccd0$var$UPSCALE(e)),this.ux1+=t,this.uy1+=e,this.ux2+=t,this.uy2+=e,this.ucx+=t,this.ucy+=e,this.downscale()},set:function(t,e=null,a=null,i=null,r=!1){return null===e?$7c24fbc0cd5f24a2e238b3d18e22ccd0$export$default.isInstance(t)?(i=t.uy2,a=t.ux2,e=t.uy1,t=t.ux1):(i=$7c24fbc0cd5f24a2e238b3d18e22ccd0$var$UPSCALE(t.y2),a=$7c24fbc0cd5f24a2e238b3d18e22ccd0$var$UPSCALE(t.x2),e=$7c24fbc0cd5f24a2e238b3d18e22ccd0$var$UPSCALE(t.y1),t=$7c24fbc0cd5f24a2e238b3d18e22ccd0$var$UPSCALE(t.x1)):r||(t=$7c24fbc0cd5f24a2e238b3d18e22ccd0$var$UPSCALE(t),e=$7c24fbc0cd5f24a2e238b3d18e22ccd0$var$UPSCALE(e),a=$7c24fbc0cd5f24a2e238b3d18e22ccd0$var$UPSCALE(a),i=$7c24fbc0cd5f24a2e238b3d18e22ccd0$var$UPSCALE(i)),this.ux1=t,this.uy1=e,this.ux2=a,this.uy2=i,this.ucx=t+a>>1,this.ucy=e+i>>1,this.downscale()},equals:function(t,e=null,a=null,i=null){return null===e?$7c24fbc0cd5f24a2e238b3d18e22ccd0$export$default.isInstance(t)?(i=t.y2,a=t.x2,e=t.y1,t=t.x1):(i=int(t.y2),a=int(t.x2),e=int(t.y1),t=int(t.x1)):(t=int(t),e=int(e),a=int(a),i=int(i)),t==this.x1&&a==this.x2&&e==this.y1&&i==this.y2},contains:function(t,e=null,a=null,i=null){return null===e?$7c24fbc0cd5f24a2e238b3d18e22ccd0$export$default.isInstance(t)?(i=t.y2,a=t.x2,e=t.y1,t=t.x1):(i=int(t.y2),a=int(t.x2),e=int(t.y1),t=int(t.x1)):(t=int(t),e=int(e),a=int(a),i=int(i)),t==Math.max(this.x1,t)&&e==Math.max(this.y1,e)&&a==Math.min(this.x2,a)&&i==Math.min(this.y2,i)},setAsUnion:function(t,e=null,a=null,i=null){if(null===e){if($7c24fbc0cd5f24a2e238b3d18e22ccd0$export$default.isInstance(t))return this.setAsUnion(t.ux1,t.uy1,!0),this.setAsUnion(t.ux2,t.uy2,!0),this;if($79348bb5e8be132355fb58346e1088e3$export$default.isInstance(t))return this.setAsUnion(t.x1,t.y1),this.setAsUnion(t.x2,t.y2),this;$b7d1121d86f4637d4af87b487a4f2e70$export$default.isInstance(t)?(e=t.uy,t=t.ux):(e=$7c24fbc0cd5f24a2e238b3d18e22ccd0$var$UPSCALE(t.y),t=$7c24fbc0cd5f24a2e238b3d18e22ccd0$var$UPSCALE(t.x))}else{if(null!==i)return this.setAsUnion(t,e),this.setAsUnion(a,i),this;!0!==a&&(t=$7c24fbc0cd5f24a2e238b3d18e22ccd0$var$UPSCALE(t),e=$7c24fbc0cd5f24a2e238b3d18e22ccd0$var$UPSCALE(e))}return(null===this.ux1||t<this.ux1)&&(this.ux1=t),(null===this.uy1||e<this.uy1)&&(this.uy1=e),(null===this.ux2||t>this.ux2)&&(this.ux2=t),(null===this.uy2||e>this.uy2)&&(this.uy2=e),this.ucx=this.ux1+this.ux2>>1,this.ucy=this.uy1+this.uy2>>1,this.downscale()},intersects:function(t,e=null,a=null,i=null){null===e?$7c24fbc0cd5f24a2e238b3d18e22ccd0$export$default.isInstance(t)?(i=t.y2,a=t.x2,e=t.y1,t=t.x1):(i=int(t.y2),a=int(t.x2),e=int(t.y1),t=int(t.x1)):(t=int(t),e=int(e),a=int(a),i=int(i));let r=Math.max(this.x1,t),n=Math.max(this.y1,e),s=Math.min(this.x2,a),f=Math.min(this.y2,i);return Math.max(0,f-n)*Math.max(0,s-r)>0},setAsIntersection:function(t,e=null,a=null,i=null){return null===e?$7c24fbc0cd5f24a2e238b3d18e22ccd0$export$default.isInstance(t)?(i=t.y2,a=t.x2,e=t.y1,t=t.x1):(i=int(t.y2),a=int(t.x2),e=int(t.y1),t=int(t.x1)):(t=int(t),e=int(e),a=int(a),i=int(i)),this.ux1=$7c24fbc0cd5f24a2e238b3d18e22ccd0$var$UPSCALE(Math.max(this.x1,t)),this.uy1=$7c24fbc0cd5f24a2e238b3d18e22ccd0$var$UPSCALE(Math.max(this.y1,e)),this.ux2=$7c24fbc0cd5f24a2e238b3d18e22ccd0$var$UPSCALE(Math.min(this.x2,a)),this.uy2=$7c24fbc0cd5f24a2e238b3d18e22ccd0$var$UPSCALE(Math.min(this.y2,i)),this.ucx=this.ux1+this.ux2>>1,this.ucy=this.uy1+this.uy2>>1,this.downscale(),Math.max(0,this.uy2-this.uy1)*Math.max(0,this.ux2-this.ux1)>0},resize:function(t,e,a=!1){return t=$7c24fbc0cd5f24a2e238b3d18e22ccd0$var$UPSCALE(t),e=$7c24fbc0cd5f24a2e238b3d18e22ccd0$var$UPSCALE(e),!0===a?(this.ux2=this.ux1+t,this.uy2=this.uy1+e,this.ucx=this.ux1+this.ux2>>1,this.ucy=this.uy1+this.uy2>>1):(t>>=1,e>>=1,this.ux1=this.ucx-t,this.uy1=this.ucy-e,this.ux2=this.ucx+t,this.uy2=this.ucy+e),this.downscale()},resizeBy:function(t,e,a=!1){return t=$7c24fbc0cd5f24a2e238b3d18e22ccd0$var$UPSCALE(t),e=$7c24fbc0cd5f24a2e238b3d18e22ccd0$var$UPSCALE(e),!0===a?(this.ux2+=t,this.uy2+=e,this.ucx=this.ux1+this.ux2>>1,this.ucy=this.uy1+this.uy2>>1):(t>>=1,e>>=1,this.ux1-=t,this.uy1-=e,this.ux2+=t,this.uy2+=e),this.downscale()},width:function(){return this.x2-this.x1},height:function(){return this.y2-this.y1},isForward:function(){return this.ux1<=this.ux2&&this.uy1<=this.uy2},containsPoint:function(t,e,a=0){return t=$7c24fbc0cd5f24a2e238b3d18e22ccd0$var$UPSCALE(t),e=$7c24fbc0cd5f24a2e238b3d18e22ccd0$var$UPSCALE(e),a=$7c24fbc0cd5f24a2e238b3d18e22ccd0$var$UPSCALE(a),this.ux1-a<=t&&t<=this.ux2+a&&this.uy1-a<=e&&e<=this.uy2+a},area:function(t=!1){return t?this.isForward()?(this.y2-this.y1)*(this.x2-this.x1):0:(this.y2-this.y1)*(this.x2-this.x1)},toString:function(){return"("+this.x1+", "+this.y1+", "+this.x2+", "+this.y2+")"},flatten:function(){return[this.ux1,this.uy1,this.ux2,this.uy2]},unflatten:function(t){return this.ux1=t[0],this.uy1=t[1],this.ux2=t[2],this.uy2=t[3],this.ucx=this.ux1+this.ux2>>1,this.ucy=this.uy1+this.uy2>>1,this.downscale()}});$676b148d00bde05a65142d5a5b8bf91f$export$default.attachTo($7c24fbc0cd5f24a2e238b3d18e22ccd0$export$default,8192);const $d8d8bd3f6fe14b632a3bc26ff6fa490c$export$default={Linear:{IN:function(t){return t},OUT:function(t){return t},IN_OUT:function(t){return t}},Back:{k:1.70158,IN:function(t,e){return void 0===e&&(e=$d8d8bd3f6fe14b632a3bc26ff6fa490c$export$default.Back.k),t*t*((e+1)*t-e)},OUT:function(t,e){return 1-$d8d8bd3f6fe14b632a3bc26ff6fa490c$export$default.Back.IN(1-t,e)},IN_OUT:function(t,e){return t<.5?$d8d8bd3f6fe14b632a3bc26ff6fa490c$export$default.Back.IN(2*t,e)/2:$d8d8bd3f6fe14b632a3bc26ff6fa490c$export$default.Back.OUT(2*(t-.5),e)/2+.5}},Bounce:{getConst:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},IN:function(t){return 1-$d8d8bd3f6fe14b632a3bc26ff6fa490c$export$default.Bounce.getConst(1-t)},OUT:function(t){return $d8d8bd3f6fe14b632a3bc26ff6fa490c$export$default.Bounce.getConst(t)},IN_OUT:function(t){return t<.5?(1-$d8d8bd3f6fe14b632a3bc26ff6fa490c$export$default.Bounce.getConst(1-2*t))/2:$d8d8bd3f6fe14b632a3bc26ff6fa490c$export$default.Bounce.getConst(2*(t-.5))/2+.5}},Circ:{IN:function(t){return 1-Math.sqrt(1-t*t)},OUT:function(t){return 1-$d8d8bd3f6fe14b632a3bc26ff6fa490c$export$default.Circ.IN(1-t)},IN_OUT:function(t){return t<.5?$d8d8bd3f6fe14b632a3bc26ff6fa490c$export$default.Circ.IN(2*t)/2:$d8d8bd3f6fe14b632a3bc26ff6fa490c$export$default.Circ.OUT(2*(t-.5))/2+.5}},Cubic:{IN:function(t){return t*t*t},OUT:function(t){return 1-$d8d8bd3f6fe14b632a3bc26ff6fa490c$export$default.Cubic.IN(1-t)},IN_OUT:function(t){return t<.5?$d8d8bd3f6fe14b632a3bc26ff6fa490c$export$default.Cubic.IN(2*t)/2:$d8d8bd3f6fe14b632a3bc26ff6fa490c$export$default.Cubic.OUT(2*(t-.5))/2+.5}},Expo:{IN:function(t){return Math.pow(2,12*(t-1))},OUT:function(t){return 1-Math.pow(2,-12*t)},IN_OUT:function(t){return(t*=2)<1?Math.pow(2,12*(t-1))/2:(2-Math.pow(2,-12*(t-1)))/2}},Power:{p:12,IN:function(t){return Math.pow(t,$d8d8bd3f6fe14b632a3bc26ff6fa490c$export$default.Power.p)},OUT:function(t){return 1-$d8d8bd3f6fe14b632a3bc26ff6fa490c$export$default.Power.IN(1-t)},IN_OUT:function(t){return t<.5?$d8d8bd3f6fe14b632a3bc26ff6fa490c$export$default.Power.IN(2*t)/2:$d8d8bd3f6fe14b632a3bc26ff6fa490c$export$default.Power.OUT(2*(t-.5))/2+.5}},Quad:{IN:function(t){return t*t},OUT:function(t){return 1-$d8d8bd3f6fe14b632a3bc26ff6fa490c$export$default.Quad.IN(1-t)},IN_OUT:function(t){return t<.5?$d8d8bd3f6fe14b632a3bc26ff6fa490c$export$default.Quad.IN(2*t)/2:$d8d8bd3f6fe14b632a3bc26ff6fa490c$export$default.Quad.OUT(2*(t-.5))/2+.5}},Quartic:{IN:function(t){return t*t*t*t},OUT:function(t){return 1-$d8d8bd3f6fe14b632a3bc26ff6fa490c$export$default.Quartic.IN(1-t)},IN_OUT:function(t){return t<.5?$d8d8bd3f6fe14b632a3bc26ff6fa490c$export$default.Quartic.IN(2*t)/2:$d8d8bd3f6fe14b632a3bc26ff6fa490c$export$default.Quartic.OUT(2*(t-.5))/2+.5}},Quintic:{IN:function(t){return t*t*t*t*t},OUT:function(t){return 1-$d8d8bd3f6fe14b632a3bc26ff6fa490c$export$default.Quintic.IN(1-t)},IN_OUT:function(t){return t<.5?$d8d8bd3f6fe14b632a3bc26ff6fa490c$export$default.Quintic.IN(2*t)/2:$d8d8bd3f6fe14b632a3bc26ff6fa490c$export$default.Quintic.OUT(2*(t-.5))/2+.5}},Sine:{IN:function(t){return 1-Math.sin(1.5708*(1-t))},OUT:function(t){return Math.sin(1.5708*t)},IN_OUT:function(t){return(Math.cos(3.1416*t)-1)/-2}},Step:{IN:function(t){return 1!=t?0:1},OUT:function(t){return 1!=t?0:1},IN_OUT:function(t){return 1!=t?0:1}}},$f65d67db29f2427831d81be81c53d92c$var$PARALLEL={init:function(t,e=!1){if(!e)return t.block=$f65d67db29f2427831d81be81c53d92c$var$Block.calloc(),void(t.blocks=$31e77c88cc6920b604cc8697a03a7b4c$export$default.calloc());let a;for(;null!=(a=t.block.commands.shift());){let e=$f65d67db29f2427831d81be81c53d92c$var$Block.calloc();e.add(a),t.blocks.push(e)}t.block.free(),t.block=null},update:function(t,e,a){if(!1===a.started){for(let t=a.blocks.top;null!==t;t=t.next)t.value.reset(e.time);a.started=!0}let i=e.time,r=0,n=0;for(let e=a.blocks.top;null!==e;e=e.next){let a=e.value.update(t);!0===a?r++:null===a&&n++,e.value.time>i&&(i=e.value.time)}return r+n==a.blocks.length&&(a.started=!1,e.time=i,!0)}},$f65d67db29f2427831d81be81c53d92c$var$SERIAL={init:function(t,e=!1){e||(t.block=$f65d67db29f2427831d81be81c53d92c$var$Block.calloc())},update:function(t,e,a){!1===a.started&&(a.block.reset(e.time),a.started=!0);let i=a.block.update(t);return!0!==i?i:(a.started=!1,e.time=a.block.time,!0)}},$f65d67db29f2427831d81be81c53d92c$var$REPEAT={init:function(t,e=!1){e||(t.block=$f65d67db29f2427831d81be81c53d92c$var$Block.calloc())},update:function(t,e,a){!1===a.started&&(a.block.reset(e.time),a._count=a.count,a.started=!0);let i=a.block.update(t);return!0!==i?i:a._count<=1?(a.started=!1,e.time=a.block.time,!0):(a.block.restart(),a._count--,!1)}},$f65d67db29f2427831d81be81c53d92c$var$SET={init:function(t,e=!1){},update:function(t,e,a){return t.setValue(a.field,t.getValue(a.field,a.value)),!0}},$f65d67db29f2427831d81be81c53d92c$var$RESTART={init:function(t,e=!1){},update:function(t,e,a){return e.restart(),!0}},$f65d67db29f2427831d81be81c53d92c$var$WAIT={init:function(t,e=!1){},update:function(t,e,a){return!1===a.started&&(a._duration="string"===$9a13317101bee2e2b4637862b0c16235$export$Rin.typeOf(a.duration)?t.getValue(a.duration):a.duration,a.started=!0),!(t.time<e.time+a._duration)&&(a.started=!1,e.time+=a._duration,!0)}},$f65d67db29f2427831d81be81c53d92c$var$RANGE={init:function(t,e=!1){},update:function(t,e,a){!1===a.started&&(a._startValue=t.getValue(a.field,a.startValue),a._duration="string"===$9a13317101bee2e2b4637862b0c16235$export$Rin.typeOf(a.duration)?t.getValue(a.duration):a.duration,a.started=!0),a._endValue=t.getValue(a.field,a.endValue,a._startValue);let i=1;return t.time<e.time+a._duration&&(i=(t.time-e.time)/a._duration),a.easing&&1!=i?t.setValue(a.field,a.easing(i)*(a._endValue-a._startValue)+a._startValue):t.setValue(a.field,i*(a._endValue-a._startValue)+a._startValue),1==i&&(a.started=!1,e.time+=a._duration,!0)}},$f65d67db29f2427831d81be81c53d92c$var$RAND={init:function(t,e=!1){},update:function(t,e,a){!1===a.started&&(a._duration="string"===$9a13317101bee2e2b4637862b0c16235$export$Rin.typeOf(a.duration)?t.getValue(a.duration):a.duration,a._last=null,a.started=!0);let r=1;if(t.time<e.time+a._duration&&(r=(t.time-e.time)/a._duration),a.easing&&1!=r?a._cur=int(a.easing(r)*a.count):a._cur=int(r*a.count),a._cur!=a._last){let e=t.getValue(a.field);for(;;){if(int(Math.random()*(a.endValue-a.startValue+1))+a.startValue!=e)break}t.setValue(a.field,i),a._last=a._cur}return 1==r&&(a.started=!1,e.time+=a._duration,!0)}},$f65d67db29f2427831d81be81c53d92c$var$RANDT={init:function(t,e=!1){if(!e)return;let a=[];for(let e=0;e<t.count;e++)a.push(e%(t.endValue-t.startValue+1)+t.startValue);for(let e=t.count>>2;e>0;e--){let e=int(Math.random()*t.count),i=int(Math.random()*t.count),r=a[i];a[i]=a[e],a[e]=r}t.table=a},update:function(t,e,a){!1===a.started&&(a._duration="string"===$9a13317101bee2e2b4637862b0c16235$export$Rin.typeOf(a.duration)?t.getValue(a.duration):a.duration,a.started=!0);let i,r=1;return t.time<e.time+a._duration&&(r=(t.time-e.time)/a._duration),i=a.easing&&1!=r?a.easing(r)*(a.count-1):r*(a.count-1),t.setValue(a.field,a.table[int((i+a.count)%a.count)]),1==r&&(a.started=!1,e.time+=a._duration,!0)}},$f65d67db29f2427831d81be81c53d92c$var$PLAY={init:function(t,e=!1){},update:function(t,e,a){return a.snd.play(),!0}},$f65d67db29f2427831d81be81c53d92c$var$EXEC={init:function(t,e=!1){},update:function(t,e,a){!1===a.started&&(a._last=t.time,a.started=!0);let i=t.time-a._last;a._last=t.time;let r=a.fn(i,t.data,t);return!0===r?(a.started=!1,!0):r}},$f65d67db29f2427831d81be81c53d92c$var$Block=$9a13317101bee2e2b4637862b0c16235$export$Class.extend({className:"Anim_Block",commands:null,first:!0,current:!1,time:0,init:function(){return this.commands=$31e77c88cc6920b604cc8697a03a7b4c$export$default.calloc(),this.reset(0),this},__dtor:function(){this.clear(),this.commands.free()},add:function(t){return this.commands.push(t),t},clone:function(){throw new Error("NOT IMPLEMENTED CLONE ON ANIM")},clear:function(){return this.commands.clear(),this.reset(0),this},reset:function(t){return this.first=!0,this.current=null,this.time=t,this},restart:function(){return this.first=!0,this},isFinished:function(){return!0===this.first&&(this.current=this.commands.top,this.first=!1),null===this.current},update:function(t){for(;!this.isFinished();){let e=this.current.value.update(t,this);if(!0!==e)return e;this.current=this.current.next}return!0}});$676b148d00bde05a65142d5a5b8bf91f$export$default.attachTo($f65d67db29f2427831d81be81c53d92c$var$Block,8192);const $f65d67db29f2427831d81be81c53d92c$var$Command=$9a13317101bee2e2b4637862b0c16235$export$Class.extend({className:"Anim_Command",op:null,started:!1,field:null,value:null,duration:0,_duration:0,count:0,_count:0,startValue:0,_startValue:0,endValue:0,_endValue:0,easing:null,_cur:null,_last:null,block:null,blocks:null,table:null,snd:null,fn:null,init:function(t){return this.op=t,this.started=!1,this.block=null,this.blocks=null,this.table=null,this.snd=null,this.fn=null,t.init(this,!1),this},__dtor:function(){null!==this.block&&this.block.clear().free(),null!==this.blocks&&this.blocks.clear().free()},ready:function(){this.op.init(this,!0)},update:function(t,e){return this.op.update(t,e,this)}});$676b148d00bde05a65142d5a5b8bf91f$export$default.attachTo($f65d67db29f2427831d81be81c53d92c$var$Command);const $f65d67db29f2427831d81be81c53d92c$export$default=$9a13317101bee2e2b4637862b0c16235$export$Class.extend({className:"Anim",initialData:null,data:null,blockStack:null,cmdStack:null,timeScale:1,block:null,time:0,paused:!1,finished:!1,finishedCallback:null,finishedCallbackHandler:null,finishedCallbackContext:null,init:function(){return this.initialData={},this.data={},this.block=$f65d67db29f2427831d81be81c53d92c$var$Block.calloc(),this.blockStack=$31e77c88cc6920b604cc8697a03a7b4c$export$default.calloc(),this.cmdStack=$31e77c88cc6920b604cc8697a03a7b4c$export$default.calloc(),this.reset()},__dtor:function(){this.block.free(),this.blockStack.clear().free(),this.cmdStack.clear().free(),null!==this.finishedCallbackHandler&&this.finishedCallbackHandler.free(),null!==this.finishedCallbackContext&&this.finishedCallbackContext.free()},copyTo:function(t){return t.block=this.block.clone(),t.initialData=this.initialData,t.reset()},onFinished:function(t){return this.finishedCallback=t,this},then:function(t,e=null){return this.finishedCallback!==this.thenCallback&&(this.finishedCallback=this.thenCallback,null===this.finishedCallbackHandler?(this.finishedCallbackHandler=$31e77c88cc6920b604cc8697a03a7b4c$export$default.calloc(),this.finishedCallbackContext=$31e77c88cc6920b604cc8697a03a7b4c$export$default.calloc()):(this.finishedCallbackHandler.reset(),this.finishedCallbackContext.reset())),this.finishedCallbackHandler.push(t),this.finishedCallbackContext.push(e),this},thenCallback:function(){if(!this.finishedCallbackHandler.length)return!1;let t=this.finishedCallbackContext.shift();this.finishedCallbackHandler.shift()(this,t)},clear:function(){return this.blockStack.clear(),this.cmdStack.clear(),this.block.clear(),this.paused=!1,this.finished=!1,this.time=0,this},reset:function(){return this.blockStack.clear(),this.cmdStack.clear(),this.block.reset(0),this.paused=!1,this.finished=!1,this.time=0,Object.assign(this.data,this.initialData),this},initial:function(t){return this.initialData=t,this.reset()},speed:function(t){return this.timeScale=t>0?t:1,this},output:function(t){return this.data=t,this},pause:function(){return this.paused=!0,this},resume:function(){return this.finished=!1,this.paused=!1,this},setValue:function(t,e){let a=this.data;if("string"!=typeof t)if("function"==typeof t)t(this,e);else{let i=0;for(;null!==a&&i<t.length-1;)a=a[t[i++]];a[t[i]]=e}else a[t]=e},getValue:function(t,e=null,a=null){let i=this.data;if("string"!=typeof t)if("function"==typeof t)i=t(this,null);else{let e=0;for(;null!==i&&e<t.length;)i=i[t[e++]]}else i=i[t];if(null===e&&(e=i),null===a&&(a=i),"string"==typeof e)switch(e[0]){case"+":e=a+Number(e.substr(1));break;case"-":e=a-Number(e.substr(1));break;default:e=Number(e)}else"function"==typeof e&&(e=e(i,a,this));return e},update:function(t){if(this.paused||this.block.isFinished())return!0;if(this.time+=t*this.timeScale*$f65d67db29f2427831d81be81c53d92c$export$default.timeScale,!0!==this.block.update(this))return!1;let e=this.finished,a=this.block.length,i=this.block;return this.finished=!0,!(!e&&null!==this.finishedCallback&&(!1===this.finishedCallback(this.data,this)&&(this.finishedCallback=null),this.block!==i||this.block.length!=a))||(this.resume(),!1)},prepareFieldName:function(t){return"function"==typeof t?t:-1!=t.indexOf(".")?t.split("."):t},parallel:function(){let t=this.block.add($f65d67db29f2427831d81be81c53d92c$var$Command.alloc().init($f65d67db29f2427831d81be81c53d92c$var$PARALLEL));return this.blockStack.push(this.block),this.cmdStack.push(t),this.block=t.block,this},serial:function(){let t=this.block.add($f65d67db29f2427831d81be81c53d92c$var$Command.alloc().init($f65d67db29f2427831d81be81c53d92c$var$SERIAL));return this.blockStack.push(this.block),this.cmdStack.push(t),this.block=t.block,this},repeat:function(t){let e=this.block.add($f65d67db29f2427831d81be81c53d92c$var$Command.alloc().init($f65d67db29f2427831d81be81c53d92c$var$REPEAT));return e.count=t,this.blockStack.push(this.block),this.cmdStack.push(e),this.block=e.block,this},end:function(){return this.cmdStack.pop().ready(),this.block=this.blockStack.pop(),this},set:function(t,e){let a=this.block.add($f65d67db29f2427831d81be81c53d92c$var$Command.alloc().init($f65d67db29f2427831d81be81c53d92c$var$SET));return a.field=this.prepareFieldName(t),a.value=e,this},restart:function(){return this.block.add($f65d67db29f2427831d81be81c53d92c$var$Command.alloc().init($f65d67db29f2427831d81be81c53d92c$var$RESTART)),this},wait:function(t){return this.block.add($f65d67db29f2427831d81be81c53d92c$var$Command.alloc().init($f65d67db29f2427831d81be81c53d92c$var$WAIT)).duration=t,this},range:function(t,e,a,i,r=null){let n=this.block.add($f65d67db29f2427831d81be81c53d92c$var$Command.alloc().init($f65d67db29f2427831d81be81c53d92c$var$RANGE));return n.field=this.prepareFieldName(t),n.duration=e,n.startValue=a,n.endValue=i,n.easing=r,this},rand:function(t,e,a,i,r,n=null){let s=this.block.add($f65d67db29f2427831d81be81c53d92c$var$Command.alloc().init($f65d67db29f2427831d81be81c53d92c$var$RAND));return s.field=this.prepareFieldName(t),s.duration=e,s.count=a,s.startValue=i,s.endValue=r,s.easing=n,this},randt:function(t,e,a,i,r,n){let s=this.block.add($f65d67db29f2427831d81be81c53d92c$var$Command.alloc().init($f65d67db29f2427831d81be81c53d92c$var$RANDT));return s.field=this.prepareFieldName(t),s.duration=e,s.count=a,s.startValue=i,s.endValue=r,s.easing=n,s.ready(),this},play:function(t){return this.block.add($f65d67db29f2427831d81be81c53d92c$var$Command.alloc().init($f65d67db29f2427831d81be81c53d92c$var$PLAY)).snd=t,this},exec:function(t){return this.block.add($f65d67db29f2427831d81be81c53d92c$var$Command.alloc().init($f65d67db29f2427831d81be81c53d92c$var$EXEC)).fn=t,this},_bounds_x1:function(t,e){if(null===e)return t.data.bounds.x1;t.data.translate(int(e)-t.data.bounds.x1,0)},_bounds_y1:function(t,e){if(null===e)return t.data.bounds.y1;t.data.translate(0,int(e)-t.data.bounds.y1)},setX:function(t){return this.set(this._bounds_x1,t)},setY:function(t){return this.set(this._bounds_y1,t)},position:function(t,e){return this.set(this._bounds_x1,t).set(this._bounds_y1,e)},translateX:function(t,e,a){return this.range(this._bounds_x1,t,null,(e<0?"-":"+")+Math.abs(e),a)},translateY:function(t,e,a){return this.range(this._bounds_y1,t,null,(e<0?"-":"+")+Math.abs(e),a)},translate:function(t,e,a,i,r=null){return this.parallel().range(this._bounds_x1,t,null,(e<0?"-":"+")+Math.abs(e),i).range(this._bounds_y1,t,null,(a<0?"-":"+")+Math.abs(a),r||i).end()},moveTo:function(t,e,a,i,r=null){return this.parallel().range(this._bounds_x1,t,null,e,i).range(this._bounds_y1,t,null,a,r||i).end()},moveX:function(t,e,a=null){return this.range(this._bounds_x1,t,null,e,a)},moveY:function(t,e,a=null){return this.range(this._bounds_y1,t,null,e,a)},scaleX:function(t,e,a){return this.range("sx",t,null,e,a)},scaleY:function(t,e,a){return this.range("sy",t,null,e,a)},scale:function(t,e,a,i,r=null){return this.parallel().range("sx",t,null,e,i).range("sy",t,null,a,r||i).end()},rotate:function(t,e,a){return this.range("angle",t,null,(e<0?"-":"+")+Math.abs(e),a)}});$f65d67db29f2427831d81be81c53d92c$export$default.timeScale=1,$f65d67db29f2427831d81be81c53d92c$export$default.speed=function(t){$f65d67db29f2427831d81be81c53d92c$export$default.timeScale=t>0?t:1},$676b148d00bde05a65142d5a5b8bf91f$export$default.attachTo($f65d67db29f2427831d81be81c53d92c$export$default,8192);const $d3d792bef6f1f9035a94064efa8fb2c8$export$default={modules:new $761d290cf3c7f70d27120f82a7918e29$export$default,register:function(t){return this.modules.add(t)},unregister:function(t){this.modules.remove(t),this.modules.cleanup()},startup:function(t=null){this.modules.forEachAsync(((t,e)=>{!1!==t.onStartup(e)&&e()}),t)},shutdown:function(t=null){this.modules.forEachAsyncRev(((t,e)=>{!1!==t.onShutdown(e)&&e()}),t)}};$d3d792bef6f1f9035a94064efa8fb2c8$export$default.Module=$9a13317101bee2e2b4637862b0c16235$export$Class.extend({className:"Module",priority:5,__ctor:function(){$d3d792bef6f1f9035a94064efa8fb2c8$export$default.register(this)},__dtor:function(){$d3d792bef6f1f9035a94064efa8fb2c8$export$default.unregister(this)},onStartup:function(t){},onShutdown:function(t){}});const $1f321ec717828b012411561cd48311f2$export$default=$9a13317101bee2e2b4637862b0c16235$export$Class.extend({className:"GridElement",id:null,bounds:null,zvalue:0,flags:0,tag:null,container:null,_grid_remove_node:null,remover:null,__ctor:function(t,e,a,i){this.bounds=$7c24fbc0cd5f24a2e238b3d18e22ccd0$export$default.calloc(),this.bounds.translate(t,e),this.bounds.resize(a,i,!0),this.flags=$1f321ec717828b012411561cd48311f2$export$default.ALIVE|$1f321ec717828b012411561cd48311f2$export$default.VISIBLE|$1f321ec717828b012411561cd48311f2$export$default.DIRTY,this.tag=null,this.remover=$ddb59e07af6f4d6f63ac124d8ae48842$export$default.alloc().init(this)},__dtor:function(){this.alive(!1),this.remover.exec(),this.remover.free(),this.bounds.free()},setId:function(t){return this.id=t,this},setFlags:function(t){return this.flags|=t,this},clearFlags:function(t){return this.flags&=~t,this},getFlags:function(t){return(this.flags&t)===t},setTag:function(t){return this.tag=t,this},getTag:function(){return this.tag},visible:function(t=null){return null===t?!!(this.flags&$1f321ec717828b012411561cd48311f2$export$default.VISIBLE):(this.flags&=~$1f321ec717828b012411561cd48311f2$export$default.VISIBLE,t&&(this.flags|=$1f321ec717828b012411561cd48311f2$export$default.VISIBLE),this)},alive:function(t=null){return null===t?!!(this.flags&$1f321ec717828b012411561cd48311f2$export$default.ALIVE):(this.flags&=~$1f321ec717828b012411561cd48311f2$export$default.ALIVE,t&&(this.flags|=$1f321ec717828b012411561cd48311f2$export$default.ALIVE),this)},dirty:function(t=null){return null===t?!!(this.flags&$1f321ec717828b012411561cd48311f2$export$default.DIRTY):(this.flags&=~$1f321ec717828b012411561cd48311f2$export$default.DIRTY,t&&(this.flags|=$1f321ec717828b012411561cd48311f2$export$default.DIRTY),this)},remove:function(){return this.remover.exec(),this},sync:function(){return null!==this.container&&this.getFlags($1f321ec717828b012411561cd48311f2$export$default.ALIVE|$1f321ec717828b012411561cd48311f2$export$default.DIRTY)?(this.container.sync(this),this):this},resize:function(t,e){return this.flags|=$1f321ec717828b012411561cd48311f2$export$default.DIRTY,this.bounds.resize(t,e,!0),this},resizeBy:function(t,e){return this.resize(this.bounds.width()+t,this.bounds.height()+e)},translate:function(t,e,a=!1){return this.flags|=$1f321ec717828b012411561cd48311f2$export$default.DIRTY,this.bounds.translate(t,e,a),this},setPosition:function(t,e){return this.translate(t-this.bounds.x1,e-this.bounds.y1)}});$1f321ec717828b012411561cd48311f2$export$default.ALIVE=1,$1f321ec717828b012411561cd48311f2$export$default.VISIBLE=2,$1f321ec717828b012411561cd48311f2$export$default.DIRTY=4;const $1c4144461c156c85a375c243d61c3a37$export$default=$9a13317101bee2e2b4637862b0c16235$export$Class.extend({className:"Grid",grid:null,count:0,offsx:0,offsy:0,kx:0,ky:0,stride:0,verifyIntersection:!0,__ctor:function(t,e,a,i=null){t=1<<Math.ceil(Math.log2(t)),e=1<<Math.ceil(Math.log2(e)),this.offsx=t>>1,this.offsy=e>>1,a=Math.floor(Math.log2(a)),null===i&&(i=a),this.kx=a,this.ky=i;let r=t>>a,n=e>>i;this.grid=new Array(r*n).fill(null),this.stride=r},__dtor:function(){this.clear(),this.grid=null},clear:function(){for(let t=0;t<this.grid.length;t++){if(null===this.grid[t])continue;let e;for(;null!==(e=this.grid[t].shift());)e.remover.remove(this._remove,this),e.container=null,dispose(e);this.grid[t].free(),this.grid[t]=null}this.count=0},reset:function(){for(let t=0;t<this.grid.length;t++){if(null===this.grid[t])continue;let e;for(;null!==(e=this.grid[t].shift());)e.remover.remove(this._remove,this),e.container=null;this.grid[t].free(),this.grid[t]=null}this.count=0},add:function(t){if(!$1f321ec717828b012411561cd48311f2$export$default.isInstance(t))throw new Error("argument must be a GridElement");let e=int(t.bounds.y1+this.offsy>>this.ky)*this.stride+int(t.bounds.x1+this.offsx>>this.kx);return!(e<0||e>=this.grid.length)&&(null===this.grid[e]&&(this.grid[e]=$31e77c88cc6920b604cc8697a03a7b4c$export$default.calloc()),this.grid[e].push(t),this.count++,t.container=this,t._grid_remove_node=t.remover.add(this._remove,this,e,this.grid[e].bottom),!0)},_remove:function(t,e,a,i){return e.grid[a].remove(i),e.count--,t.container=null,!1},remove:function(t){return t.remover.execc(this._grid_remove_node),t},sync:function(t){t.clearFlags($1f321ec717828b012411561cd48311f2$export$default.DIRTY);let e=t._grid_remove_node,a=int(t.bounds.y1+this.offsy>>this.ky)*this.stride+int(t.bounds.x1+this.offsx>>this.kx);return a<0||a>=this.grid.length?(t.remover.execc(e),!1):(e.arg1===a||(this.grid[e.arg1].remove(e.arg2),null===this.grid[a]&&(this.grid[a]=$31e77c88cc6920b604cc8697a03a7b4c$export$default.calloc()),this.grid[a].push(t),e.arg1=a,e.arg2=this.grid[a].bottom),!0)},forEachInRegion:function(t,e,a,i){let r=(t.y1+this.offsy-(1<<this.ky-1)>>this.ky)*this.stride,n=(t.y2+this.offsy+(1<<this.ky-1)>>this.ky)*this.stride,s=t.x1+this.offsx-(1<<this.kx-1)>>this.kx,f=t.x2+this.offsx+(1<<this.kx-1)>>this.kx,o=this.grid.length-1;r<0&&(r=0),n<0&&(n=0),s<0&&(s=0),f<0&&(f=0),r>o&&(r=o),n>o&&(n=o),s>o&&(s=o),f>o&&(f=o);for(let o=r;o<=n;o+=this.stride)for(let d=s;d<=f;d++){let l=o+d;if(null!==this.grid[l])for(let c=this.grid[l].top;c;c=c.next)if(c.value.getFlags(e)&&(!this.verifyIntersection||!(o<=r+1||d<=s+1||o>=n-1||d>=f-1)||c.value.bounds.intersects(t))&&!1===a(c.value,i))return}},selectInRegion:function(t,e){let a=(t.y1+this.offsy-(1<<this.ky-1)>>this.ky)*this.stride,i=(t.y2+this.offsy+(1<<this.ky-1)>>this.ky)*this.stride,r=t.x1+this.offsx-(1<<this.kx-1)>>this.kx,n=t.x2+this.offsx+(1<<this.kx-1)>>this.kx,s=this.grid.length-1;a<0&&(a=0),i<0&&(i=0),r<0&&(r=0),n<0&&(n=0),a>s&&(a=s),i>s&&(i=s),r>s&&(r=s),n>s&&(n=s);let f=$31e77c88cc6920b604cc8697a03a7b4c$export$default.calloc();for(let s=a;s<=i;s+=this.stride)for(let o=r;o<=n;o++){let d=s+o;if(null!==this.grid[d])for(let l=this.grid[d].top;l;l=l.next)l.value.getFlags(e)&&(this.verifyIntersection&&(s<=a+1||o<=r+1||s>=i-1||o>=n-1)&&!l.value.bounds.intersects(t)||f.push(l.value))}return f}}),$47e902cac8a04df854b36a7330d5cd41$export$default=$9a13317101bee2e2b4637862b0c16235$export$Class.extend({className:"Viewport",width:0,height:0,sx:0,sy:0,x:0,y:0,centerRatioX:0,centerRatioY:0,offset:null,worldX1:0,worldY1:0,worldX2:0,worldY2:0,focusFactorX:0,focusFactorY:0,focusRect:null,focusOffsX:0,focusOffsY:0,flags:0,scale:1,globalScale:1,bounds:null,focusBounds:null,screenBounds:null,__ctor:function(t,e,a,i,r,n,s,f){this.focusFactorX=null==s?.4:s,this.focusFactorY=null==f?.4:f,this.focusRect=null,this.sx=t,this.sy=e,a>r&&(a=r),i>n&&(i=n),this.width=a,this.height=i,r>>=1,n>>=1,this.worldX1=-r,this.worldY1=-n,this.worldX2=+r,this.worldY2=+n,this.bounds=$7c24fbc0cd5f24a2e238b3d18e22ccd0$export$default.alloc(),this.focusBounds=$7c24fbc0cd5f24a2e238b3d18e22ccd0$export$default.alloc(),this.screenBounds=$7c24fbc0cd5f24a2e238b3d18e22ccd0$export$default.alloc(),this.offset=$b7d1121d86f4637d4af87b487a4f2e70$export$default.alloc(),this.x=0,this.y=0,this.flags=$47e902cac8a04df854b36a7330d5cd41$export$default.ENABLED,this.updateScreenBounds(),this.updateBounds()},__dtor:function(){this.bounds.free(),this.focusBounds.free(),this.screenBounds.free()},enabled:function(t=null){return null===t?!!(this.flags&$47e902cac8a04df854b36a7330d5cd41$export$default.ENABLED):(this.flags&=~$47e902cac8a04df854b36a7330d5cd41$export$default.ENABLED,t&&(this.flags|=$47e902cac8a04df854b36a7330d5cd41$export$default.ENABLED),this)},updateBounds:function(t=!1){let e=this.width>>1,a=this.height>>1,i=e/this.scale,r=a/this.scale,n=this.x-i+this.offset.x,s=this.y-r+this.offset.y,f=this.x+i+this.offset.x,o=this.y+r+this.offset.y;t&&(n<this.worldX1?this.offset.setX(this.worldX1-this.x+i):f>this.worldX2&&this.offset.setX(this.worldX2-this.x-i),s<this.worldY1?this.offset.setY(this.worldY1-this.y+r):o>this.worldY2&&this.offset.setY(this.worldY2-this.y-r),n=this.x-i+this.offset.x,s=this.y-r+this.offset.y,f=this.x+i+this.offset.x,o=this.y+r+this.offset.y),this.bounds.set(n,s,f,o),this.focusBounds.set(this.x-(this.focusFactorX*e+this.centerRatioX*e)/this.scale,this.y-(this.focusFactorY*a+this.centerRatioY*a)/this.scale,this.x+(this.focusFactorX*e+this.centerRatioX*e)/this.scale,this.y+(this.focusFactorY*a+this.centerRatioY*a)/this.scale)},updateScreenBounds:function(){this.screenBounds.set(this.sx,this.sy,this.sx+(this.width-1),this.sy+(this.height-1))},resize:function(t,e){return this.width=t,this.height=e,this.updateScreenBounds(),this.updateBounds(),this},resizeBy:function(t,e){return this.width+=t,this.height+=e,this.updateScreenBounds(),this.updateBounds(),this},setPosition:function(t,e){return this.x=t,this.y=e,this.offset.set(0,0),this.updateBounds(),this},setOffsets:function(t,e){return this.offset.set(t,e),this.updateBounds(),this},setScale:function(t){return this.scale=t,this.updateScreenBounds(),this.updateBounds(),this},setGlobalScale:function(t){return this.globalScale=t,this},setCenter:function(t,e){return this.centerRatioX=t,this.centerRatioY=e,this},translate:function(t,e,a=!1){return this.offset.add(t,e),this.updateBounds(a),this},setScreenPosition:function(t,e){return this.sx=t,this.sy=e,this.updateScreenBounds(),this},getX:function(t=!1){return this.x+(t?0:this.offset.x)},getY:function(t=!1){return this.y+(t?0:this.offset.y)},getOffsetX:function(){return this.offset.x},getOffsetY:function(){return this.offset.y},getWidth:function(){return this.width},getHeight:function(){return this.height},getBounds:function(){return this.bounds},getScreenBounds:function(){return this.screenBounds},getFocusBounds:function(){return this.focusBounds},focusOn:function(t,e,a=null,i=null,r=null,n=null){null===r&&(r=this.focusFactorX),null===n&&(n=this.focusFactorY),null===a&&(a=t),null===i&&(i=e);let s=this.width>>1,f=this.height>>1,o=this.x-int((r*s+this.centerRatioX*s)/this.scale),d=this.x+int((r*s+this.centerRatioX*s)/this.scale),l=this.y-int((n*f+this.centerRatioY*f)/this.scale),c=this.y+int((n*f+this.centerRatioY*f)/this.scale);o==d&&(t=a=t+a>>1),l==c&&(e=i=e+i>>1);let u=this.x,h=this.y;t<o?u+=t-o:a>d&&(u+=a-d),e<l?h+=e-l:i>c&&(h+=i-c),o=u-s,d=u+s,l=h-f,c=h+f,o<this.worldX1&&(u=this.worldX1+s),d>this.worldX2&&(u=this.worldX2-s),l<this.worldY1&&(h=this.worldY1+f),c>this.worldY2&&(h=this.worldY2-f),this.x=u,this.y=h,this.updateBounds()},update:function(t){null!=this.focusRect&&this.focusOn(this.focusRect.x1,this.focusRect.y1,this.focusRect.x2,this.focusRect.y2)},setFocusRect:function(t,e=0,a=0){return this.focusRect=t,this.focusOffsX=e,this.focusOffsY=a,this.update(0),this},setFocusFactor:function(t,e){return this.focusFactorX=t,this.focusFactorY=void 0===e?t:e,this},applyClip:function(t){t.clip(this.screenBounds.x1,this.screenBounds.y1,this.screenBounds.width()+1,this.screenBounds.height()+1)},applyTransform:function(t){let e=this.screenBounds.x1+(this.screenBounds.width()+1>>1),a=this.screenBounds.y1+(this.screenBounds.height()+1>>1);t.translate(e,a),1!=this.scale&&t.scale(this.scale,this.scale),1!=this.globalScale&&t.scale(this.globalScale,this.globalScale),t.translate(-this.getX(),-this.getY()),t.updateTransform()},toWorldSpace:function(t,e,a=!1){let i=this.screenBounds.x1+(this.screenBounds.width()+1>>1),r=this.screenBounds.y1+(this.screenBounds.height()+1>>1);return a?(t=(t-int(i))/this.scale+int(this.getX()),e=(e-int(r))/this.scale+int(this.getY())):(t=(t-i)/this.scale+this.getX(),e=(e-r)/this.scale+this.getY()),{x:t,y:e}},toScreenSpace:function(t,e,a=!1){let i=this.screenBounds.x1+(this.screenBounds.width()+1>>1),r=this.screenBounds.y1+(this.screenBounds.height()+1>>1);return a?(t=(t-int(this.getX()))*this.scale+int(i),e=(e-int(this.getY()))*this.scale+int(r)):(t=(t-this.getX())*this.scale+i,e=(e-this.getY())*this.scale+r),{x:t,y:e}}});$47e902cac8a04df854b36a7330d5cd41$export$default.ENABLED=1;var $fb4fb086c634fba17e37b49b33d6ce76$export$default=$1f321ec717828b012411561cd48311f2$export$default.extend({className:"Element",group:null,img:null,debugBounds:!1,__ctor:function(t,e,a=null,i=null,r=null){null===a&&(a=i=0),null===i&&(a=(r=a).width,i=r.height),this._super.GridElement.__ctor(t,e,a,i),this.img=null!==r?r.getDrawable():r},__dtor:function(){null!==this.img&&(dispose(this.img),this.img=null),this._super.GridElement.__dtor()},destroy:function(){this.alive()&&dispose(this)},destroyLater:function(){this.alive()&&(null!==this.container?this.container.scene.disposeLater(this):dispose(this))},draw:function(t){null!==this.img&&(t.zvalue=this.zvalue,this.img.draw(t,this.bounds.x1,this.bounds.y1)),null===t.gl&&($9090bbb3a64d2ec244e10e9978e1deb1$export$default.debugBounds||this.debugBounds)&&(t.fillStyle("rgba(0,255,255,0.5)"),t.fillRect(this.bounds.x1,this.bounds.y1,this.bounds.width(),this.bounds.height()))}}),$22ce2c4efc0f85349a462c35d71fff78$export$default=$fb4fb086c634fba17e37b49b33d6ce76$export$default.extend({className:"Label",text:null,color:null,__ctor:function(t,e,a,i="#fff"){this._super.Element.__ctor(t,e,4,4),this.text=a,this.color=i},draw:function(t){null===t.gl&&(t.font("bold 4px monospace"),t.textBaseline("top"),t.fillStyle(this.color),t.fillText(this.text,this.bounds.x1,this.bounds.y1))}});const $bbb3b1d9abddd60520e2ed0aeccf3153$export$default=$9a13317101bee2e2b4637862b0c16235$export$Class.extend({className:"Container",viewportBounds:null,width:0,height:0,zvalue:0,scene:null,flags:0,g:null,elementCount:0,drawCount:0,__ctor:function(t=32768,e=32768){this.width=t,this.height=e,this.flags=$bbb3b1d9abddd60520e2ed0aeccf3153$export$default.VISIBLE|$bbb3b1d9abddd60520e2ed0aeccf3153$export$default.DEPTH_TEST},__dtor:function(){},visible:function(t=null){return null===t?!!(this.flags&$bbb3b1d9abddd60520e2ed0aeccf3153$export$default.VISIBLE):(this.flags&=~$bbb3b1d9abddd60520e2ed0aeccf3153$export$default.VISIBLE,t&&(this.flags|=$bbb3b1d9abddd60520e2ed0aeccf3153$export$default.VISIBLE),this)},depthTest:function(t=null){return null===t?!!(this.flags&$bbb3b1d9abddd60520e2ed0aeccf3153$export$default.DEPTH_TEST):(this.flags&=~$bbb3b1d9abddd60520e2ed0aeccf3153$export$default.DEPTH_TEST,t&&(this.flags|=$bbb3b1d9abddd60520e2ed0aeccf3153$export$default.DEPTH_TEST),this)},setViewportBounds:function(t){return this.viewportBounds=t,this},drawElement:function(t,e){return e.drawCount++,t.draw(e.g)},syncZ:function(t){t.zvalue=this.zvalue+t.bounds.y2},sync:function(t){throw new Error("Container::sync not implemented")},clear:function(){throw new Error("Container::clear not implemented")},reset:function(){throw new Error("Container::reset not implemented")},add:function(t){throw new Error("Container::add not implemented")},remove:function(t){throw new Error("Container::remove not implemented")},draw:function(t){this.visible()&&(t.depthTest(this.flags&$bbb3b1d9abddd60520e2ed0aeccf3153$export$default.DEPTH_TEST),t.zvalue=this.zvalue,this.drawCount=0,this.g=t,this._draw())},_draw:function(t){throw new Error("Container::draw not implemented")}});$bbb3b1d9abddd60520e2ed0aeccf3153$export$default.VISIBLE=1,$bbb3b1d9abddd60520e2ed0aeccf3153$export$default.DEPTH_TEST=2;var $e8931fac998957a8aef7c8eab7a42782$export$default=$bbb3b1d9abddd60520e2ed0aeccf3153$export$default.extend({className:"SimpleContainer",list:null,__ctor:function(t,e){this._super.Container.__ctor(t,e),this.list=$31e77c88cc6920b604cc8697a03a7b4c$export$default.calloc()},__dtor:function(){this.clear(),this.list.free(),this._super.Container.__dtor()},sync:function(t){return this.syncZ(t),!0},clear:function(){let t;for(;null!==(t=this.list.shift());)t.remover.remove(this._remove,this),t.container=null,dispose(t);this.elementCount=0},reset:function(){let t;for(;null!==(t=this.list.shift());)t.remover.remove(this._remove,this),t.container=null;this.elementCount=0},add:function(t){if(!$fb4fb086c634fba17e37b49b33d6ce76$export$default.isInstance(t))throw new Error("argument must be an Element");return this.list.push(t),this.elementCount++,t.container=this,t.remover.add(this._remove,this,this.list.bottom),this.syncZ(t),!0},_remove:function(t,e,a){return e.list.remove(a),e.elementCount--,t.container=null,!1},remove:function(t){return t.remover.execf(this._remove,this),t},_draw:function(t){let e=$1f321ec717828b012411561cd48311f2$export$default.ALIVE|$1f321ec717828b012411561cd48311f2$export$default.VISIBLE;for(let t=this.list.top;t&&(!t.value.getFlags(e)||!1!==this.drawElement(t.value,this));t=t.next);}}),$aece5c747b3cc04971e5ec3072a0e65d$export$default=$bbb3b1d9abddd60520e2ed0aeccf3153$export$default.extend({className:"GridContainer",grid:null,debugBounds:!1,__ctor:function(t=32768,e=32768,a=64){this._super.Container.__ctor(t,e),this.grid=new $1c4144461c156c85a375c243d61c3a37$export$default(t,e,a)},__dtor:function(){this.clear(),this._super.Container.__dtor()},sync:function(t){return this.syncZ(t),this.grid.sync(t)},clear:function(){this.grid.clear()},reset:function(){this.grid.reset()},add:function(t){if(!$fb4fb086c634fba17e37b49b33d6ce76$export$default.isInstance(t))throw new Error("argument must be an Element");return!!this.grid.add(t)&&(t.container=this,this.elementCount=this.grid.count,this.syncZ(t),!0)},remove:function(t){return this.grid.remove(t),this.elementCount=this.grid.count,t},_draw:function(t){if(this.grid.forEachInRegion(this.viewportBounds,$1f321ec717828b012411561cd48311f2$export$default.ALIVE|$1f321ec717828b012411561cd48311f2$export$default.VISIBLE,this.drawElement,this),!this.debugBounds||null===this.viewportBounds||null!==t.gl)return;let e=(this.viewportBounds.y1+this.grid.offsy-(1<<this.grid.ky-1)>>this.grid.ky)*this.grid.stride,a=(this.viewportBounds.y2+this.grid.offsy+(1<<this.grid.ky-1)>>this.grid.ky)*this.grid.stride,i=this.viewportBounds.x1+this.grid.offsx-(1<<this.grid.kx-1)>>this.grid.kx,r=this.viewportBounds.x2+this.grid.offsx+(1<<this.grid.kx-1)>>this.grid.kx;e=(int(e/this.grid.stride)<<this.grid.ky)-this.grid.offsy,a=(int(a/this.grid.stride)<<this.grid.ky)-this.grid.offsy+(1<<this.grid.ky),i=(i<<this.grid.kx)-this.grid.offsx,r=(r<<this.grid.kx)-this.grid.offsx+(1<<this.grid.kx),t.fillStyle("rgba(0,0,0,0.2)"),t.fillRect(i,e,r-i+1,a-e+1),e=this.viewportBounds.y1,a=this.viewportBounds.y2,i=this.viewportBounds.x1,r=this.viewportBounds.x2,t.lineWidth(1/$0d1da0ba321c96eb37e350fa4ffa1902$export$default.canvasScaleFactor),t.strokeStyle("#000"),t.strokeRect(i,e,r-i+1,a-e+1),t.lineWidth(1/$0d1da0ba321c96eb37e350fa4ffa1902$export$default.canvasScaleFactor),t.strokeStyle("#00f");for(let e=$9090bbb3a64d2ec244e10e9978e1deb1$export$default.viewport.worldY1+this.grid.offsy;e<$9090bbb3a64d2ec244e10e9978e1deb1$export$default.viewport.worldY2+this.grid.offsy;e+=1<<this.grid.ky)for(let a=$9090bbb3a64d2ec244e10e9978e1deb1$export$default.viewport.worldX1+this.grid.offsx;a<$9090bbb3a64d2ec244e10e9978e1deb1$export$default.viewport.worldX2+this.grid.offsx;a+=1<<this.grid.kx)t.strokeRect(a-this.grid.offsx,e-this.grid.offsy,1<<this.grid.kx,1<<this.grid.ky)},forEachInRegion:function(t,e,a,i){this.grid.forEachInRegion(t,e,a,i)},selectInRegion:function(t,e){return this.grid.selectInRegion(t,e)}}),$99300e17723bd1cd22b1daba58c46685$export$default=$fb4fb086c634fba17e37b49b33d6ce76$export$default.extend({className:"Group",children:null,__ctor:function(t=null){this._super.Element.__ctor(0,0,0,0),this.children=$31e77c88cc6920b604cc8697a03a7b4c$export$default.calloc(),this.bounds.reset(),this.setId(t)},__dtor:function(){this.clear(),this.children.free(),this._super.Element.__dtor()},destroyLater:function(){if(!this.alive())return;let t;for(;null!=(t=this.children.shift());)t.remover.remove(this._remove,this),t.group=null,t.destroyLater();this._super.Element.destroy()},clear:function(){let t;for(;null!=(t=this.children.shift());)t.remover.remove(this._remove,this),t.group=null,dispose(t);return this},reset:function(){let t;for(;null!=(t=this.children.shift());)t.remover.remove(this._remove,this),t.group=null;return this},addChild:function(t=null){if(!t)return t;let e=null===this.bounds.x1;return(e||t.bounds.x1<this.bounds.x1)&&this.ltranslate(t.bounds.x1-this.bounds.x1,0),(e||t.bounds.y1<this.bounds.y1)&&this.ltranslate(0,t.bounds.y1-this.bounds.y1),(e||t.bounds.x2>this.bounds.x2)&&this.resizeBy(t.bounds.x2-this.bounds.x2,0),(e||t.bounds.y2>this.bounds.y2)&&this.resizeBy(0,t.bounds.y2-this.bounds.y2),this.children.push(t),null!==t.id&&(this[t.id]=t),t.group=this,t.remover.add(this._remove,this,this.children.bottom),t},_remove:function(t,e,a){return e.children.remove(a),t.group=null,null!==t.id&&(e[t.id]=null),!1},removeChild:function(t){return t&&t.group===this?(t.remover.execf(this._remove,this),t):t},sync:function(){for(let t=this.children.top;t;t=t.next)t.value.sync();return this._super.Element.sync()},ltranslate:function(t,e,a=!1){return this._super.Element.translate(t,e,a)},translate:function(t,e,a=!1){let i=this.bounds.x1,r=this.bounds.y1;this._super.Element.translate(t,e,a),i=this.bounds.x1-i,r=this.bounds.y1-r;for(let t=this.children.top;t;t=t.next)t.value.translate(i,r);return this},draw:function(t){}});const $7784ecf7aa000b18e8c18ecaeb4f8c8d$export$default=$9a13317101bee2e2b4637862b0c16235$export$Class.extend({className:"Updater",scene:null,list:null,__ctor:function(t){this.list=$31e77c88cc6920b604cc8697a03a7b4c$export$default.calloc(),this.scene=t,this.scene.updater.add(this._update,this),this.scene.synchronizer.add(this._sync,this),this.scene.destroyer.add(this._destroy,this)},__dtor:function(){let t;for(this.scene.updater.remove(this._update,this),this.scene.synchronizer.remove(this._sync,this),this.scene.destroyer.remove(this._destroy,this);null!==(t=this.list.shift());)t.remover.remove(this._remove,this);this.list.free()},_destroy:function(t,e){dispose(e)},add:function(t){if(!$fb4fb086c634fba17e37b49b33d6ce76$export$default.isInstance(t))throw new Error("argument must be an Element");return this.list.push(t),t.remover.add(this._remove,this,this.list.bottom),!0},_remove:function(t,e,a){return e.list.remove(a),!1},remove:function(t){return t.remover.execf(this._remove,this),t},_sync:function(t,e){for(let t=e.list.top;t;t=t.next)t.value.sync()},_update:function(t,e){e.update(t.dt)},update:function(t){}}),$2b3cadcb4927602c835d6f8f4a59d045$export$default=$9a13317101bee2e2b4637862b0c16235$export$Class.extend({className:"Scene",minWidth:null,minHeight:null,maxWidth:null,maxHeight:null,containers:null,viewports:null,viewportBounds:null,groupList:null,groups:null,disposalQueue:null,fupdater:null,updater:null,synchronizer:null,lupdater:null,destroyer:null,dt:0,flags:0,drawCount:0,__ctor:function(){this.containers=[],this.viewports=[],this.viewportBounds=$7c24fbc0cd5f24a2e238b3d18e22ccd0$export$default.alloc(),this.groupList=$31e77c88cc6920b604cc8697a03a7b4c$export$default.calloc(),this.groups={},this.disposalQueue=$31e77c88cc6920b604cc8697a03a7b4c$export$default.calloc(),this.fupdater=$ddb59e07af6f4d6f63ac124d8ae48842$export$default.alloc().init(this),this.updater=$ddb59e07af6f4d6f63ac124d8ae48842$export$default.alloc().init(this),this.synchronizer=$ddb59e07af6f4d6f63ac124d8ae48842$export$default.alloc().init(this),this.lupdater=$ddb59e07af6f4d6f63ac124d8ae48842$export$default.alloc().init(this),this.destroyer=$ddb59e07af6f4d6f63ac124d8ae48842$export$default.alloc().init(this),this.flags=$2b3cadcb4927602c835d6f8f4a59d045$export$default.VISIBLE},__dtor:function(){let t;for(this.disposeQueued(),this.disposalQueue.free(),this.destroyer.exec(),this.destroyer.free(),this.fupdater.free(),this.updater.free(),this.synchronizer.free(),this.lupdater.free();null!==(t=this.groupList.shift());)t.remover.remove(this._remove,this),t.container=null,dispose(t);for(t=0;t<this.containers.length;t++)this.containers[t]&&(this.containers[t].scene=null,dispose(this.containers[t]),this.containers[t]=null);for(t=0;t<this.viewports.length;t++)this.viewports[t]&&(dispose(this.viewports[t]),this.viewports[t]=null);this.viewportBounds.free(),this.groupList.free()},visible:function(t=null){return null===t?!!(this.flags&$2b3cadcb4927602c835d6f8f4a59d045$export$default.VISIBLE):(this.flags&=~$2b3cadcb4927602c835d6f8f4a59d045$export$default.VISIBLE,t&&(this.flags|=$2b3cadcb4927602c835d6f8f4a59d045$export$default.VISIBLE),this)},setContainer:function(t,e){if(t<0)return this;if(null===e)return this.containers[t].scene=null,this.containers[t]=null,this;if(!$bbb3b1d9abddd60520e2ed0aeccf3153$export$default.isInstance(e))throw new Error("Scene: Unable to set container at index "+t+": argument is not a Container");return(null===this.minWidth||e.width<this.minWidth)&&(this.minWidth=e.width),(null===this.minHeight||e.height<this.minHeight)&&(this.minHeight=e.height),(null===this.maxWidth||e.width>this.maxWidth)&&(this.maxWidth=e.width),(null===this.maxHeight||e.height>this.maxHeight)&&(this.maxHeight=e.height),e.scene=this,e.zvalue=1048576*t,this.containers[t]=e,this},getContainer:function(t){return t<0||t>=this.containers.length?null:this.containers[t]},setViewport:function(t,e){if(t<0)return this;if(null!==e&&!$47e902cac8a04df854b36a7330d5cd41$export$default.isInstance(e))throw new Error("Scene: Unable to set viewport at index "+t+": argument is not a Viewport.");return this.viewports[t]=e,this},getViewport:function(t){return t<0||t>=this.viewports.length?null:this.viewports[t]},disposeLater:function(t){t.alive()&&(this.disposalQueue.push(t),t.alive(!1))},disposeQueued:function(){let t;for(;null!==(t=this.disposalQueue.shift());)dispose(t)},addGroup:function(t){if(!$99300e17723bd1cd22b1daba58c46685$export$default.isInstance(t))throw new Error("argument must be a Group");return this.groupList.push(t),null!==t.id&&(this.groups[t.id]=t),t.container=this,t.remover.add(this._removeGroup,this,this.groupList.bottom),!0},_removeGroup:function(t,e,a){return t.container=null,e.groupList.remove(a),null!==t.id&&(e.groups[t.id]=null),!1},removeGroup:function(t){return t.remover.execf(this._remove,this),t},sync:function(t){return!0},draw:function(t){if(this.visible())if(this.drawCount=0,this.viewports.length)for(let e=0;e<this.viewports.length;e++){let a=this.viewports[e];a&&a.enabled()&&($9090bbb3a64d2ec244e10e9978e1deb1$export$default.viewport=a,t.pushClip(),t.pushMatrix(),a.applyClip(t),a.applyTransform(t),this.viewportBounds.set(a.getBounds()),this.drawContainers(t,this.viewportBounds),t.popMatrix(),t.popClip())}else this.drawContainers(t,null)},drawContainers:function(t,e){try{for(let a=0;a<this.containers.length;a++)this.containers[a]&&(this.containers[a].setViewportBounds(e),this.containers[a].draw(t),this.drawCount+=this.containers[a].drawCount)}catch(t){if("FRAME_END"!==t.message)throw t}},updateViewports:function(){for(let t=0;t<this.viewports.length;t++)this.viewports[t]&&this.viewports[t].update(this.dt)},update:function(t){this.dt=t,this.fupdater.exec(),this.updater.exec(),this.disposeQueued(),this.synchronizer.exec(),this.updateViewports(),this.lupdater.exec()}});$2b3cadcb4927602c835d6f8f4a59d045$export$default.VISIBLE=1;var $b7909c66f3de85d4fbfe4293c43aa859$export$default=$d3d792bef6f1f9035a94064efa8fb2c8$export$default.Module.create({handlers:null,__ctor:function(){const t=this;this._super.Module.__ctor(),this.handlers=new $761d290cf3c7f70d27120f82a7918e29$export$default,this._callOnKeyboardEvent=function(e){return t.callOnKeyboardEvent(e)}},register:function(t){try{this.handlers.add(t),"init"in t&&t.init()}catch(t){throw new Error("KeyboardHandler (register): "+t.message)}return t},unregister:function(t){try{this.handlers.remove(t),this.handlers.cleanup()}catch(t){throw new Error("KeyboardHandler (unregister): "+t.message)}},callOnKeyboardEvent:function(t){return t.onKeyboardEvent(this._action,this._keyCode,this._keyState)},onStartup:function(){$0d1da0ba321c96eb37e350fa4ffa1902$export$default.onKeyboardEvent=(t,e,a)=>{this._action=t,this._keyCode=e,this._keyState=a,this.handlers.forEach(this._callOnKeyboardEvent)}},onShutdown:function(){$0d1da0ba321c96eb37e350fa4ffa1902$export$default.onKeyboardEvent=null}}),$96e856ce494fcea9fc34ed21256b2649$export$default=$d3d792bef6f1f9035a94064efa8fb2c8$export$default.Module.create({handlers:null,__ctor:function(){const t=this;this._super.Module.__ctor(),this.handlers=new $761d290cf3c7f70d27120f82a7918e29$export$default,this._callOnPointerEvent=function(e){return t.callOnPointerEvent(e)}},register:function(t){try{this.handlers.add(t),"init"in t&&t.init()}catch(t){throw new Error("PointerHandler (register): "+t.message)}return t},unregister:function(t){try{this.handlers.remove(t),this.handlers.cleanup()}catch(t){throw new Error("PointerHandler (unregister): "+t.message)}},callOnPointerEvent:function(t){return t.onPointerEvent(this._action,this._p,this._pointers)},onStartup:function(){$0d1da0ba321c96eb37e350fa4ffa1902$export$default.onPointerEvent=(t,e,a)=>{this._action=t,this._p=e,this._pointers=a,this.handlers.forEach(this._callOnPointerEvent)}},onShutdown:function(){$0d1da0ba321c96eb37e350fa4ffa1902$export$default.onPointerEvent=null}});const $341c06a6350fb25ab69b63dfe261de99$export$default={priority:5,list:[],dummy:{},hoverEnabled:!1,zindexEnabled:!1,lastFrame:0,add:function(t){this.zindexEnabled&&!("zindex"in t)&&(t.zindex=0),-1===this.list.indexOf(t)&&this.list.push(t)},remove:function(t){var e=this.list.indexOf(t);-1!==e&&this.list.splice(e,1)},setHoverEnabled:function(t){this.hoverEnabled=t},setZIndexEnabled:function(t){this.zindexEnabled=t},findTarget:function(t,e,a){if(this.zindexEnabled&&this.lastFrame!=$0d1da0ba321c96eb37e350fa4ffa1902$export$default.frameNumber){let t=this.list[0].zindex;for(let e of this.list){if(e.zindex>t){this.list=this.list.sort(((t,e)=>e.zindex-t.zindex));break}t=e.zindex}this.lastFrame=$0d1da0ba321c96eb37e350fa4ffa1902$export$default.frameNumber}for(let i=0;i<this.list.length;i++)if(this.list[i])if(this.list[i]instanceof Array){alert("SHOULDN BE SUPPORTED");for(let r=0;r<this.list[i].length;r++)if((null==a||0!=a(this.list[i][r]))&&this.list[i][r].containsPoint(t,e))return this.list[i][r]}else{if(null!=a&&0==a(this.list[i]))continue;if(this.list[i].containsPoint(t,e))return this.list[i]}return null},filterHover:function(t){return"hover"in t},onPointerEvent:function(t,e,a){let i=!0,r=null;switch(t){case $0d1da0ba321c96eb37e350fa4ffa1902$export$default.EVT_POINTER_DOWN:null!=e._ref&&(r=e._ref,e._ref=null,r.pointerDeactivate(e)),r=this.findTarget(e.x,e.y),null!=r&&((e._ref=r).pointerActivate(e),i=!1);break;case $0d1da0ba321c96eb37e350fa4ffa1902$export$default.EVT_POINTER_DRAG_START:null!=e._ref&&(i=!1);break;case $0d1da0ba321c96eb37e350fa4ffa1902$export$default.EVT_POINTER_DRAG_MOVE:this.hoverEnabled&&(null!=e._refh?e._refh.containsPoint(e.x,e.y)||(r=e._refh,e._refh=null,r.hover(!1,e),r=this.findTarget(e.x,e.y,this.filterHover),null!=r&&(e._refh=r).hover(!0,e)):(r=this.findTarget(e.x,e.y,this.filterHover),null!=r&&(e._refh=r).hover(!0,e))),null!=e._ref?e._ref.containsPoint(e.x,e.y)||1==e._ref.focusLock?(e._ref.pointerUpdate(e.x,e.y,e),i=!1):(r=e._ref,e._ref=null,r.pointerDeactivate(e),r=this.findTarget(e.x,e.y),null!=r&&((e._ref=r).pointerActivate(e),i=!1)):(r=this.findTarget(e.x,e.y),null!=r&&((e._ref=r).pointerActivate(e),i=!1));break;case $0d1da0ba321c96eb37e350fa4ffa1902$export$default.EVT_POINTER_MOVE:if(this.hoverEnabled&&(null!=e._refh?e._refh.containsPoint(e.x,e.y)||(r=e._refh,e._refh=null,r.hover(!1,e),r=this.findTarget(e.x,e.y,this.filterHover),null!=r&&(e._refh=r).hover(!0,e)):(r=this.findTarget(e.x,e.y,this.filterHover),null!=r&&(e._refh=r).hover(!0,e))),null==e._ref)break;e._ref.containsPoint(e.x,e.y)||1==e._ref.focusLock?(e._ref.pointerUpdate(e.x,e.y,e),i=!1):(r=e._ref,e._ref=null,r.pointerDeactivate(e));break;case $0d1da0ba321c96eb37e350fa4ffa1902$export$default.EVT_POINTER_DRAG_STOP:null!=e._ref&&(i=!1);break;case $0d1da0ba321c96eb37e350fa4ffa1902$export$default.EVT_POINTER_UP:null!=e._ref&&(r=e._ref,e._ref=null,r.pointerDeactivate(e),i=!1)}return i},onKeyboardEvent:function(t,e,a){switch(t){case $0d1da0ba321c96eb37e350fa4ffa1902$export$default.EVT_KEY_DOWN:for(let t=0;t<this.list.length;t++)if(this.list[t])if(this.list[t]instanceof Array){for(var i=0;i<this.list[t].length;i++)if(this.list[t][i].keyCode==e){this.list[t][i].pointerActivate(this.dummy),i=-1;break}if(-1==i)break}else if(this.list[t].keyCode==e){this.list[t].pointerActivate(this.dummy);break}break;case $0d1da0ba321c96eb37e350fa4ffa1902$export$default.EVT_KEY_UP:for(let t=0;t<this.list.length;t++)if(this.list[t])if(this.list[t]instanceof Array){for(i=0;i<this.list[t].length;i++)if(this.list[t][i].keyCode==e){this.list[t][i].pointerDeactivate(this.dummy),i=-1;break}if(-1==i)break}else if(this.list[t].keyCode==e){this.list[t].pointerDeactivate(this.dummy);break}}}};$96e856ce494fcea9fc34ed21256b2649$export$default.register($341c06a6350fb25ab69b63dfe261de99$export$default),$b7909c66f3de85d4fbfe4293c43aa859$export$default.register($341c06a6350fb25ab69b63dfe261de99$export$default);var $166bb6de997a0943d21fa69d02f396d6$export$default=$99300e17723bd1cd22b1daba58c46685$export$default.extend({focusLock:!1,status:0,lstatus:0,unpressedImg:null,pressedImg:null,keyCode:0,hitbox:0,__ctor:function(t,e,a,i,r=null){this._super.Group.__ctor(),this.unpressedImg=i,this.pressedImg=r||i,this.hitbox=new $fb4fb086c634fba17e37b49b33d6ce76$export$default(e,a,i.width,i.height),this.addChild(this.hitbox),t.add(this.hitbox),t.add(this),$341c06a6350fb25ab69b63dfe261de99$export$default.add(this)},__dtor:function(){this._super.Group.__dtor(),$341c06a6350fb25ab69b63dfe261de99$export$default.remove(this)},setImage:function(t,e=null){return this.unpressedImg=t,this.pressedImg=e||t,this},reset:function(){this.status=this.lstatus=0,this.onChange(this.status,this.lstatus)},draw:function(t){this.status?this.pressedImg.draw(t,this.bounds.x1,this.bounds.y1):this.unpressedImg.draw(t,this.bounds.x1,this.bounds.y1)},pointerUpdate:function(t,e){},pointerActivate:function(t){this.lstatus=this.status,this.status=1,this.onChange(this.status,this.lstatus)},pointerDeactivate:function(t){this.lstatus=this.status,this.status=0,this.onChange(this.status,this.lstatus)},containsPoint:function(t,e){return!!this.visible()&&this.hitbox.bounds.containsPoint(t,e)},onChange:function(t,e){t!=e&&(t?this.onButtonDown():this.onButtonUp()),0==t&&1==e&&this.onTap()},onButtonDown:function(){},onButtonUp:function(){},onTap:function(){},wasPressed:function(t=!1){let e=this.status&&!this.lstatus;return t&&(this.lstatus=this.status),e}}),$15d815d7e1a7b3668e5bed9ea4b0df87$export$default=$99300e17723bd1cd22b1daba58c46685$export$default.extend({focusLock:!0,status:0,lstatus:0,unpressedImg:null,pressedImg:null,unpressedImgInner:null,pressedImgInner:null,angleSteps:0,radiusSteps:0,rdirx:0,rdiry:0,dirx:0,diry:0,magnitude:0,angle:0,frdirx:0,frdiry:0,fdirx:0,fdiry:0,fmagnitude:0,fangle:0,dispx:0,dispy:0,radius:0,maxRadius:0,hitbox:0,__ctor:function(t,e,a,i,r,n,s=null,f=null){this._super.Group.__ctor(),this.unpressedImg=r,this.pressedImg=s||r,this.unpressedImgInner=n,this.pressedImgInner=f||n,this.maxRadius=i,this.hitbox=new $fb4fb086c634fba17e37b49b33d6ce76$export$default(e,a,r.width,r.height),this.addChild(this.hitbox),t.add(this.hitbox),t.add(this),$341c06a6350fb25ab69b63dfe261de99$export$default.add(this)},__dtor:function(){this._super.Group.__dtor(),$341c06a6350fb25ab69b63dfe261de99$export$default.remove(this)},setImage:function(t,e=null){return this.unpressedImg=t,this.pressedImg=e||t,this},setImageInner:function(t,e=null){return this.unpressedImgInner=t,this.pressedImgInner=e||t,this},setAngleSteps:function(t){return this.angleSteps=t,this},setRadiusSteps:function(t){return this.radiusSteps=t,this},reset:function(){this.dispx=0,this.dispy=0,this.rdirx=0,this.rdiry=0,this.dirx=0,this.diry=0,this.magnitude=0,this.onChange(this.dirx,this.diry,this.magnitude,this.angle)},draw:function(t){this.status?(this.pressedImg.draw(t,this.bounds.x1,this.bounds.y1),this.pressedImgInner.draw(t,this.bounds.x1+this.dispx,this.bounds.y1+this.dispy)):(this.unpressedImg.draw(t,this.bounds.x1,this.bounds.y1),this.unpressedImgInner.draw(t,this.bounds.x1,this.bounds.y1))},pointerUpdate:function(t,e){let a=t-this.bounds.cx,i=e-this.bounds.cy;if(this.angle=Math.atan2(-i,a),this.radius=Math.sqrt(a*a+i*i),this.radius>this.maxRadius&&(this.radius=this.maxRadius),this.angleSteps){let t=2*Math.PI/this.angleSteps;this.angle=int((this.angle+Math.PI+t/2)/t)*t-Math.PI}if(this.radiusSteps){let t=this.maxRadius/this.radiusSteps;this.radius=int((this.radius+t/2)/t)*t}this.rdirx=Math.min(1,Math.max(a/this.maxRadius,-1)),this.rdiry=Math.min(1,Math.max(i/this.maxRadius,-1)),this.dispx=this.radius*Math.cos(this.angle),this.dispy=this.radius*-Math.sin(this.angle),this.radius>0?(this.dirx=this.dispx/this.radius,this.diry=this.dispy/this.radius,this.magnitude=this.radius/this.maxRadius):(this.dirx=0,this.diry=0,this.magnitude=0),this.onChange(this.dirx,this.diry,this.magnitude,this.angle)},pointerActivate:function(t){this.lstatus=this.status,this.status=1,this.pointerUpdate(t.x,t.y)},pointerDeactivate:function(t){this.lstatus=this.status,this.status=0,this.reset()},containsPoint:function(t,e){return!!this.visible()&&this.hitbox.bounds.containsPoint(t,e)},freezeState:function(t=!1){return this.frdirx=t?0!=this.rdirx?this.rdirx:this.frdirx:this.rdirx,this.frdiry=t?0!=this.rdiry?this.rdiry:this.frdiry:this.rdiry,this.fdirx=t?0!=this.dirx?this.dirx:this.fdirx:this.dirx,this.fdiry=t?0!=this.diry?this.diry:this.fdiry:this.diry,this.fmagnitude=t?0!=this.magnitude?this.magnitude:this.fmagnitude:this.magnitude,this.fangle=t?0!=this.angle?this.angle:this.fangle:this.angle,this},onChange:function(t,e,a,i){}});const $541749fd9f5c044e8db392fa33166afa$export$Class=$9a13317101bee2e2b4637862b0c16235$export$Class;$parcel$export($541749fd9f5c044e8db392fa33166afa$exports,"Class",(function(){return $541749fd9f5c044e8db392fa33166afa$export$Class}));const $541749fd9f5c044e8db392fa33166afa$export$globals=$9090bbb3a64d2ec244e10e9978e1deb1$export$default;$parcel$export($541749fd9f5c044e8db392fa33166afa$exports,"globals",(function(){return $541749fd9f5c044e8db392fa33166afa$export$globals}));const $541749fd9f5c044e8db392fa33166afa$export$System=$0d1da0ba321c96eb37e350fa4ffa1902$export$default;$parcel$export($541749fd9f5c044e8db392fa33166afa$exports,"System",(function(){return $541749fd9f5c044e8db392fa33166afa$export$System}));const $541749fd9f5c044e8db392fa33166afa$export$Timer=$4f606ba1a8ba03c9bc8fddfdc76bf0fb$export$default;$parcel$export($541749fd9f5c044e8db392fa33166afa$exports,"Timer",(function(){return $541749fd9f5c044e8db392fa33166afa$export$Timer}));const $541749fd9f5c044e8db392fa33166afa$export$Random=$9af60d516d7ae058cd367aeed84acd99$export$default;$parcel$export($541749fd9f5c044e8db392fa33166afa$exports,"Random",(function(){return $541749fd9f5c044e8db392fa33166afa$export$Random}));const $541749fd9f5c044e8db392fa33166afa$export$KeyCodes=$61aea493ae1cab8fd79b97073b980cf5$export$default;$parcel$export($541749fd9f5c044e8db392fa33166afa$exports,"KeyCodes",(function(){return $541749fd9f5c044e8db392fa33166afa$export$KeyCodes}));const $541749fd9f5c044e8db392fa33166afa$export$Canvas=$e93d17ded3c815db66b20fa184665246$export$default;$parcel$export($541749fd9f5c044e8db392fa33166afa$exports,"Canvas",(function(){return $541749fd9f5c044e8db392fa33166afa$export$Canvas}));const $541749fd9f5c044e8db392fa33166afa$export$Perf=$b9107488ce5913a1d94bf85f6a2b2916$export$default;$parcel$export($541749fd9f5c044e8db392fa33166afa$exports,"Perf",(function(){return $541749fd9f5c044e8db392fa33166afa$export$Perf}));const $541749fd9f5c044e8db392fa33166afa$export$Log=$db4dfe743083e943dfb25a6ea298ffb6$export$default;$parcel$export($541749fd9f5c044e8db392fa33166afa$exports,"Log",(function(){return $541749fd9f5c044e8db392fa33166afa$export$Log}));const $541749fd9f5c044e8db392fa33166afa$export$Wrappers=$849cbcf6aa1a6feafe4b4558128535c4$exports;$parcel$export($541749fd9f5c044e8db392fa33166afa$exports,"Wrappers",(function(){return $541749fd9f5c044e8db392fa33166afa$export$Wrappers}));const $541749fd9f5c044e8db392fa33166afa$export$Resources=$cd1d8345f0557778dc789d008e093429$export$default;$parcel$export($541749fd9f5c044e8db392fa33166afa$exports,"Resources",(function(){return $541749fd9f5c044e8db392fa33166afa$export$Resources}));const $541749fd9f5c044e8db392fa33166afa$export$Recycler=$676b148d00bde05a65142d5a5b8bf91f$export$default;$parcel$export($541749fd9f5c044e8db392fa33166afa$exports,"Recycler",(function(){return $541749fd9f5c044e8db392fa33166afa$export$Recycler}));const $541749fd9f5c044e8db392fa33166afa$export$Linkable=$38decb76335a4f247b53445a3654d5f4$export$default;$parcel$export($541749fd9f5c044e8db392fa33166afa$exports,"Linkable",(function(){return $541749fd9f5c044e8db392fa33166afa$export$Linkable}));const $541749fd9f5c044e8db392fa33166afa$export$List=$31e77c88cc6920b604cc8697a03a7b4c$export$default;$parcel$export($541749fd9f5c044e8db392fa33166afa$exports,"List",(function(){return $541749fd9f5c044e8db392fa33166afa$export$List}));const $541749fd9f5c044e8db392fa33166afa$export$PriorityQueue=$761d290cf3c7f70d27120f82a7918e29$export$default;$parcel$export($541749fd9f5c044e8db392fa33166afa$exports,"PriorityQueue",(function(){return $541749fd9f5c044e8db392fa33166afa$export$PriorityQueue}));const $541749fd9f5c044e8db392fa33166afa$export$Handler=$ddb59e07af6f4d6f63ac124d8ae48842$export$default;$parcel$export($541749fd9f5c044e8db392fa33166afa$exports,"Handler",(function(){return $541749fd9f5c044e8db392fa33166afa$export$Handler}));const $541749fd9f5c044e8db392fa33166afa$export$Matrix=$a7a410b4caa5be623e4b43a7a516b0fd$export$default;$parcel$export($541749fd9f5c044e8db392fa33166afa$exports,"Matrix",(function(){return $541749fd9f5c044e8db392fa33166afa$export$Matrix}));const $541749fd9f5c044e8db392fa33166afa$export$Rect=$79348bb5e8be132355fb58346e1088e3$export$default;$parcel$export($541749fd9f5c044e8db392fa33166afa$exports,"Rect",(function(){return $541749fd9f5c044e8db392fa33166afa$export$Rect}));const $541749fd9f5c044e8db392fa33166afa$export$Vec2=$9f696c71198127b10adca449bf8b758f$export$default;$parcel$export($541749fd9f5c044e8db392fa33166afa$exports,"Vec2",(function(){return $541749fd9f5c044e8db392fa33166afa$export$Vec2}));const $541749fd9f5c044e8db392fa33166afa$export$TFunction=$c05de945fb6d27bc1e9b892510a754e1$export$default;$parcel$export($541749fd9f5c044e8db392fa33166afa$exports,"TFunction",(function(){return $541749fd9f5c044e8db392fa33166afa$export$TFunction}));const $541749fd9f5c044e8db392fa33166afa$export$Bounds2=$7c24fbc0cd5f24a2e238b3d18e22ccd0$export$default;$parcel$export($541749fd9f5c044e8db392fa33166afa$exports,"Bounds2",(function(){return $541749fd9f5c044e8db392fa33166afa$export$Bounds2}));const $541749fd9f5c044e8db392fa33166afa$export$Point2=$b7d1121d86f4637d4af87b487a4f2e70$export$default;$parcel$export($541749fd9f5c044e8db392fa33166afa$exports,"Point2",(function(){return $541749fd9f5c044e8db392fa33166afa$export$Point2}));const $541749fd9f5c044e8db392fa33166afa$export$Easing=$d8d8bd3f6fe14b632a3bc26ff6fa490c$export$default;$parcel$export($541749fd9f5c044e8db392fa33166afa$exports,"Easing",(function(){return $541749fd9f5c044e8db392fa33166afa$export$Easing}));const $541749fd9f5c044e8db392fa33166afa$export$Anim=$f65d67db29f2427831d81be81c53d92c$export$default;$parcel$export($541749fd9f5c044e8db392fa33166afa$exports,"Anim",(function(){return $541749fd9f5c044e8db392fa33166afa$export$Anim}));const $541749fd9f5c044e8db392fa33166afa$export$Boot=$d3d792bef6f1f9035a94064efa8fb2c8$export$default;$parcel$export($541749fd9f5c044e8db392fa33166afa$exports,"Boot",(function(){return $541749fd9f5c044e8db392fa33166afa$export$Boot}));const $541749fd9f5c044e8db392fa33166afa$export$GridElement=$1f321ec717828b012411561cd48311f2$export$default;$parcel$export($541749fd9f5c044e8db392fa33166afa$exports,"GridElement",(function(){return $541749fd9f5c044e8db392fa33166afa$export$GridElement}));const $541749fd9f5c044e8db392fa33166afa$export$Grid=$1c4144461c156c85a375c243d61c3a37$export$default;$parcel$export($541749fd9f5c044e8db392fa33166afa$exports,"Grid",(function(){return $541749fd9f5c044e8db392fa33166afa$export$Grid}));const $541749fd9f5c044e8db392fa33166afa$export$Viewport=$47e902cac8a04df854b36a7330d5cd41$export$default;$parcel$export($541749fd9f5c044e8db392fa33166afa$exports,"Viewport",(function(){return $541749fd9f5c044e8db392fa33166afa$export$Viewport}));const $541749fd9f5c044e8db392fa33166afa$export$Element=$fb4fb086c634fba17e37b49b33d6ce76$export$default;$parcel$export($541749fd9f5c044e8db392fa33166afa$exports,"Element",(function(){return $541749fd9f5c044e8db392fa33166afa$export$Element}));const $541749fd9f5c044e8db392fa33166afa$export$Label=$22ce2c4efc0f85349a462c35d71fff78$export$default;$parcel$export($541749fd9f5c044e8db392fa33166afa$exports,"Label",(function(){return $541749fd9f5c044e8db392fa33166afa$export$Label}));const $541749fd9f5c044e8db392fa33166afa$export$Container=$bbb3b1d9abddd60520e2ed0aeccf3153$export$default;$parcel$export($541749fd9f5c044e8db392fa33166afa$exports,"Container",(function(){return $541749fd9f5c044e8db392fa33166afa$export$Container}));const $541749fd9f5c044e8db392fa33166afa$export$SimpleContainer=$e8931fac998957a8aef7c8eab7a42782$export$default;$parcel$export($541749fd9f5c044e8db392fa33166afa$exports,"SimpleContainer",(function(){return $541749fd9f5c044e8db392fa33166afa$export$SimpleContainer}));const $541749fd9f5c044e8db392fa33166afa$export$GridContainer=$aece5c747b3cc04971e5ec3072a0e65d$export$default;$parcel$export($541749fd9f5c044e8db392fa33166afa$exports,"GridContainer",(function(){return $541749fd9f5c044e8db392fa33166afa$export$GridContainer}));const $541749fd9f5c044e8db392fa33166afa$export$Group=$99300e17723bd1cd22b1daba58c46685$export$default;$parcel$export($541749fd9f5c044e8db392fa33166afa$exports,"Group",(function(){return $541749fd9f5c044e8db392fa33166afa$export$Group}));const $541749fd9f5c044e8db392fa33166afa$export$Updater=$7784ecf7aa000b18e8c18ecaeb4f8c8d$export$default;$parcel$export($541749fd9f5c044e8db392fa33166afa$exports,"Updater",(function(){return $541749fd9f5c044e8db392fa33166afa$export$Updater}));const $541749fd9f5c044e8db392fa33166afa$export$Scene=$2b3cadcb4927602c835d6f8f4a59d045$export$default;$parcel$export($541749fd9f5c044e8db392fa33166afa$exports,"Scene",(function(){return $541749fd9f5c044e8db392fa33166afa$export$Scene}));const $541749fd9f5c044e8db392fa33166afa$export$KeyboardHandler=$b7909c66f3de85d4fbfe4293c43aa859$export$default;$parcel$export($541749fd9f5c044e8db392fa33166afa$exports,"KeyboardHandler",(function(){return $541749fd9f5c044e8db392fa33166afa$export$KeyboardHandler}));const $541749fd9f5c044e8db392fa33166afa$export$PointerHandler=$96e856ce494fcea9fc34ed21256b2649$export$default;$parcel$export($541749fd9f5c044e8db392fa33166afa$exports,"PointerHandler",(function(){return $541749fd9f5c044e8db392fa33166afa$export$PointerHandler}));const $541749fd9f5c044e8db392fa33166afa$export$ScreenControls=$341c06a6350fb25ab69b63dfe261de99$export$default;$parcel$export($541749fd9f5c044e8db392fa33166afa$exports,"ScreenControls",(function(){return $541749fd9f5c044e8db392fa33166afa$export$ScreenControls}));const $541749fd9f5c044e8db392fa33166afa$export$Button=$166bb6de997a0943d21fa69d02f396d6$export$default;$parcel$export($541749fd9f5c044e8db392fa33166afa$exports,"Button",(function(){return $541749fd9f5c044e8db392fa33166afa$export$Button}));const $541749fd9f5c044e8db392fa33166afa$export$Stick=$15d815d7e1a7b3668e5bed9ea4b0df87$export$default;$parcel$export($541749fd9f5c044e8db392fa33166afa$exports,"Stick",(function(){return $541749fd9f5c044e8db392fa33166afa$export$Stick}));var _default=froxel=$541749fd9f5c044e8db392fa33166afa$exports})();