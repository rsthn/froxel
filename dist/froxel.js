(function(){var $parcel$global="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{};function $parcel$export(t,e,i){Object.defineProperty(t,e,{get:i,enumerable:!0})}var $0c9c00c2409eb95b5e4d849b566b4428$exports={};let $3ceb97a86c97e49f496755485fbe7a5f$export$default={invokeLater:function(t){t&&setTimeout((function(){t()}),10)},wait:function(t){return new Promise((function(e,i){setTimeout(e,t)}))},typeOf:function(t){return t instanceof Array?"array":null===t?"null":(typeof t).toString().toLowerCase()},isArrayOrObject:function(t){switch($3ceb97a86c97e49f496755485fbe7a5f$export$default.typeOf(t)){case"array":case"object":return!0}return!1},clone:function(t){let e=$3ceb97a86c97e49f496755485fbe7a5f$export$default.typeOf(t);if("array"===e){e=[];for(let i=0;i<t.length;i++)e.push($3ceb97a86c97e49f496755485fbe7a5f$export$default.clone(t[i]))}else if("object"===e){if("clone"in t&&"function"==typeof t.clone)return t.clone();e={};for(let i in t)e[i]=$3ceb97a86c97e49f496755485fbe7a5f$export$default.clone(t[i])}else e=t;return e},merge:function(t,...e){if("array"==$3ceb97a86c97e49f496755485fbe7a5f$export$default.typeOf(t))for(let i=0;i<e.length;i++){let a=e[i];if("array"!=$3ceb97a86c97e49f496755485fbe7a5f$export$default.typeOf(a))t.push(a);else for(let e=0;e<a.length;e++)t.push($3ceb97a86c97e49f496755485fbe7a5f$export$default.clone(a[e]))}else if("object"==$3ceb97a86c97e49f496755485fbe7a5f$export$default.typeOf(t))for(let i=0;i<e.length;i++){let a=e[i];if("object"==$3ceb97a86c97e49f496755485fbe7a5f$export$default.typeOf(a))for(let e in a)$3ceb97a86c97e49f496755485fbe7a5f$export$default.isArrayOrObject(a[e])?e in t?$3ceb97a86c97e49f496755485fbe7a5f$export$default.merge(t[e],a[e]):t[e]=$3ceb97a86c97e49f496755485fbe7a5f$export$default.clone(a[e]):t[e]=a[e]}return t},override:function(t,...e){for(let i=0;i<e.length;i++)for(let a in e[i])t[a]=e[i][a];return t},partialCompare:function(t,e){if(null==t||null==e)return!1;if(t===e)return!0;for(var i in e)if(t[i]!=e[i])return!1;return!0},arrayFind:function(t,e,i){for(var a=0;t&&a<t.length;a++)if(this.partialCompare(t[a],e))return i?t[a]:a;return!!i&&null},isInstanceOf:function(t,e){return!(!t||!e||"object"!=typeof t)&&(t instanceof e||"isInstanceOf"in t&&t.isInstanceOf(e))},indexOf:function(t,e,i=!1){if(i){for(let i=0;i<t.length;i++)if(t[i]===e)return i;return-1}for(let i in t)if(t[i]===e)return i;return-1},escape:function(t){return(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},ensureTypeOf:function(t,e){return!e||!t||e instanceof t||e.isInstanceOf&&t.prototype.className&&e.isInstanceOf(t.prototype.className)?e:new t(e)},serialize:function(t){return JSON.stringify(t)},deserialize:function(t){return JSON.parse(t)},hookAppend:function(t,e,i,a=!0){const n=t[e];return t[e]=a?function(...t){if(!1!==n.apply(this,t))return i.apply(this,t)}:function(...t){return n.apply(this,t),i.apply(this,t)},{unhook:function(){t[e]=n}}},hookPrepend:function(t,e,i,a=!0){const n=t[e];return t[e]=a?function(...t){if(!1!==i.apply(this,t))return n.apply(this,t)}:function(...t){return i.apply(this,t),n.apply(this,t)},{unhook:function(){t[e]=n}}}},$362774b94d49f24810750f9afdb3753f$export$default=function(){};$362774b94d49f24810750f9afdb3753f$export$default._class=$362774b94d49f24810750f9afdb3753f$export$default,$362774b94d49f24810750f9afdb3753f$export$default._super={},$362774b94d49f24810750f9afdb3753f$export$default.prototype.className="Class",$362774b94d49f24810750f9afdb3753f$export$default.prototype.__ctor=function(){},$362774b94d49f24810750f9afdb3753f$export$default.prototype.__dtor=function(){},$362774b94d49f24810750f9afdb3753f$export$default.prototype.isInstanceOf=function(t){return(t="string"===$3ceb97a86c97e49f496755485fbe7a5f$export$default.typeOf(t)?t:t.prototype?t.prototype.className:t.constructor.prototype.className)in this._super||this.className===t},$362774b94d49f24810750f9afdb3753f$export$default.prototype._initSuperRefs=function(){let t=this.constructor._super,e={};const i=this;for(let a in t){let n={},r=t[a].prototype;for(let t in r)"function"===$3ceb97a86c97e49f496755485fbe7a5f$export$default.typeOf(r[t])&&(n[t]=function(t){return function(e,a,n,r,s,c,o,l,f,u,d){return t.call(i,e,a,n,r,s,c,o,l,f,u,d)}}(r[t]));e[a]=n}this._super=e},$362774b94d49f24810750f9afdb3753f$export$default.inherit=function(t){let e=this._class,i=e._super,a=e._class;if("function"===$3ceb97a86c97e49f496755485fbe7a5f$export$default.typeOf(t)){for(let i in t._class)/^[A-Z]/.test(i)||(e[i]=t._class[i]);$3ceb97a86c97e49f496755485fbe7a5f$export$default.override(e.prototype,t._class.prototype),$3ceb97a86c97e49f496755485fbe7a5f$export$default.override(i,t._class._super),t._class.prototype.className&&(i[t._class.prototype.className]=t._class)}else $3ceb97a86c97e49f496755485fbe7a5f$export$default.override(e.prototype,t);return e._super=i,e._class=a,e},$362774b94d49f24810750f9afdb3753f$export$default.prototype._extend=function(t,e){if(0===e.length)return t;const i=function(...t){this._initSuperRefs(),this.__ctor.apply(this,t)};i._class=i,i._super={},$362774b94d49f24810750f9afdb3753f$export$default.inherit.call(i,t),delete i.prototype.className;for(let t=0;t<e.length;t++)i.inherit(e[t]);return delete i._super.Class,"classInit"in i.prototype&&i.prototype.classInit(),i.isInstance=function(t){return $3ceb97a86c97e49f496755485fbe7a5f$export$default.isInstanceOf(t,i)},i},$362774b94d49f24810750f9afdb3753f$export$default.extend=function(...t){return this._class.prototype._extend(this,t)},$362774b94d49f24810750f9afdb3753f$export$default.create=function(t){return new(this.extend(t))};var $c04d28fb896be8a6f73a315d6d946608$export$default=$362774b94d49f24810750f9afdb3753f$export$default.extend({className:"Event",source:null,name:null,args:null,_async:!1,list:null,next:null,ret:null,original:null,i:-1,__ctor:function(t,e,i,a,n,r){this.source=t,this.name=i,this.args=a,this.cbHandler=n,this.cbContext=r,this.list=e,this.reset()},reset:function(){return this.next=null,this.ret=[],this._async=!1,this.i=-1,this},setSource:function(t){return this.source=t,this},wait:function(){return this._async=!0,this},resume:function(){for(this._async=!1;!(this._async||++this.i>=this.list.length);)if(!this.list[this.i].silent)if("string"==$3ceb97a86c97e49f496755485fbe7a5f$export$default.typeOf(this.list[this.i].handler)){if(this.list[this.i].context){if(!this.list[this.i].context[this.list[this.i].handler])continue;if(!1===this.list[this.i].context[this.list[this.i].handler](this,this.args,this.list[this.i].data))break}else if(!1===$parcel$global[this.list[this.i].handler].call(null,this,this.args,this.list[this.i].data))break}else if(!1===this.list[this.i].handler.call(this.list[this.i].context,this,this.args,this.list[this.i].data))break;return this._async||(this.i>=this.list.length&&this.next&&this.next.resume(),this.cbHandler&&this.cbHandler.call(this.cbContext)),this},from:function(t){return this.original=t,this},enqueue:function(t){if(!t)return this;var e;for(e=this;null!=e.next;e=e.next);return e.next=t,t.from(this),this}}),$a9faffe322318a64f1985439c7e08c88$export$default=$362774b94d49f24810750f9afdb3753f$export$default.extend({className:"EventDispatcher",listeners:null,namespace:null,__ctor:function(){this.listeners={}},setNamespace:function(t){return this.namespace=t,this},addEventListener:function(t,e,i,a){var n=(t=t.split(":"))[t.length-1],r=t.length>1?t[0]:null;return this.listeners[n]||(this.listeners[n]=[]),this.listeners[n].push({ns:r,handler:e,context:i,data:a,silent:0}),this},removeEventListener:function(t,e,i){var a=(t=t.split(":"))[t.length-1],n=t.length>1?t[0]:null;if("*"==a)for(var r in this.listeners)for(var s=this.listeners[r],c=0;c<s.length;c++){var o=!0;e&&(o=o&&s[c].handler===e),i&&(o=o&&s[c].context===i),n&&(o=o&&s[c].ns==n),o&&s.splice(c--,1)}else{if(!this.listeners[a])return this;for(s=this.listeners[a],c=0;c<s.length;c++){o=!0;e&&(o=o&&s[c].handler===e),i&&(o=o&&s[c].context===i),n&&(o=o&&s[c].ns==n),o&&s.splice(c--,1)}}return this},prepareEvent:function(t,e,i,a){var n=[],r=(t=t.split(":"))[t.length-1],s=t.length>1?t[0]:null;this.listeners[r]&&(n=n.concat(this.listeners[r])),this.listeners["*"]&&(n=n.concat(this.listeners["*"]));for(var c=0;c<n.length;c++)n[c].silent&&n.splice(c--,1);if(s)for(c=0;c<n.length;c++)n[c].ns!=s&&n.splice(c--,1);return new $c04d28fb896be8a6f73a315d6d946608$export$default(this,n,r,e,i,a)},silence:function(t,e){var i=(t=t.split(":"))[t.length-1],a=t.length>1?t[0]:null;if(e=!1===e?-1:1,"*"==i)for(var n in this.listeners)for(var r=this.listeners[n],s=0;s<r.length;s++)a&&r[s].ns!=a||(r[s].silent+=e);else{if(!this.listeners[i])return this;for(r=this.listeners[i],s=0;s<r.length;s++)a&&r[s].ns!=a||(r[s].silent+=e)}return this},dispatchEvent:function(t,e,i,a){return this.prepareEvent(this.namespace?this.namespace+":"+t:t,e,i,a).resume()}}),$628b2663dd62299e7b2444a2de7f9153$export$default={email:/^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)+$/i,url:/^[\w-]+:\/\/[\w-]+(\.\w+)+.*$/,urlNoProt:/^[\w-]+(\.\w+)+.*$/,name:/^[-A-Za-z0-9_.]+$/,uname:/^['\pL\pN ]+$/,text:/^[^&<>{}]*$/,utext:/^([\r\n\pL\pN\pS &!@#$%*\[\]()_+=;',.\/?:"~-]+)$/},$1af3bbb333f7838ae832df5e3332f3f3$exports=function(){var exports=this,module={exports:this};exports.__esModule=!0;var $1af3bbb333f7838ae832df5e3332f3f3$export$default={_getref:function(value,obj){return"string"==typeof value?("#"==value.substr(0,1)?value=obj.get(value.substr(1)):"@"==value.substr(0,1)&&(value=obj[value.substr(1)]),"string"==typeof value?eval(value):value):value},type:function(t,e,i,a){switch(e){case"int":if(a=parseInt(a),isNaN(a))throw new Error(e);break;case"float":if(a=parseFloat(a),isNaN(a))throw new Error(e);break;case"string":a=null==a?"":a.toString();break;case"bit":if(!0===a||!1===a){a=a?1:0;break}if(a=parseInt(a),isNaN(a))throw new Error(e);a=a?1:0;break;case"array":if("array"==$3ceb97a86c97e49f496755485fbe7a5f$export$default.typeOf(a))break;if(null==a){a=[];break}throw new Error(e);case"bool":if("true"===a||!0===a){a=!0;break}if("false"===a||!1===a){a=!1;break}throw new Error(e)}return a},model:function(t,e,i,a){var n=this._getref(e,t);if(!n)throw new Error(e);return a?n.ensure(a):new n},cls:function(t,e,i,a){var n=this._getref(e,t);return a?$3ceb97a86c97e49f496755485fbe7a5f$export$default.ensureTypeOf(n,a):new n},arrayof:function(t,e,i,a){var n=this._getref(e,t);if(a||(a=[]),!n||"array"!=$3ceb97a86c97e49f496755485fbe7a5f$export$default.typeOf(a))throw new Error(e);for(var r=0;r<a.length;r++)a[r]=$3ceb97a86c97e49f496755485fbe7a5f$export$default.ensureTypeOf(n,a[r]);return a},arraynull:function(t,e,i,a){var n=!1;if("object"==$3ceb97a86c97e49f496755485fbe7a5f$export$default.typeOf(e)&&(e.remove&&(n=e.remove),e=e.value),e)return a;if("array"!=$3ceb97a86c97e49f496755485fbe7a5f$export$default.typeOf(a))throw new Error(e);for(var r=0;r<a.length;r++)if(null==a[r]){if(!n)throw new Error(e);a.splice(r--,1)}return a},arraycompliant:function(t,e,i,a){var n=!1;if("object"==$3ceb97a86c97e49f496755485fbe7a5f$export$default.typeOf(e)&&(e.remove&&(n=e.remove),e=e.value),!e)return a;if("array"!=$3ceb97a86c97e49f496755485fbe7a5f$export$default.typeOf(a))throw new Error(e);for(var r=0;r<a.length;r++)if(null!=a[r]&&!a[r].isCompliant()){if(!n)throw new Error(e);a.splice(r--,1)}return a},required:function(t,e,i,a){if(null==a)throw new Error(e?"":"null");switch($3ceb97a86c97e49f496755485fbe7a5f$export$default.typeOf(a)){case"array":if(0==a.length)throw new Error(e?"":"null");break;default:if(0==a.toString().length)throw new Error(e?"":"null")}return a},minlen:function(t,e,i,a){if(a.toString().length<e)throw new Error(e);return a},maxlen:function(t,e,i,a){if(a.toString().length>e)throw new Error(e);return a},minval:function(t,e,i,a){if(parseFloat(a)<e)throw new Error(e);return a},maxval:function(t,e,i,a){if(parseFloat(a)>e)throw new Error(e);return a},mincount:function(t,e,i,a){if("array"!=$3ceb97a86c97e49f496755485fbe7a5f$export$default.typeOf(a)||a.length<e)throw new Error(e);return a},maxcount:function(t,e,i,a){if("array"!=$3ceb97a86c97e49f496755485fbe7a5f$export$default.typeOf(a)||a.length>e)throw new Error(e);return a},pattern:function(t,e,i,a){if(!$628b2663dd62299e7b2444a2de7f9153$export$default[e].test(a.toString()))throw new Error(e);return a},inset:function(t,e,i,a){if("array"!=$3ceb97a86c97e49f496755485fbe7a5f$export$default.typeOf(e)){if(!new RegExp("^("+e.toString()+")$").test(a.toString()))throw new Error(e);return a}if(-1==e.indexOf(a.toString()))throw new Error(e.join("|"));return a},upper:function(t,e,i,a){return e?a.toString().toUpperCase():a},lower:function(t,e,i,a){return e?a.toString().toLowerCase():a}};return $parcel$export(exports,"default",(function(){return $1af3bbb333f7838ae832df5e3332f3f3$export$default})),module.exports}.call({});let $2f7ebfe35530a50778e04edf3edb1269$export$default=$a9faffe322318a64f1985439c7e08c88$export$default.extend({className:"Model",defaults:null,constraints:null,data:null,changedList:null,_silent:0,_level:0,__ctor:function(t,e){if(this._super.EventDispatcher.__ctor(),this.data={},null!=e)this.reset(e);else{var i=null;if(!this.defaults&&this.constraints){i={};for(var a in this.constraints){var n=this.constraints[a];null!==n.def&&void 0!==n.def?"function"==typeof n.def?i[a]=n.def():i[a]=n.def:i[a]=null}}this.reset(i)}this.init(),null!=t&&this.set(arguments[0],!0),this.constraints&&this.update(),this.ready()},reset:function(t,e){if(!this.defaults){if(!t||"object"!=$3ceb97a86c97e49f496755485fbe7a5f$export$default.typeOf(t)&&"function"!=$3ceb97a86c97e49f496755485fbe7a5f$export$default.typeOf(t))return this;this.defaults=t}return"function"==$3ceb97a86c97e49f496755485fbe7a5f$export$default.typeOf(this.defaults)?this.data=this.defaults():this.data=$3ceb97a86c97e49f496755485fbe7a5f$export$default.clone(this.defaults),!1===e||!1===t?this:this.update(null,!0)},init:function(){},ready:function(){},silent:function(t){return this._silent+=t?1:-1,this},_validate:function(t,e){if(!this.constraints||!this.constraints[t])return e;var i=this.constraints[t],a=e;for(var n in i)if($2f7ebfe35530a50778e04edf3edb1269$export$default.Constraints[n])try{a=$2f7ebfe35530a50778e04edf3edb1269$export$default.Constraints[n](this,i[n],t,a)}catch(e){if("null"==e.message)break;throw new Error(`Constraint [${n}:${i[n]}] failed on property '${t}'.`)}return a},_set:function(t,e){if(!this.constraints||!this.constraints[t])return this.data[t]=e,e;var i=this.constraints[t],a=(this.data[t],e);for(var n in i)if($2f7ebfe35530a50778e04edf3edb1269$export$default.Constraints[n])try{a=$2f7ebfe35530a50778e04edf3edb1269$export$default.Constraints[n](this,i[n],t,a)}catch(i){if("null"==i.message)break;this._silent||this.dispatchEvent("constraintError",{constraint:n,message:i.message,name:t,value:e});break}return this.data[t]=a},_propertyEvent:function(t,e,i,a){var n={name:t,old:e,value:i,level:this._level},r=this.dispatchEvent("propertyChanging",n);a?this.data[t]=n.value:n.value=this._set(t,n.value),null!=r&&r.ret.length&&!1===r.ret[0]||(this.dispatchEvent("propertyChanged."+t,n),this.dispatchEvent("propertyChanged",n),this.changedList.push(t))},set:function(){var t=arguments.length,e=!1,i=!1;if((t>2||2==t&&"object"==$3ceb97a86c97e49f496755485fbe7a5f$export$default.typeOf(arguments[0]))&&"boolean"==$3ceb97a86c97e49f496755485fbe7a5f$export$default.typeOf(arguments[t-1])&&!1===(e=arguments[--t])&&(i=!0),0==this._level&&(this.changedList=[]),this._level++,2==t)(this.data[arguments[0]]!=arguments[1]||e)&&(this._silent||i?this._set(arguments[0],arguments[1]):this._propertyEvent(arguments[0],this.data[arguments[0]],this._validate(arguments[0],arguments[1])));else for(var a in arguments[0])(this.data[a]!=arguments[0][a]||e)&&(this._silent||i?this._set(a,arguments[0][a]):this._propertyEvent(a,this.data[a],this._validate(a,arguments[0][a])));return--this._level||!this.changedList.length||i||this._silent||this.dispatchEvent("modelChanged",{fields:this.changedList}),this},has:function(t){return t in this.data},get:function(t,e){return 0==arguments.length||!1===t?this.data:1==arguments.length&&!0===t?this.flatten():2==arguments.length&&void 0===this.data[t]?e:this.data[t]},getInt:function(t,e){return 2==arguments.length&&void 0===this.data[t]?e:parseInt(this.data[t])},getFloat:function(t,e){return 2==arguments.length&&void 0===this.data[t]?e:parseFloat(this.data[t])},getBool:function(t,e){return"true"===(t=2==arguments.length&&void 0===this.data[t]?e:this.data[t])||!0===t||"false"!==t&&!1!==t&&!!parseInt(t)},getReference:function(t){var e=this;return{get:function(){return e.get(t)},set:function(i){e.set(t,i)}}},constraint:function(t,e,i){if(3==arguments.length||2==arguments.length||1==arguments.length&&"object"==$3ceb97a86c97e49f496755485fbe7a5f$export$default.typeOf(t)){switch(this.constraints===this.constructor.prototype.constraints&&(this.constraints=$3ceb97a86c97e49f496755485fbe7a5f$export$default.clone(this.constraints)),arguments.length){case 1:$3ceb97a86c97e49f496755485fbe7a5f$export$default.override(this.constraints,t);break;case 2:$3ceb97a86c97e49f496755485fbe7a5f$export$default.override(this.constraints[t],e);break;case 3:this.constraints[t][e]=i}return this}return t?this.constraints[t]:this},flatten:function(t,e){if(t)return null==(n=this.flatten(!1,!0))?null:(n.class=this.classPath,n);if(!this.constraints&&!this.defaults)return this.data;if(!this.isCompliant())return{};var i=this.constraints,a=this.defaults?"function"==$3ceb97a86c97e49f496755485fbe7a5f$export$default.typeOf(this.defaults)?this.defaults():this.defaults:this.constraints,n={};for(var r in this.data)if(r in a){if(i&&i[r]){var s=i[r];if(s.model){n[r]=this.data[r]?this.data[r].flatten(e):null;continue}if(s.arrayof){n[r]=[];for(var c=0;c<this.data[r].length;c++)n[r][c]=this.data[r][c]?this.data[r][c].flatten(e):null;continue}if(s.cls){n[r]=this.data[r]?this.data[r].flatten():null;continue}}n[r]=this.data[r]}return n},remove:function(t,e){if("array"==$3ceb97a86c97e49f496755485fbe7a5f$export$default.typeOf(t)){for(var i=0;i<t.length;i++)delete this.data[t[i]];!1===e||this._silent||this.dispatchEvent("propertyRemoved",{fields:t})}else delete this.data[t],!1===e||this._silent||this.dispatchEvent("propertyRemoved",{fields:[t]})},update:function(t,e){if(this._silent)return this;if(0==this._level&&(this.changedList=[]),this._level++,t&&"string"==$3ceb97a86c97e49f496755485fbe7a5f$export$default.typeOf(t))this._propertyEvent(t,this.data[t],this.data[t],e);else if(t&&"array"==$3ceb97a86c97e49f496755485fbe7a5f$export$default.typeOf(t))for(var i of t)this._propertyEvent(i,this.data[i],this.data[i],e);else for(var i in this.data)this._propertyEvent(i,this.data[i],this.data[i],e);return--this._level||this._silent||0==this.changedList.length&&!0!==t||this.dispatchEvent("modelChanged",{fields:this.changedList}),this},validate:function(t){if(!this.constraints)return this;if(t&&"string"==$3ceb97a86c97e49f496755485fbe7a5f$export$default.typeOf(t))this._set(t,this.data[t]);else for(var e in this.data)t&&-1==$3ceb97a86c97e49f496755485fbe7a5f$export$default.indexOf(t,e)||this._set(e,this.data[e]);return this},isCompliant:function(){if(!this.constraints)return!0;try{for(var t in this.data)this._validate(t,this.data[t]);return!0}catch(t){}return!1},observe:function(t,e,i){this.addEventListener("propertyChanged."+t,e,i)},unobserve:function(t,e,i){this.removeEventListener("propertyChanged."+t,e,i)},watch:function(t,e){1==(t=t.split(":")).length&&(t[1]=t[0],t[0]="watch"),this.addEventListener(t[0]+":propertyChanged."+t[1],(function(t,i){e(i.value,i,t)}))},unwatch:function(t){1==(t=t.split(":")).length&&(t[1]=t[0],t[0]="watch"),this.removeEventListener(t[0]+":propertyChanged."+t[1])},toString:function(){return $3ceb97a86c97e49f496755485fbe7a5f$export$default.serialize(this.get(!0))}});$2f7ebfe35530a50778e04edf3edb1269$export$default.Constraints=$1af3bbb333f7838ae832df5e3332f3f3$exports.default;var $1b34262781301ee786b89a6f27f8ba34$export$default=$2f7ebfe35530a50778e04edf3edb1269$export$default.extend({className:"ModelList",itemt:$2f7ebfe35530a50778e04edf3edb1269$export$default,contents:null,itemId:null,nextId:null,defaults:{contents:null},constraints:{contents:{type:"array",arrayof:"@itemt"}},__ctor:function(...t){this.itemId=[],this.nextId=0,this._super.Model.__ctor(...t)},ready:function(){this._eventGroup="ModelList_"+Date.now()+":modelChanged",this.contents=this.data.contents},_bind:function(t,e){return e&&e.addEventListener&&e.addEventListener(this._eventGroup,this._onItemEvent,this,t),e},_unbind:function(t){return t&&t.removeEventListener&&t.removeEventListener(this._eventGroup),t},_onItemEvent:function(t,e,i){this.prepareEvent("itemChanged",{id:i,item:t.source}).from(t).enqueue(this.prepareEvent("modelChanged",{fields:["contents"]})).resume()},length:function(){return this.data.contents.length},clear:function(){for(var t=0;t<this.data.contents;t++)this._unbind(this.data.contents[t]);this.itemId=[],this.nextId=0,this.contents=this.data.contents=[],this.prepareEvent("itemsCleared").enqueue(this.prepareEvent("modelChanged",{fields:["contents"]})).resume()},setData:function(t){if(this.clear(),t){for(var e=0;e<t.length;e++){var i=$3ceb97a86c97e49f496755485fbe7a5f$export$default.ensureTypeOf(this.itemt,t[e]);this.itemId.push(this.nextId++),this.data.contents.push(i),this._bind(this.nextId-1,i)}this.prepareEvent("itemsChanged").enqueue(this.prepareEvent("modelChanged",{fields:["contents"]})).resume()}},getData:function(){return this.data.contents},getAt:function(t){return t<0||t>=this.data.contents.length?null:this.data.contents[t]},removeAt:function(t){if(t<0||t>=this.data.contents.length)return null;let e=this.data.contents.splice(t,1)[0],i=this.itemId.splice(t,1)[0];return this._unbind(e),this.prepareEvent("itemRemoved",{id:i,item:e}).enqueue(this.prepareEvent("modelChanged",{fields:["contents"]})).resume(),e},setAt:function(t,e){return!(t<0||t>=this.data.contents.length)&&(e=$3ceb97a86c97e49f496755485fbe7a5f$export$default.ensureTypeOf(this.itemt,e),this._unbind(this.data.contents[t]),this.data.contents[t]=e,this._bind(this.itemId[t],e),this.prepareEvent("itemChanged",{id:this.itemId[t],item:e}).enqueue(this.prepareEvent("modelChanged",{fields:["contents"]})).resume(),!0)},updateAt:function(t){return!(t<0||t>=this.data.contents.length)&&(this.prepareEvent("itemChanged",{id:this.itemId[t],item:this.data.contents[t]}).enqueue(this.prepareEvent("modelChanged",{fields:["contents"]})).resume(),!0)},push:function(t){return t&&"object"!=$3ceb97a86c97e49f496755485fbe7a5f$export$default.typeOf(t)?null:(t=$3ceb97a86c97e49f496755485fbe7a5f$export$default.ensureTypeOf(this.itemt,t),this.itemId.push(this.nextId++),this.data.contents.push(t),this._bind(this.nextId-1,t),this.prepareEvent("itemAdded",{id:this.itemId[this.itemId.length-1],item:t,position:"tail"}).enqueue(this.prepareEvent("modelChanged",{fields:["contents"]})).resume(),t)},pop:function(){return this._unbind(this.data.contents.pop())},unshift:function(t){return t&&"object"!=$3ceb97a86c97e49f496755485fbe7a5f$export$default.typeOf(t)?null:(t=$3ceb97a86c97e49f496755485fbe7a5f$export$default.ensureTypeOf(this.itemt,t),this.itemId.unshift(this.nextId++),this.data.contents.unshift(t),this._bind(this.nextId-1,t),this.prepareEvent("itemAdded",{id:this.itemId[0],item:t,position:"head"}).enqueue(this.prepareEvent("modelChanged",{fields:["contents"]})).resume(),t)},shift:function(){return this._unbind(this.data.contents.shift())},find:function(t,e){for(var i=this.data.contents,a=0;a<i.length;a++)if($3ceb97a86c97e49f496755485fbe7a5f$export$default.partialCompare(i[a].data,t))return e?i[a]:a;return e?null:-1}});let $bfb70efaddca37b3e97c302907a1a3f5$export$default={Type:function(t){let e={flatten:function(t,e){return t},unflatten:function(t,e){return t}};return t?$3ceb97a86c97e49f496755485fbe7a5f$export$default.override(e,t):e},String:function(){return $bfb70efaddca37b3e97c302907a1a3f5$export$default.Type({flatten:function(t,e){return null!=t?t.toString():null},unflatten:function(t,e){return null!=t?t.toString():null}})},Integer:function(){return $bfb70efaddca37b3e97c302907a1a3f5$export$default.Type({flatten:function(t,e){return~~t},unflatten:function(t,e){return~~t}})},Number:function(t){return $bfb70efaddca37b3e97c302907a1a3f5$export$default.Type({_precision:t,_round:!1,precision:function(t){return this._precision=~~t,this},flatten:function(t,e){return t=parseFloat(t),this._precision>0&&(t=~~(t*Math.pow(10,this._precision))/Math.pow(10,this._precision)),t},unflatten:function(t,e){return parseFloat(t)}})},Bool:function(t){return $bfb70efaddca37b3e97c302907a1a3f5$export$default.Type({_compact:t,compact:function(t){return this._compact=t,this},flatten:function(t,e){return t=~~t,this._compact?t>0?1:0:t>0},unflatten:function(t,e){return!!~~t}})},SharedString:function(){return $bfb70efaddca37b3e97c302907a1a3f5$export$default.Type({flatten:function(t,e){return null==t?0:(t=t.toString(),"strings"in e||(e.strings_map={},e.strings=[]),t in e.strings_map||(e.strings.push(t),e.strings_map[t]=e.strings.length),e.strings_map[t])},unflatten:function(t,e){return null==t||0==t?null:e.strings[~~t-1]}})},Array:function(t){return $bfb70efaddca37b3e97c302907a1a3f5$export$default.Type({itemType:t,_debug:!1,debug:function(t){return this._debug=t,this},of:function(t){return this.itemType=t,this},flatten:function(t,e){if(null==t)return null;let i=[];for(let a=0;a<t.length;a++)i.push(this.itemType.flatten(t[a],e));return i},unflatten:async function(t,e){if(null==t)return null;let i=[];for(let a=0;a<t.length;a++)i.push(await this.itemType.unflatten(t[a],e));return i}})},Object:function(){return $bfb70efaddca37b3e97c302907a1a3f5$export$default.Type({properties:[],property:function(t,e,i=null){return this.properties.push({name:t,type:e,defvalue:i}),this},flatten:function(t,e){if(null==t)return null;let i;if(!0===e.symbolic){i={};for(let a=0;a<this.properties.length;a++)i[this.properties[a].name]=this.properties[a].type.flatten(t[this.properties[a].name],e)}else{i=[];for(let a=0;a<this.properties.length;a++)i.push(this.properties[a].type.flatten(t[this.properties[a].name],e))}return i},unflatten:async function(t,e){if(null==t)return null;let i={};if(!0===e.symbolic)for(let a=0;a<this.properties.length;a++)i[this.properties[a].name]=await this.properties[a].type.unflatten(this.properties[a].name in t?t[this.properties[a].name]:this.properties[a].defvalue,e);else for(let a=0;a<this.properties.length;a++)i[this.properties[a].name]=await this.properties[a].type.unflatten(a in t?t[a]:this.properties[a].defvalue,e);return i}})},Class:function(t){return $bfb70efaddca37b3e97c302907a1a3f5$export$default.Type({_constructor:t,constructor:function(t){return this._constructor=t,this},flatten:function(t,e){return null==t?null:t.flatten(e)},unflatten:async function(t,e){return null==t?null:await(new this._constructor).unflatten(t,e)}})},Property:function(t,e){return $bfb70efaddca37b3e97c302907a1a3f5$export$default.Type({property:t,type:e,name:function(t){return this.property=t,this},is:function(t){return this.type=t,this},flatten:function(t,e){if(null==t)return null;let i;return!0===e.symbolic?(i={},i[this.property]=this.type.flatten(t[this.property],e)):i=this.type.flatten(t[this.property],e),i},unflatten:async function(t,e){if(null==t)return null;let i={};return!0===e.symbolic?i[this.property]=await this.type.unflatten(t[this.property],e):i[this.property]=await this.type.unflatten(t,e),i}})},Map:function(){return $bfb70efaddca37b3e97c302907a1a3f5$export$default.Type({flatten:function(t,e){if(null==t)return null;if(!0===e.symbolic)return t;let i=[];for(let e in t)i.push(e),i.push(t[e]);return i},unflatten:function(t,e){if(null==t)return null;if(!0===e.symbolic)return t;let i={};for(let e=0;e<t.length;e+=2)i[t[e]]=t[e+1];return i}})}};var $c66cec705a74cd97c80e654695cbc7bf$export$default=$362774b94d49f24810750f9afdb3753f$export$default.extend({className:"Flattenable",typeSchema:null,flatten:function(t){return this.typeSchema.flatten(this,t)},unflatten:async function(t,e){return Object.assign(this,await this.typeSchema.unflatten(t,e)),await this.onUnflattened(),this},onUnflattened:async function(){}}),$7f499fb6ae525cccb42bc3703ca82ffc$export$default=$c66cec705a74cd97c80e654695cbc7bf$export$default.extend({className:"Collection",itemTypeSchema:null,items:null,__ctor:function(t){t||(t=this.itemTypeSchema),t&&(this.typeSchema=$bfb70efaddca37b3e97c302907a1a3f5$export$default.Property("items").is($bfb70efaddca37b3e97c302907a1a3f5$export$default.Array().of(t))),this.reset()},onUnflattened:function(){let t=this.items;this.reset();for(let e of t)this.add(e)},reset:function(){return this.items=[],this},clear:function(){var t=this.items;this.reset();for(var e=0;e<t.length;e++)this.onItemRemoved(t[e],0);return this},sort:function(t,e){return"function"!=typeof t?this.items.sort((function(i,a){return(i[t]<=a[t]?-1:1)*(!0===e?-1:1)})):this.items.sort(t),this},findItem:function(t,e){if(!this.items)return null;for(var i=0;i<this.items.length;i++)if((!e||!$3ceb97a86c97e49f496755485fbe7a5f$export$default.partialCompare(this.items[i],e))&&$3ceb97a86c97e49f496755485fbe7a5f$export$default.partialCompare(this.items[i],t))return this.items[i];return null},getItems:function(){return this.items},length:function(){return this.items.length},isEmpty:function(){return!this.items.length},indexOf:function(t){return this.items.indexOf(t)},getAt:function(t,e=!1){return t<0&&1==e&&(t+=this.items.length),t>=0&&t<this.items.length?this.items[t]:null},first:function(){return this.getAt(0)},last:function(){return this.getAt(-1,!0)},addAt:function(t,e){if(!e||!this.onBeforeItemAdded(e))return this;if(t<0&&(t=0),t>this.items.length&&(t=this.items.length),0==t)this.items.unshift(e);else if(t==this.items.length)this.items.push(e);else{var i=this.items.splice(0,t);i.push(e),this.items=i.concat(this.items)}return this.onItemAdded(e),this},unshift:function(t){return this.addAt(0,t)},push:function(t){return this.addAt(this.items.length,t)},add:function(t){return this.push(t)},removeAt:function(t,e=!1){if(t<0&&1==e&&(t+=this.items.length),t<0||t>=this.items.length)return null;var i=this.items[t];return this.items.splice(t,1),this.onItemRemoved(i,t),i},pop:function(t){return this.removeAt(-1,!0)},shift:function(t){return this.removeAt(0)},remove:function(t){return this.removeAt(this.indexOf(t))},forEach:function(t){if(this.isEmpty())return this;for(var e=0;e<this.items.length&&!1!==t(this.items[e],e,this);e++);return this},forEachCall:function(t,...e){if(this.isEmpty())return this;for(var i=0;i<this.items.length&&!1!==this.items[i][t](...e);i++);return this},forEachRev:function(t){if(this.isEmpty())return this;for(var e=this.items.length-1;e>=0&&!1!==t(this.items[e],e,this);e--);return this},forEachRevCall:function(t,...e){if(this.isEmpty())return this;for(var i=this.items.length-1;i>=0&&!1!==this.items[i][t](...e);i--);return this},onBeforeItemAdded:function(t){return!0},onItemAdded:function(t){},onItemRemoved:function(t){}});let $3c7e9e824106ff726f04cd7ecac64f05$export$default={strict:!1,parseTemplate:function(t,e,i,a=!1,n=1){let r="string",s=null,c=0,o=0,l="",f=[],u=f,d=!1;function h(t,a){if("template"==t?a=$3c7e9e824106ff726f04cd7ecac64f05$export$default.parseTemplate(a,e,i,!0,0):"parse"==t?(a=$3c7e9e824106ff726f04cd7ecac64f05$export$default.parseTemplate(a,e,i,!1,0),t="base-string","array"==$3ceb97a86c97e49f496755485fbe7a5f$export$default.typeOf(a)&&(t=a[0].type,a=a[0].data)):"parse-trim-merge"==t?a=$3c7e9e824106ff726f04cd7ecac64f05$export$default.parseTemplate(a.trim().split("\n").map((t=>t.trim())).join("\n"),e,i,!1,0):"parse-merge"==t?a=$3c7e9e824106ff726f04cd7ecac64f05$export$default.parseTemplate(a,e,i,!1,0):"parse-merge-alt"==t&&(a=$3c7e9e824106ff726f04cd7ecac64f05$export$default.parseTemplate(a,"{","}",!1,0)),"parse-merge"==t||"parse-merge-alt"==t||"parse-trim-merge"==t)for(let t=0;t<a.length;t++)f.push(a[t]);else f.push({type:t,data:a});d&&(u.push(f=[]),d=!1)}!0===a&&(t=t.trim(),r="identifier",c=10,u.push(f=[])),t+="\0";for(let a=0;a<t.length;a++)if("\\"!=t[a]){switch(c){case 0:"\0"==t[a]?s="string":t[a]==e&&"<"==t[a+1]?(c=1,o=1,s="string",r="parse-merge"):t[a]==e&&"@"==t[a+1]?(c=1,o=1,s="string",r="parse-trim-merge",a++):t[a]==e&&":"==t[a+1]?(c=12,o=1,s="string",r="string",a++):t[a]==e?(c=1,o=1,s="string",r="template"):l+=t[a];break;case 1:if("\0"==t[a])throw new Error("Parse error: Unexpected end of template");if(t[a]==i){if(o--,o<0)throw new Error("Parse error: Unmatched "+i);if(0==o){c=0,s=r;break}}else t[a]==e&&o++;l+=t[a];break;case 10:if("\0"==t[a]){s=r;break}if("."==t[a]){h(r,l),h("access","."),r="identifier",l="";break}if(null!=t[a].match(/[\t\n\r\f\v ]/)){for(s=r,r="identifier",d=!0;null!=t[a].match(/[\t\n\r\f\v ]/);)a++;a--;break}if(t[a]==e&&"<"==t[a+1]){l&&(s=r),c=11,o=1,r="parse-merge";break}if(t[a]==e&&"@"==t[a+1]){l&&(s=r),c=11,o=1,r="parse-trim-merge",a++;break}if('"'==t[a]){l&&(s=r),c=14,o=1,r="parse-merge";break}if("'"==t[a]){l&&(s=r),c=15,o=1,r="parse-merge";break}if("`"==t[a]){l&&(s=r),c=16,o=1,r="parse-merge-alt";break}if(t[a]==e&&":"==t[a+1]){l&&(s=r),c=13,o=1,r="string",a++;break}if(t[a]==e){l&&h(r,l),c=11,o=1,l="",r="parse",l+=t[a];break}"identifier"!=r&&(h(r,l),l="",r="identifier"),l+=t[a];break;case 11:if("\0"==t[a])throw new Error("Parse error: Unexpected end of template");if(t[a]==i){if(o--,o<0)throw new Error("Parse error: Unmatched "+i);if(0==o&&(c=10,"parse-merge"==r||"parse-merge-alt"==r||"parse-trim-merge"==r))break}else t[a]==e&&o++;l+=t[a];break;case 12:if("\0"==t[a])throw new Error("Parse error: Unexpected end of template");if(t[a]==i){if(o--,o<0)throw new Error("Parse error: Unmatched "+i);if(0==o){0!=l.length&&"<"!=l[0]&&"["!=l[0]&&" "!=l[0]&&(l=e+l+i),c=0,s=r;break}}else t[a]==e&&o++;l+=t[a];break;case 13:if("\0"==t[a])throw new Error("Parse error: Unexpected end of template");if(t[a]==i){if(o--,o<0)throw new Error("Parse error: Unmatched "+i);if(0==o){"<"!=l[0]&&"["!=l[0]&&" "!=l[0]&&(l=e+l+i),c=10;break}}else t[a]==e&&o++;l+=t[a];break;case 14:if("\0"==t[a])throw new Error("Parse error: Unexpected end of template");if('"'==t[a]){if(o--,o<0)throw new Error('Parse error: Unmatched "');if(0==o&&(c=10,"parse-merge"==r||"parse-merge-alt"==r||"parse-trim-merge"==r))break}l+=t[a];break;case 15:if("\0"==t[a])throw new Error("Parse error: Unexpected end of template");if("'"==t[a]){if(o--,o<0)throw new Error("Parse error: Unmatched '");if(0==o&&(c=10,"parse-merge"==r||"parse-merge-alt"==r||"parse-trim-merge"==r))break}l+=t[a];break;case 16:if("\0"==t[a])throw new Error("Parse error: Unexpected end of template");if("`"==t[a]){if(o--,o<0)throw new Error("Parse error: Unmatched `");if(0==o&&(c=10,"parse-merge"==r||"parse-merge-alt"==r||"parse-trim-merge"==r))break}l+=t[a]}s&&(h(s,l),s=l="")}else l+="\\",l+=t[++a];if(!a){let t=0;for(;t<u.length&&"string"==u[t].type&&""==u[t].data;)u.splice(t,1);for(t=u.length-1;t>0&&"string"==u[t].type&&""==u[t].data;)u.splice(t--,1);0==u.length&&u.push({type:"string",data:""})}return n&&function t(e){if("object"==typeof e){if(e instanceof Array)for(let i=0;i<e.length;i++)t(e[i]);else e.data=t(e.data);return e}for(let t=0;t<e.length;t++)if("\\"==e[t]){let i=e[t+1];switch(i){case"n":i="\n";break;case"r":i="\r";break;case"f":i="\f";break;case"v":i="\v";break;case"t":i="\t";break;case"s":i="s";break;case'"':i='"';break;case"'":i="'"}e=e.substr(0,t)+i+e.substr(t+2)}return e}(u),u},parse:function(t){return this.parseTemplate(t.trim(),"[","]",!1)},clean:function(t){for(let e=0;e<t.length;e++)"template"!=t[e].type&&(t.splice(e,1),e--);return t},expand:function(t,e,i="text",a="base-string"){let n=[];if("var"==a){let i=!0,a=!1,r=e,s=null,c=!0,o="";for(let n=0;n<t.length&&null!=e;n++)switch(t[n].type){case"identifier":case"string":o+=t[n].data,s=null;break;case"template":s=this.expand(t[n].data,r,"arg","template"),o+="object"!=typeof s?s:"";break;case"base-string":o+=this.expand(t[n].data,r,"arg","base-string"),s=null;break;case"access":if(s&&"object"==typeof s)e=s;else{for(""==o&&(o="this");;)if("!"==o[0])o=o.substr(1),i=!1;else{if("$"!=o[0])break;o=o.substr(1),a=!0}if("this"!=o&&null!=e){let t=e;null===(e=o in e?e[o]:null)&&c&&o in $3c7e9e824106ff726f04cd7ecac64f05$export$default.functions&&(e=$3c7e9e824106ff726f04cd7ecac64f05$export$default.functions[o](null,null,t)),c=!1}}o=""}for(;""!=o;)if("!"==o[0])o=o.substr(1),i=!1;else{if("$"!=o[0])break;o=o.substr(1),a=!0}if("this"!=o){let i=!1;if(null!=e?o in e?e=e[o]:(i=!0,e=null):i=!0,i&&1==t.length&&1==$3c7e9e824106ff726f04cd7ecac64f05$export$default.strict)throw new Error("Expression function `"+o+"` not found.")}"string"==typeof e&&(i&&(e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),a&&(e='"'+e+'"')),n.push(e)}if("varref"==i){let i=e,a=null,n=!0,r="";for(let s=0;s<t.length&&null!=e;s++)switch(t[s].type){case"identifier":case"string":r+=t[s].data,a=null;break;case"template":a=this.expand(t[s].data,i,"arg","template"),r+="object"!=typeof a?a:"";break;case"base-string":r+=this.expand(t[s].data,i,"arg","base-string"),a=null;break;case"access":if(a&&"object"==typeof a)e=a;else{for(""==r&&(r="this");;)if("!"==r[0])r=r.substr(1);else{if("$"!=r[0])break;r=r.substr(1)}if("this"!=r&&null!=e){let t=e;null===(e=r in e?e[r]:null)&&n&&r in $3c7e9e824106ff726f04cd7ecac64f05$export$default.functions&&(e=$3c7e9e824106ff726f04cd7ecac64f05$export$default.functions[r](null,null,t)),n=!1}}r=""}for(;""!=r;)if("!"==r[0])r=r.substr(1);else{if("$"!=r[0])break;r=r.substr(1)}return"this"!=r?[e,r]:null}if("fn"==a){var r=[];if(r.push($3c7e9e824106ff726f04cd7ecac64f05$export$default.expand(t[0],e,"text","base-string")),"_"+r[0]in $3c7e9e824106ff726f04cd7ecac64f05$export$default.functions&&(r[0]="_"+r[0]),!(r[0]in $3c7e9e824106ff726f04cd7ecac64f05$export$default.functions)){if(1==$3c7e9e824106ff726f04cd7ecac64f05$export$default.strict)throw new Error("Expression function `"+r[0]+"` not found.");return`(Unknown: ${r[0]})`}if("_"==r[0][0])return $3c7e9e824106ff726f04cd7ecac64f05$export$default.functions[r[0]](t,e);for(let i=1;i<t.length;i++)r.push($3c7e9e824106ff726f04cd7ecac64f05$export$default.expand(t[i],e,"arg","base-string"));n.push($3c7e9e824106ff726f04cd7ecac64f05$export$default.functions[r[0]](r,t,e))}if("template"==a){if(1==t.length){if(1==t[0].length&&"string"==t[0][0].type)return t[0][0].data;if(1==t[0].length&&"identifier"==t[0][0].type){let a=t[0][0].data;if(a in $3c7e9e824106ff726f04cd7ecac64f05$export$default.functions||"_"+a in $3c7e9e824106ff726f04cd7ecac64f05$export$default.functions)return $3c7e9e824106ff726f04cd7ecac64f05$export$default.expand(t,e,i,"fn")}return $3c7e9e824106ff726f04cd7ecac64f05$export$default.expand(t[0],e,i,"var")}return $3c7e9e824106ff726f04cd7ecac64f05$export$default.expand(t,e,i,"fn")}if("base-string"==a){let a=-1;for(let r of t){let s=null;switch(a++,r.type){case"template":s=$3c7e9e824106ff726f04cd7ecac64f05$export$default.expand(r.data,e,i,"template");break;case"string":case"identifier":s=r.data;break;case"base-string":s=$3c7e9e824106ff726f04cd7ecac64f05$export$default.expand(r.data,e,i,"base-string")}"void"!=i&&("last"==i&&a!=t.length-1||n.push(s))}}if("obj"==i)return n;if("last"==i)return"Rose\\Arry"==typeOf(n)&&(n=n[0]),n;if("void"==i)return null;if("arg"==i)return"array"==$3ceb97a86c97e49f496755485fbe7a5f$export$default.typeOf(n)?1!=n.length?n.join(""):n[0]:n;if("text"==i&&"array"==$3ceb97a86c97e49f496755485fbe7a5f$export$default.typeOf(n)){let t=e=>null!=e&&"object"==typeof e?"map"in e?e.map(t).join(""):"join"in e?e.join(""):e.toString():e;n=n.map(t).join("")}return n},compile:function(t){return t=$3c7e9e824106ff726f04cd7ecac64f05$export$default.parse(t),function(e=null,i="text"){return $3c7e9e824106ff726f04cd7ecac64f05$export$default.expand(t,e||{},i)}},eval:function(t,e=null,i="text"){return t=$3c7e9e824106ff726f04cd7ecac64f05$export$default.parse(t),$3c7e9e824106ff726f04cd7ecac64f05$export$default.expand(t,e||{},i)},value:function(t,e=null){return"array"!=$3ceb97a86c97e49f496755485fbe7a5f$export$default.typeOf(t)?t:$3c7e9e824106ff726f04cd7ecac64f05$export$default.expand(t,e||{},"arg")},register:function(t,e){$3c7e9e824106ff726f04cd7ecac64f05$export$default.functions[t]=e},call:function(t,e,i=null){return t in $3c7e9e824106ff726f04cd7ecac64f05$export$default.functions?$3c7e9e824106ff726f04cd7ecac64f05$export$default.functions[t](e,null,i):null},getNamedValues:function(t,e,i=1,a=!0){let n={},r=0;for(;i<t.length;i+=2){let s=$3c7e9e824106ff726f04cd7ecac64f05$export$default.expand(t[i],e,"arg");r||(r=s.startsWith(":")?1:s.endsWith(":")?2:3),1==r?s=s.substr(1):2==r&&(s=s.substr(0,s.length-1)),n[s]=a?$3c7e9e824106ff726f04cd7ecac64f05$export$default.expand(t[i+1],e,"arg"):t[i+1]}return n}};$3c7e9e824106ff726f04cd7ecac64f05$export$default.functions={global:function(t){return globalThis},null:function(t){return null},true:function(t){return!0},false:function(t){return!1},len:function(t){return t[1].toString().length},int:function(t){return~~t[1]},str:function(t){return t[1].toString()},float:function(t){return parseFloat(t[1])},chr:function(t){return String.fromCharCode(t[1])},ord:function(t){return t[1].toString().charCodeAt(0)},not:function(t){return!t[1]},neg:function(t){return-t[1]},abs:function(t){return Math.abs(t[1])},and:function(t){for(let e=1;e<t.length;e++)if(!t[e])return!1;return!0},or:function(t){for(let e=1;e<t.length;e++)if(~~t[e])return!0;return!1},eq:function(t){return t[1]==t[2]},ne:function(t){return t[1]!=t[2]},lt:function(t){return t[1]<t[2]},le:function(t){return t[1]<=t[2]},gt:function(t){return t[1]>t[2]},ge:function(t){return t[1]>=t[2]},isnotnull:function(t){return!!t[1]},isnull:function(t){return!t[1]},iszero:function(t){return 0==parseInt(t[1])},"eq?":function(t){return t[1]==t[2]},"ne?":function(t){return t[1]!=t[2]},"lt?":function(t){return t[1]<t[2]},"le?":function(t){return t[1]<=t[2]},"gt?":function(t){return t[1]>t[2]},"ge?":function(t){return t[1]>=t[2]},"notnull?":function(t){return!!t[1]},"null?":function(t){return!t[1]},"zero?":function(t){return 0==parseInt(t[1])},typeof:function(t){return $3ceb97a86c97e49f496755485fbe7a5f$export$default.typeOf(t[1])},"*":function(t){let e=t[1];for(let i=2;i<t.length;i++)e*=t[i];return e},"/":function(t){let e=t[1];for(let i=2;i<t.length;i++)e/=t[i];return e},"+":function(t){let e=t[1];for(let i=2;i<t.length;i++)e-=-t[i];return e},"-":function(t){let e=t[1];for(let i=2;i<t.length;i++)e-=t[i];return e},mul:function(t){let e=t[1];for(let i=2;i<t.length;i++)e*=t[i];return e},div:function(t){let e=t[1];for(let i=2;i<t.length;i++)e/=t[i];return e},sum:function(t){let e=t[1];for(let i=2;i<t.length;i++)e-=-t[i];return e},sub:function(t){let e=t[1];for(let i=2;i<t.length;i++)e-=t[i];return e},mod:function(t){let e=t[1];for(let i=2;i<t.length;i++)e%=t[i];return e},pow:function(t){let e=t[1];for(let i=2;i<t.length;i++)e=Math.pow(e,t[i]);return e},dump:function(t){return JSON.stringify(t[1])},_set:function(t,e){for(let i=1;i+1<t.length;i+=2){let a=$3c7e9e824106ff726f04cd7ecac64f05$export$default.value(t[i+1],e);if(t[i].length>1){let n=$3c7e9e824106ff726f04cd7ecac64f05$export$default.expand(t[i],e,"varref");null!=n&&(n[0][n[1]]=a)}else e[$3c7e9e824106ff726f04cd7ecac64f05$export$default.value(t[i],e)]=a}return""},_unset:function(t,e){for(let i=1;i<t.length;i++)if(t[i].length>1){let a=$3c7e9e824106ff726f04cd7ecac64f05$export$default.expand(t[i],e,"varref");null!=a&&delete a[0][a[1]]}else delete e[$3c7e9e824106ff726f04cd7ecac64f05$export$default.value(t[i],e)];return null},trim:function(t){return t[1]?"object"==typeof t[1]?t[1].map((t=>t.trim())):t[1].trim():""},upper:function(t){return t[1]?"object"==typeof t[1]?t[1].map((t=>t.toUpperCase())):t[1].toUpperCase():""},lower:function(t){return t[1]?"object"==typeof t[1]?t[1].map((t=>t.toLowerCase())):t[1].toLowerCase():""},substr:function(t){let e=t[t.length-1].toString(),i=0,a=null;return 4==t.length?(i=~~t[1],a=~~t[2]):(i=~~t[1],a=null),i<0&&(i+=e.length),a<0&&(a+=e.length),null===a&&(a=e.length-i),e.substr(i,a)},replace:function(t){return t[3].split(t[1]).join(t[2])},nl2br:function(t){return t[1]?"object"==typeof t[1]?t[1].map((t=>t.replace(/\n/g,"<br/>"))):t[1].replace(/\n/g,"<br/>"):""},"%":function(t){t.shift();var e=t.shift();let i="";for(let a=0;a<t.length;a++)if("array"==$3ceb97a86c97e49f496755485fbe7a5f$export$default.typeOf(t[a])){i+=`<${e}>`;for(let e=0;e<t[a].length;e++)i+=t[a][e];i+=`</${e}>`}else i+=`<${e}>${t[a]}</${e}>`;return i},"%%":function(t){t.shift();var e=t.shift();let i="",a="";for(let e=0;e<t.length;e+=2)e+1<t.length?i+=` ${t[e]}="${t[e+1]}"`:a=t[e];return a?`<${e}${i}>${a}</${e}>`:`<${e}${i}/>`},join:function(t){return t[2]&&"array"==$3ceb97a86c97e49f496755485fbe7a5f$export$default.typeOf(t[2])?t[2].join(t[1]):""},split:function(t){return t[2]&&"string"==typeof t[2]?t[2].split(t[1]):[]},keys:function(t){return t[1]&&"object"==typeof t[1]?Object.keys(t[1]):[]},values:function(t){return t[1]&&"object"==typeof t[1]?Object.values(t[1]):[]},_each:function(t,e){let i=$3c7e9e824106ff726f04cd7ecac64f05$export$default.expand(t[1],e,"arg"),a=$3c7e9e824106ff726f04cd7ecac64f05$export$default.expand(t[2],e,"arg"),n="",r=0;if(!a)return n;for(let s in a)e[i]=a[s],e[i+"##"]=r++,e[i+"#"]=s,n+=$3c7e9e824106ff726f04cd7ecac64f05$export$default.expand(t[3],e,"text");return delete e[i],delete e[i+"##"],delete e[i+"#"],n},_foreach:function(t,e){let i=$3c7e9e824106ff726f04cd7ecac64f05$export$default.expand(t[1],e,"arg"),a=$3c7e9e824106ff726f04cd7ecac64f05$export$default.expand(t[2],e,"arg"),n=0;if(!a)return null;for(let r in a)e[i]=a[r],e[i+"##"]=n++,e[i+"#"]=r,$3c7e9e824106ff726f04cd7ecac64f05$export$default.expand(t[3],e,"text");return delete e[i],delete e[i+"##"],delete e[i+"#"],null},"_?":function(t,e){return $3c7e9e824106ff726f04cd7ecac64f05$export$default.expand(t[1],e,"arg")?$3c7e9e824106ff726f04cd7ecac64f05$export$default.expand(t[2],e,"arg"):t.length>3?$3c7e9e824106ff726f04cd7ecac64f05$export$default.expand(t[3],e,"arg"):""},"_??":function(t,e){let i=$3c7e9e824106ff726f04cd7ecac64f05$export$default.expand(t[1],e,"arg");return i||$3c7e9e824106ff726f04cd7ecac64f05$export$default.expand(t[2],e,"arg")},_if:function(t,e){for(let i=0;i<t.length;i+=3){if("else"==$3c7e9e824106ff726f04cd7ecac64f05$export$default.expand(t[i],e,"arg"))return $3c7e9e824106ff726f04cd7ecac64f05$export$default.expand(t[i+1],e,"text");if($3c7e9e824106ff726f04cd7ecac64f05$export$default.expand(t[i+1],e,"arg"))return $3c7e9e824106ff726f04cd7ecac64f05$export$default.expand(t[i+2],e,"text")}return""},_switch:function(t,e){let i=$3c7e9e824106ff726f04cd7ecac64f05$export$default.expand(t[1],e,"arg");for(let a=2;a<t.length;a+=2){let n=$3c7e9e824106ff726f04cd7ecac64f05$export$default.expand(t[a],e,"arg");if(n==i||"default"==n)return $3c7e9e824106ff726f04cd7ecac64f05$export$default.expand(t[a+1],e,"text")}return""},_break:function(t,e){throw new Error("EXC_BREAK")},_continue:function(t,e){throw new Error("EXC_CONTINUE")},_repeat:function(t,e){if(t.length<3||1!=(1&t.length))return"(`repeat`: Wrong number of parameters)";let i=$3c7e9e824106ff726f04cd7ecac64f05$export$default.value(t[1],e),a=null,n=0,r=null,s=null;for(let i=2;i<t.length-1;i+=2){switch($3c7e9e824106ff726f04cd7ecac64f05$export$default.value(t[i],e).toLowerCase()){case"from":n=parseFloat($3c7e9e824106ff726f04cd7ecac64f05$export$default.value(t[i+1],e));break;case"to":r=parseFloat($3c7e9e824106ff726f04cd7ecac64f05$export$default.value(t[i+1],e));break;case"count":a=parseFloat($3c7e9e824106ff726f04cd7ecac64f05$export$default.value(t[i+1],e));break;case"step":s=parseFloat($3c7e9e824106ff726f04cd7ecac64f05$export$default.value(t[i+1],e))}}let c=t[t.length-1],o=[];if(null!==r)if(null===s&&(s=n>r?-1:1),s<0)for(let t=n;t>=r;t+=s)try{e[i]=t,o.push($3c7e9e824106ff726f04cd7ecac64f05$export$default.value(c,e))}catch(t){let e=t.message;if("EXC_BREAK"==e)break;if("EXC_CONTINUE"==e)continue;throw t}else for(let t=n;t<=r;t+=s)try{e[i]=t,o.push($3c7e9e824106ff726f04cd7ecac64f05$export$default.value(c,e))}catch(t){let e=t.message;if("EXC_BREAK"==e)break;if("EXC_CONTINUE"==e)continue;throw t}else if(null!==a){null===s&&(s=1);for(let t=n;a>0;a--,t+=s)try{e[i]=t,o.push($3c7e9e824106ff726f04cd7ecac64f05$export$default.value(c,e))}catch(t){let e=t.message;if("EXC_BREAK"==e)break;if("EXC_CONTINUE"==e)continue;throw t}}else{null===s&&(s=1);for(let t=n;;t+=s)try{e[i]=t,o.push($3c7e9e824106ff726f04cd7ecac64f05$export$default.value(c,e))}catch(t){let e=t.message;if("EXC_BREAK"==e)break;if("EXC_CONTINUE"==e)continue;throw t}}return delete e[i],o},_for:function(t,e){if(t.length<3||1!=(1&t.length))return"(`for`: Wrong number of parameters)";let i=$3c7e9e824106ff726f04cd7ecac64f05$export$default.value(t[1],e),a=null,n=0;to=null;let r=null;for(let i=2;i<t.length-1;i+=2)switch(value=$3c7e9e824106ff726f04cd7ecac64f05$export$default.value(t[i],e),value.toLowerCase()){case"from":n=parseFloat($3c7e9e824106ff726f04cd7ecac64f05$export$default.value(t[i+1],e));break;case"to":to=parseFloat($3c7e9e824106ff726f04cd7ecac64f05$export$default.value(t[i+1],e));break;case"count":a=parseFloat($3c7e9e824106ff726f04cd7ecac64f05$export$default.value(t[i+1],e));break;case"step":r=parseFloat($3c7e9e824106ff726f04cd7ecac64f05$export$default.value(t[i+1],e))}let s=t[t.length-1];if(null!==to)if(null===r&&(r=n>to?-1:1),r<0)for(let t=n;t>=to;t+=r)try{e[i]=t,$3c7e9e824106ff726f04cd7ecac64f05$export$default.value(s,e)}catch(t){let e=t.message;if("EXC_BREAK"==e)break;if("EXC_CONTINUE"==e)continue;throw t}else for(let t=n;t<=to;t+=r)try{e[i]=t,$3c7e9e824106ff726f04cd7ecac64f05$export$default.value(s,e)}catch(t){let e=t.message;if("EXC_BREAK"==e)break;if("EXC_CONTINUE"==e)continue;throw t}else if(null!==a){null===r&&(r=1);for(let t=n;a>0;a--,t+=r)try{e[i]=t,$3c7e9e824106ff726f04cd7ecac64f05$export$default.value(s,e)}catch(t){let e=t.message;if("EXC_BREAK"==e)break;if("EXC_CONTINUE"==e)continue;throw t}}else{null===r&&(r=1);for(let t=n;;t+=r)try{e[i]=t,$3c7e9e824106ff726f04cd7ecac64f05$export$default.value(s,e)}catch(t){let e=t.message;if("EXC_BREAK"==e)break;if("EXC_CONTINUE"==e)continue;throw t}}return delete e[i],null},_loop:function(t,e){if(t.length<2)return"(`loop`: Wrong number of parameters)";let i=t[1];for(;;)try{$3c7e9e824106ff726f04cd7ecac64f05$export$default.value(i,e)}catch(t){let e=t.message;if("EXC_BREAK"==e)break;if("EXC_CONTINUE"==e)continue;throw t}return null},_echo:function(t,e){let i="";for(let a=1;a<t.length;a++)i+=$3c7e9e824106ff726f04cd7ecac64f05$export$default.expand(t[a],e,"arg");return console.log(i),""},"_#":function(t,e){let i=[];for(let a=1;a<t.length;a++)i.push($3c7e9e824106ff726f04cd7ecac64f05$export$default.expand(t[a],e,"arg"));return i},"_##":function(t,e){let i=[];for(let e=1;e<t.length;e++)i.push(t[e]);return i},"_&":function(t,e){return $3c7e9e824106ff726f04cd7ecac64f05$export$default.getNamedValues(t,e,1,!0)},"_&&":function(t,e){return $3c7e9e824106ff726f04cd7ecac64f05$export$default.getNamedValues(t,e,1,!1)},contains:function(t,e,i){let a=t[1];if("object"!=typeof a)return i.err="Argument is not a Map",!1;let n="";for(let e=2;e<t.length;e++)t[e]in a||(n+=", "+t[e]);return""==n||(i.err=n.substr(1),!1)},has:function(t,e,i){let a=t[2];return"object"==$3ceb97a86c97e49f496755485fbe7a5f$export$default.typeOf(a)&&t[1]in a},_map:function(t,e){let i=$3c7e9e824106ff726f04cd7ecac64f05$export$default.expand(t[1],e,"arg"),a=$3c7e9e824106ff726f04cd7ecac64f05$export$default.expand(t[2],e,"arg");if(!a)return a;let n="array"==$3ceb97a86c97e49f496755485fbe7a5f$export$default.typeOf(a),r=n?[]:{},s=0;for(let c in a)e[i]=a[c],e[i+"##"]=s++,e[i+"#"]=c,n?r.push($3c7e9e824106ff726f04cd7ecac64f05$export$default.expand(t[3],e,"arg")):r[c]=$3c7e9e824106ff726f04cd7ecac64f05$export$default.expand(t[3],e,"arg");return delete e[i],delete e[i+"##"],delete e[i+"#"],r},_filter:function(t,e){let i=$3c7e9e824106ff726f04cd7ecac64f05$export$default.expand(t[1],e,"arg"),a=$3c7e9e824106ff726f04cd7ecac64f05$export$default.expand(t[2],e,"arg");if(!a)return a;let n="array"==$3ceb97a86c97e49f496755485fbe7a5f$export$default.typeOf(a),r=n?[]:{},s=0;for(let c in a)e[i]=a[c],e[i+"##"]=s++,e[i+"#"]=c,~~$3c7e9e824106ff726f04cd7ecac64f05$export$default.expand(t[3],e,"arg")&&(n?r.push(a[c]):r[c]=a[c]);return delete e[i],delete e[i+"##"],delete e[i+"#"],r},expand:function(t,e,i){return $3c7e9e824106ff726f04cd7ecac64f05$export$default.expand($3c7e9e824106ff726f04cd7ecac64f05$export$default.parseTemplate(t[1],"{","}"),3==t.length?t[2]:i)},_call:function(t,e){let i=$3c7e9e824106ff726f04cd7ecac64f05$export$default.expand(t[1],e,"varref");if(!i||"function"!=typeof i[0][i[1]])throw new Error("Expression is not a function: "+$3c7e9e824106ff726f04cd7ecac64f05$export$default.expand(t[1],e,"obj").map((t=>null==t?".":t)).join(""));let a=[];for(let i=2;i<t.length;i++)a.push($3c7e9e824106ff726f04cd7ecac64f05$export$default.value(t[i],e));return i[0][i[1]](...a)}};const $49a0a27d43075b98f896056be628f99a$export$Rin=$3ceb97a86c97e49f496755485fbe7a5f$export$default,$49a0a27d43075b98f896056be628f99a$export$Class=$362774b94d49f24810750f9afdb3753f$export$default,$883e395d0b2123d7f53561ada8782bc4$var$rol16=function(t,e){return 65535&(t<<e|t>>>16-e&(1<<e)-1)},$883e395d0b2123d7f53561ada8782bc4$var$ror16=function(t,e){return 65535&(t>>>e|(t&(1<<e)-1)<<16-e)},$883e395d0b2123d7f53561ada8782bc4$var$add16=function(t,e){return t+e&65535},$883e395d0b2123d7f53561ada8782bc4$var$sub16=function(t,e){return t-e&65535},$883e395d0b2123d7f53561ada8782bc4$var$xor16=function(t,e){return 65535&(t^e)},$883e395d0b2123d7f53561ada8782bc4$export$default=$49a0a27d43075b98f896056be628f99a$export$Class.extend({seed:0,a:0,b:0,last:0,__ctor:function(t=3672614355){this.setSeed(t)},setSeed:function(t){return this.seed=t,this.a=t>>16&65535,this.b=t>>0&65535,this.last=this.a>>4&255|this.b<<4&65280,this},nextInt16:function(){let t=this.last;return t=$883e395d0b2123d7f53561ada8782bc4$var$add16(t,this.a),t=$883e395d0b2123d7f53561ada8782bc4$var$xor16(t,5397),this.a=$883e395d0b2123d7f53561ada8782bc4$var$xor16(this.a,20897),this.a=$883e395d0b2123d7f53561ada8782bc4$var$sub16(this.a,this.b),this.b=$883e395d0b2123d7f53561ada8782bc4$var$xor16(this.b,6677),t=$883e395d0b2123d7f53561ada8782bc4$var$rol16(t,15&this.b),65535&(this.last=t)},nextInt8:function(){return 255&this.nextInt16()},nextFloat:function(){return this.nextInt16()/65535}}),$c5794ced0840f4a2f23c1c50dcedc59f$export$default={viewport:null,debugBounds:!1,rand0:new $883e395d0b2123d7f53561ada8782bc4$export$default,rand1:new $883e395d0b2123d7f53561ada8782bc4$export$default,rand2:new $883e395d0b2123d7f53561ada8782bc4$export$default};$parcel$global.px=function(t){return t*C.SCALE},$parcel$global.dispose=function(t){if(t)return"free"in t?t.free():"dispose"in t?t.dispose():void("__dtor"in t&&t.__dtor())},$parcel$global.audioContext="AudioContext"in $parcel$global?new AudioContext:null,$parcel$global.fetchd=function(t,e){return new Promise(((i,a)=>{e||(e={}),"responseType"in e||(e.responseType="arraybuffer");var n=new XMLHttpRequest;n.open("GET",t,!0);for(let t in e)n[t]=e[t];n.onload=function(){i(n.response)},n.onerror=function(){a("Unable to fetch specified resource.")},n.send()}))},$parcel$global.fetchAudioBuffer=function(t){return new Promise(((e,i)=>{$parcel$global.audioContext?fetchd(t).then((t=>audioContext.decodeAudioData(t))).then((t=>e(t))).catch((t=>i(t))):i("AudioContext is not available.")}))},$parcel$global.int=function(t){return t>>0},$parcel$global.bool=function(t){return!0===t||!1===t?t:"true"==t||"false"!=t&&!!t},$parcel$global.float=function(t){return parseFloat(t)},$parcel$global.float2=function(t){return int(100*t)/100},$parcel$global.float3=function(t){return int(1e3*t)/1e3},$parcel$global.float4=function(t){return int(1e4*t)/1e4},$parcel$global.rad=function(t){return t*Math.PI/180},$parcel$global.deg=function(t){return t/Math.PI*180},$parcel$global.rand=function(){return $c5794ced0840f4a2f23c1c50dcedc59f$export$default.rand0.nextInt16()},$parcel$global.randf=function(){return $c5794ced0840f4a2f23c1c50dcedc59f$export$default.rand0.nextFloat()},$parcel$global.randrf=function(t,e){let i=$c5794ced0840f4a2f23c1c50dcedc59f$export$default.rand0.nextFloat();return i*e+(1-i)*t},$parcel$global.randr=function(t,e){let i=$c5794ced0840f4a2f23c1c50dcedc59f$export$default.rand0.nextFloat();return Math.round(i*e+(1-i)*t)},$parcel$global.randtf=function(t,e,i){for(var a=[],n=0;n<i;n++)a.push(randrf(t,e));return a},$parcel$global.hrnow=function(){return performance.now()},$parcel$global.randvar=function(t,e){return function(){return randr(t,e)}},$parcel$global.randitem=function(t,e,i){return e||(e=0),i||(i=t.length-1),function(){return t[randr(e,i)]}},$parcel$global.getLineSegmentIntersection=function(t,e,i,a,n,r,s,c){if(t==n&&e==r&&i==s&&a==c)return 0;var o=a-e,l=i-t,f=c-r,u=s-n;if(0==o&&0==f){if(e!=r)return 2;var d=Math.max(t,n);return d>Math.min(i,s)?2:(d-t)/l}if(0==l&&0==u){if(t!=n)return 2;var h=Math.max(e,r);return h>Math.min(a,c)?2:(h-e)/o}if(0==l)return 0>(p=(f*(t-n)+u*(r-e))/(u*o))||p>1||0>($=(t-n)/u)||$>1?2:p;var $,p,b=f*l-u*o;return 0==b||0>($=(o*(n-t)+l*(e-r))/b)||$>1||0>(p=(u*$+n-t)/l)||p>1?2:p},$parcel$global.lineSegmentIntersects=function(t,e,i,a,n,r,s,c){let o=getLineSegmentIntersection(t,e,i,a,n,r,s,c);return o>=0&&o<=1},$parcel$global.rotatePoint=function(t,e,i){return"object"==Rin.typeOf(t)?{x:e*t.x+i*t.y,y:i*t.x-e*t.y}:{x:e*Math.cos(t)+i*Math.sin(t),y:i*Math.cos(t)-e*Math.sin(t)}},$parcel$global.stepValue=function(t,e,i,a){return Math.round(a*(t-e)/(i-e))/a*(i-e)+e},$parcel$global.alignValue=function(t,e){return Math.round(t/e)*e};const $c5794ced0840f4a2f23c1c50dcedc59f$var$BITS=7;$parcel$global.upscale=function(t){return t*(1<<$c5794ced0840f4a2f23c1c50dcedc59f$var$BITS)>>0},$parcel$global.downscale=function(t){return t>>$c5794ced0840f4a2f23c1c50dcedc59f$var$BITS},$parcel$global.downscalef=function(t){return t/(1<<$c5794ced0840f4a2f23c1c50dcedc59f$var$BITS)};var $ecb27258662111bab70dd084a4f71ebf$export$default={BACKSPACE:8,TAB:9,ENTER:13,ESC:27,SPACE:32,PGUP:33,PGDN:34,END:35,HOME:36,INS:45,DEL:46,LEFT:37,UP:38,RIGHT:39,DOWN:40,NUM_PLUS:107,NUM_MINUS:109,NUM_ASTERISK:106,NUM_SLASH:111,NUM_DOT:110,NUM_0:96,NUM_1:97,NUM_2:98,NUM_3:99,NUM_4:100,NUM_5:101,NUM_6:102,NUM_7:103,NUM_8:104,NUM_9:105,D0:48,D1:49,D2:50,D3:51,D4:52,D5:53,D6:54,D7:55,D8:56,D9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90};const $ccdbbc32fd9f0a412799511487cd91a1$var$recyclingFacilities={},$ccdbbc32fd9f0a412799511487cd91a1$export$default={};let $ccdbbc32fd9f0a412799511487cd91a1$var$constructorAllowed=0;$ccdbbc32fd9f0a412799511487cd91a1$export$default.attachTo=function(t,e=2048,i=1024){if(!t.prototype.className)throw new Error("Unable to attach recycler functions to unnamed class.");if(!("__dtor"in t.prototype))throw new Error("Recycler: Class "+t.prototype.className+" requires `__dtor` method.");if(!("init"in t.prototype))throw new Error("Recycler: Class "+t.prototype.className+" requires `init` method.");$ccdbbc32fd9f0a412799511487cd91a1$var$recyclingFacilities[t.prototype.className]=t,t.recyclerPool=[],t.prototype.objectId=0,t.recyclerNextObjectId=0,t.recyclerCreated=0,t.recyclerRecycled=0,t.recyclerMissed=0,t.recyclerLength=0,t.recyclerActive=0;for(let e=0;e<i;e++)t.recyclerPool.push(new t),t.recyclerLength++;const a=t.prototype.__ctor;t.prototype.__ctor=function(){if(!$ccdbbc32fd9f0a412799511487cd91a1$var$constructorAllowed)throw new Error("Recycler: Constructor blocked for class "+t.prototype.className+", use alloc() instead.");a.call(this)},t.alloc=function(){let e;return this.recyclerLength?(e=this.recyclerPool[--this.recyclerLength],t.recyclerRecycled++):($ccdbbc32fd9f0a412799511487cd91a1$var$constructorAllowed++,e=new t,$ccdbbc32fd9f0a412799511487cd91a1$var$constructorAllowed--,t.recyclerCreated++),t.recyclerActive++,e.objectId=++this.recyclerNextObjectId,this.recyclerNextObjectId&=2147483647,e},t.calloc=function(){return t.alloc().init()},t.free=function(t){return t?t.free():t},t.prototype.free=function(){return 0==this.objectId?(console.error("Already freed ("+t.prototype.className+")"),this):(this.__dtor(),this.objectId=0,t.recyclerLength>=t.recyclerPool.length?t.recyclerMissed++:t.recyclerPool[t.recyclerLength++]=this,t.recyclerActive--,this)}},$ccdbbc32fd9f0a412799511487cd91a1$export$default.showStats=function(t=null){let e=$ccdbbc32fd9f0a412799511487cd91a1$var$recyclingFacilities;if(null!==t){if("string"==typeof t){let e=$ccdbbc32fd9f0a412799511487cd91a1$var$recyclingFacilities[t];return void console.debug(t+": "+(e.recyclerCreated/e.recyclerPool.length*100).toFixed(1)+"%  =>  overhead="+e.recyclerCreated+", active="+e.recyclerActive+", capacity="+e.recyclerPool.length+", recycled="+e.recyclerRecycled+", in-recycler="+e.recyclerLength+", missed="+e.recyclerMissed+", space="+(e.recyclerPool.length-e.recyclerLength))}e=t}console.group("Recycling Facilities");for(let t in e){let i=e[t];console.debug(t+": "+(i.recyclerCreated/i.recyclerPool.length*100).toFixed(1)+"%  =>  overhead="+i.recyclerCreated+", active="+i.recyclerActive+", capacity="+i.recyclerPool.length+", recycled="+i.recyclerRecycled+", in-recycler="+i.recyclerLength+", missed="+i.recyclerMissed+", space="+(i.recyclerPool.length-i.recyclerLength))}console.groupEnd()};const $8581dd2a4034ebdbe37300f3afba0093$export$default=$49a0a27d43075b98f896056be628f99a$export$Class.extend({className:"Linkable",prev:null,next:null,value:null,init:function(t){return this.value=t,this.clear(),this},__dtor:function(){this.unlink()},clear:function(){return this.next=this.prev=null,this},linkAfter:function(t){this.prev=t,this.next=t?t.next:null,t&&(t.next&&(t.next.prev=this),t.next=this)},linkBefore:function(t){this.prev=t?t.prev:null,this.next=t,t&&(t.prev&&(t.prev.next=this),t.prev=this)},unlink:function(){return this.prev&&(this.prev.next=this.next),this.next&&(this.next.prev=this.prev),this.clear()}});$ccdbbc32fd9f0a412799511487cd91a1$export$default.attachTo($8581dd2a4034ebdbe37300f3afba0093$export$default,16384,4096);const $9331e791bdadeac9afb7e80808da523d$export$default=$49a0a27d43075b98f896056be628f99a$export$Class.extend({className:"List",top:null,bottom:null,length:0,init:function(){return this.top=null,this.bottom=null,this.length=0,this},__dtor:function(){this.reset()},clone:function(){let t=$9331e791bdadeac9afb7e80808da523d$export$default.calloc();for(let e=this.top;e;e=e.next)t.push($49a0a27d43075b98f896056be628f99a$export$Rin.clone(e.value));return t},clear:function(){let t,e;for(t=this.top;null!=t;t=e)e=t.next,dispose(t.free().value);return this.top=this.bottom=null,this.length=0,this},reset:function(){let t,e;for(t=this.top;null!=t;t=e)e=t.next,t.free();return this.top=this.bottom=null,this.length=0,this},first:function(){return null!==this.top?this.top.value:null},last:function(){return null!==this.bottom?this.bottom.value:null},getAt:function(t){let e=null;for(e=this.top;e&&t--;e=e.next);return null!=e?e.value:null},getNodeAt:function(t){let e=null;for(e=this.top;e&&t--;e=e.next);return e},sgetNode:function(t){for(let e=this.top;e;e=e.next)if(e.value===t)return e;return null},remove:function(t){return null==t||"isInstanceOf"in t&&t.isInstanceOf($8581dd2a4034ebdbe37300f3afba0093$export$default)||(t=this.sgetNode(t)),t?(t.prev||(this.top=t.next),t.next||(this.bottom=t.prev),this.length--,t.free().value):null},insertBefore:function(t,e){if(!t)return this;let i=$8581dd2a4034ebdbe37300f3afba0093$export$default.alloc().init(e);return i.linkBefore(t),t==this.top&&(this.top=i),this.length++,e},insertAfter:function(t,e){if(!t)return this;let i=$8581dd2a4034ebdbe37300f3afba0093$export$default.alloc().init(e);return i.linkAfter(t),t==this.bottom&&(this.bottom=i),this.length++,e},unshift:function(t){let e=$8581dd2a4034ebdbe37300f3afba0093$export$default.alloc().init(t);return e.linkBefore(this.top),this.bottom||(this.bottom=e),this.top=e,this.length++,t},shift:function(){let t=this.top;return t?((this.top=t.next)||(this.bottom=null),this.length--,t.free().value):null},push:function(t){let e=$8581dd2a4034ebdbe37300f3afba0093$export$default.alloc().init(t);return e.linkAfter(this.bottom),this.top||(this.top=e),this.bottom=e,this.length++,t},pop:function(){let t=this.bottom;return t?((this.bottom=t.prev)||(this.top=null),this.length--,t.free().value):null},append:function(t){for(let e=t.top;e;e=e.next)this.push(e.value);return this},forEach:function(t,e=null){let i;for(let a=this.top;a;a=i)if(i=a.next,!1===t(a.value,a,this,e))return!1;return!0},forEachRev:function(t,e=null){let i;for(let a=this.bottom;a;a=i)if(i=a.prev,!1===t(a.value,a,this,e))return!1;return!0},find:function(t,e=null){for(let i=this.top;i;i=i.next)if(t(i.value,e))return i.value;return null},filter:function(t,e=null){let i=$9331e791bdadeac9afb7e80808da523d$export$default.calloc();for(let a=this.top;a;a=a.next)t(a.value,e)&&i.push(a.value);return i},toArray:function(){let t=[];for(let e=this.top;e;e=e.next)t.push(e.value);return t}});$ccdbbc32fd9f0a412799511487cd91a1$export$default.attachTo($9331e791bdadeac9afb7e80808da523d$export$default,16384,4096);const $b82d452f2e3484b177bea709fd7b4383$export$default=function(t,e,i){this.callback=i,this.interval=e,this.vsync=t,this.isRunning=!1,this.startTime=0,this.rTime=0,this.sTime=0,this.lTime=0,this.tDelta=0,this._onTimeout=()=>{this.onTimeout()},this._onTimeout_b=()=>{this.runNow()}};$b82d452f2e3484b177bea709fd7b4383$export$default.prototype.onTimeout=function(){if(!this.isRunning)return;this.rTime=hrnow()-this.startTime;let t=this.rTime-(this.sTime+this.interval);t<0?this.runAfter(-t):(this.sTime+=this.interval*(1+int(t/this.interval)),this.tDelta=t<0?this.interval:this.rTime-this.lTime,this.lTime=this.rTime,this.runAfter(this.sTime+this.interval-(hrnow()-this.startTime)),this.callback(this.tDelta,this))},$b82d452f2e3484b177bea709fd7b4383$export$default.prototype.onStart=function(){},$b82d452f2e3484b177bea709fd7b4383$export$default.prototype.start=function(t=!1,e=1){this.startTime=hrnow(),this.isRunning=!0,this.sTime=0,this.lTime=0,this.onStart(),t&&this.callback(0,this),this.runAfter(this.interval*e)},$b82d452f2e3484b177bea709fd7b4383$export$default.prototype.runAfter=function(t){this.vsync?requestAnimationFrame(this._onTimeout_b):setTimeout(this._onTimeout,0)},$b82d452f2e3484b177bea709fd7b4383$export$default.prototype.runNow=function(){setTimeout(this._onTimeout,0)},$b82d452f2e3484b177bea709fd7b4383$export$default.prototype.stop=function(){this.isRunning=!1};const $fe31f04e32686e924bb665d33d1abcbf$export$default=$49a0a27d43075b98f896056be628f99a$export$Class.extend({className:"Vec2",x:0,y:0,init:function(t=null,e=null){return this.set(t,e)},clone:function(){return $fe31f04e32686e924bb665d33d1abcbf$export$default.alloc().init(this)},set:function(t,e=null){if(null===t)t=0,e=0;else if(null===e){let i=t;t=i.x,e=i.y}return this.x=t,this.y=e,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},zero:function(){return this.set(0,0)},isZero:function(){return 0==this.x&&0==this.y},equals:function(t,e=null){if(null===e){let i=t;t=i.x,e=i.y}return this.x==t&&this.y==e},neg:function(){return this.x=-this.x,this.y=-this.y,this},inv:function(){return this.x=1/this.x,this.y=1/this.y,this},abs:function(){return this.x=this.x<0?-this.x:this.x,this.y=this.y<0?-this.y:this.y,this},translate:function(t,e=null){if(null===e){let i=t;t=i.x,e=i.y}return this.x+=t,this.y+=e,this},add:function(t,e=null){if(null===e){let i=t;t=i.x,e=i.y}return this.x+=t,this.y+=e,this},sub:function(t,e){if(null===e){let i=t;t=i.x,e=i.y}return this.x-=t,this.y-=e,this},scale:function(t,e=null){if(null===e)if($fe31f04e32686e924bb665d33d1abcbf$export$default.isInstance(t)){let i=t;t=i.x,e=i.y}else e=t;return this.x*=t,this.y*=e,this},floor:function(){return this.x=int(this.x),this.y=int(this.y),this},fract:function(){return this.x=this.x-int(this.x),this.y=this.y-int(this.y),this},dot:function(t,e=null){if(null===e){let i=t;t=i.x,e=i.y}return this.x*t+this.y*e},magnitude:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){return this.isZero()?this:this.scale(1/this.magnitude())},majorAxis:function(){return Math.abs(this.x)>Math.abs(this.y)?this.y=0:this.x=0,this},minorAxis:function(){return Math.abs(this.x)<Math.abs(this.y)?this.y=0:this.x=0,this},sign:function(){return this.x=this.x?this.x<0?-1:1:0,this.y=this.y?this.y<0?-1:1:0,this},toString:function(){return`(${this.x}, ${this.y})`}});$ccdbbc32fd9f0a412799511487cd91a1$export$default.attachTo($fe31f04e32686e924bb665d33d1abcbf$export$default,1024);const $3e5498a08e31fe3580cca1707752773a$var$temp=new Float32Array(9).fill(0),$3e5498a08e31fe3580cca1707752773a$var$temp2=new Float32Array(9).fill(0),$3e5498a08e31fe3580cca1707752773a$export$default=$49a0a27d43075b98f896056be628f99a$export$Class.extend({className:"Matrix",__ctor:function(){this.data=new Float32Array(9)},init:function(t=null){return null!==t?this.set(t):this.identity(),this},zero:function(){return this.data.fill(0),this},fill:function(t){return this.data.fill(t),this},set:function(t){if($3e5498a08e31fe3580cca1707752773a$export$default.isInstance(t))for(let e=0;e<9;e++)this.data[e]=t.data[e];else for(let e=0;e<9;e++)this.data[e]=t[e];return this},identity:function(t=null){return null===t&&(t=this.data),t.fill(0),t[0]=t[4]=t[8]=1,this},scalef:function(t){for(let e=0;e<9;e++)this.data[e]*=t;return this},clone:function(){return $3e5498a08e31fe3580cca1707752773a$export$default.alloc().init(this)},append:function(t){t instanceof $3e5498a08e31fe3580cca1707752773a$export$default&&(t=t.data);for(let t=0;t<9;t++)$3e5498a08e31fe3580cca1707752773a$var$temp[t]=this.data[t];return this.data[0]=t[0]*$3e5498a08e31fe3580cca1707752773a$var$temp[0]+t[1]*$3e5498a08e31fe3580cca1707752773a$var$temp[3]+t[2]*$3e5498a08e31fe3580cca1707752773a$var$temp[6],this.data[1]=t[0]*$3e5498a08e31fe3580cca1707752773a$var$temp[1]+t[1]*$3e5498a08e31fe3580cca1707752773a$var$temp[4]+t[2]*$3e5498a08e31fe3580cca1707752773a$var$temp[7],this.data[2]=t[0]*$3e5498a08e31fe3580cca1707752773a$var$temp[2]+t[1]*$3e5498a08e31fe3580cca1707752773a$var$temp[5]+t[2]*$3e5498a08e31fe3580cca1707752773a$var$temp[8],this.data[3]=t[3]*$3e5498a08e31fe3580cca1707752773a$var$temp[0]+t[4]*$3e5498a08e31fe3580cca1707752773a$var$temp[3]+t[5]*$3e5498a08e31fe3580cca1707752773a$var$temp[6],this.data[4]=t[3]*$3e5498a08e31fe3580cca1707752773a$var$temp[1]+t[4]*$3e5498a08e31fe3580cca1707752773a$var$temp[4]+t[5]*$3e5498a08e31fe3580cca1707752773a$var$temp[7],this.data[5]=t[3]*$3e5498a08e31fe3580cca1707752773a$var$temp[2]+t[4]*$3e5498a08e31fe3580cca1707752773a$var$temp[5]+t[5]*$3e5498a08e31fe3580cca1707752773a$var$temp[8],this.data[6]=t[6]*$3e5498a08e31fe3580cca1707752773a$var$temp[0]+t[7]*$3e5498a08e31fe3580cca1707752773a$var$temp[3]+t[8]*$3e5498a08e31fe3580cca1707752773a$var$temp[6],this.data[7]=t[6]*$3e5498a08e31fe3580cca1707752773a$var$temp[1]+t[7]*$3e5498a08e31fe3580cca1707752773a$var$temp[4]+t[8]*$3e5498a08e31fe3580cca1707752773a$var$temp[7],this.data[8]=t[6]*$3e5498a08e31fe3580cca1707752773a$var$temp[2]+t[7]*$3e5498a08e31fe3580cca1707752773a$var$temp[5]+t[8]*$3e5498a08e31fe3580cca1707752773a$var$temp[8],this},translate:function(t,e){if(0==t&&0==e)return this;for(let t=0;t<9;t++)$3e5498a08e31fe3580cca1707752773a$var$temp[t]=this.data[t];return this.data[6]=t*$3e5498a08e31fe3580cca1707752773a$var$temp[0]+e*$3e5498a08e31fe3580cca1707752773a$var$temp[3]+$3e5498a08e31fe3580cca1707752773a$var$temp[6],this.data[7]=t*$3e5498a08e31fe3580cca1707752773a$var$temp[1]+e*$3e5498a08e31fe3580cca1707752773a$var$temp[4]+$3e5498a08e31fe3580cca1707752773a$var$temp[7],this.data[8]=t*$3e5498a08e31fe3580cca1707752773a$var$temp[2]+e*$3e5498a08e31fe3580cca1707752773a$var$temp[5]+$3e5498a08e31fe3580cca1707752773a$var$temp[8],this},rotate:function(t){if(0==t)return this;this.identity($3e5498a08e31fe3580cca1707752773a$var$temp2);let e=Math.cos(t),i=Math.sin(t);return $3e5498a08e31fe3580cca1707752773a$var$temp2[0]=e,$3e5498a08e31fe3580cca1707752773a$var$temp2[1]=-i,$3e5498a08e31fe3580cca1707752773a$var$temp2[3]=i,$3e5498a08e31fe3580cca1707752773a$var$temp2[4]=e,this.append($3e5498a08e31fe3580cca1707752773a$var$temp2)},scale:function(t,e){return 1==t&&1==e?this:(this.identity($3e5498a08e31fe3580cca1707752773a$var$temp2),$3e5498a08e31fe3580cca1707752773a$var$temp2[0]=t,$3e5498a08e31fe3580cca1707752773a$var$temp2[4]=e,this.append($3e5498a08e31fe3580cca1707752773a$var$temp2))},applyTo:function(t,e=null){if(null===e){const i=t;t=i.x,e=i.y}let i=this.data[0]*t+this.data[3]*e+this.data[6],a=this.data[1]*t+this.data[4]*e+this.data[7];return $fe31f04e32686e924bb665d33d1abcbf$export$default.alloc().init(i,a)},transpose:function(){$3e5498a08e31fe3580cca1707752773a$var$temp.fill(0);for(let t=0;t<3;t++)for(let e=0;e<3;e++)$3e5498a08e31fe3580cca1707752773a$var$temp[3*t+e]=this.data[3*e+t];for(let t=0;t<9;t++)this.data[t]=$3e5498a08e31fe3580cca1707752773a$var$temp[t];return this},det:function(){return this.data[0]*(this.data[4]*this.data[8]-this.data[5]*this.data[7])-this.data[1]*(this.data[3]*this.data[8]-this.data[5]*this.data[6])+this.data[2]*(this.data[3]*this.data[7]-this.data[4]*this.data[6])},adj:function(){throw new Error("NOT IMPLEMENTED")},inverse:function(){let t=this.det();return t?this.adj().scalef(1/t):null},toString:function(){return`[${this.data[0]}, ${this.data[3]}, ${this.data[6]}]\n[${this.data[1]}, ${this.data[4]}, ${this.data[7]}]\n[${this.data[2]}, ${this.data[5]}, ${this.data[8]}]\n`}});$ccdbbc32fd9f0a412799511487cd91a1$export$default.attachTo($3e5498a08e31fe3580cca1707752773a$export$default,4096);const $3c56105c2000e8ab7d1a19dceac231fb$export$default=function(t=null){let e={elem:null,gl:!1,background:"#000",width:0,height:0,hidden:!0,absolute:!1,antialias:!1,...t};null==e.elem?(this.elem=$parcel$global.document?$parcel$global.document.createElement("canvas"):$49a0a27d43075b98f896056be628f99a$export$Rin.clone($3c56105c2000e8ab7d1a19dceac231fb$export$default.passThruCanvas),$parcel$global.document&&1!=e.hidden&&($parcel$global.document.body.appendChild(this.elem),!0===e.absolute&&(this.elem.style.position="absolute",this.elem.style.left="0",this.elem.style.top="0"))):this.elem=elem,this.elem.getContext&&(!0===e.gl?(this.gl=this.elem.getContext("webgl2",{desynchronized:!1}),this.context=null,console.log(this.gl.getParameter(this.gl.VERSION)),console.log(this.gl.getParameter(this.gl.SHADING_LANGUAGE_VERSION))):(this.context=this.elem.getContext("2d",{desynchronized:!1}),this.gl=null),this.antialias=e.antialias,this.setBackground(e.background),this.matrixStack=[],this.alphaStack=[],this.matr=$3e5498a08e31fe3580cca1707752773a$export$default.calloc(),this.transform=$3e5498a08e31fe3580cca1707752773a$export$default.calloc(),this._alpha=1,this._globalScale=1,this.updateTransform(),this.strokeStyle("#fff"),this.fillStyle("#fff"),this.resize(e.width,e.height),!0===e.gl&&this.initGl())};$3c56105c2000e8ab7d1a19dceac231fb$export$default.passThruCanvas={parentNode:null,imageSmoothingEnabled:!0,style:{},width:950,height:540,getContext:function(t){return this},pushClip:function(){},popClip:function(){},scale:function(t,e){},rotate:function(t){},translate:function(t,e){},setTransform:function(t,e,i,a,n,r){},updateTransform:function(){},toDataURL:function(t,e){return""},beginPath:function(){},moveTo:function(t,e){},closePath:function(){},lineTo:function(){},rect:function(t,e,i,a){},fill:function(){},stroke:function(){},fillRect:function(t,e,i,a){},strokeRect:function(t,e,i,a){},clip:function(){},quadraticCurveTo:function(t,e,i,a){},bezierCurveTo:function(t,e,i,a,n,r){},arc:function(t,e,i,a,n,r){},arcTo:function(t,e,i,a,n){},fillText:function(t,e,i,a){},strokeText:function(t,e,i,a){},measureText:function(t){return{width:0}},createImageData:function(t,e){return{width:t,height:e}},getImageData:function(t,e,i,a){return{width:i,height:a,data:[]}},putImageData:function(t,e,i){},drawImage:function(t,e=0,i=0,a=null,n=null,r=null,s=null,c=null,o=null){},getBoundingClientRect:function(){return{left:0,top:0}}},$3c56105c2000e8ab7d1a19dceac231fb$export$default.prototype.buildShader=function(t,e,i){const a=this.gl,n=a.createShader(e);if(a.shaderSource(n,i),a.compileShader(n),!a.getShaderParameter(n,a.COMPILE_STATUS))throw new Error("compilerShader: "+a.getShaderInfoLog(n));a.attachShader(t,n)},$3c56105c2000e8ab7d1a19dceac231fb$export$default.prototype.initGl=function(){let t=this.gl;if(t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),this.gl_array_buffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.gl_array_buffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,1,1]),t.STATIC_DRAW),this.gl_program=t.createProgram(),this.buildShader(this.gl_program,t.VERTEX_SHADER,"#version 300 es\n\n\t\tin vec2 location;\n\n\t\tuniform vec2 screen_size;\n\t\tuniform vec2 texture_size;\n\t\tuniform mat3 location_matrix;\n\t\tuniform mat3 texture_matrix;\n\t\tuniform mat3 current_matrix;\n\t\tuniform sampler2D texture;\n\t\tuniform float zvalue;\n\n\t\tout vec2 f_texcoords;\n\n\t\tvoid main() {\n\t\t\tgl_Position = vec4(((vec2(current_matrix*location_matrix*vec3(location, 1.0))/screen_size)*2.0-vec2(1.0, 1.0))*vec2(1.0, -1.0), zvalue/16777216.0, 1.0);\n\t\t\tf_texcoords = vec2(texture_matrix*vec3(location, 1.0))/texture_size;\n\t\t}\n\t"),this.buildShader(this.gl_program,t.FRAGMENT_SHADER,"#version 300 es\n\n\t\tprecision highp float;\n\n\t\tuniform sampler2D tex;\n\t\tin vec2 f_texcoords;\n\n\t\tout vec4 color;\n\n\t\tvoid main() {\n\t\t\tcolor = texture(tex, f_texcoords);\n\t\t\tif (color.a == 0.0) discard;\n\t\t}\n\t"),t.bindAttribLocation(this.gl_program,0,"location"),t.linkProgram(this.gl_program),!t.getProgramParameter(this.gl_program,t.LINK_STATUS))throw new Error("linkProgram: "+t.getProgramInfoLog(program));t.useProgram(this.gl_program),t.clearColor(0,0,0,0),t.enable(t.DEPTH_TEST),t.clearDepth(0),t.depthFunc(t.GEQUAL),t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA),this.gl_attrib_location=t.getAttribLocation(this.gl_program,"location"),this.gl_uniform_screen_size=t.getUniformLocation(this.gl_program,"screen_size"),this.gl_uniform_texture_size=t.getUniformLocation(this.gl_program,"texture_size"),this.gl_uniform_texture=t.getUniformLocation(this.gl_program,"texture"),this.gl_uniform_matrix=t.getUniformLocation(this.gl_program,"location_matrix"),this.gl_uniform_current_matrix=t.getUniformLocation(this.gl_program,"current_matrix"),this.gl_uniform_texture_matrix=t.getUniformLocation(this.gl_program,"texture_matrix"),this.gl_uniform_zvalue=t.getUniformLocation(this.gl_program,"zvalue"),t.enableVertexAttribArray(this.gl_attrib_location),t.vertexAttribPointer(this.gl_attrib_location,2,t.FLOAT,t.FALSE,2*Float32Array.BYTES_PER_ELEMENT,0*Float32Array.BYTES_PER_ELEMENT),this.location_matrix=new Float32Array(9).fill(0),this.texture_matrix=new Float32Array(9).fill(0),this.texture_size=new Float32Array(2).fill(0),this.zvalue=0,this.transform.identity(this.location_matrix),this.transform.identity(this.texture_matrix),this.drawImage=function(e,i=0,a=0,n=null,r=null,s=null,c=null,o=null,l=null){if(e.gl_ready){if(this.gl_active_texture!=e.gl_texture&&(this.gl.activeTexture(t.TEXTURE0),this.gl.bindTexture(t.TEXTURE_2D,e.gl_texture),this.gl.uniform1i(this.gl_uniform_texture,0),this.texture_size[0]=e.width,this.texture_size[1]=e.height,this.gl.uniform2fv(this.gl_uniform_texture_size,this.texture_size),this.gl_active_texture=e.gl_texture),null===n)return this.location_matrix[0]=e.width,this.location_matrix[4]=e.height,this.location_matrix[6]=i,this.location_matrix[7]=a,this.texture_matrix[0]=e.width,this.texture_matrix[4]=e.height,this.texture_matrix[6]=0,this.texture_matrix[7]=0,this.gl.uniformMatrix3fv(this.gl_uniform_current_matrix,!1,this.transform.data),this.gl.uniformMatrix3fv(this.gl_uniform_matrix,!1,this.location_matrix),this.gl.uniformMatrix3fv(this.gl_uniform_texture_matrix,!1,this.texture_matrix),this.gl.uniform1f(this.gl_uniform_zvalue,this.zvalue),void this.gl.drawArrays(t.TRIANGLE_STRIP,0,4);null!==s&&(this.location_matrix[0]=o,this.location_matrix[4]=l,this.location_matrix[6]=s,this.location_matrix[7]=c,this.texture_matrix[0]=n,this.texture_matrix[4]=r,this.texture_matrix[6]=i,this.texture_matrix[7]=a,this.gl.uniformMatrix3fv(this.gl_uniform_current_matrix,!1,this.transform.data),this.gl.uniformMatrix3fv(this.gl_uniform_matrix,!1,this.location_matrix),this.gl.uniformMatrix3fv(this.gl_uniform_texture_matrix,!1,this.texture_matrix),this.gl.uniform1f(this.gl_uniform_zvalue,this.zvalue),this.gl.drawArrays(t.TRIANGLE_STRIP,0,4))}}},$3c56105c2000e8ab7d1a19dceac231fb$export$default.prototype.prepareImage=function(t){let e=this.gl;if(null==e)return!1;let i=e.createTexture();return e.bindTexture(e.TEXTURE_2D,i),e.texStorage2D(e.TEXTURE_2D,1,e.RGBA8,t.width,t.height),e.texSubImage2D(e.TEXTURE_2D,0,0,0,t.width,t.height,e.RGBA,e.UNSIGNED_BYTE,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),t.gl_texture=i,t.gl_ready=!0,!0},$3c56105c2000e8ab7d1a19dceac231fb$export$default.prototype.depthTest=function(t){let e=this.gl;null!==e&&(t?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST))},$3c56105c2000e8ab7d1a19dceac231fb$export$default.prototype.applyConfig=function(){0==this.antialias?(null!=this.context&&(this.context.imageSmoothingEnabled=!1),this.elem.style.imageRendering="crisp-edges"):(null!=this.context&&(this.context.imageSmoothingEnabled=!0),this.elem.style.imageRendering="auto")},$3c56105c2000e8ab7d1a19dceac231fb$export$default.prototype.dispose=function(){this.elem.parentNode&&this.elem.parentNode.removeChild(this.elem),this.matrixStack=null,this.alphaStack=null,this.matr=null,this.context=null,this.elem=null},$3c56105c2000e8ab7d1a19dceac231fb$export$default.prototype.setBackground=function(t){this.elem.style.background=t,this.backgroundColor=t},$3c56105c2000e8ab7d1a19dceac231fb$export$default.prototype.resize=function(t,e){let i=this.elem.getBoundingClientRect();return t||(t=i.width),e||(e=i.height),this.elem.width=t,this.elem.height=e,this.width=this.elem.width,this.height=this.elem.height,this._width=int(this.width/this._globalScale),this._height=int(this.height/this._globalScale),null!=this.gl&&(this.gl.viewport(0,0,t,e),this.gl_uniform_screen_size&&this.gl.uniform2fv(this.gl_uniform_screen_size,[t,e]),this.gl.enable(this.gl.SCISSOR_TEST),this.gl.scissor(0,0,t,e)),this.applyConfig(),this},$3c56105c2000e8ab7d1a19dceac231fb$export$default.prototype.globalScale=function(t){return this._globalScale=t,this._width=int(this.width/this._globalScale),this._height=int(this.height/this._globalScale),this.loadIdentity(),this.scale(t,t),this},$3c56105c2000e8ab7d1a19dceac231fb$export$default.prototype.flipped=function(t){return t?(this._width=int(this.height/this._globalScale),this._height=int(this.width/this._globalScale)):(this._width=int(this.width/this._globalScale),this._height=int(this.height/this._globalScale)),this.isFlipped=t,this},$3c56105c2000e8ab7d1a19dceac231fb$export$default.prototype.pushClip=function(){return this},$3c56105c2000e8ab7d1a19dceac231fb$export$default.prototype.popClip=function(){return null!=this.gl&&this.gl.scissor(0,0,this.width,this.height),this},$3c56105c2000e8ab7d1a19dceac231fb$export$default.prototype.toDataUrl=function(t="image/png",e=null){return this.elem.toDataURL(t,e)},$3c56105c2000e8ab7d1a19dceac231fb$export$default.prototype.toPng64=function(){return this.elem.toDataURL("image/png").substr(22)},$3c56105c2000e8ab7d1a19dceac231fb$export$default.prototype._contextAttribute=function(t,e=null){if(this.context)return null!==e?(this.context[t]=e,this):this.context[t]},$3c56105c2000e8ab7d1a19dceac231fb$export$default.prototype.fillStyle=function(t){return this._contextAttribute("fillStyle",t)},$3c56105c2000e8ab7d1a19dceac231fb$export$default.prototype.strokeStyle=function(t){return this._contextAttribute("strokeStyle",t)},$3c56105c2000e8ab7d1a19dceac231fb$export$default.prototype.lineCap=function(t){return this._contextAttribute("lineCap",t)},$3c56105c2000e8ab7d1a19dceac231fb$export$default.prototype.lineJoin=function(t){return this._contextAttribute("lineJoin",t)},$3c56105c2000e8ab7d1a19dceac231fb$export$default.prototype.lineWidth=function(t){return this._contextAttribute("lineWidth",t)},$3c56105c2000e8ab7d1a19dceac231fb$export$default.prototype.miterLimit=function(t){return this._contextAttribute("miterLimit",t)},$3c56105c2000e8ab7d1a19dceac231fb$export$default.prototype.shadowColor=function(t){return this._contextAttribute("shadowColor",t)},$3c56105c2000e8ab7d1a19dceac231fb$export$default.prototype.shadowOffsetX=function(t){return this._contextAttribute("shadowOffsetX",t)},$3c56105c2000e8ab7d1a19dceac231fb$export$default.prototype.shadowOffsetY=function(t){return this._contextAttribute("shadowOffsetY",t)},$3c56105c2000e8ab7d1a19dceac231fb$export$default.prototype.shadowBlur=function(t){return this._contextAttribute("shadowBlur",t)},$3c56105c2000e8ab7d1a19dceac231fb$export$default.prototype.font=function(t){return this._contextAttribute("font",t)},$3c56105c2000e8ab7d1a19dceac231fb$export$default.prototype.textAlign=function(t){return this._contextAttribute("textAlign",t)},$3c56105c2000e8ab7d1a19dceac231fb$export$default.prototype.textBaseline=function(t){return this._contextAttribute("textBaseline",t)},$3c56105c2000e8ab7d1a19dceac231fb$export$default.prototype.globalAlpha=function(t){return void 0===t?this._alpha:(this._alpha=t,this.alpha(1))},$3c56105c2000e8ab7d1a19dceac231fb$export$default.prototype.alpha=function(t){return this._alpha*=t,this.context&&(this.context.globalAlpha=this._alpha),this},$3c56105c2000e8ab7d1a19dceac231fb$export$default.prototype.globalCompositeOperation=function(t){return this._contextAttribute("globalCompositeOperation",t)},$3c56105c2000e8ab7d1a19dceac231fb$export$default.prototype.updateTransform=function(){return this.setTransform(this.matr.data[0],this.matr.data[1],this.matr.data[3],this.matr.data[4],this.matr.data[6],this.matr.data[7]),this},$3c56105c2000e8ab7d1a19dceac231fb$export$default.prototype.setTransform=function(t,e,i,a,n,r){return null===this.context?(this.transform.data[0]=t,this.transform.data[1]=e,this.transform.data[2]=0,this.transform.data[3]=i,this.transform.data[4]=a,this.transform.data[5]=0,this.transform.data[6]=int(n),this.transform.data[7]=int(r),this.transform.data[8]=1,this):(this.context.setTransform(t,e,i,a,int(n),int(r)),this)},$3c56105c2000e8ab7d1a19dceac231fb$export$default.prototype.fillRect=function(t,e,i,a){return this.context.fillRect(t,e,i,a),this},$3c56105c2000e8ab7d1a19dceac231fb$export$default.prototype.strokeRect=function(t,e,i,a){return this.context.strokeRect(t,e,i,a),this},$3c56105c2000e8ab7d1a19dceac231fb$export$default.prototype.clearRect=function(t,e,i,a){return this.context.clearRect(t,e,i,a),this},$3c56105c2000e8ab7d1a19dceac231fb$export$default.prototype.beginPath=function(){return this.context.beginPath(),this},$3c56105c2000e8ab7d1a19dceac231fb$export$default.prototype.moveTo=function(t,e){return this.context.moveTo(t,e),this},$3c56105c2000e8ab7d1a19dceac231fb$export$default.prototype.closePath=function(){return this.context.closePath(),this},$3c56105c2000e8ab7d1a19dceac231fb$export$default.prototype.lineTo=function(t,e){return this.context.lineTo(t,e),this},$3c56105c2000e8ab7d1a19dceac231fb$export$default.prototype.rect=function(t,e,i,a){return this.context.rect(t,e,i,a),this},$3c56105c2000e8ab7d1a19dceac231fb$export$default.prototype.fill=function(t=null){return t&&this.fillStyle(t),this.context.fill(),this},$3c56105c2000e8ab7d1a19dceac231fb$export$default.prototype.stroke=function(t=null){return t&&this.strokeStyle(t),this.context.stroke(),this},$3c56105c2000e8ab7d1a19dceac231fb$export$default.prototype.clip=function(t,e,i,a){return null!==this.gl&&(t*=this._globalScale,e*=this._globalScale,i*=this._globalScale,a*=this._globalScale,this.isFlipped?this.gl.scissor(this.width-e-a-1,this.height-t-i-1,a,i):this.gl.scissor(t,this.height-e-a-1,i,a)),this},$3c56105c2000e8ab7d1a19dceac231fb$export$default.prototype.quadraticCurveTo=function(t,e,i,a){return this.context.quadraticCurveTo(t,e,i,a),this},$3c56105c2000e8ab7d1a19dceac231fb$export$default.prototype.bezierCurveTo=function(t,e,i,a,n,r){return this.context.bezierCurveTo(t,e,i,a,n,r),this},$3c56105c2000e8ab7d1a19dceac231fb$export$default.prototype.arc=function(t,e,i,a,n,r){return this.context.arc(t,e,i,a,n,r),this},$3c56105c2000e8ab7d1a19dceac231fb$export$default.prototype.arcTo=function(t,e,i,a,n){return this.context.arcTo(t,e,i,a,n),this},$3c56105c2000e8ab7d1a19dceac231fb$export$default.prototype.fillText=function(t,e,i,a=1e3){return this.context.fillText(t,e,i,a),this},$3c56105c2000e8ab7d1a19dceac231fb$export$default.prototype.strokeText=function(t,e,i,a=1e3){return this.context.strokeText(t,e,i,a),this},$3c56105c2000e8ab7d1a19dceac231fb$export$default.prototype.measureText=function(t){return this.context.measureText(t).width},$3c56105c2000e8ab7d1a19dceac231fb$export$default.prototype.createImageData=function(t,e){return this.context.createImageData(t,e)},$3c56105c2000e8ab7d1a19dceac231fb$export$default.prototype.getImageData=function(t,e,i,a){return this.context.getImageData(t,e,i,a)},$3c56105c2000e8ab7d1a19dceac231fb$export$default.prototype.putImageData=function(t,e,i){return this.context.putImageData(t,e,i),this},$3c56105c2000e8ab7d1a19dceac231fb$export$default.prototype.drawImage=function(t,e=0,i=0,a=null,n=null,r=null,s=null,c=null,o=null){if(null===a)this.context.drawImage(t,int(e),int(i));else if(null===r)this.context.drawImage(t,int(e),int(i),int(a),int(n));else{let l=int(a),f=int(n);if(!l||!f)return this;let u=int(c),d=int(o);if(!u||!d)return this;this.context.drawImage(t,int(e),int(i),l,f,int(r),int(s),u,d)}return this},$3c56105c2000e8ab7d1a19dceac231fb$export$default.prototype.clear=function(t=null){return null!=this.gl?(this.gl.clear(this.gl.DEPTH_BUFFER_BIT|this.gl.COLOR_BUFFER_BIT),this.gl_active_texture=null,this):(t?this.globalCompositeOperation("source-over").globalAlpha(1).fillStyle(!0!==t?t:this.backgroundColor).fillRect(0,0,this._width,this._height):(this.elem.width=this.width,this.applyConfig()),this.updateTransform(),this)},$3c56105c2000e8ab7d1a19dceac231fb$export$default.prototype.reset=function(t=!1){return this.fillStyle("#000000").strokeStyle("#000000").lineCap("butt").lineJoin("miter").lineWidth("1").miterLimit("10").shadowColor("#000000").shadowOffsetX("0").shadowOffsetY("0").shadowBlur("0").globalAlpha("1.0").globalCompositeOperation("source-over"),t&&this.beginPath().closePath(),this},$3c56105c2000e8ab7d1a19dceac231fb$export$default.prototype.pushMatrix=function(){return this.matrixStack.push(this.matr),this.matr=this.matr.clone(),this},$3c56105c2000e8ab7d1a19dceac231fb$export$default.prototype.popMatrix=function(){return this.matr.free(),this.matr=this.matrixStack.pop(),this.updateTransform()},$3c56105c2000e8ab7d1a19dceac231fb$export$default.prototype.pushAlpha=function(){return this.alphaStack.push(this.globalAlpha()),this},$3c56105c2000e8ab7d1a19dceac231fb$export$default.prototype.popAlpha=function(){return this.globalAlpha(this.alphaStack.pop()),this},$3c56105c2000e8ab7d1a19dceac231fb$export$default.prototype.loadIdentity=function(){return this.matr.identity(),this.updateTransform()},$3c56105c2000e8ab7d1a19dceac231fb$export$default.prototype.loadMatrix=function(t){return this.matr.set(t),this.updateTransform()},$3c56105c2000e8ab7d1a19dceac231fb$export$default.prototype.getMatrix=function(t=!1){return t?this.matr.clone():this.matr},$3c56105c2000e8ab7d1a19dceac231fb$export$default.prototype.appendMatrix=function(t){return this.matr.append(t),this.updateTransform()},$3c56105c2000e8ab7d1a19dceac231fb$export$default.prototype.scale=function(t,e,i){return i?(this.context.scale(t,e),this):(this.matr.scale(t,e),this.updateTransform())},$3c56105c2000e8ab7d1a19dceac231fb$export$default.prototype.rotate=function(t,e){return e?(this.context.rotate(t),this):(this.matr.rotate(t),this.updateTransform())},$3c56105c2000e8ab7d1a19dceac231fb$export$default.prototype.translate=function(t,e,i){return i?(this.context.translate(t,e),this):(this.matr.translate(t,e),this.updateTransform())},$3c56105c2000e8ab7d1a19dceac231fb$export$default.prototype.ellipse=function(t,e,i,a){var n=i/2*.5522848,r=a/2*.5522848,s=t+i-1,c=e+a-1,o=t+i/2,l=e+a/2;return this.beginPath().moveTo(t,l),this.bezierCurveTo(t,l-r,o-n,e,o,e),this.bezierCurveTo(o+n,e,s,l-r,s,l),this.bezierCurveTo(s,l+r,o+n,c,o,c),this.bezierCurveTo(o-n,c,t,l+r,t,l),this.closePath(),this},$3c56105c2000e8ab7d1a19dceac231fb$export$default.prototype.circle=function(t,e,i,a){return this.beginPath(),this.arc(t,e,i,0,2*Math.PI),this.closePath(),a&&this.stroke(a),this},$3c56105c2000e8ab7d1a19dceac231fb$export$default.prototype.line=function(t,e,i,a,n){return this.beginPath(),this.moveTo(t,e),this.lineTo(i,a),this.closePath(),n&&this.stroke(n),this},$3c56105c2000e8ab7d1a19dceac231fb$export$default.prototype.enablePointerEvents=function(){if(this.pointerHandler)return this;this.pointerScale={sx:1,sy:1},this.pointerOffset={x:0,y:0};var t=this,e={action:"",buttons:0,lbuttons:0,x:0,y:0,containedBy:function(t,e,i,a){return this.x>=t&&this.x<=t+i-1&&this.y>=e&&this.y<=e+a-1}};return this.pointerHandlers=[],this.pointerHandler=function(i,a){var n=this.elem.getBoundingClientRect();e.action=i,e.buttons=a.buttons,e.x=e.rx=int(a.clientX-n.left),e.y=e.ry=int(a.clientY-n.top),e.x=(e.x-t.pointerOffset.x-0*t.pointerScale.sx)/t.pointerScale.sx,e.y=(e.y-t.pointerOffset.y-0*t.pointerScale.sy)/t.pointerScale.sy,e.dragging=!1,e.buttons&&!e.lbuttons&&(e.sx=e.x,e.sy=e.y,e.ldx=e.ldy=0),e.buttons&&e.lbuttons&&(e.dragging=!0,e.dx=e.x-e.sx,e.dy=e.y-e.sy,e.ddx=e.dx-e.ldx,e.ddy=e.dy-e.ldy,e.ldx=e.dx,e.ldy=e.dy),e.lbuttons=e.buttons;for(var r=0;r<this.pointerHandlers.length&&!1!==this.pointerHandlers[r][1](e,this.pointerHandlers[r][2]);r++);},this.elem.onmousedown=function(e){t.pointerHandler("DOWN",e)},this.elem.onmouseup=function(e){t.pointerHandler("UP",e)},this.elem.onmousemove=function(e){t.pointerHandler("MOVE",e)},this},$3c56105c2000e8ab7d1a19dceac231fb$export$default.prototype.setPointerScale=function(t,e){return this.pointerScale={sx:t,sy:e},this},$3c56105c2000e8ab7d1a19dceac231fb$export$default.prototype.setPointerOffset=function(t,e){return this.pointerOffset={x:t,y:e},this},$3c56105c2000e8ab7d1a19dceac231fb$export$default.prototype.addPointerHandler=function(t,e){return this.enablePointerEvents(),this.pointerHandlers.push([this.pointerHandlers.length+"_"+int(1e6*Math.random()),t,e]),this.pointerHandlers[this.pointerHandlers.length-1][0]},$3c56105c2000e8ab7d1a19dceac231fb$export$default.prototype.removePointerHandler=function(t){if(this.pointerHandlers)for(var e=0;e<this.pointerHandlers.length;e++)if(this.pointerHandlers[e][0]==t){this.pointerHandlers.splice(e,1);break}},$3c56105c2000e8ab7d1a19dceac231fb$export$default.prototype.drawImageResource=function(t,e=0,i=0,a=null,n=null){return null==a?this.drawImage(t.data,0,0,t.data.width,t.data.height,e,i,t.width,t.height):this.drawImage(t.data,0,0,t.data.width,t.data.height,e,i,a,n)},$3c56105c2000e8ab7d1a19dceac231fb$export$default.renderImage=function(t,e,i,a){let n=new $3c56105c2000e8ab7d1a19dceac231fb$export$default({width:t,height:e});i(n);let r=new Image;r.onload=()=>{$cabc4716fe90fb352f6039743eaed35c$export$default.displayBuffer.prepareImage(r),a(r)},r.src=n.toDataUrl(),n.dispose()};const $cabc4716fe90fb352f6039743eaed35c$export$default={flags:{renderingEnabled:!1,renderingPaused:!1},EVT_KEY_DOWN:1,EVT_KEY_UP:2,EVT_POINTER_DOWN:16,EVT_POINTER_UP:17,EVT_POINTER_MOVE:18,EVT_POINTER_DRAG_START:19,EVT_POINTER_DRAG_MOVE:20,EVT_POINTER_DRAG_STOP:21,DEFAULT:"default",LANDSCAPE:"landscape",PORTRAIT:"portrait",AUTOMATIC:"automatic",defaultOptions:{background:"#000",gl:!0,overdraw:!1,canvas:null,canvas2:null,canvas3:null,fps:144,minFps:15,vsync:!0,antialias:!0,screenWidth:null,screenHeight:null,orientation:0,extraScaleFactor:1,fullscreen:!1},screenWidth:0,screenHeight:0,orientation:0,offsX:0,offsY:0,devicePixelRatio:1,backingStoreRatio:1,canvasPixelRatio:1,canvasScaleFactor:1,scaleFactor:1,initialMatrix:null,displayBuffer:null,displayBuffer2:null,displayBuffer3:null,tempDisplayBuffer:null,keyState:{time:0,shift:!1,ctrl:!1,alt:!1,keyCode:0},pointerState:{},updateQueue:null,drawQueue:null,timeScale:1,frameInterval:0,fixedFrameInterval:0,maxFrameInterval:0,frameDelta:0,frameTime:0,frameNumber:0,perf:{startTime:0,lastTime:0,numFrames:0,numSamples:0,updateTimeTotal:0,drawTimeTotal:0,extraTimeTotal:0,fps:0,averageFps:0,averageUpdateTime:0,averageDrawTime:0,averageExtraTime:0},init:function(t){let e={},i=this;Object.assign(e,this.defaultOptions),t&&Object.assign(e,t),this.options=e,e.screenWidth&&e.screenHeight&&e.orientation==$cabc4716fe90fb352f6039743eaed35c$export$default.DEFAULT&&(e.orientation=e.screenWidth>e.screenHeight?$cabc4716fe90fb352f6039743eaed35c$export$default.LANDSCAPE:$cabc4716fe90fb352f6039743eaed35c$export$default.PORTRAIT),this.orientation=e.orientation,this.updateQueue=$9331e791bdadeac9afb7e80808da523d$export$default.calloc(),this.drawQueue=$9331e791bdadeac9afb7e80808da523d$export$default.calloc(),this.frameInterval=1e3/e.fps,this.maxFrameInterval=1e3/e.minFps,$parcel$global.onresize=function(){i.onWindowResized()},this.frameTimer=new $b82d452f2e3484b177bea709fd7b4383$export$default(e.vsync,this.frameInterval,(t=>this.onFrame(t))),this.displayBuffer=new $3c56105c2000e8ab7d1a19dceac231fb$export$default({gl:e.gl,elem:e.canvas,absolute:!0,hidden:!1,antialias:e.antialias,background:e.background}),this.displayBuffer2=new $3c56105c2000e8ab7d1a19dceac231fb$export$default({gl:!1,elem:e.canvas2,absolute:!0,hidden:!1,antialias:e.antialias,background:"none"}),this.displayBuffer2.elem.style.pointerEvents="none",this.displayBuffer3=new $3c56105c2000e8ab7d1a19dceac231fb$export$default({gl:!1,elem:e.canvas3,absolute:!0,hidden:!1,antialias:e.antialias,background:"none"}),this.displayBuffer3.elem.style.pointerEvents="none",this.tempDisplayBuffer=new $3c56105c2000e8ab7d1a19dceac231fb$export$default({hidden:!0,antialias:e.antialias}).resize(320,240);let a=this.displayBuffer.elem;this.devicePixelRatio=$parcel$global.devicePixelRatio||1,this.backingStoreRatio=1==e.gl?1:this.displayBuffer.context.webkitBackingStorePixelRatio||this.displayBuffer.context.mozBackingStorePixelRatio||this.displayBuffer.context.msBackingStorePixelRatio||this.displayBuffer.context.oBackingStorePixelRatio||this.displayBuffer.context.backingStorePixelRatio||1,this.canvasPixelRatio=this.devicePixelRatio/this.backingStoreRatio,$cabc4716fe90fb352f6039743eaed35c$export$default.onWindowResized(!0),$parcel$global.onkeydown=function(t){if(t.target===$parcel$global.document.body){if(i.keyState[t.keyCode])return!1;switch(i.keyState[t.keyCode]=!0,i.keyState.keyCode=t.keyCode,i.keyState.startTime=hrnow(),t.keyCode){case 16:i.keyState.shift=!0;break;case 17:i.keyState.ctrl=!0;break;case 18:i.keyState.alt=!0}return i.keyState.ctrl&&t.keyCode==$ecb27258662111bab70dd084a4f71ebf$export$default.TAB?(i.keyState[t.keyCode]=!1,!0):!1!==i.onKeyboardEvent(i.EVT_KEY_DOWN,t.keyCode,i.keyState)&&void 0}},$parcel$global.onkeyup=function(t){if(t.target===$parcel$global.document.body){if(!i.keyState[t.keyCode])return!1;switch(i.keyState[t.keyCode]=!1,i.keyState.endTime=hrnow(),i.keyState.keyCode=t.keyCode,t.keyCode){case 16:i.keyState.shift=!1;break;case 17:i.keyState.ctrl=!1;break;case 18:i.keyState.alt=!1}return!1!==i.onKeyboardEvent(i.EVT_KEY_UP,t.keyCode,i.keyState)&&void 0}};const n=function(t,e){return $cabc4716fe90fb352f6039743eaed35c$export$default.reverseRender?int($cabc4716fe90fb352f6039743eaed35c$export$default.screenWidth-1-(e-$cabc4716fe90fb352f6039743eaed35c$export$default.offsY)/$cabc4716fe90fb352f6039743eaed35c$export$default.canvasScaleFactor):int((t-$cabc4716fe90fb352f6039743eaed35c$export$default.offsX)/$cabc4716fe90fb352f6039743eaed35c$export$default.canvasScaleFactor)},r=function(t,e){return $cabc4716fe90fb352f6039743eaed35c$export$default.reverseRender?int((t-$cabc4716fe90fb352f6039743eaed35c$export$default.offsX)/$cabc4716fe90fb352f6039743eaed35c$export$default.canvasScaleFactor):int((e-$cabc4716fe90fb352f6039743eaed35c$export$default.offsY)/$cabc4716fe90fb352f6039743eaed35c$export$default.canvasScaleFactor)};"ontouchstart"in $parcel$global?(a.ontouchstart=function(t){t.preventDefault();let e=t.changedTouches;for(let t=0;t<e.length;t++){$cabc4716fe90fb352f6039743eaed35c$export$default.pointerState[e[t].identifier]||($cabc4716fe90fb352f6039743eaed35c$export$default.pointerState[e[t].identifier]={id:e[t].identifier,isActive:!1,isDragging:!1,sx:0,sy:0,x:0,y:0,dx:0,dy:0,button:0});let i=$cabc4716fe90fb352f6039743eaed35c$export$default.pointerState[e[t].identifier];i.isActive=!0,i.isDragging=!1,i.button=1,i.startTime=hrnow(),i.x=i.sx=n(e[t].clientX,e[t].clientY),i.y=i.sy=r(e[t].clientX,e[t].clientY),$cabc4716fe90fb352f6039743eaed35c$export$default.onPointerEvent($cabc4716fe90fb352f6039743eaed35c$export$default.EVT_POINTER_DOWN,i,$cabc4716fe90fb352f6039743eaed35c$export$default.pointerState)}return!1},a.ontouchend=function(t){t.preventDefault();let e=t.changedTouches;for(let t=0;t<e.length;t++){if(!$cabc4716fe90fb352f6039743eaed35c$export$default.pointerState[e[t].identifier])continue;let i=$cabc4716fe90fb352f6039743eaed35c$export$default.pointerState[e[t].identifier];i.endTime=hrnow(),i.deltaTime=i.endTime-i.startTime,i.x=n(e[t].clientX,e[t].clientY),i.y=r(e[t].clientX,e[t].clientY),i.isDragging&&$cabc4716fe90fb352f6039743eaed35c$export$default.onPointerEvent($cabc4716fe90fb352f6039743eaed35c$export$default.EVT_POINTER_DRAG_STOP,i,$cabc4716fe90fb352f6039743eaed35c$export$default.pointerState),$cabc4716fe90fb352f6039743eaed35c$export$default.onPointerEvent($cabc4716fe90fb352f6039743eaed35c$export$default.EVT_POINTER_UP,i,$cabc4716fe90fb352f6039743eaed35c$export$default.pointerState),i.isActive=!1,i.isDragging=!1,i.button=0}return!1},a.ontouchcancel=function(t){t.preventDefault();let e=t.changedTouches;for(let t=0;t<e.length;t++){if(!$cabc4716fe90fb352f6039743eaed35c$export$default.pointerState[e[t].identifier])continue;let i=$cabc4716fe90fb352f6039743eaed35c$export$default.pointerState[e[t].identifier];i.x=n(e[t].clientX,e[t].clientY),i.y=r(e[t].clientX,e[t].clientY),$cabc4716fe90fb352f6039743eaed35c$export$default.onPointerEvent(i.isDragging?$cabc4716fe90fb352f6039743eaed35c$export$default.EVT_POINTER_DRAG_STOP:$cabc4716fe90fb352f6039743eaed35c$export$default.EVT_POINTER_UP,i,$cabc4716fe90fb352f6039743eaed35c$export$default.pointerState),i.isActive=!1,i.isDragging=!1,i.button=0}return!1},a.ontouchmove=function(t){t.preventDefault();let e=t.changedTouches;for(let t=0;t<e.length;t++){if(!$cabc4716fe90fb352f6039743eaed35c$export$default.pointerState[e[t].identifier])continue;let i=$cabc4716fe90fb352f6039743eaed35c$export$default.pointerState[e[t].identifier];i.isActive&&!i.isDragging&&($cabc4716fe90fb352f6039743eaed35c$export$default.onPointerEvent($cabc4716fe90fb352f6039743eaed35c$export$default.EVT_POINTER_DRAG_START,i,$cabc4716fe90fb352f6039743eaed35c$export$default.pointerState),i.isDragging=!0),i.x=n(e[t].clientX,e[t].clientY),i.y=r(e[t].clientX,e[t].clientY),i.dx=i.x-i.sx,i.dy=i.y-i.sy,$cabc4716fe90fb352f6039743eaed35c$export$default.onPointerEvent(i.isDragging?$cabc4716fe90fb352f6039743eaed35c$export$default.EVT_POINTER_DRAG_MOVE:$cabc4716fe90fb352f6039743eaed35c$export$default.EVT_POINTER_MOVE,i,$cabc4716fe90fb352f6039743eaed35c$export$default.pointerState)}return!1}):(a.onmousedown=function(t){t.preventDefault(),$cabc4716fe90fb352f6039743eaed35c$export$default.pointerState[0]||($cabc4716fe90fb352f6039743eaed35c$export$default.pointerState[0]={id:0,isActive:!1,isDragging:!1,button:0,sx:0,sy:0,x:0,y:0,dx:0,dy:0});let e=$cabc4716fe90fb352f6039743eaed35c$export$default.pointerState[0];return e.isActive=!0,e.isDragging=!1,e.button=t.which,e.x=e.sx=n(t.clientX,t.clientY),e.y=e.sy=r(t.clientX,t.clientY),$cabc4716fe90fb352f6039743eaed35c$export$default.onPointerEvent($cabc4716fe90fb352f6039743eaed35c$export$default.EVT_POINTER_DOWN,e,$cabc4716fe90fb352f6039743eaed35c$export$default.pointerState),!1},a.onmouseup=function(t){if(t.preventDefault(),!$cabc4716fe90fb352f6039743eaed35c$export$default.pointerState[0])return!1;let e=$cabc4716fe90fb352f6039743eaed35c$export$default.pointerState[0];e.x=n(t.clientX,t.clientY),e.y=r(t.clientX,t.clientY),e.isDragging&&$cabc4716fe90fb352f6039743eaed35c$export$default.onPointerEvent($cabc4716fe90fb352f6039743eaed35c$export$default.EVT_POINTER_DRAG_STOP,e,$cabc4716fe90fb352f6039743eaed35c$export$default.pointerState),$cabc4716fe90fb352f6039743eaed35c$export$default.onPointerEvent($cabc4716fe90fb352f6039743eaed35c$export$default.EVT_POINTER_UP,e,$cabc4716fe90fb352f6039743eaed35c$export$default.pointerState),e.isActive=!1,e.isDragging=!1,e.button=0},a.onmousemove=function(t){if(t.preventDefault(),!$cabc4716fe90fb352f6039743eaed35c$export$default.pointerState[0])return!1;let e=$cabc4716fe90fb352f6039743eaed35c$export$default.pointerState[0];return e.isActive&&!e.isDragging&&($cabc4716fe90fb352f6039743eaed35c$export$default.onPointerEvent($cabc4716fe90fb352f6039743eaed35c$export$default.EVT_POINTER_DRAG_START,e,$cabc4716fe90fb352f6039743eaed35c$export$default.pointerState),e.isDragging=!0),e.x=n(t.clientX,t.clientY),e.y=r(t.clientX,t.clientY),e.dx=e.x-e.sx,e.dy=e.y-e.sy,$cabc4716fe90fb352f6039743eaed35c$export$default.onPointerEvent(e.isDragging?$cabc4716fe90fb352f6039743eaed35c$export$default.EVT_POINTER_DRAG_MOVE:$cabc4716fe90fb352f6039743eaed35c$export$default.EVT_POINTER_MOVE,e,$cabc4716fe90fb352f6039743eaed35c$export$default.pointerState),!1})},time:function(){return this.frameTime},start:function(){this.onWindowResized(),this.flags.renderingPaused=!1,this.frameTimer.start()},stop:function(){this.flags.renderingPaused=!0,this.frameTimer.stop()},pause:function(){this.flags.renderingPaused=!0},resume:function(){this.flags.renderingPaused=!1,this.resetPerf()},onFrame:function(t){let e,i=hrnow();t>this.maxFrameInterval&&(t=this.maxFrameInterval),0!==this.fixedFrameInterval&&(t=this.fixedFrameInterval),this.flags.renderingEnabled&&!this.flags.renderingPaused?(t*=this.timeScale,this.frameDelta=t/1e3,this.frameTime+=this.frameDelta,this.frameNumber++,e=hrnow(),this.update(this.frameDelta),this.perf.updateTimeTotal+=hrnow()-e,e=hrnow(),this.draw(),this.perf.drawTimeTotal+=hrnow()-e,this.perf.lastTime=i,this.perf.numFrames++,(t=this.perf.lastTime-this.perf.startTime)>1e3&&(this.perf.fps=int(1e3*this.perf.numFrames/t),this.perf.averageFps=int((this.perf.averageFps*this.perf.numSamples+this.perf.fps)/(this.perf.numSamples+1)),this.perf.averageUpdateTime=int((this.perf.averageUpdateTime*this.perf.numSamples+1e3*this.perf.updateTimeTotal/this.perf.numFrames)/(this.perf.numSamples+1)),this.perf.averageDrawTime=int((this.perf.averageDrawTime*this.perf.numSamples+1e3*this.perf.drawTimeTotal/this.perf.numFrames)/(this.perf.numSamples+1)),this.perf.averageExtraTime=int((this.perf.averageExtraTime*this.perf.numSamples+1e3*this.perf.extraTimeTotal/this.perf.numFrames)/(this.perf.numSamples+1)),this.perf.numSamples++,this.perf.startTime=i,this.perf.lastTime=i,this.perf.numFrames=0,this.perf.updateTimeTotal=0,this.perf.drawTimeTotal=0,this.perf.extraTimeTotal=0)):this.draw()},onWindowResized:function(t=!1){if("document"in $parcel$global)this.options.fullscreen?(this._screenWidth=int($parcel$global.screen.width),this._screenHeight=int($parcel$global.screen.height)):(this._screenWidth=$parcel$global.innerWidth,this._screenHeight=$parcel$global.innerHeight);else if(this._screenWidth=this.options.screenWidth,this._screenHeight=this.options.screenHeight,null==this.options.screenWidth&&null==this.options.screenHeight)throw new Error("At least one screen dimension must be specified in headless mode.");this._screenWidth<this._screenHeight&&this.orientation==$cabc4716fe90fb352f6039743eaed35c$export$default.LANDSCAPE||this._screenWidth>this._screenHeight&&this.orientation==$cabc4716fe90fb352f6039743eaed35c$export$default.PORTRAIT?(this.screenWidth=this._screenHeight,this.screenHeight=this._screenWidth,this.reverseRender=!0):(this.screenWidth=this._screenWidth,this.screenHeight=this._screenHeight,this.reverseRender=!1);let e=this.options.screenWidth,i=this.options.screenHeight;null!=e&&null!=i||(null==e?e=int(this.screenWidth*(this.options.screenHeight/this.screenHeight)):null==i&&(i=int(this.screenHeight*(this.options.screenWidth/this.screenWidth))));let a=e,n=i;this.orientation==$cabc4716fe90fb352f6039743eaed35c$export$default.AUTOMATIC&&a&&n&&(a>n&&this.screenWidth<this.screenHeight||a<n&&this.screenWidth>this.screenHeight)&&(a=n,n=e),this.canvasScaleFactor=1,a&&n?this.canvasScaleFactor=Math.min(this.screenWidth/a,this.screenHeight/n):a?this.canvasScaleFactor=this.screenWidth/a:n&&(this.canvasScaleFactor=this.screenHeight/n);let r=this.screenWidth,s=this.screenHeight;if(a&&(this.screenWidth=a),n&&(this.screenHeight=n),this.offsX=int(.5*(r-this.screenWidth*this.canvasScaleFactor)),this.offsY=int(.5*(s-this.screenHeight*this.canvasScaleFactor)),this.reverseRender){let t=this.offsX;this.offsX=this.offsY,this.offsY=t}this.scaleFactor=this.canvasScaleFactor*this.canvasPixelRatio,this.scaleFactor=int(.7+this.scaleFactor),this.flags.renderingEnabled=!1,"document"in $parcel$global&&($parcel$global.document.body.style.backgroundColor=this.displayBuffer.backgroundColor),this.reverseRender?(this.displayBuffer.resize(this.screenHeight*this.scaleFactor,this.screenWidth*this.scaleFactor),this.displayBuffer.elem.style.width=this.screenHeight*this.canvasScaleFactor+"px",this.displayBuffer.elem.style.height=this.screenWidth*this.canvasScaleFactor+"px",this.displayBuffer2.resize(this.screenHeight*this.scaleFactor,this.screenWidth*this.scaleFactor),this.displayBuffer2.elem.style.width=this.screenHeight*this.canvasScaleFactor+"px",this.displayBuffer2.elem.style.height=this.screenWidth*this.canvasScaleFactor+"px",this.displayBuffer3.resize(s,r),this.displayBuffer3.elem.style.width=s+"px",this.displayBuffer3.elem.style.height=r+"px"):(this.displayBuffer.resize(this.screenWidth*this.scaleFactor,this.screenHeight*this.scaleFactor),this.displayBuffer.elem.style.width=this.screenWidth*this.canvasScaleFactor+"px",this.displayBuffer.elem.style.height=this.screenHeight*this.canvasScaleFactor+"px",this.displayBuffer2.resize(this.screenWidth*this.scaleFactor,this.screenHeight*this.scaleFactor),this.displayBuffer2.elem.style.width=this.screenWidth*this.canvasScaleFactor+"px",this.displayBuffer2.elem.style.height=this.screenHeight*this.canvasScaleFactor+"px",this.displayBuffer3.resize(r,s),this.displayBuffer3.elem.style.width=r+"px",this.displayBuffer3.elem.style.height=s+"px"),this.displayBuffer.elem.style.marginLeft=this.offsX+"px",this.displayBuffer.elem.style.marginTop=this.offsY+"px",this.displayBuffer2.elem.style.marginLeft=this.offsX+"px",this.displayBuffer2.elem.style.marginTop=this.offsY+"px",this.displayBuffer.loadIdentity(),this.displayBuffer2.loadIdentity(),this.displayBuffer3.loadIdentity(),1!=this.scaleFactor&&(this.displayBuffer.globalScale(this.scaleFactor),this.displayBuffer2.globalScale(this.scaleFactor)),this.reverseRender?(this.displayBuffer.rotate(Math.PI/2),this.displayBuffer.translate(-this.screenWidth,0),this.displayBuffer.flipped(!0),this.displayBuffer2.rotate(Math.PI/2),this.displayBuffer2.translate(-this.screenWidth,0),this.displayBuffer2.flipped(!0),this.displayBuffer3.rotate(Math.PI/2),this.displayBuffer3.translate(-r,0),this.displayBuffer3.flipped(!0)):(this.displayBuffer.flipped(!1),this.displayBuffer2.flipped(!1),this.displayBuffer3.flipped(!1)),this.scaleFactor*=this.options.extraScaleFactor,this.integerScaleFactor=int(this.scaleFactor+.9),this.resetPerf(),this.initialMatrix&&this.initialMatrix.free(),this.initialMatrix=this.displayBuffer.getMatrix(!0),1!=t&&(this.flags.renderingEnabled=!0,this.onCanvasResized(this.screenWidth,this.screenHeight))},onCanvasResized:function(t,e){},resetPerf:function(){this.perf.startTime=hrnow(),this.perf.lastTime=hrnow(),this.perf.numFrames=0,this.perf.updateTimeTotal=0,this.perf.drawTimeTotal=0,this.perf.extraTimeTotal=0,this.perf.numSamples=0,this.perf.fps=0,this.perf.averageFps=0,this.perf.averageUpdateTime=0,this.perf.averageDrawTime=0,this.perf.averageExtraTime=0},updateQueueAdd:function(t){return this.updateQueue.push(t),this.updateQueue.bottom},updateQueueRemove:function(t){this.updateQueue.remove(t instanceof $8581dd2a4034ebdbe37300f3afba0093$export$default?t:this.updateQueue.sgetNode(t))},drawQueueAdd:function(t){return this.drawQueue.push(t),this.drawQueue.bottom},drawQueueRemove:function(t){this.drawQueue.remove(t instanceof $8581dd2a4034ebdbe37300f3afba0093$export$default?t:this.drawQueue.sgetNode(t))},queueAdd:function(t){return this.updateQueue.push(t),this.drawQueue.push(t),t},queueRemove:function(t){this.updateQueue.remove(this.updateQueue.sgetNode(t)),this.drawQueue.remove(this.drawQueue.sgetNode(t))},update:function(t){try{let e;for(let i=this.updateQueue.top;i;i=e)e=i.next,i.value.update(t)}catch(t){throw $cabc4716fe90fb352f6039743eaed35c$export$default.stop(),t}},draw:function(){this.options.overdraw||(this.displayBuffer.clear(),this.displayBuffer2.clear(),this.displayBuffer3.clear());try{let t;for(let e=this.drawQueue.top;e;e=t)t=e.next,e.value.draw(this.displayBuffer)}catch(t){throw $cabc4716fe90fb352f6039743eaed35c$export$default.stop(),t}},interpolate:function(t,e,i,a,n){let r={},s={},c=0;for(let e in t)r[e]=0,s[e]=t[e],c++;let o={update:function(l){for(let n in r){if(r[n]==i[n])continue;r[n]+=l,r[n]>=i[n]&&(r[n]=i[n],c--);let o=a[n](r[n]/i[n]);s[n]=(1-o)*t[n]+o*e[n]}n(s,0==c),0==c&&$cabc4716fe90fb352f6039743eaed35c$export$default.updateQueueRemove(o)}};$cabc4716fe90fb352f6039743eaed35c$export$default.updateQueueAdd(o),o.update(0)},onKeyboardEvent:function(t,e,i){},onPointerEvent:function(t,e,i){}},$363800ec3de62fddc1d9a5e33a6b17dc$export$default=function(t,e){this.data=[],this.accumSize=t,this.expectedValue=e,this.stdSum=0,this.stdCount=0};$363800ec3de62fddc1d9a5e33a6b17dc$export$default.SAMPLES=1,$363800ec3de62fddc1d9a5e33a6b17dc$export$default.MIN=2,$363800ec3de62fddc1d9a5e33a6b17dc$export$default.MAX=4,$363800ec3de62fddc1d9a5e33a6b17dc$export$default.AVG=8,$363800ec3de62fddc1d9a5e33a6b17dc$export$default.EXPECTED=16,$363800ec3de62fddc1d9a5e33a6b17dc$export$default.STDDEV=32,$363800ec3de62fddc1d9a5e33a6b17dc$export$default.AVG_STDDEV=64,$363800ec3de62fddc1d9a5e33a6b17dc$export$default.ALL=255,$363800ec3de62fddc1d9a5e33a6b17dc$export$default.prototype.begin=function(){this.startTime=performance.now()},$363800ec3de62fddc1d9a5e33a6b17dc$export$default.prototype.end=function(){this.feed(performance.now()-this.startTime)},$363800ec3de62fddc1d9a5e33a6b17dc$export$default.prototype.feed=function(t){this.data.push(t),this.data.length==this.accumSize&&(this.report(),this.data=[])},$363800ec3de62fddc1d9a5e33a6b17dc$export$default.prototype.update=function(){let t=null,e=null,i=0,a=0;for(let a=0;a<this.data.length;a++)t=null===t?this.data[a]:Math.min(t,this.data[a]),e=null===e?this.data[a]:Math.max(e,this.data[a]),i+=this.data[a];i/=this.data.length;let n=void 0!==this.expectedValue?this.expectedValue:i;for(let t=0;t<this.data.length;t++)a+=Math.pow(this.data[t]-n,2);return a=Math.sqrt(a/this.data.length),this.stdSum+=a,this.stdCount++,this.min=t,this.max=e,this.avg=i,this.std=a,this},$363800ec3de62fddc1d9a5e33a6b17dc$export$default.prototype.report=function(t=255){let e="";return t&$363800ec3de62fddc1d9a5e33a6b17dc$export$default.SAMPLES&&(e+="n: "+this.stdCount),t&$363800ec3de62fddc1d9a5e33a6b17dc$export$default.MIN&&(e+=(""!=e?", ":"")+"min: "+this.min),t&$363800ec3de62fddc1d9a5e33a6b17dc$export$default.MAX&&(e+=(""!=e?", ":"")+"max: "+this.max),t&$363800ec3de62fddc1d9a5e33a6b17dc$export$default.AVG&&(e+=(""!=e?", ":"")+"avg: "+this.avg.toFixed(2)),t&$363800ec3de62fddc1d9a5e33a6b17dc$export$default.EXPECTED&&(e+=(""!=e?", ":"")+(void 0!==this.expectedValue?"e: "+this.expectedValue:"")),t&$363800ec3de62fddc1d9a5e33a6b17dc$export$default.STDDEV&&(e+=(""!=e?", ":"")+"stddev: "+this.std.toFixed(2)),t&$363800ec3de62fddc1d9a5e33a6b17dc$export$default.AVG_STDDEV&&(e+=(""!=e?", ":"")+"avg_stddev: "+(this.stdSum/this.stdCount).toFixed(2)),e};const $4ca05bce8e5796b66097460c15da00c9$export$default={activated:!1,paused:!1,data:$9331e791bdadeac9afb7e80808da523d$export$default.calloc(),count:0,maxsize:30,debugEcho:!1,color:"#fff",background:"#cf266a",vars:{},write:function(t){for(this.data.push(t),this.count++;this.data.length>this.maxsize;)this.data.shift();this.debugEcho&&console.debug(this.count+": "+t)},clear:function(){this.data.reset(),this.count=0},enable:function(t,e,i,a,n){if(this.activated)return;this.activated=!0,t||(t=0),e||(e=0),i||(i=9.5),!1===a&&(e-=16);let r=e;$cabc4716fe90fb352f6039743eaed35c$export$default.drawQueueAdd({draw:function(){if($4ca05bce8e5796b66097460c15da00c9$export$default.paused)return;let s=hrnow();const c=$cabc4716fe90fb352f6039743eaed35c$export$default.displayBuffer3;c.font("bold "+i+"pt Monospace"),c.textBaseline("top");let o="";e=r,!1!==a&&0!=$cabc4716fe90fb352f6039743eaed35c$export$default.perf.fps&&(o="fps: "+$cabc4716fe90fb352f6039743eaed35c$export$default.perf.fps+"/"+$cabc4716fe90fb352f6039743eaed35c$export$default.perf.averageFps+", update: "+$cabc4716fe90fb352f6039743eaed35c$export$default.perf.averageUpdateTime+", draw: "+$cabc4716fe90fb352f6039743eaed35c$export$default.perf.averageDrawTime+", extra: "+$cabc4716fe90fb352f6039743eaed35c$export$default.perf.averageExtraTime,$4ca05bce8e5796b66097460c15da00c9$export$default.background&&(c.fillStyle($4ca05bce8e5796b66097460c15da00c9$export$default.background),c.fillRect(t-3,e-1,c.measureText(o)+6,i+5)),c.fillStyle($4ca05bce8e5796b66097460c15da00c9$export$default.color),c.fillText(o,t,e)),o="";for(let t in $4ca05bce8e5796b66097460c15da00c9$export$default.vars)o+=t+": "+$4ca05bce8e5796b66097460c15da00c9$export$default.vars[t]+"  ";""!==o&&(e+=24,$4ca05bce8e5796b66097460c15da00c9$export$default.background&&(c.fillStyle($4ca05bce8e5796b66097460c15da00c9$export$default.background),c.fillRect(t-3,e-1,c.measureText(o)+6,i+5)),c.fillStyle($4ca05bce8e5796b66097460c15da00c9$export$default.color),c.fillText(o,t,e));let l=0;for(let a=$4ca05bce8e5796b66097460c15da00c9$export$default.data.top;a;a=a.next,l++)o=(!1!==n?"#"+($4ca05bce8e5796b66097460c15da00c9$export$default.count-$4ca05bce8e5796b66097460c15da00c9$export$default.data.length+l+1)+": ":"> ")+a.value,$4ca05bce8e5796b66097460c15da00c9$export$default.background&&(c.fillStyle($4ca05bce8e5796b66097460c15da00c9$export$default.background),c.fillRect(t-3,e-1+7+(i+5)*(l+1)-1,c.measureText(o)+6,i+5)),c.fillStyle($4ca05bce8e5796b66097460c15da00c9$export$default.color),c.fillText(o,t,e-1+7+(i+5)*(l+1));s=hrnow()-s,$cabc4716fe90fb352f6039743eaed35c$export$default.perf.drawTimeTotal-=s,$cabc4716fe90fb352f6039743eaed35c$export$default.perf.extraTimeTotal+=s}})},pause:function(){this.paused=!0},resume:function(){this.paused=!1}};var $c300508ff8318f231a03f90d08d1052b$exports={};const $8c2ed76c3be599228cd92e613ce51103$export$default={};Object.assign($8c2ed76c3be599228cd92e613ce51103$export$default,{integerScaling:!0,pixelated:!1,init:function(t=null){t&&Object.assign(this,t)},load:function(t,e,i,a,n){if(!a){a=Object.keys(t);for(let e in a)"__loaded"in t[a[e]]||(t[a[e]].__clone=$49a0a27d43075b98f896056be628f99a$export$Rin.clone(t[a[e]]));n=0}for(;n<a.length&&"__loaded"in t[a[n]];)n++;if(e&&e(n,a.length,n/a.length),n==a.length)return void(i&&i(t));let r=t[a[n]];switch(r.resName=a[n],r.type){case"image":r.data=new Image,r.data.onload=function(){var s=r.data.width/r.data.height;r.scale&&(r.width=int(r.data.width*r.scale),r.height=int(r.data.height*r.scale)),r.width||r.height?r.width&&!r.height?r.height=int(r.width/s):!r.width&&r.height&&(r.width=int(s*r.height)):(r.width=r.data.width,r.height=r.data.height),r.owidth=r.data.width,r.oheight=r.data.height,null!==r.pixelated&&r.hasOwnProperty("pixelated")||(r.pixelated=$8c2ed76c3be599228cd92e613ce51103$export$default.pixelated),(r.data.width!=r.width||r.data.height!=r.height||!0!==r.original&&1!=$cabc4716fe90fb352f6039743eaed35c$export$default.scaleFactor)&&(!0===r.original?r.data=$8c2ed76c3be599228cd92e613ce51103$export$default.resizeImage(r,r.width,r.height,r.pixelated,!0):r.data=$8c2ed76c3be599228cd92e613ce51103$export$default.resizeImage(r,r.width*(r.pixelated?$cabc4716fe90fb352f6039743eaed35c$export$default.integerScaleFactor:$cabc4716fe90fb352f6039743eaed35c$export$default.scaleFactor),r.height*(r.pixelated?$cabc4716fe90fb352f6039743eaed35c$export$default.integerScaleFactor:$cabc4716fe90fb352f6039743eaed35c$export$default.scaleFactor),r.pixelated,!0)),r.rscale=r.data.width/r.width,$cabc4716fe90fb352f6039743eaed35c$export$default.tempDisplayBuffer.drawImage(r.data,0,0),$cabc4716fe90fb352f6039743eaed35c$export$default.displayBuffer.prepareImage(r.data),$8c2ed76c3be599228cd92e613ce51103$export$default.onLoaded(t,a[n]),$8c2ed76c3be599228cd92e613ce51103$export$default.load(t,e,i,a,n+1)},r.data.onerror=function(){console.error("Error: Unable to load: "+r.resName)},r.data.src=r.src+"?r="+Math.random();break;case"images":var s=(o=r.src).indexOf("#"),c=(l=o.lastIndexOf("#"))-s+1;if(-1==s)return void console.error("Unable to load: "+r.resName+"\nError: The 'src' attribute requires one or more '#' marks.");if(!r.count)return void console.error("Unable to load: "+r.resName+"\nError: The 'count' attribute was not found.");r._i=0,r.data=[],(f=function(){if(r._i==r.count)return $8c2ed76c3be599228cd92e613ce51103$export$default.onLoaded(t,a[n]),void $8c2ed76c3be599228cd92e613ce51103$export$default.load(t,e,i,a,n+1);var o={type:"image",width:r.width,height:r.height,scale:r.scale};o.src=r.src.substr(0,s)+(r._i++/Math.pow(10,c)).toFixed(c).substr(2)+r.src.substr(l+1),o.data=new Image,o.resName=r.resName+"#"+(r._i-1),o.data.onload=function(){var t=o.data.width/o.data.height;o.scale&&(o.width=int(o.data.width*o.scale),o.height=int(o.data.height*o.scale)),o.width||o.height?o.width&&!o.height?o.height=int(o.width/t):!o.width&&o.height&&(o.width=int(t*o.height)):(o.width=o.data.width,o.height=o.data.height),1==r._i&&(r.owidth=o.data.width,r.oheight=o.data.height),(o.data.width!=o.width||o.data.height!=o.height||!0!==o.original&&1!=$cabc4716fe90fb352f6039743eaed35c$export$default.scaleFactor)&&(null!==r.pixelated&&r.hasOwnProperty("pixelated")||(r.pixelated=$8c2ed76c3be599228cd92e613ce51103$export$default.pixelated),!0===o.original?o.data=$8c2ed76c3be599228cd92e613ce51103$export$default.resizeImage(o,o.width,o.height,r.pixelated,!0):o.data=$8c2ed76c3be599228cd92e613ce51103$export$default.resizeImage(o,o.width*(r.pixelated?$cabc4716fe90fb352f6039743eaed35c$export$default.integerScaleFactor:$cabc4716fe90fb352f6039743eaed35c$export$default.scaleFactor),o.height*(r.pixelated?$cabc4716fe90fb352f6039743eaed35c$export$default.integerScaleFactor:$cabc4716fe90fb352f6039743eaed35c$export$default.scaleFactor),r.pixelated,!0)),o.rscale=o.data.width/o.width,1==r._i&&(r.width=o.width,r.height=o.height,r.rscale=o.rscale),$cabc4716fe90fb352f6039743eaed35c$export$default.tempDisplayBuffer.drawImage(o.data,0,0),$cabc4716fe90fb352f6039743eaed35c$export$default.displayBuffer.prepareImage(o.data),r.data.push(o),f()},o.data.onerror=function(){console.error("Error: Unable to load: "+o.resName)},o.data.src=o.src+"?r="+Math.random()})();break;case"audio":if(r.track||(r.track="sfx"),$parcel$global.plugins&&$parcel$global.plugins.NativeAudio&&"sfx"==r.track){r.engine=$c300508ff8318f231a03f90d08d1052b$export$Sound.ENGINE_NATIVEAUDIO,r.data="snd_"+n,$parcel$global.plugins.NativeAudio.preloadSimple(r.data,r.src,(function(){$8c2ed76c3be599228cd92e613ce51103$export$default.onLoaded(t,a[n]),$8c2ed76c3be599228cd92e613ce51103$export$default.load(t,e,i,a,n+1)}),(function(t){console.error("Error: Unable to load (sfx): "+r.resName+"\n"+t)}));break}if($parcel$global.audioContext){r.engine=$c300508ff8318f231a03f90d08d1052b$export$Sound.ENGINE_WEBAUDIO,fetchAudioBuffer(r.src+"?r="+Math.random()).then((s=>{r.data=s,$8c2ed76c3be599228cd92e613ce51103$export$default.onLoaded(t,a[n]),$8c2ed76c3be599228cd92e613ce51103$export$default.load(t,e,i,a,n+1)})).catch((t=>{console.error("Error: Unable to load: "+r.resName)}));break}r.data=new Audio,r.engine=$c300508ff8318f231a03f90d08d1052b$export$Sound.ENGINE_HTML5,r.data.oncanplaythrough=function(){$8c2ed76c3be599228cd92e613ce51103$export$default.onLoaded(t,a[n]),$8c2ed76c3be599228cd92e613ce51103$export$default.load(t,e,i,a,n+1)},r.data.onerror=function(){console.error("Error: Unable to load: "+r.resName)},r.data.src=r.src+"?r="+Math.random();break;case"audios":var o,l,f;s=(o=r.src).indexOf("#"),c=(l=o.lastIndexOf("#"))-s+1;if(-1==s)return void console.error("Unable to load: "+r.resName+"\nError: The 'src' attribute requires one or more '#' marks.");if(!r.count)return void console.error("Unable to load: "+r.resName+"\nError: The 'count' attribute was not found.");r._i=0,r.data=[],(f=function(){if(r._i==r.count)return $8c2ed76c3be599228cd92e613ce51103$export$default.onLoaded(t,a[n]),void $8c2ed76c3be599228cd92e613ce51103$export$default.load(t,e,i,a,n+1);var o={type:"audio",track:r.track};return o.src=r.src.substr(0,s)+(r._i++/Math.pow(10,c)).toFixed(c).substr(2)+r.src.substr(l+1),o.resName=r.resName+"#"+(r._i-1),o.track||(o.track="sfx"),$parcel$global.plugins&&$parcel$global.plugins.NativeAudio&&"sfx"==o.track?(o.engine=$c300508ff8318f231a03f90d08d1052b$export$Sound.ENGINE_NATIVEAUDIO,o.data="snd_"+n+"_"+r._i,void $parcel$global.plugins.NativeAudio.preloadSimple(o.data,o.src,(function(){r.data.push(o),f()}),(function(t){console.error("Error: Unable to load (sfx): "+o.resName+"\n"+t)}))):$parcel$global.audioContext?(o.engine=$c300508ff8318f231a03f90d08d1052b$export$Sound.ENGINE_WEBAUDIO,void fetchAudioBuffer(o.src+"?r="+Math.random()).then((t=>{o.data=t,r.data.push(o),f()})).catch((t=>{console.error("Error: Unable to load: "+o.resName)}))):(o.data=new Audio,o.engine=$c300508ff8318f231a03f90d08d1052b$export$Sound.ENGINE_HTML5,o.data.oncanplaythrough=function(){r.data.push(o),f()},o.data.onerror=function(){console.error("Error: Unable to load: "+o.resName)},void(o.data.src=o.src+"?r="+Math.random()))})();break;case"json":fetchd(r.src+"?r="+Math.random(),{responseType:"json"}).then((function(s){r.data=s,$8c2ed76c3be599228cd92e613ce51103$export$default.onLoaded(t,a[n]),$8c2ed76c3be599228cd92e613ce51103$export$default.load(t,e,i,a,n+1)})).catch((function(t){console.error("Error: Unable to load: "+r.resName+". Error: "+t)}));break;case"object":r.data={},$8c2ed76c3be599228cd92e613ce51103$export$default.onLoaded(t,a[n]),$8c2ed76c3be599228cd92e613ce51103$export$default.load(t,e,i,a,n+1)}},unload:function(t){throw new Error("IMPLEMENTED UNLOAD!")},onLoaded:function(t,e){var i=t[e];i.wrapper&&i.wrapper in $c300508ff8318f231a03f90d08d1052b$exports&&(t[e]=new $c300508ff8318f231a03f90d08d1052b$exports[i.wrapper](i),t[e].__loaded=!0)},resizeImage:function(t,e,i,a,n){var r=t.data.width,s=t.data.height;if(e=int(e),i=int(i),r==e&&s==i)return t.data;if(!this.integerScaling&&a&&(a=null),a){if(int(e/r)>0){var c,o=int(e/r+.9),l=(e=o*r)/r,f=(i=o*s)/s;p=new $3c56105c2000e8ab7d1a19dceac231fb$export$default({hidden:!0,antialias:!1}).resize(e,i);(c=new $3c56105c2000e8ab7d1a19dceac231fb$export$default({hidden:!0,antialias:!1}).resize(r,s)).drawImage(t.data,0,0);for(var u=0;u<s;u++)for(var d=c.getImageData(0,u,r,1).data,h=0,$=0;$<r&&h<d.length;$++,h+=4)p.fillStyle("rgba("+d[h]+","+d[h+1]+","+d[h+2]+","+d[h+3]/255+")"),p.fillRect($*l,u*f,l,f);return c.dispose(),p.elem}return this.resizeImage(t,e,i,null,n)}for((c=new $3c56105c2000e8ab7d1a19dceac231fb$export$default({hidden:!0,antialias:a=null!==a}).resize(r,s)).drawImage(t.data,0,0);;){var p,b=r>>1,x=s>>1;if(b<=e||x<=i)break;(p=new $3c56105c2000e8ab7d1a19dceac231fb$export$default({hidden:!0,antialias:a}).resize(b,x)).drawImage(c.elem,0,0,b,x),c.dispose(),r=b,s=x,c=p}return(p=new $3c56105c2000e8ab7d1a19dceac231fb$export$default({hidden:!0,antialias:a}).resize(e,i)).drawImage(c.elem,0,0,e,i),c.dispose(),n&&dispose(t.data),p.elem},flipImageHorz:function(t){var e=new $3c56105c2000e8ab7d1a19dceac231fb$export$default({hidden:!0}).resize(t.data.width,t.data.height);return e.translate(t.data.width,0),e.scale(-1,1),e.drawImage(t.data,0,0),e.elem},showDownload:function(t,e){var i=document.createElement("a");i.href=e,i.style.display="none",i.download=t,i.target="_blank",document.body.appendChild(i),i.click(),document.body.removeChild(i)},showFilePicker:function(t,e,i){var a=document.createElement("input");a.type="file",a.accept=e,a.style.display="none",a.multiple=t,document.body.appendChild(a),a.onchange=function(){i(a.files)},document.body.onfocus=function(){document.body.onfocus=null,document.body.removeChild(a)},a.click()},loadAsDataURL:function(t,e){var i=new FileReader;i.onload=function(t){e(t.target.result)},i.readAsDataURL(t)},loadAsText:function(t,e){var i=new FileReader;i.onload=function(t){e(t.target.result)},i.readAsText(t)},loadAsArrayBuffer:function(t,e){var i=new FileReader;i.onload=function(t){e(t.target.result)},i.readAsArrayBuffer(t)},loadAllAsDataURL:function(t,e){var i=[];if(t&&t.length){var a=function(n){n!=t.length?$8c2ed76c3be599228cd92e613ce51103$export$default.loadAsDataURL(t[n],(function(e){i.push({name:t[n].name,size:t[n].size,url:e}),a(n+1)})):e(i)};a(0)}else e(i)}});var $1650bdc66a81ddb41761abeffd23210b$export$default=$49a0a27d43075b98f896056be628f99a$export$Class.extend({className:"Drawable",width:null,height:null,__ctor:function(t){if("image"!=t.type)throw new Error("Resource is not an image.");this.width=t.width,this.height=t.height,this.r=t,this.r.wrapper=this},draw:function(t,e=0,i=0,a=null,n=null){null==a?t.drawImageResource(this.r,e,i):t.drawImageResource(this.r,e,i,a,n)},getDrawable:function(){return this}});$8c2ed76c3be599228cd92e613ce51103$export$default.Image=function(t,e=null){return{type:"image",wrapper:"Drawable",src:t,pixelated:null,...e}};var $58dab9516df16ec182238d2ca8a1defb$export$default=$49a0a27d43075b98f896056be628f99a$export$Class.extend({className:"Placeholder",width:null,height:null,__ctor:function(t){if("object"!=t.type)throw new Error("Resource is not an object.");this.width=t.width,this.height=t.height,this.r=t,this.r.wrapper=this,this.data=null,$3c56105c2000e8ab7d1a19dceac231fb$export$default.renderImage(t.width,t.height,(e=>{e.fillStyle(this.r.color),e.fillRect(0,0,t.width,t.height)}),(t=>{this.data=t}))},draw:function(t,e=0,i=0,a=null,n=null){this.data&&t.drawImageResource(this,e,i,a,n)},getDrawable:function(){return this}});$8c2ed76c3be599228cd92e613ce51103$export$default.Placeholder=function(t,e,i="#ff0000",a=null){return{type:"object",wrapper:"Placeholder",width:t,height:e,color:i,...a}};var $627725a412dfe14c915059cb52478808$export$default=$49a0a27d43075b98f896056be628f99a$export$Class.extend({className:"Spritesheet",width:0,height:0,numCols:0,numFrames:0,drawableCache:null,__ctor:function(t){if("image"!=t.type&&"images"!=t.type)throw new Error("Resource is not a sprite sheet.");var e,i;if("image"==t.type){if(!(t.config.sheetWidth||t.config.numFrames&&t.config.frameWidth))throw new Error("Required sheetWidth or numFrames+frameWidth");t.config.sheetWidth||(t.config.sheetWidth=t.config.numFrames*t.config.frameWidth),t.config.frameHeight||(t.config.frameHeight=t.data.height),e=t.data.width/t.config.sheetWidth,i=t.width/t.config.sheetWidth}else t.config||(t.config={}),t.config.frameWidth||(t.config.frameWidth=t.data[0].width),t.config.frameHeight||(t.config.frameHeight=t.data[0].height),e=t.data[0].data.width/t.config.frameWidth,i=t.data[0].width/t.config.frameWidth;var a=t.config.frameWidth,n=t.config.frameHeight;this.r_frameWidth=a*e,this.r_frameHeight=n*e,this.width=a*i,this.height=n*i,"image"==t.type?(this.numCols=int(t.data.width/this.r_frameWidth),this.numRows=Math.ceil(t.data.height/this.r_frameHeight),this.numFrames=t.config.numFrames||this.numCols*this.numRows):(this.numCols=this.numRows=0,this.numFrames=t.data.length),this.drawableCache={},this.r=t,this.r.wrapper=this},drawFrame:function(t,e,i,a,n=0,r=0){if(!(a<0||a>=this.numFrames))if(n||(n=this.width),r||(r=this.height),0!=this.numCols){var s=int(a/this.numCols)*this.r_frameHeight,c=a%this.numCols*this.r_frameWidth;t.drawImage(this.r.data,c,s,this.r_frameWidth,this.r_frameHeight,e,i,n,r)}else t.drawImage(this.r.data[a].data,0,0,this.r_frameWidth,this.r_frameHeight,e,i,n,r)},getFrame:function(t,e=null){let i;if(i=null!==e?e*this.numCols+t:t,i<0||i>=this.numFrames)throw new Error("frameIndex out of range");return this.drawableCache[i]||(this.drawableCache[i]={width:this.width,height:this.height,frameIndex:i,r:this,draw:function(t,e=0,i=0,a=0,n=0){t.drawFrame(this.r,e,i,this.frameIndex,a,n)},getDrawable:function(){return this}}),this.drawableCache[i]},getDrawable:function(){return this.getFrame(0)}});$3c56105c2000e8ab7d1a19dceac231fb$export$default.prototype.drawFrame=function(t,e,i,a,n,r){t.drawFrame(this,e,i,a,n,r)};const $e342b055560c491aa3816f3d2921580a$export$Animation=$49a0a27d43075b98f896056be628f99a$export$Class.extend({className:"Animation",width:null,height:null,seq:null,seq_i:0,trans:null,trans_i:0,trans_t:null,queue:null,fps:0,frameSeconds:0,time:0,frameNumber:-1,finished:!1,paused:!1,finishedCallback:null,finishedCallbackHandler:null,finishedCallbackContext:null,frameCallback:null,init:function(t,e,i){return this.anim=t,this.queue=$9331e791bdadeac9afb7e80808da523d$export$default.calloc(),this.seq=e,this.seq_i=0,this.trans=null,this.trans_i=0,this.trans_t=null,this.width=t.width,this.height=t.height,this.frameNumber=-1,this.finished=!1,this.paused=!1,this.finishedCallback=null,this.finishedCallbackHandler=null,this.finishedCallbackContext=null,this.frameCallback=null,this.fps=i,this.setFps(this.seq.fps||this.fps),this},__dtor:function(){this.queue.free(),this.finishedCallbackHandler&&this.finishedCallbackHandler.free(),this.finishedCallbackContext&&this.finishedCallbackContext.free()},setFps:function(t){return this.frameSeconds=1/t,this.time=0,this},setPaused:function(t){return this.paused=t,this},setInitialDelay:function(t){return this.time=-t,this},onFinished:function(t){return this.finishedCallback=t,this},then:function(t,e=null){return this.finishedCallback!==this.thenCallback&&(this.finishedCallback=this.thenCallback,this.finishedCallbackHandler=$9331e791bdadeac9afb7e80808da523d$export$default.calloc(),this.finishedCallbackContext=$9331e791bdadeac9afb7e80808da523d$export$default.calloc()),this.finishedCallbackHandler.push(t),this.finishedCallbackContext.push(e),this},thenCallback:function(){if(!this.finishedCallbackHandler.length)return!1;let t=this.finishedCallbackContext.shift();this.finishedCallbackHandler.shift()(this,t)},onFrame:function(t){return this.frameCallback=t,this},setFrame:function(t){return this.seq_i=t%this.seq.group.length,this},getFrame:function(t){return!0===t?this.seq_i/(this.seq.group.length-1):this.seq_i},getLength:function(){return this.seq.group.length},draw:function(t,e=0,i=0){if(this.time<0)return this.paused||(this.time+=this.frameNumber==$cabc4716fe90fb352f6039743eaed35c$export$default.frameNumber?0:$cabc4716fe90fb352f6039743eaed35c$export$default.frameDelta,this.frameNumber=$cabc4716fe90fb352f6039743eaed35c$export$default.frameNumber),void(this.time>0&&(this.time=0));if(this.seq_i==this.seq.group.length){let a=this.seq.group[this.seq_i-1];if(null!=t)for(let n=0;n<a.length;n++)t.drawFrame(this.anim,e,i,a[n]);return}let a=this.seq.group[this.seq_i];if(null!=t)for(let n=0;n<a.length;n++)t.drawFrame(this.anim,e,i,a[n]);if(this.paused||(this.time+=this.frameNumber==$cabc4716fe90fb352f6039743eaed35c$export$default.frameNumber?0:$cabc4716fe90fb352f6039743eaed35c$export$default.frameDelta,this.frameNumber=$cabc4716fe90fb352f6039743eaed35c$export$default.frameNumber),this.time>=this.frameSeconds){const t=this.seq_i;this.time-=this.frameSeconds,this.seq_i++,this.seq_i==this.seq.group.length&&(null!=this.trans?(++this.trans_i==this.trans.length?(this.trans=null,this.seq=this.trans_t):this.seq=this.trans[this.trans_i],this.seq_i=0,this.time=0,this.finished=!1):(this.seq.loop?this.seq_i=0:(this.finished=!0,this.finishedCallback&&!1===this.finishedCallback(this)&&(this.finishedCallback=null)),this.queue.length&&this.use(this.queue.shift(),!0))),this.frameCallback&&!1===this.frameCallback(t,this.seq.group.length-1,this)&&(this.frameCallback=null)}},getDrawable:function(){return this},advance:function(){this.setPaused(!1),this.draw(null,0,0)},getName:function(){return(null==this.trans?this.seq:this.trans_t).name},use:function(t,e=!1){let i=null==this.trans?this.seq:this.trans_t;return i.name!=t||this.finished||!0===e?(i.trans&&i.trans[t]?(this.trans_t=this.anim.a.seq[t],this.trans=i.trans[t],this.trans_i=0,this.seq=this.trans[this.trans_i]):(this.seq=this.anim.a.seq[t],this.setFps(this.seq.fps||this.fps)),this.seq_i=0,this.time=0,this.finished=!1,this):this},setQueue:function(t){if(!$9331e791bdadeac9afb7e80808da523d$export$default.isInstance(t))throw new Error("setQueue: Parameter must be an instance of List");null!=this.queue&&this.queue.clear().free(),this.queue=t,this.use(this.queue.shift(),!0)},enqueue:function(t,e=!1){let i=null==this.trans?this.seq:this.trans_t,a=this.queue.length>0?this.queue[this.queue.length-1]:i.name;return i.name==t&&i.loop?this:a!=t||e?i.loop||this.finished?(this.use(t,!0),this):(this.queue.push(t),this):this}});$ccdbbc32fd9f0a412799511487cd91a1$export$default.attachTo($e342b055560c491aa3816f3d2921580a$export$Animation);var $e342b055560c491aa3816f3d2921580a$export$default=$627725a412dfe14c915059cb52478808$export$default.extend({className:"SpritesheetAnimation",defaultDrawable:null,__ctor:function(t){if(!t.anim)throw new Error("Animation descriptors not found.");this._super.Spritesheet.__ctor(t),this.r=t,this.r.wrapper=this;let e=this.a=this.r.anim;if(e.initialized)return;if(e.def||(e.def="def"),e.seq||(e.seq={}),!e.seq[e.def]&&("def"==e.def||"defloop"==e.def)){let t={loop:"def"!=e.def,group:[]};for(let e=0;e<this.numFrames;e++)t.group.push([e]);e.seq[e.def]=t}if(!e.seq[e.def])throw new Error("Undefined default sequence: "+e.def);e.fps||(e.fps=25),e.def=e.seq[e.def];let i=0;for(let t in e.seq)if(e.seq[t].name=t,e.seq[t].loop||(e.seq[t].loop=!1),"string"==typeof e.seq[t].group){let a,n,r;if(-1!=e.seq[t].group.indexOf(" ")){a=e.seq[t].group.split(" "),e.seq[t].group=[];for(let i in a)e.seq[t].group.push([int(a[i])])}else if(-1!=e.seq[t].group.indexOf(","))for(r=e.seq[t].group.split(","),a=int(r[0]),n=int(r[1]),e.seq[t].group=[],r=a;r<=n;r++)e.seq[t].group.push([r]);else for(a=int(e.seq[t].group),e.seq[t].group=[];a--;)e.seq[t].group.push([i++])}if(e.trans)for(let t in e.trans){e.seq[t].trans=e.trans[t];for(let i in e.trans[t])for(let a=0;a<e.trans[t][i].length;a++){let n=e.trans[t][i][a];if(!e.seq[n])throw new Error("Undefined sequence: "+n);e.trans[t][i][a]=e.seq[n]}}e.initialized=!0},getAnimation:function(t=null,e=null){return $e342b055560c491aa3816f3d2921580a$export$Animation.alloc().init(this,t?this.a.seq[t]:this.a.def,e||this.a.fps)},getDrawable:function(){return null===this.defaultDrawable&&(this.defaultDrawable=this.getAnimation()),this.defaultDrawable}}),$7348ebe4152ceb8aef436e181a4ab9b7$export$default=$49a0a27d43075b98f896056be628f99a$export$Class.extend({__ctor:function(t){if("image"!=t.type||!t.font)throw new Error("Resource is not a sprite font.");t.font.sheetWidth||(t.font.sheetWidth=t.width);let e=t.data.width/t.font.sheetWidth,i=t.width/t.font.sheetWidth;this.r_charWidth=t.font.charWidth*e,this.r_charHeight=t.font.charHeight*e,this.charWidth=t.font.charWidth*i,this.charHeight=t.font.charHeight*i;let a=int(t.font.sheetWidth/t.font.charWidth);this.r=t,this.r.wrapper=this;let n=t.font.charset.length,r=0,s=0;for(this.charTable={},this.charTable[" "]={charWidth:this.charWidth>>1,r_charWidth:this.r_charWidth};r<n;){let e=0;for(let i=0;i<a&&r<n;i++){let i=t.font.charset[r++];this.charTable[i]={x:e,y:s,charWidth:this.charWidth,r_charWidth:this.r_charWidth},e+=this.r_charWidth}s+=this.r_charHeight}if(t.font.widths){n=t.font.widths.length;for(let a=0;a<n;a+=2){let n=t.font.widths[a]*i,r=t.font.widths[a]*e,s=t.font.widths[a+1];for(let t=0;t<s.length;t++)this.charTable[s[t]].charWidth=n,this.charTable[s[t]].r_charWidth=r}}},drawText:function(t,e,i,a){let n=a.length;for(let r=0;r<n;r++){if(" "==a[r]){e+=this.charTable[a[r]].charWidth;continue}let n=this.charTable[a[r]];n&&(t.drawImage(this.r.data,n.x,n.y,n.r_charWidth,this.r_charHeight,e,i,n.charWidth,this.charHeight),e+=n.charWidth)}},measureWidth:function(t){let e=t.length,i=0;for(let a=0;a<e;a++){let e=this.charTable[t[a]];e&&(i+=e.charWidth)}return i},measureHeight:function(t){return this.charHeight}});$3c56105c2000e8ab7d1a19dceac231fb$export$default.prototype.drawText=function(t,e,i,a){t.drawText(this,e,i,a)},$3c56105c2000e8ab7d1a19dceac231fb$export$default.prototype.drawTextAligned=function(t,e,i,a,n,r,s,c){0==r?e+=a-t.measureWidth(c)>>1:r<0?e=e-r-1:r>0&&(e=e+a-r+1-t.measureWidth(c)),0==s?i+=n-t.measureHeight(c)>>1:s<0?i=i-s-1:s>0&&(i=i+n-s+1-t.measureHeight(c)),t.drawText(this,e,i,c)},$3c56105c2000e8ab7d1a19dceac231fb$export$default.prototype.drawTextAligned2=function(t,e,i,a,n){this.drawTextAligned(t,e.x1,e.y1,e.width(),e.height(),i,a,n)};const $c1b17ff2c1cc00f8fa2d10063393a8ec$export$default=$49a0a27d43075b98f896056be628f99a$export$Class.extend({r:null,__ctor:function(t){if("audio"!=t.type)throw new Error("Resource is not audio.");this.r=t,this.r.wrapper=this,this.track=$c1b17ff2c1cc00f8fa2d10063393a8ec$export$default[this.r.track.toUpperCase()]},play:function(t,e){return $c1b17ff2c1cc00f8fa2d10063393a8ec$export$default.play(this,t,e)},playLoop:function(t,e){return $c1b17ff2c1cc00f8fa2d10063393a8ec$export$default.playLoop(this,t,e)}});$c1b17ff2c1cc00f8fa2d10063393a8ec$export$default.ENGINE_HTML5=1,$c1b17ff2c1cc00f8fa2d10063393a8ec$export$default.ENGINE_WEBAUDIO=2,$c1b17ff2c1cc00f8fa2d10063393a8ec$export$default.ENGINE_NATIVEAUDIO=3,Object.assign($c1b17ff2c1cc00f8fa2d10063393a8ec$export$default,{MASTER:{enabled:!0,volume:1},SFX:{enabled:!0,volume:1},MUSIC:{enabled:!0,volume:.8},VOICE:{enabled:!0,volume:1},MAX_POOL_SIZE:100,pool:[],active:[],register:function(t){t.registered||(t.registered=!0,this.active.push(t))},unregister:function(t){if(t.registered){t.registered=!1;var e=$c1b17ff2c1cc00f8fa2d10063393a8ec$export$default.active.indexOf(t);-1!=e&&$c1b17ff2c1cc00f8fa2d10063393a8ec$export$default.active.splice(e,1)}},updateNode:function(t,e){switch(t.snd.r.engine){case $c1b17ff2c1cc00f8fa2d10063393a8ec$export$default.ENGINE_WEBAUDIO:return this.updateNode_webaudio(t,e);case $c1b17ff2c1cc00f8fa2d10063393a8ec$export$default.ENGINE_NATIVEAUDIO:return this.updateNode_nativeaudio(t,e)}return this.updateNode_audio(t,e)},alloc_webaudio:function(t){t.gainNode=audioContext.createGain(),t.gainNode.gain.value=0,t.gainNode.connect(audioContext.destination),t.res=audioContext.createBufferSource(),t.res.buffer=t.snd.r.data,t.res.loop=!1,t.res.connect(t.gainNode),t.res.node=t},free_webaudio:function(t){t.res&&(t.gainNode.disconnect(),t.res=null,t.gainNode=null)},alloc_nativeaudio:function(t){t.res=!0},free_nativeaudio:function(t){t.res=!1},alloc_audio:function(t){return this.pool.length?item=this.pool.pop():item=t.cloneNode(),item._src=t.src,item},free_audio:function(t){this.pool.length!=this.MAX_POOL_SIZE&&this.pool.push(t)},updateNode_webaudio:function(t,e){if(!t)return null;var i=$c1b17ff2c1cc00f8fa2d10063393a8ec$export$default.MASTER.volume*t.snd.track.volume*t.volume;switch(e){case"play":if(t.playing)break;t.res||$c1b17ff2c1cc00f8fa2d10063393a8ec$export$default.alloc_webaudio(t),t.playTime=hrnow(),t.playing=!0,t.pause=!1,t.res.onended=$c1b17ff2c1cc00f8fa2d10063393a8ec$export$default.onended_webaudio,t.gainNode.gain.value=i;try{t.res.start(0,t.startTime/1e3)}catch(e){return $c1b17ff2c1cc00f8fa2d10063393a8ec$export$default.free_webaudio(t),null}$c1b17ff2c1cc00f8fa2d10063393a8ec$export$default.register(t);break;case"setvolume":if(!t.res)break;t.gainNode.gain.value=i;break;case"stop":if(!t.playing&&t.paused){t.startTime=0,t.paused=!1,$c1b17ff2c1cc00f8fa2d10063393a8ec$export$default.free_webaudio(t),t.callback&&t.callback();break}if(!t.res)break;t.startTime=0,t.playing=!1,t.pause=!1,t.res.onended=null,$c1b17ff2c1cc00f8fa2d10063393a8ec$export$default.unregister(t),t.res.stop(),$c1b17ff2c1cc00f8fa2d10063393a8ec$export$default.free_webaudio(t),t.callback&&t.callback();break;case"pause":if(!t.playing||!t.res)break;t.startTime+=hrnow()-t.playTime,t.playing=!1,t.pause=!0,t.res.onended=null,$c1b17ff2c1cc00f8fa2d10063393a8ec$export$default.unregister(t),t.res.stop(),$c1b17ff2c1cc00f8fa2d10063393a8ec$export$default.free_webaudio(t);break;case"softstop":if(!t.playing&&t.paused){t.startTime=0,t.paused=!1;break}if(!t.playing||!t.res)break;t.startTime=0,t.playing=!1,t.pause=!1,t.res.loop=!1}return t},onended_webaudio:function(t){var e=t.currentTarget.node;if(e.playing&&0!=e.loop)return $c1b17ff2c1cc00f8fa2d10063393a8ec$export$default.free_webaudio(e),-1!=e.loop&&e.loop--,e.startTime=0,e.playing=!1,e.pause=!1,void $c1b17ff2c1cc00f8fa2d10063393a8ec$export$default.updateNode_webaudio(e,"play");e.res.onended=null,e.res.volume=0,$c1b17ff2c1cc00f8fa2d10063393a8ec$export$default.updateNode_webaudio(e,"stop")},updateNode_nativeaudio:function(t,e){if(!t)return null;switch(e){case"play":if(t.playing)break;t.res||$c1b17ff2c1cc00f8fa2d10063393a8ec$export$default.alloc_nativeaudio(t),t.playing=!0,t.pause=!1;try{$parcel$global.plugins.NativeAudio.play(t.snd.r.data,null,null,(function(){$c1b17ff2c1cc00f8fa2d10063393a8ec$export$default.onended_nativeaudio(t)}))}catch(e){return $c1b17ff2c1cc00f8fa2d10063393a8ec$export$default.free_nativeaudio(t),null}$c1b17ff2c1cc00f8fa2d10063393a8ec$export$default.register(t);break;case"setvolume":break;case"stop":if(!t.res)break;t.playing=!1,t.pause=!1,$c1b17ff2c1cc00f8fa2d10063393a8ec$export$default.unregister(t),$parcel$global.plugins.NativeAudio.stop(t.snd.r.data,null),$c1b17ff2c1cc00f8fa2d10063393a8ec$export$default.free_nativeaudio(t),t.callback&&t.callback()}return t},onended_nativeaudio:function(t){$c1b17ff2c1cc00f8fa2d10063393a8ec$export$default.updateNode_nativeaudio(t,"stop")},updateNode_audio:function(t,e){if(!t)return null;var i=$c1b17ff2c1cc00f8fa2d10063393a8ec$export$default.MASTER.volume*t.snd.track.volume*t.volume;switch(e){case"play":if(t.playing)break;t.res||(t.res=$c1b17ff2c1cc00f8fa2d10063393a8ec$export$default.alloc_audio(t.snd.r.data),t.res.node=t,t.res.src=t.res._src),t.playTime=hrnow(),t.playing=!0,t.pause=!1,t.res.onended=$c1b17ff2c1cc00f8fa2d10063393a8ec$export$default.onended_audio,t.res.currentTime=t.startTime/1e3,t.res.volume=i;try{t.res.play()}catch(e){return $c1b17ff2c1cc00f8fa2d10063393a8ec$export$default.free_audio(t.res),t.res=null,null}$c1b17ff2c1cc00f8fa2d10063393a8ec$export$default.register(t);break;case"setvolume":if(!t.res)break;t.res.volume=i;break;case"stop":if(!t.playing&&t.paused){t.startTime=0,t.paused=!1,$c1b17ff2c1cc00f8fa2d10063393a8ec$export$default.free_audio(t.res),t.res=null,t.callback&&t.callback();break}if(!t.res)break;t.startTime=0,t.playing=!1,t.pause=!1,$c1b17ff2c1cc00f8fa2d10063393a8ec$export$default.unregister(t),t.res.pause(),$c1b17ff2c1cc00f8fa2d10063393a8ec$export$default.free_audio(t.res),t.res=null,t.callback&&t.callback();break;case"pause":if(!t.playing||!t.res)break;t.startTime+=hrnow()-t.playTime,t.playing=!1,t.pause=!0,$c1b17ff2c1cc00f8fa2d10063393a8ec$export$default.unregister(t),t.res.pause();break;case"softstop":if(!t.playing&&t.paused){t.startTime=0,t.paused=!1;break}if(!t.playing||!t.res)break;t.startTime=0,t.playing=!1,t.pause=!1}return t},onended_audio:function(t){var e=t.currentTarget.node;if(e.playing&&0!=e.loop)return-1!=e.loop&&e.loop--,e.startTime=0,e.playing=!1,e.pause=!1,void $c1b17ff2c1cc00f8fa2d10063393a8ec$export$default.updateNode_audio(e,"play");e.res.onended=null,e.res.volume=0,$c1b17ff2c1cc00f8fa2d10063393a8ec$export$default.updateNode_audio(e,"stop")},enableTrack:function(t){t&&(t.enabled=!0)},disableTrack:function(t){t&&(t.enabled=!1)},setVolume:function(t,e){t&&(t.volume=e)},createNode:function(t,e){var i={};return i.startVolume=e,i.volume=e,i.snd=t,i.loop=0,i.playing=!1,i.paused=!1,i.startTime=0,i.playTime=0,i.callback=null,i.timer=null,i.res=null,i},play:function(t,e,i){if(!this.MASTER.enabled||!t||!t.track.enabled)return null;i=null!=i?i:1;var a=this.createNode(t,i);return a.callback=e,this.updateNode(a,"play")},playLoop:function(t,e,i){if(!this.MASTER.enabled||!t||!t.track.enabled)return null;i=null!=i?i:1;var a=this.createNode(t,i);return a.callback=e,a.loop=-1,this.updateNode(a,"play")},stop:function(t,e){return t?(e&&!0!==e&&(t.callback=e),this.updateNode(t,!0===e?"stop":"softstop")):null},pause:function(t){return t?this.updateNode(t,"pause"):null},resume:function(t){return t?this.updateNode(t,"play"):null},fadeOut:function(t,e,i){if(t)if(t.playing&&!t.timer){var a=hrnow();t.startVolume=t.volume,t.timer=setInterval((function(){var n=(hrnow()-a)/e;n>1&&(n=1),t.volume=t.startVolume*(1-n),$c1b17ff2c1cc00f8fa2d10063393a8ec$export$default.updateNode(t,"setvolume"),1==n&&(clearInterval(t.timer),t.timer=null,!0===i?$c1b17ff2c1cc00f8fa2d10063393a8ec$export$default.updateNode(t,"stop"):$c1b17ff2c1cc00f8fa2d10063393a8ec$export$default.updateNode(t,"pause"),i&&!0!==i&&i())}),50)}else i&&i()},fadeIn:function(t,e,i){if(t)if(t.playing||t.timer)i&&i();else{var a=hrnow();t.volume=0,this.updateNode(t,"play"),t.timer=setInterval((function(){var n=(hrnow()-a)/e;n>1&&(n=1),t.volume=t.startVolume*n,$c1b17ff2c1cc00f8fa2d10063393a8ec$export$default.updateNode(t,"setvolume"),1==n&&(clearInterval(t.timer),t.timer=null,i&&i())}),50)}}}),$8c2ed76c3be599228cd92e613ce51103$export$default.Audio=function(t,e=null){return{type:"audio",wrapper:"Sound",src:t,...e}};var $e0fe2a194133545b94a50a8849a2aba0$export$default=$49a0a27d43075b98f896056be628f99a$export$Class.extend({r:null,__ctor:function(t){if("audios"!=t.type)throw new Error("Resource is not audios.");this.r=t,this.r.wrapper=this,this.r.track||(this.r.track="sfx"),this.r.mode||(this.r.mode="random"),this.track=$c1b17ff2c1cc00f8fa2d10063393a8ec$export$default[this.r.track.toUpperCase()],this.sounds=[],this.lastIndex=-1;for(var e=0;e<this.r.data.length;e++)this.sounds.push(new $c1b17ff2c1cc00f8fa2d10063393a8ec$export$default(Object.assign(this.r.data[e],{track:this.r.track})))},getRandomSound:function(){return"random"==this.r.mode?this.sounds[randr(0,this.sounds.length-1)]:(this.lastIndex=++this.lastIndex%this.sounds.length,this.sounds[this.lastIndex])},play:function(t,e){return $c1b17ff2c1cc00f8fa2d10063393a8ec$export$default.play(this.getRandomSound(),t,e)},playLoop:function(t,e){return $c1b17ff2c1cc00f8fa2d10063393a8ec$export$default.playLoop(this.getRandomSound(),t,e)},playAt:function(t,e,i){return $c1b17ff2c1cc00f8fa2d10063393a8ec$export$default.play(this.sounds[t%this.sounds.length],e,i)},playLoopAt:function(t,e,i){return $c1b17ff2c1cc00f8fa2d10063393a8ec$export$default.playLoop(this.sounds[t%this.sounds.length],e,i)}});const $c300508ff8318f231a03f90d08d1052b$export$Drawable=$1650bdc66a81ddb41761abeffd23210b$export$default;$parcel$export($c300508ff8318f231a03f90d08d1052b$exports,"Drawable",(function(){return $c300508ff8318f231a03f90d08d1052b$export$Drawable}));const $c300508ff8318f231a03f90d08d1052b$export$Placeholder=$58dab9516df16ec182238d2ca8a1defb$export$default;$parcel$export($c300508ff8318f231a03f90d08d1052b$exports,"Placeholder",(function(){return $c300508ff8318f231a03f90d08d1052b$export$Placeholder}));const $c300508ff8318f231a03f90d08d1052b$export$Spritesheet=$627725a412dfe14c915059cb52478808$export$default;$parcel$export($c300508ff8318f231a03f90d08d1052b$exports,"Spritesheet",(function(){return $c300508ff8318f231a03f90d08d1052b$export$Spritesheet}));const $c300508ff8318f231a03f90d08d1052b$export$SpritesheetAnimation=$e342b055560c491aa3816f3d2921580a$export$default;$parcel$export($c300508ff8318f231a03f90d08d1052b$exports,"SpritesheetAnimation",(function(){return $c300508ff8318f231a03f90d08d1052b$export$SpritesheetAnimation}));const $c300508ff8318f231a03f90d08d1052b$export$SpriteFont=$7348ebe4152ceb8aef436e181a4ab9b7$export$default;$parcel$export($c300508ff8318f231a03f90d08d1052b$exports,"SpriteFont",(function(){return $c300508ff8318f231a03f90d08d1052b$export$SpriteFont}));const $c300508ff8318f231a03f90d08d1052b$export$Sound=$c1b17ff2c1cc00f8fa2d10063393a8ec$export$default;$parcel$export($c300508ff8318f231a03f90d08d1052b$exports,"Sound",(function(){return $c300508ff8318f231a03f90d08d1052b$export$Sound}));const $c300508ff8318f231a03f90d08d1052b$export$SoundArray=$e0fe2a194133545b94a50a8849a2aba0$export$default;$parcel$export($c300508ff8318f231a03f90d08d1052b$exports,"SoundArray",(function(){return $c300508ff8318f231a03f90d08d1052b$export$SoundArray}));var $3a1f3760b46e848362e1421ba143903d$export$default=$49a0a27d43075b98f896056be628f99a$export$Class.extend({className:"PriorityQueue",queue:null,queueKeys:null,order:null,__ctor:function(){this.queue={},this.queueKeys=[]},add:function(t){if(null==t)return null;if(!("priority"in t))throw new Error("PriorityQueue (add): Object has no `priority` property.");return t.priority in this.queue||(this.queue[t.priority]={is_dirty:!1,list:[]},this.queueKeys.push(t.priority),this.order=Object.keys(this.queue).sort(((t,e)=>t-e))),-1===this.queue[t.priority].list.indexOf(t)&&this.queue[t.priority].list.push(t),t},remove:function(t){if(null==t)return null;if(!("priority"in t))throw new Error("PriorityQueue (remove): Object has no `priority` property.");if(!(t.priority in this.queue))return t;let e=this.queue[t.priority].list.indexOf(t);return-1===e||(this.queue[t.priority].is_dirty=!0,this.queue[t.priority].list[e]=null),t},cleanup:function(){for(let t=0;t<this.queueKeys.length;t++){let e=this.queue[this.queueKeys[t]];if(e.is_dirty){for(let t=0;t<e.list.length;t++)null==e.list[t]&&(console.log("CLEANUP CALLED"),e.list[t--].splice(1,0));e.is_dirty=!1}}},forEach:function(t){let e=!1,i=!1;for(let a=0;!i&&a<this.order.length;a++){let n=this.queue[this.order[a]].list;for(let a=0;!i&&a<n.length;a++)null!=n[a]&&!1===t(n[a])&&(i=!0),null==n[a]&&(e=!0)}e&&this.cleanup()},forEachRev:function(t){let e=!1,i=!1;for(let a=this.order.length-1;!i&&a>=0;a--){let n=this.queue[this.order[a]].list;for(let a=n.length-1;!i&&a>=0;a--)null!=n[a]&&!1===t(n[a])&&(i=!0),null==n[a]&&(e=!0)}e&&this.cleanup()},forEachAsync:function(t,e=null){let i=this,a=!1,n=!1,r=-1,s=-1,c=null,o=function(){s++,!n&&s<c.length?(null!=c[s]&&!1===t(c[s],o)&&(n=!0),null==c[s]&&(a=!0),n&&o()):l()},l=function(){r++,!n&&r<i.order.length?(c=i.queue[i.order[r]].list,s=-1,o()):(a&&i.cleanup(),e&&e())};l()},forEachRevAsync:function(t){alert("NOT IMPLEMENTED: forEachRevAsync")}});const $25417dbe89218903ba33a32ca568e9df$export$default=$49a0a27d43075b98f896056be628f99a$export$Class.extend({className:"Callback",callback:null,context:null,arg1:null,arg2:null,arg3:null,arg4:null,prev:null,next:null,init:function(t,e=null,i=null,a=null,n=null,r=null){return this.callback=t,this.context=e,this.arg1=i,this.arg2=a,this.arg3=n,this.arg4=r,this.prev=null,this.next=null,this},__dtor:function(){this.callback=null,this.context=null,this.arg1=null,this.arg2=null,this.arg3=null,this.arg4=null,this.prev=null,this.next=null},isEqual:function(t=null,e=null,i=null,a=null,n=null,r=null){return null!==t&&$25417dbe89218903ba33a32ca568e9df$export$default.isInstance(t)?t===this:(null===t||this.callback===t)&&((null===e||this.context===e)&&((null===i||this.arg1===i)&&((null===a||this.arg2===a)&&((null===n||this.arg3===n)&&(null===r||this.arg4===r)))))},exec:function(t){return null===this.callback||this.callback(t,this.context,this.arg1,this.arg2,this.arg3,this.arg4)}});$ccdbbc32fd9f0a412799511487cd91a1$export$default.attachTo($25417dbe89218903ba33a32ca568e9df$export$default);const $b24b690628e515896a9fe69710f34dc4$export$default=$49a0a27d43075b98f896056be628f99a$export$Class.extend({className:"Handler",host:null,top:null,bottom:null,init:function(t){return this.host=t,this.top=null,this.bottom=null,this},__dtor:function(){this.remove()},add:function(t,e=null,i=null,a=null,n=null,r=null){let s=$25417dbe89218903ba33a32ca568e9df$export$default.isInstance(t)?t:$25417dbe89218903ba33a32ca568e9df$export$default.alloc().init(t,e,i,a,n,r);return s.prev=this.bottom,null!==this.bottom&&(this.bottom.next=s),this.bottom=s,null===this.top&&(this.top=s),s},unlink:function(t){t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),this.top===t&&(this.top=t.next),this.bottom===t&&(this.bottom=t.prev),t.prev=null,t.next=null,dispose(t)},remove:function(t=null,e=null,i=null,a=null,n=null,r=null){if(null!==t&&$25417dbe89218903ba33a32ca568e9df$export$default.isInstance(t))return this.unlink(t),this;let s=this.top;for(;null!==s;){let c=s.next;s.isEqual(t,e,i,a,n,r)&&this.unlink(s),s=c}return this},find:function(t,e=null,i=null,a=null,n=null,r=null){let s=this.top;for(;null!==s;){if(s.isEqual(t,e,i,a,n,r))return s;s=s.next}return null},exec:function(){let t=this.top;for(;null!==t;){let e=t.next;!1===t.exec(this.host)&&this.unlink(t),t=e}},execf:function(t=null,e=null,i=null,a=null,n=null,r=null){let s=this.top;for(;null!==s;){let c=s.next;if(s.isEqual(t,e,i,a,n,r)){!1===s.exec(this.host)&&this.unlink(s);break}s=c}},execc:function(t){!1===t.exec(this.host)&&this.unlink(t)}});$ccdbbc32fd9f0a412799511487cd91a1$export$default.attachTo($b24b690628e515896a9fe69710f34dc4$export$default);const $cfea91c9ac660d2876bf91c30bd6a9f3$export$default=$49a0a27d43075b98f896056be628f99a$export$Class.extend({className:"Rect",cx:0,cy:0,x1:0,y1:0,x2:0,y2:0,init:function(t=null,e=null,i=null,a=null){return null===t?(this.x1=this.y1=this.x2=this.y2=this.cx=this.cy=0,this):null===i?(this.set(0,0,0,0),this.resize(t,e),this):this.set(t,e,i,a)},__dtor:function(){},clone:function(){return $cfea91c9ac660d2876bf91c30bd6a9f3$export$default.alloc().init(this.x1,this.y1,this.x2,this.y2)},zero:function(){return this.cx=0,this.cy=0,this.x1=0,this.y1=0,this.x2=0,this.y2=0,this},reset:function(){return this.cx=null,this.cy=null,this.x1=null,this.y1=null,this.x2=null,this.y2=null,this},extendWithPoint:function(t,e=null){if(null===e){const i=t;t=i.x,e=i.y}return(null===this.x1||t<this.x1)&&(this.x1=t),(null===this.y1||e<this.y1)&&(this.y1=e),(null===this.x2||t>this.x2)&&(this.x2=t),(null===this.y2||e>this.y2)&&(this.y2=e),this.cx=(this.x1+this.x2)/2,this.cy=(this.y1+this.y2)/2,this},translate:function(t,e){return this.x1+=t,this.y1+=e,this.x2+=t,this.y2+=e,this.cx+=t,this.cy+=e,this},centerAt:function(t,e,i=!1){return 1==i&&(t=this.x1+t*(this.x2-this.x1),e=this.y1+e*(this.y2-this.y1)),this.translate(t-this.cx,e-this.cy)},set:function(t,e=null,i=null,a=null){if(null===e){const n=t;t=n.x1,e=n.y1,i=n.x2,a=n.y2}return this.cx=(t+i)/2,this.cy=(e+a)/2,this.x1=t,this.y1=e,this.x2=i,this.y2=a,this},equals:function(t,e=null,i=null,a=null){if(null===e){const n=t;t=n.x1,e=n.y1,i=n.x2,a=n.y2}return t==this.x1&&i==this.x2&&e==this.y1&&a==this.y2},contains:function(t,e=null,i=null,a=null){if(null===e){const n=t;t=n.x1,e=n.y1,i=n.x2,a=n.y2}return t==Math.max(this.x1,t)&&e==Math.max(this.y1,e)&&i==Math.min(this.x2,i)&&a==Math.min(this.y2,a)},setAsUnion:function(t,e=null,i=null,a=null){if(null===e){const n=t;t=n.x1,e=n.y1,i=n.x2,a=n.y2}return this.x1=Math.min(this.x1,t),this.y1=Math.min(this.y1,e),this.x2=Math.max(this.x2,i),this.y2=Math.max(this.y2,a),this},intersects:function(t,e=null,i=null,a=null){if(null===e){const n=t;t=n.x1,e=n.y1,i=n.x2,a=n.y2}let n=Math.max(this.x1,t),r=Math.max(this.y1,e),s=Math.min(this.x2,i),c=Math.min(this.y2,a);return Math.max(0,c-r)*Math.max(0,s-n)>0},setAsIntersection:function(t,e=null,i=null,a=null){if(null===e){const n=t;t=n.x1,e=n.y1,i=n.x2,a=n.y2}return this.x1=Math.max(this.x1,t),this.y1=Math.max(this.y1,e),this.x2=Math.min(this.x2,i),this.y2=Math.min(this.y2,a),Math.max(0,this.y2-this.y1)*Math.max(0,this.x2-this.x1)>0},resize:function(t,e,i=!1,a=!1){return 1==i&&(t*=this.x2-this.x1,e*=this.y2-this.y1),1==a?(this.x2=this.x1+t,this.y2=this.y1+e):(t/=2,e/=2,this.x1=this.cx-t,this.y1=this.cy-e,this.x2=this.cx+t,this.y2=this.cy+e),this},resizeBy:function(t,e,i=!1){return 1==i?(this.x2+=t,this.y2+=e):(t/=2,e/=2,this.x1-=t,this.y1-=e,this.x2+=t,this.y2+=e),this},width:function(){return this.x2-this.x1},height:function(){return this.y2-this.y1},ncx:function(){return(this.cx-this.x1)/(this.x2-this.x1)},ncy:function(){return(this.cy-this.y1)/(this.y2-this.y1)},isRight:function(){return this.x1<=this.x2&&this.y1<=this.y2},containsPoint:function(t,e,i=0){return this.x1-i<=t&&t<=this.x2+i&&this.y1-i<=e&&e<=this.y2+i},area:function(t){return t?this.isRight()?(this.y2-this.y1)*(this.x2-this.x1):0:(this.y2-this.y1)*(this.x2-this.x1)},floor:function(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.floor(this.x2),this.y2=Math.floor(this.y2),this.cx=Math.floor(this.cx),this.cy=Math.floor(this.cy),this},ceil:function(){return this.x1=Math.ceil(this.x1),this.y1=Math.ceil(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this.cx=Math.ceil(this.cx),this.cy=Math.ceil(this.cy),this},toString:function(){return"("+this.x1.toFixed(2)+", "+this.y1.toFixed(2)+", "+this.x2.toFixed(2)+", "+this.y2.toFixed(2)+")"},flatten:function(){return[this.x1,this.y1,this.x2,this.y2]},unflatten:function(t){return this.set(t[0],t[1],t[2],t[3]),this}});$ccdbbc32fd9f0a412799511487cd91a1$export$default.attachTo($cfea91c9ac660d2876bf91c30bd6a9f3$export$default,1024);const $9e7762fe4ba0e2d12cbcd459eadedcb7$export$default=$49a0a27d43075b98f896056be628f99a$export$Class.extend({className:"TFunction",t:null,y:null,f:null,__ctor:function(t){this.reset(t)},reset:function(t=0){return this.t=[0],this.y=[t],this.f=[null],this},copyFrom:function(t,e,i){if(this.t=[],this.y=[],this.f=[],null==e&&null==i){for(let e=0;e<t.t.length;e++)this.t.push(t.t[e]),this.y.push(t.y[e]),this.f.push(t.f[e]);return this}null==e&&(e=t.t[0]),null==i&&(i=t.t[t.t.length-1]),e<t.t[0]&&(e=t.t[0]);let a=t.find(e),n=t.find(i);if(null==a)return null;if(null==n)return null;t.t[a]!=e&&(this.set(e,t.getAt(e),t.f[a]),a++);for(let e=a;e<=n;e++)this.set(t.t[e],t.y[e],t.f[e]);if(t.t[n]!=i){let e=(i-t.t[n])/Math.ceil(Math.log(i-t.t[n])),a=this.t[this.t.length-1];for(e<=0&&(e=1),e=i-a;a!=i;)a+e>i&&(e=i-a),a+=e,this.set(float4(a),t.getAt(a),t.f[n])}return this},clone:function(t,e){return(new $9e7762fe4ba0e2d12cbcd459eadedcb7$export$default).copyFrom(this,t,e)},endTime:function(t=0){return this.t[this.t.length-1]+t},startTime:function(t=0){return this.t[0]+t},find:function(t){if(t<this.t[0])return null;const e=this.t.length;for(let i=1;i<e;i++)if(t<this.t[i])return i-1;return e-1},set:function(t,e,i=null){let a=this.find(t);return null!=a&&(this.t[a]==t?(this.y[a]=e,null!=i&&(this.f[a]=i)):(a++,this.t.splice(a,0,t),this.y.splice(a,0,e),this.f.splice(a,0,i)),!0)},get:function(){return this.y[this.y.length-1]},getAt:function(t){let e=this.find(t);if(null==e)return 0;let i=e+1;if(this.t[e]==t||i>=this.t.length||this.y[e]==this.y[i]||null==this.f[e])return this.y[e];if(null==this.f[e])return this.y[e];let a=t,n=this.t[e],r=this.t[i],s=this.y[e],c=this.y[i];return t=(a-n)/(r-n),(t=this.f[e](t))*c+(1-t)*s},integral:function(t=null,e=null,i=0){null==t&&(t=this.t[0]),null==e&&(e=this.t[this.t.length-1]),t<this.t[0]&&(t=this.t[0]);let a=1;if(t>e){let i;i=t,t=e,e=i,a=-1}let n=i;for(let i=t;i<e;){let t=this.find(i);if(null==t)return 0;let a=t+1,r=Math.max(this.t[t],i),s=Math.min(a<this.t.length?this.t[a]:e,e),c=this.getAt(r),o=s-r,l=this.getAt(s)-c;null==this.f[t]?n+=c*o:n+=.5*l*(s+r)-r*l+c*o,i+=o}return a*n},second_integral:function(t=null,e=null,i=0){null==t&&(t=this.t[0]),null==e&&(e=this.t[this.t.length-1]);let a=$9e7762fe4ba0e2d12cbcd459eadedcb7$export$default.Temp1.copyFrom(this,this.t[0],t).integrate(i).integral();return $9e7762fe4ba0e2d12cbcd459eadedcb7$export$default.Temp2.copyFrom(this,this.t[0],e).integrate(i).integral()-a},integrate:function(t=0){let e=[];e.push(t);for(let t=1;t<this.t.length;t++)e.push(e[t-1]+this.integral(this.t[t-1],this.t[t]));return this.y=e,this},accumulate:function(t=0){this.y[0]+=t;for(let t=1;t<this.t.length;t++)this.y[t]+=this.y[t-1];return this},chopLeft:function(t){return this.t.splice(0,t),this.f.splice(0,t),this.y.splice(0,t),this},chopRight:function(t){return this.t.splice(t+1,this.t.length-t-1),this.f.splice(t+1,this.f.length-t-1),this.y.splice(t+1,this.y.length-t-1),this},map:function(t){for(let e=0;e<this.y.length;e++)this.y[e]=t(this.y[e],this.t[e],e);return this},toString:function(t=0){let e="",i=10;const a=function(t,e,i){for(t=t.toString(),null==i&&(i=" "),i=i[0];t.length<e;)t+=i;return t};e+="\n",e+=a(" Time",i)+" "+a(" Value",i)+" "+a(" Integral",i)+"\n",e+=a("",i,"-")+" "+a("",i,"-")+" "+a("",i,"-")+"\n";for(let n=0;n<this.t.length;n++)e+=a(" "+float4(this.t[n]),i)+" "+a(" "+float4(this.y[n]),i)+" "+a(" "+float4(this.integral(this.t[0],this.t[n],t)),i)+"\n";return e}});$9e7762fe4ba0e2d12cbcd459eadedcb7$export$default.Temp1=new $9e7762fe4ba0e2d12cbcd459eadedcb7$export$default,$9e7762fe4ba0e2d12cbcd459eadedcb7$export$default.Temp2=new $9e7762fe4ba0e2d12cbcd459eadedcb7$export$default;const $915b1937740c478df54f3272021d2c1c$export$default=$49a0a27d43075b98f896056be628f99a$export$Class.extend({className:"Point2",ux:0,uy:0,x:0,y:0,init:function(t=null,e=null){return this.set(t,e)},downscale:function(){return this.x=downscale(this.ux),this.y=downscale(this.uy),this},clone:function(){return $915b1937740c478df54f3272021d2c1c$export$default.alloc().init(this)},set:function(t,e=null,i=!1){return null===t?(t=0,e=0):null===e?$915b1937740c478df54f3272021d2c1c$export$default.isInstance(t)?(e=t.uy,t=t.ux):(e=upscale(t.y),t=upscale(t.x)):i||(t=upscale(t),e=upscale(e)),this.ux=t,this.uy=e,this.downscale(this)},setX:function(t){return this.ux=upscale(t),this.downscale(this)},setY:function(t){return this.uy=upscale(t),this.downscale(this)},zero:function(){return this.set(0,0)},isZero:function(){return 0==this.x&&0==this.y},equals:function(t,e=null){return null===e?$915b1937740c478df54f3272021d2c1c$export$default.isInstance(t)?(e=t.y,t=t.x):(e=int(t.y),t=int(t.x)):(t=int(t),e=int(e)),this.x==t&&this.y==e},add:function(t,e=null,i=!1){return null===e?$915b1937740c478df54f3272021d2c1c$export$default.isInstance(t)?(e=t.uy,t=t.ux):(e=upscale(t.y),t=upscale(t.x)):i||(t=upscale(t),e=upscale(e)),this.ux+=t,this.uy+=e,this.downscale()},sub:function(t,e,i=!1){return null===e?$915b1937740c478df54f3272021d2c1c$export$default.isInstance(t)?(e=t.uy,t=t.ux):(e=upscale(t.y),t=upscale(t.x)):i||(t=upscale(t),e=upscale(e)),this.ux-=t,this.uy-=e,this.downscale()},toString:function(){return`(${this.x}, ${this.y})`}});$ccdbbc32fd9f0a412799511487cd91a1$export$default.attachTo($915b1937740c478df54f3272021d2c1c$export$default,1024);const $c1c2b815c89b9264ed0e554223c27659$export$default=$49a0a27d43075b98f896056be628f99a$export$Class.extend({className:"Bounds2",cx:0,cy:0,x1:0,y1:0,x2:0,y2:0,ucx:0,ucy:0,ux1:0,uy1:0,ux2:0,uy2:0,init:function(t=null,e=null,i=null,a=null,n=!1){return null===t?(this.ux1=this.uy1=this.ux2=this.uy2=this.ucx=this.ucy=0,this.downscale()):null!==e&&null===i?this.set(0,0,0,0).resize(t,e):this.set(t,e,i,a,n)},downscale:function(){return this.x1=downscale(this.ux1),this.y1=downscale(this.uy1),this.x2=downscale(this.ux2),this.y2=downscale(this.uy2),this.cx=downscale(this.ucx),this.cy=downscale(this.ucy),this},trunc:function(){return this.ux1=upscale(this.x1),this.uy1=upscale(this.y1),this.ux2=upscale(this.x2),this.uy2=upscale(this.y2),this.ucx=upscale(this.cx),this.ucy=upscale(this.cy),this},clone:function(){return $c1c2b815c89b9264ed0e554223c27659$export$default.alloc().init(this.ux1,this.uy1,this.ux2,this.uy2,!0)},zero:function(){return this.ux1=0,this.uy1=0,this.ux2=0,this.uy2=0,this.ucx=0,this.ucy=0,this.downscale()},reset:function(){return this.ux1=null,this.uy1=null,this.ux2=null,this.uy2=null,this.ucx=null,this.ucy=null,this.x1=null,this.y1=null,this.x2=null,this.y2=null,this.cx=null,this.cy=null,this},translate:function(t,e=null,i=!1){return null===e?$915b1937740c478df54f3272021d2c1c$export$default.isInstance(t)?(e=t.uy,t=t.ux):(e=upscale(t.y),t=upscale(t.x)):i||(t=upscale(t),e=upscale(e)),this.ux1+=t,this.uy1+=e,this.ux2+=t,this.uy2+=e,this.ucx+=t,this.ucy+=e,this.downscale()},set:function(t,e=null,i=null,a=null,n=!1){return null===e?$c1c2b815c89b9264ed0e554223c27659$export$default.isInstance(t)?(a=t.uy2,i=t.ux2,e=t.uy1,t=t.ux1):(a=upscale(t.y2),i=upscale(t.x2),e=upscale(t.y1),t=upscale(t.x1)):n||(t=upscale(t),e=upscale(e),i=upscale(i),a=upscale(a)),this.ux1=t,this.uy1=e,this.ux2=i,this.uy2=a,this.ucx=t+i>>1,this.ucy=e+a>>1,this.downscale()},equals:function(t,e=null,i=null,a=null){return null===e?$c1c2b815c89b9264ed0e554223c27659$export$default.isInstance(t)?(a=t.y2,i=t.x2,e=t.y1,t=t.x1):(a=int(t.y2),i=int(t.x2),e=int(t.y1),t=int(t.x1)):(t=int(t),e=int(e),i=int(i),a=int(a)),t==this.x1&&i==this.x2&&e==this.y1&&a==this.y2},contains:function(t,e=null,i=null,a=null){return null===e?$c1c2b815c89b9264ed0e554223c27659$export$default.isInstance(t)?(a=t.y2,i=t.x2,e=t.y1,t=t.x1):(a=int(t.y2),i=int(t.x2),e=int(t.y1),t=int(t.x1)):(t=int(t),e=int(e),i=int(i),a=int(a)),t==Math.max(this.x1,t)&&e==Math.max(this.y1,e)&&i==Math.min(this.x2,i)&&a==Math.min(this.y2,a)},setAsUnion:function(t,e=null,i=null,a=null){if(null===e){if($c1c2b815c89b9264ed0e554223c27659$export$default.isInstance(t))return this.setAsUnion(t.ux1,t.uy1,!0),this.setAsUnion(t.ux2,t.uy2,!0),this;if($cfea91c9ac660d2876bf91c30bd6a9f3$export$default.isInstance(t))return this.setAsUnion(t.x1,t.y1),this.setAsUnion(t.x2,t.y2),this;$915b1937740c478df54f3272021d2c1c$export$default.isInstance(t)?(e=t.uy,t=t.ux):(e=upscale(t.y),t=upscale(t.x))}else{if(null!==a)return this.setAsUnion(t,e),this.setAsUnion(i,a),this;!0!==i&&(t=upscale(t),e=upscale(e))}return(null===this.ux1||t<this.ux1)&&(this.ux1=t),(null===this.uy1||e<this.uy1)&&(this.uy1=e),(null===this.ux2||t>this.ux2)&&(this.ux2=t),(null===this.uy2||e>this.uy2)&&(this.uy2=e),this.ucx=this.ux1+this.ux2>>1,this.ucy=this.uy1+this.uy2>>1,this.downscale()},intersects:function(t,e=null,i=null,a=null){null===e?$c1c2b815c89b9264ed0e554223c27659$export$default.isInstance(t)?(a=t.y2,i=t.x2,e=t.y1,t=t.x1):(a=int(t.y2),i=int(t.x2),e=int(t.y1),t=int(t.x1)):(t=int(t),e=int(e),i=int(i),a=int(a));let n=Math.max(this.x1,t),r=Math.max(this.y1,e),s=Math.min(this.x2,i),c=Math.min(this.y2,a);return Math.max(0,c-r)*Math.max(0,s-n)>0},setAsIntersection:function(t,e=null,i=null,a=null){return null===e?$c1c2b815c89b9264ed0e554223c27659$export$default.isInstance(t)?(a=t.y2,i=t.x2,e=t.y1,t=t.x1):(a=int(t.y2),i=int(t.x2),e=int(t.y1),t=int(t.x1)):(t=int(t),e=int(e),i=int(i),a=int(a)),this.ux1=upscale(Math.max(this.x1,t)),this.uy1=upscale(Math.max(this.y1,e)),this.ux2=upscale(Math.min(this.x2,i)),this.uy2=upscale(Math.min(this.y2,a)),this.ucx=this.ux1+this.ux2>>1,this.ucy=this.uy1+this.uy2>>1,this.downscale(),Math.max(0,this.uy2-this.uy1)*Math.max(0,this.ux2-this.ux1)>0},resize:function(t,e,i=!1){return t=upscale(t),e=upscale(e),!0===i?(this.ux2=this.ux1+t,this.uy2=this.uy1+e,this.ucx=this.ux1+this.ux2>>1,this.ucy=this.uy1+this.uy2>>1):(t>>=1,e>>=1,this.ux1=this.ucx-t,this.uy1=this.ucy-e,this.ux2=this.ucx+t,this.uy2=this.ucy+e),this.downscale()},resizeBy:function(t,e,i=!1){return t=upscale(t),e=upscale(e),!0===i?(this.ux2+=t,this.uy2+=e,this.ucx=this.ux1+this.ux2>>1,this.ucy=this.uy1+this.uy2>>1):(t>>=1,e>>=1,this.ux1-=t,this.uy1-=e,this.ux2+=t,this.uy2+=e),this.downscale()},width:function(){return this.x2-this.x1},height:function(){return this.y2-this.y1},isForward:function(){return this.ux1<=this.ux2&&this.uy1<=this.uy2},containsPoint:function(t,e,i=0){return t=upscale(t),e=upscale(e),i=upscale(i),this.ux1-i<=t&&t<=this.ux2+i&&this.uy1-i<=e&&e<=this.uy2+i},area:function(t=!1){return t?this.isForward()?(this.y2-this.y1)*(this.x2-this.x1):0:(this.y2-this.y1)*(this.x2-this.x1)},toString:function(){return"("+this.x1+", "+this.y1+", "+this.x2+", "+this.y2+")"},flatten:function(){return[this.ux1,this.uy1,this.ux2,this.uy2]},unflatten:function(t){return this.ux1=t[0],this.uy1=t[1],this.ux2=t[2],this.uy2=t[3],this.ucx=this.ux1+this.ux2>>1,this.ucy=this.uy1+this.uy2>>1,this.downscale()}});$ccdbbc32fd9f0a412799511487cd91a1$export$default.attachTo($c1c2b815c89b9264ed0e554223c27659$export$default,8192);const $18f56a190a3a3ff5c8b7ebba0279c438$export$default={Linear:{IN:function(t){return t},OUT:function(t){return t},IN_OUT:function(t){return t}},Back:{k:1.70158,IN:function(t,e){return void 0===e&&(e=$18f56a190a3a3ff5c8b7ebba0279c438$export$default.Back.k),t*t*((e+1)*t-e)},OUT:function(t,e){return 1-$18f56a190a3a3ff5c8b7ebba0279c438$export$default.Back.IN(1-t,e)},IN_OUT:function(t,e){return t<.5?$18f56a190a3a3ff5c8b7ebba0279c438$export$default.Back.IN(2*t,e)/2:$18f56a190a3a3ff5c8b7ebba0279c438$export$default.Back.OUT(2*(t-.5),e)/2+.5}},Bounce:{getConst:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},IN:function(t){return 1-$18f56a190a3a3ff5c8b7ebba0279c438$export$default.Bounce.getConst(1-t)},OUT:function(t){return $18f56a190a3a3ff5c8b7ebba0279c438$export$default.Bounce.getConst(t)},IN_OUT:function(t){return t<.5?(1-$18f56a190a3a3ff5c8b7ebba0279c438$export$default.Bounce.getConst(1-2*t))/2:$18f56a190a3a3ff5c8b7ebba0279c438$export$default.Bounce.getConst(2*(t-.5))/2+.5}},Circ:{IN:function(t){return 1-Math.sqrt(1-t*t)},OUT:function(t){return 1-$18f56a190a3a3ff5c8b7ebba0279c438$export$default.Circ.IN(1-t)},IN_OUT:function(t){return t<.5?$18f56a190a3a3ff5c8b7ebba0279c438$export$default.Circ.IN(2*t)/2:$18f56a190a3a3ff5c8b7ebba0279c438$export$default.Circ.OUT(2*(t-.5))/2+.5}},Cubic:{IN:function(t){return t*t*t},OUT:function(t){return 1-$18f56a190a3a3ff5c8b7ebba0279c438$export$default.Cubic.IN(1-t)},IN_OUT:function(t){return t<.5?$18f56a190a3a3ff5c8b7ebba0279c438$export$default.Cubic.IN(2*t)/2:$18f56a190a3a3ff5c8b7ebba0279c438$export$default.Cubic.OUT(2*(t-.5))/2+.5}},Expo:{IN:function(t){return Math.pow(2,12*(t-1))},OUT:function(t){return 1-Math.pow(2,-12*t)},IN_OUT:function(t){return(t*=2)<1?Math.pow(2,12*(t-1))/2:(2-Math.pow(2,-12*(t-1)))/2}},Power:{p:12,IN:function(t){return Math.pow(t,$18f56a190a3a3ff5c8b7ebba0279c438$export$default.Power.p)},OUT:function(t){return 1-$18f56a190a3a3ff5c8b7ebba0279c438$export$default.Power.IN(1-t)},IN_OUT:function(t){return t<.5?$18f56a190a3a3ff5c8b7ebba0279c438$export$default.Power.IN(2*t)/2:$18f56a190a3a3ff5c8b7ebba0279c438$export$default.Power.OUT(2*(t-.5))/2+.5}},Quad:{IN:function(t){return t*t},OUT:function(t){return 1-$18f56a190a3a3ff5c8b7ebba0279c438$export$default.Quad.IN(1-t)},IN_OUT:function(t){return t<.5?$18f56a190a3a3ff5c8b7ebba0279c438$export$default.Quad.IN(2*t)/2:$18f56a190a3a3ff5c8b7ebba0279c438$export$default.Quad.OUT(2*(t-.5))/2+.5}},Quartic:{IN:function(t){return t*t*t*t},OUT:function(t){return 1-$18f56a190a3a3ff5c8b7ebba0279c438$export$default.Quartic.IN(1-t)},IN_OUT:function(t){return t<.5?$18f56a190a3a3ff5c8b7ebba0279c438$export$default.Quartic.IN(2*t)/2:$18f56a190a3a3ff5c8b7ebba0279c438$export$default.Quartic.OUT(2*(t-.5))/2+.5}},Quintic:{IN:function(t){return t*t*t*t*t},OUT:function(t){return 1-$18f56a190a3a3ff5c8b7ebba0279c438$export$default.Quintic.IN(1-t)},IN_OUT:function(t){return t<.5?$18f56a190a3a3ff5c8b7ebba0279c438$export$default.Quintic.IN(2*t)/2:$18f56a190a3a3ff5c8b7ebba0279c438$export$default.Quintic.OUT(2*(t-.5))/2+.5}},Sine:{IN:function(t){return 1-Math.sin(1.5708*(1-t))},OUT:function(t){return Math.sin(1.5708*t)},IN_OUT:function(t){return(Math.cos(3.1416*t)-1)/-2}},Step:{IN:function(t){return 1!=t?0:1},OUT:function(t){return 1!=t?0:1},IN_OUT:function(t){return 1!=t?0:1}}},$b3f77e113c0f558ec76d4638522e74c8$var$PARALLEL={init:function(t,e=!1){if(!e)return t.block=$b3f77e113c0f558ec76d4638522e74c8$var$Block.calloc(),void(t.blocks=$9331e791bdadeac9afb7e80808da523d$export$default.calloc());let i;for(;null!=(i=t.block.commands.shift());){let e=$b3f77e113c0f558ec76d4638522e74c8$var$Block.calloc();e.add(i),t.blocks.push(e)}t.block.free(),t.block=null},update:function(t,e,i){if(!1===i.started){for(let t=i.blocks.top;null!==t;t=t.next)t.value.reset(e.time);i.started=!0}let a=e.time,n=0,r=0;for(let e=i.blocks.top;null!==e;e=e.next){let i=e.value.update(t);!0===i?n++:null===i&&r++,e.value.time>a&&(a=e.value.time)}return n+r==i.blocks.length&&(i.started=!1,e.time=a,!0)}},$b3f77e113c0f558ec76d4638522e74c8$var$SERIAL={init:function(t,e=!1){e||(t.block=$b3f77e113c0f558ec76d4638522e74c8$var$Block.calloc())},update:function(t,e,i){!1===i.started&&(i.block.reset(e.time),i.started=!0);let a=i.block.update(t);return!0!==a?a:(i.started=!1,e.time=i.block.time,!0)}},$b3f77e113c0f558ec76d4638522e74c8$var$REPEAT={init:function(t,e=!1){e||(t.block=$b3f77e113c0f558ec76d4638522e74c8$var$Block.calloc())},update:function(t,e,i){!1===i.started&&(i.block.reset(e.time),i._count=i.count,i.started=!0);let a=i.block.update(t);return!0!==a?a:i._count<=1?(i.started=!1,e.time=i.block.time,!0):(i.block.restart(),i._count--,!1)}},$b3f77e113c0f558ec76d4638522e74c8$var$SET={init:function(t,e=!1){},update:function(t,e,i){return t.setValue(i.field,t.getValue(i.field,i.value)),!0}},$b3f77e113c0f558ec76d4638522e74c8$var$RESTART={init:function(t,e=!1){},update:function(t,e,i){return e.restart(),!0}},$b3f77e113c0f558ec76d4638522e74c8$var$WAIT={init:function(t,e=!1){},update:function(t,e,i){return!1===i.started&&(i._duration="string"===$49a0a27d43075b98f896056be628f99a$export$Rin.typeOf(i.duration)?t.getValue(i.duration):i.duration,i.started=!0),!(t.time<e.time+i._duration)&&(i.started=!1,e.time+=i._duration,!0)}},$b3f77e113c0f558ec76d4638522e74c8$var$RANGE={init:function(t,e=!1){},update:function(t,e,i){!1===i.started&&(i._startValue=t.getValue(i.field,i.startValue),i._duration="string"===$49a0a27d43075b98f896056be628f99a$export$Rin.typeOf(i.duration)?t.getValue(i.duration):i.duration,i.started=!0),i._endValue=t.getValue(i.field,i.endValue,i._startValue);let a=1;return t.time<e.time+i._duration&&(a=(t.time-e.time)/i._duration),i.easing&&1!=a?t.setValue(i.field,i.easing(a)*(i._endValue-i._startValue)+i._startValue):t.setValue(i.field,a*(i._endValue-i._startValue)+i._startValue),1==a&&(i.started=!1,e.time+=i._duration,!0)}},$b3f77e113c0f558ec76d4638522e74c8$var$RAND={init:function(t,e=!1){},update:function(t,e,a){!1===a.started&&(a._duration="string"===$49a0a27d43075b98f896056be628f99a$export$Rin.typeOf(a.duration)?t.getValue(a.duration):a.duration,a._last=null,a.started=!0);let n=1;if(t.time<e.time+a._duration&&(n=(t.time-e.time)/a._duration),a.easing&&1!=n?a._cur=int(a.easing(n)*a.count):a._cur=int(n*a.count),a._cur!=a._last){let e=t.getValue(a.field);for(;;){if(int(Math.random()*(a.endValue-a.startValue+1))+a.startValue!=e)break}t.setValue(a.field,i),a._last=a._cur}return 1==n&&(a.started=!1,e.time+=a._duration,!0)}},$b3f77e113c0f558ec76d4638522e74c8$var$RANDT={init:function(t,e=!1){if(!e)return;let i=[];for(let e=0;e<t.count;e++)i.push(e%(t.endValue-t.startValue+1)+t.startValue);for(let e=t.count>>2;e>0;e--){let e=int(Math.random()*t.count),a=int(Math.random()*t.count),n=i[a];i[a]=i[e],i[e]=n}t.table=i},update:function(t,e,i){!1===i.started&&(i._duration="string"===$49a0a27d43075b98f896056be628f99a$export$Rin.typeOf(i.duration)?t.getValue(i.duration):i.duration,i.started=!0);let a,n=1;return t.time<e.time+i._duration&&(n=(t.time-e.time)/i._duration),a=i.easing&&1!=n?i.easing(n)*(i.count-1):n*(i.count-1),t.setValue(i.field,i.table[int((a+i.count)%i.count)]),1==n&&(i.started=!1,e.time+=i._duration,!0)}},$b3f77e113c0f558ec76d4638522e74c8$var$PLAY={init:function(t,e=!1){},update:function(t,e,i){return i.snd.play(),!0}},$b3f77e113c0f558ec76d4638522e74c8$var$EXEC={init:function(t,e=!1){},update:function(t,e,i){!1===i.started&&(i._last=t.time,i.started=!0);let a=t.time-i._last;i._last=t.time;let n=i.fn(a,t.data,t);return!0===n?(i.started=!1,!0):n}},$b3f77e113c0f558ec76d4638522e74c8$var$Block=$49a0a27d43075b98f896056be628f99a$export$Class.extend({className:"Anim_Block",commands:null,first:!0,current:!1,time:0,init:function(){return this.commands=$9331e791bdadeac9afb7e80808da523d$export$default.calloc(),this.reset(0),this},__dtor:function(){this.clear(),this.commands.free()},add:function(t){return this.commands.push(t),t},clone:function(){throw new Error("NOT IMPLEMENTED CLONE ON ANIM")},clear:function(){return this.commands.clear(),this.reset(0),this},reset:function(t){return this.first=!0,this.current=null,this.time=t,this},restart:function(){return this.first=!0,this},isFinished:function(){return!0===this.first&&(this.current=this.commands.top,this.first=!1),null===this.current},update:function(t){for(;!this.isFinished();){let e=this.current.value.update(t,this);if(!0!==e)return e;this.current=this.current.next}return!0}});$ccdbbc32fd9f0a412799511487cd91a1$export$default.attachTo($b3f77e113c0f558ec76d4638522e74c8$var$Block,8192);const $b3f77e113c0f558ec76d4638522e74c8$var$Command=$49a0a27d43075b98f896056be628f99a$export$Class.extend({className:"Anim_Command",op:null,started:!1,field:null,value:null,duration:0,_duration:0,count:0,_count:0,startValue:0,_startValue:0,endValue:0,_endValue:0,easing:null,_cur:null,_last:null,block:null,blocks:null,table:null,snd:null,fn:null,init:function(t){return this.op=t,this.started=!1,this.block=null,this.blocks=null,this.table=null,this.snd=null,this.fn=null,t.init(this,!1),this},__dtor:function(){null!==this.block&&this.block.clear().free(),null!==this.blocks&&this.blocks.clear().free()},ready:function(){this.op.init(this,!0)},update:function(t,e){return this.op.update(t,e,this)}});$ccdbbc32fd9f0a412799511487cd91a1$export$default.attachTo($b3f77e113c0f558ec76d4638522e74c8$var$Command);const $b3f77e113c0f558ec76d4638522e74c8$export$default=$49a0a27d43075b98f896056be628f99a$export$Class.extend({className:"Anim",initialData:null,data:null,blockStack:null,cmdStack:null,timeScale:1,block:null,time:0,paused:!1,finished:!1,finishedCallback:null,finishedCallbackHandler:null,finishedCallbackContext:null,init:function(){return this.initialData={},this.data={},this.block=$b3f77e113c0f558ec76d4638522e74c8$var$Block.calloc(),this.blockStack=$9331e791bdadeac9afb7e80808da523d$export$default.calloc(),this.cmdStack=$9331e791bdadeac9afb7e80808da523d$export$default.calloc(),this.reset()},__dtor:function(){this.block.free(),this.blockStack.clear().free(),this.cmdStack.clear().free(),null!==this.finishedCallbackHandler&&this.finishedCallbackHandler.free(),null!==this.finishedCallbackContext&&this.finishedCallbackContext.free()},copyTo:function(t){return t.block=this.block.clone(),t.initialData=this.initialData,t.reset()},onFinished:function(t){return this.finishedCallback=t,this},then:function(t,e=null){return this.finishedCallback!==this.thenCallback&&(this.finishedCallback=this.thenCallback,null===this.finishedCallbackHandler?(this.finishedCallbackHandler=$9331e791bdadeac9afb7e80808da523d$export$default.calloc(),this.finishedCallbackContext=$9331e791bdadeac9afb7e80808da523d$export$default.calloc()):(this.finishedCallbackHandler.reset(),this.finishedCallbackContext.reset())),this.finishedCallbackHandler.push(t),this.finishedCallbackContext.push(e),this},thenCallback:function(){if(!this.finishedCallbackHandler.length)return!1;let t=this.finishedCallbackContext.shift();this.finishedCallbackHandler.shift()(this,t)},clear:function(){return this.blockStack.clear(),this.cmdStack.clear(),this.block.clear(),this.paused=!1,this.finished=!1,this.time=0,this},reset:function(){return this.blockStack.clear(),this.cmdStack.clear(),this.block.reset(0),this.paused=!1,this.finished=!1,this.time=0,Object.assign(this.data,this.initialData),this},initial:function(t){return this.initialData=t,this.reset()},speed:function(t){return this.timeScale=t>0?t:1,this},output:function(t){return this.data=t,this},pause:function(){return this.paused=!0,this},resume:function(){return this.finished=!1,this.paused=!1,this},setValue:function(t,e){let i=this.data;if("string"!=typeof t)if("function"==typeof t)t(this,e);else{let a=0;for(;null!==i&&a<t.length-1;)i=i[t[a++]];i[t[a]]=e}else i[t]=e},getValue:function(t,e=null,i=null){let a=this.data;if("string"!=typeof t)if("function"==typeof t)a=t(this,null);else{let e=0;for(;null!==a&&e<t.length;)a=a[t[e++]]}else a=a[t];if(null===e&&(e=a),null===i&&(i=a),"string"==typeof e)switch(e[0]){case"+":e=i+Number(e.substr(1));break;case"-":e=i-Number(e.substr(1));break;default:e=Number(e)}else"function"==typeof e&&(e=e(a,i,this));return e},update:function(t){if(this.paused||this.block.isFinished())return!0;if(this.time+=t*this.timeScale*$b3f77e113c0f558ec76d4638522e74c8$export$default.timeScale,!0!==this.block.update(this))return!1;let e=this.finished,i=this.block.length,a=this.block;return this.finished=!0,!(!e&&null!==this.finishedCallback&&(!1===this.finishedCallback(this.data,this)&&(this.finishedCallback=null),this.block!==a||this.block.length!=i))||(this.resume(),!1)},prepareFieldName:function(t){return"function"==typeof t?t:-1!=t.indexOf(".")?t.split("."):t},parallel:function(){let t=this.block.add($b3f77e113c0f558ec76d4638522e74c8$var$Command.alloc().init($b3f77e113c0f558ec76d4638522e74c8$var$PARALLEL));return this.blockStack.push(this.block),this.cmdStack.push(t),this.block=t.block,this},serial:function(){let t=this.block.add($b3f77e113c0f558ec76d4638522e74c8$var$Command.alloc().init($b3f77e113c0f558ec76d4638522e74c8$var$SERIAL));return this.blockStack.push(this.block),this.cmdStack.push(t),this.block=t.block,this},repeat:function(t){let e=this.block.add($b3f77e113c0f558ec76d4638522e74c8$var$Command.alloc().init($b3f77e113c0f558ec76d4638522e74c8$var$REPEAT));return e.count=t,this.blockStack.push(this.block),this.cmdStack.push(e),this.block=e.block,this},end:function(){return this.cmdStack.pop().ready(),this.block=this.blockStack.pop(),this},set:function(t,e){let i=this.block.add($b3f77e113c0f558ec76d4638522e74c8$var$Command.alloc().init($b3f77e113c0f558ec76d4638522e74c8$var$SET));return i.field=this.prepareFieldName(t),i.value=e,this},restart:function(){return this.block.add($b3f77e113c0f558ec76d4638522e74c8$var$Command.alloc().init($b3f77e113c0f558ec76d4638522e74c8$var$RESTART)),this},wait:function(t){return this.block.add($b3f77e113c0f558ec76d4638522e74c8$var$Command.alloc().init($b3f77e113c0f558ec76d4638522e74c8$var$WAIT)).duration=t,this},range:function(t,e,i,a,n=null){let r=this.block.add($b3f77e113c0f558ec76d4638522e74c8$var$Command.alloc().init($b3f77e113c0f558ec76d4638522e74c8$var$RANGE));return r.field=this.prepareFieldName(t),r.duration=e,r.startValue=i,r.endValue=a,r.easing=n,this},rand:function(t,e,i,a,n,r=null){let s=this.block.add($b3f77e113c0f558ec76d4638522e74c8$var$Command.alloc().init($b3f77e113c0f558ec76d4638522e74c8$var$RAND));return s.field=this.prepareFieldName(t),s.duration=e,s.count=i,s.startValue=a,s.endValue=n,s.easing=r,this},randt:function(t,e,i,a,n,r){let s=this.block.add($b3f77e113c0f558ec76d4638522e74c8$var$Command.alloc().init($b3f77e113c0f558ec76d4638522e74c8$var$RANDT));return s.field=this.prepareFieldName(t),s.duration=e,s.count=i,s.startValue=a,s.endValue=n,s.easing=r,s.ready(),this},play:function(t){return this.block.add($b3f77e113c0f558ec76d4638522e74c8$var$Command.alloc().init($b3f77e113c0f558ec76d4638522e74c8$var$PLAY)).snd=t,this},exec:function(t){return this.block.add($b3f77e113c0f558ec76d4638522e74c8$var$Command.alloc().init($b3f77e113c0f558ec76d4638522e74c8$var$EXEC)).fn=t,this},_bounds_x1:function(t,e){if(null===e)return t.data.bounds.x1;t.data.translate(int(e)-t.data.bounds.x1,0)},_bounds_y1:function(t,e){if(null===e)return t.data.bounds.y1;t.data.translate(0,int(e)-t.data.bounds.y1)},setX:function(t){return this.set(this._bounds_x1,t)},setY:function(t){return this.set(this._bounds_y1,t)},position:function(t,e){return this.set(this._bounds_x1,t).set(this._bounds_y1,e)},translateX:function(t,e,i){return this.range(this._bounds_x1,t,null,(e<0?"-":"+")+Math.abs(e),i)},translateY:function(t,e,i){return this.range(this._bounds_y1,t,null,(e<0?"-":"+")+Math.abs(e),i)},translate:function(t,e,i,a,n=null){return this.parallel().range(this._bounds_x1,t,null,(e<0?"-":"+")+Math.abs(e),a).range(this._bounds_y1,t,null,(i<0?"-":"+")+Math.abs(i),n||a).end()},moveTo:function(t,e,i,a,n=null){return this.parallel().range(this._bounds_x1,t,null,e,a).range(this._bounds_y1,t,null,i,n||a).end()},moveX:function(t,e,i=null){return this.range(this._bounds_x1,t,null,e,i)},moveY:function(t,e,i=null){return this.range(this._bounds_y1,t,null,e,i)},scaleX:function(t,e,i){return this.range("sx",t,null,e,i)},scaleY:function(t,e,i){return this.range("sy",t,null,e,i)},scale:function(t,e,i,a,n=null){return this.parallel().range("sx",t,null,e,a).range("sy",t,null,i,n||a).end()},rotate:function(t,e,i){return this.range("angle",t,null,(e<0?"-":"+")+Math.abs(e),i)}});$b3f77e113c0f558ec76d4638522e74c8$export$default.timeScale=1,$b3f77e113c0f558ec76d4638522e74c8$export$default.speed=function(t){$b3f77e113c0f558ec76d4638522e74c8$export$default.timeScale=t>0?t:1},$ccdbbc32fd9f0a412799511487cd91a1$export$default.attachTo($b3f77e113c0f558ec76d4638522e74c8$export$default,8192);const $207b59440723904b38982ddc4272b61b$export$default={modules:new $3a1f3760b46e848362e1421ba143903d$export$default,register:function(t){return this.modules.add(t)},unregister:function(t){this.modules.remove(t),this.modules.cleanup()},startup:function(t=null){this.modules.forEachAsync(((t,e)=>{!1!==t.onStartup(e)&&e()}),t)},shutdown:function(t=null){this.modules.forEachAsyncRev(((t,e)=>{!1!==t.onShutdown(e)&&e()}),t)}};$207b59440723904b38982ddc4272b61b$export$default.Module=$49a0a27d43075b98f896056be628f99a$export$Class.extend({className:"Module",priority:5,__ctor:function(){$207b59440723904b38982ddc4272b61b$export$default.register(this)},__dtor:function(){$207b59440723904b38982ddc4272b61b$export$default.unregister(this)},onStartup:function(t){},onShutdown:function(t){}});const $7a341878b2625de6871f03e49d9ff35d$export$default=$49a0a27d43075b98f896056be628f99a$export$Class.extend({className:"GridElement",id:null,bounds:null,zvalue:0,flags:0,data:null,container:null,_grid_remove_node:null,remover:null,__ctor:function(t,e,i,a){this.bounds=$c1c2b815c89b9264ed0e554223c27659$export$default.calloc(),this.bounds.translate(t,e),this.bounds.resize(i,a,!0),this.flags=$7a341878b2625de6871f03e49d9ff35d$export$default.ALIVE|$7a341878b2625de6871f03e49d9ff35d$export$default.VISIBLE|$7a341878b2625de6871f03e49d9ff35d$export$default.DIRTY,this.data=null,this.remover=$b24b690628e515896a9fe69710f34dc4$export$default.alloc().init(this)},__dtor:function(){this.alive(!1),this.remover.exec(),this.remover.free(),this.bounds.free()},setId:function(t){return this.id=t,this},setFlags:function(t){return this.flags|=t,this},clearFlags:function(t){return this.flags&=~t,this},getFlags:function(t,e=null){return null===e?(this.flags&t)===t:(this.flags&t)===e},setData:function(t){return this.data=t,this},getData:function(){return this.data},visible:function(t=null){return null===t?!!(this.flags&$7a341878b2625de6871f03e49d9ff35d$export$default.VISIBLE):(this.flags&=~$7a341878b2625de6871f03e49d9ff35d$export$default.VISIBLE,t&&(this.flags|=$7a341878b2625de6871f03e49d9ff35d$export$default.VISIBLE),this)},alive:function(t=null){return null===t?!!(this.flags&$7a341878b2625de6871f03e49d9ff35d$export$default.ALIVE):(this.flags&=~$7a341878b2625de6871f03e49d9ff35d$export$default.ALIVE,t&&(this.flags|=$7a341878b2625de6871f03e49d9ff35d$export$default.ALIVE),this)},dirty:function(t=null){return null===t?!!(this.flags&$7a341878b2625de6871f03e49d9ff35d$export$default.DIRTY):(this.flags&=~$7a341878b2625de6871f03e49d9ff35d$export$default.DIRTY,t&&(this.flags|=$7a341878b2625de6871f03e49d9ff35d$export$default.DIRTY),this)},remove:function(){return this.remover.exec(),this},sync:function(){return null!==this.container&&this.getFlags($7a341878b2625de6871f03e49d9ff35d$export$default.ALIVE|$7a341878b2625de6871f03e49d9ff35d$export$default.DIRTY)?(this.container.sync(this),this):this},resize:function(t,e){return this.flags|=$7a341878b2625de6871f03e49d9ff35d$export$default.DIRTY,this.bounds.resize(t,e,!0),this},resizeBy:function(t,e){return this.resize(this.bounds.width()+t,this.bounds.height()+e)},translate:function(t,e,i=!1){return this.flags|=$7a341878b2625de6871f03e49d9ff35d$export$default.DIRTY,this.bounds.translate(t,e,i),this},setPosition:function(t,e){return this.translate(upscale(t)-this.bounds.ux1,upscale(e)-this.bounds.uy1,!0)}});$7a341878b2625de6871f03e49d9ff35d$export$default.ALIVE=1,$7a341878b2625de6871f03e49d9ff35d$export$default.VISIBLE=2,$7a341878b2625de6871f03e49d9ff35d$export$default.DIRTY=4,$7a341878b2625de6871f03e49d9ff35d$export$default.USERDEF=256,$7a341878b2625de6871f03e49d9ff35d$export$default.LAST_FLAG=128,$7a341878b2625de6871f03e49d9ff35d$export$default.allocFlag=function(){let t=$7a341878b2625de6871f03e49d9ff35d$export$default.LAST_FLAG;if(1073741824===t)throw new Error("allocFlag: out of bit space to allocate another flag");return t<<=1,$7a341878b2625de6871f03e49d9ff35d$export$default.LAST_FLAG=t,t};const $5455570ea965ce03f28a7753614d671d$export$default=$49a0a27d43075b98f896056be628f99a$export$Class.extend({className:"Grid",grid:null,count:0,offsx:0,offsy:0,kx:0,ky:0,stride:0,verifyIntersection:!0,__ctor:function(t,e,i,a=null){t=1<<Math.ceil(Math.log2(t)),e=1<<Math.ceil(Math.log2(e)),this.offsx=t>>1,this.offsy=e>>1,i=Math.floor(Math.log2(i)),null===a&&(a=i),this.kx=i,this.ky=a;let n=t>>i,r=e>>a;this.grid=new Array(n*r).fill(null),this.stride=n},__dtor:function(){this.clear(),this.grid=null},clear:function(){for(let t=0;t<this.grid.length;t++){if(null===this.grid[t])continue;let e;for(;null!==(e=this.grid[t].shift());)e.remover.remove(this._remove,this),e.container=null,dispose(e);this.grid[t].free(),this.grid[t]=null}this.count=0},reset:function(){for(let t=0;t<this.grid.length;t++){if(null===this.grid[t])continue;let e;for(;null!==(e=this.grid[t].shift());)e.remover.remove(this._remove,this),e.container=null;this.grid[t].free(),this.grid[t]=null}this.count=0},add:function(t){if(!$7a341878b2625de6871f03e49d9ff35d$export$default.isInstance(t))throw new Error("argument must be a GridElement");let e=int(t.bounds.y1+this.offsy>>this.ky)*this.stride+int(t.bounds.x1+this.offsx>>this.kx);return!(e<0||e>=this.grid.length)&&(null===this.grid[e]&&(this.grid[e]=$9331e791bdadeac9afb7e80808da523d$export$default.calloc()),this.grid[e].push(t),this.count++,t.container=this,t._grid_remove_node=t.remover.add(this._remove,this,e,this.grid[e].bottom),!0)},_remove:function(t,e,i,a){return e.grid[i].remove(a),e.count--,t.container=null,!1},remove:function(t){return t.remover.execc(this._grid_remove_node),t},sync:function(t){t.clearFlags($7a341878b2625de6871f03e49d9ff35d$export$default.DIRTY);let e=t._grid_remove_node,i=int(t.bounds.y1+this.offsy>>this.ky)*this.stride+int(t.bounds.x1+this.offsx>>this.kx);return i<0||i>=this.grid.length?(t.remover.execc(e),!1):(e.arg1===i||(this.grid[e.arg1].remove(e.arg2),null===this.grid[i]&&(this.grid[i]=$9331e791bdadeac9afb7e80808da523d$export$default.calloc()),this.grid[i].push(t),e.arg1=i,e.arg2=this.grid[i].bottom),!0)},forEachInRegion:function(t,e,i,a,n){let r=(t.y1+this.offsy-(1<<this.ky-1)>>this.ky)*this.stride,s=(t.y2+this.offsy+(1<<this.ky-1)>>this.ky)*this.stride,c=t.x1+this.offsx-(1<<this.kx-1)>>this.kx,o=t.x2+this.offsx+(1<<this.kx-1)>>this.kx,l=this.grid.length-1;r<0&&(r=0),s<0&&(s=0),c<0&&(c=0),o<0&&(o=0),r>l&&(r=l),s>l&&(s=l),c>l&&(c=l),o>l&&(o=l);for(let f=r;f<=s;f+=this.stride)for(let u=c;u<=o;u++){let d=f+u;if(!(d>l||null===this.grid[d]))for(let l=this.grid[d].top;l;l=l.next)if(l.value.getFlags(e,i)&&(!this.verifyIntersection||!(f<=r+1||u<=c+1||f>=s-1||u>=o-1)||l.value.bounds.intersects(t))&&!1===a(l.value,n))return}},selectInRegion:function(t,e,i){let a=(t.y1+this.offsy-(1<<this.ky-1)>>this.ky)*this.stride,n=(t.y2+this.offsy+(1<<this.ky-1)>>this.ky)*this.stride,r=t.x1+this.offsx-(1<<this.kx-1)>>this.kx,s=t.x2+this.offsx+(1<<this.kx-1)>>this.kx,c=this.grid.length-1;a<0&&(a=0),n<0&&(n=0),r<0&&(r=0),s<0&&(s=0),a>c&&(a=c),n>c&&(n=c),r>c&&(r=c),s>c&&(s=c);let o=$9331e791bdadeac9afb7e80808da523d$export$default.calloc();for(let l=a;l<=n;l+=this.stride)for(let f=r;f<=s;f++){let u=l+f;if(!(u>c||null===this.grid[u]))for(let c=this.grid[u].top;c;c=c.next)c.value.getFlags(e,i)&&(this.verifyIntersection&&(l<=a+1||f<=r+1||l>=n-1||f>=s-1)&&!c.value.bounds.intersects(t)||o.push(c.value))}return o},countInRegion:function(t,e,i){let a=(t.y1+this.offsy-(1<<this.ky-1)>>this.ky)*this.stride,n=(t.y2+this.offsy+(1<<this.ky-1)>>this.ky)*this.stride,r=t.x1+this.offsx-(1<<this.kx-1)>>this.kx,s=t.x2+this.offsx+(1<<this.kx-1)>>this.kx,c=this.grid.length-1;a<0&&(a=0),n<0&&(n=0),r<0&&(r=0),s<0&&(s=0),a>c&&(a=c),n>c&&(n=c),r>c&&(r=c),s>c&&(s=c);let o=0;for(let l=a;l<=n;l+=this.stride)for(let f=r;f<=s;f++){let u=l+f;if(!(u>c||null===this.grid[u]))for(let c=this.grid[u].top;c;c=c.next)c.value.getFlags(e,i)&&(this.verifyIntersection&&(l<=a+1||f<=r+1||l>=n-1||f>=s-1)&&!c.value.bounds.intersects(t)||o++)}return o},selectFirst:function(t,e,i){let a=(t.y1+this.offsy-(1<<this.ky-1)>>this.ky)*this.stride,n=(t.y2+this.offsy+(1<<this.ky-1)>>this.ky)*this.stride,r=t.x1+this.offsx-(1<<this.kx-1)>>this.kx,s=t.x2+this.offsx+(1<<this.kx-1)>>this.kx,c=this.grid.length-1;a<0&&(a=0),n<0&&(n=0),r<0&&(r=0),s<0&&(s=0),a>c&&(a=c),n>c&&(n=c),r>c&&(r=c),s>c&&(s=c);for(let o=a;o<=n;o+=this.stride)for(let l=r;l<=s;l++){let f=o+l;if(!(f>c||null===this.grid[f]))for(let c=this.grid[f].top;c;c=c.next)if(c.value.getFlags(e,i)&&(!this.verifyIntersection||!(o<=a+1||l<=r+1||o>=n-1||l>=s-1)||c.value.bounds.intersects(t)))return c.value}return null}}),$165af1ab52f365e7ef649f223d1085b3$export$default=$49a0a27d43075b98f896056be628f99a$export$Class.extend({className:"Container",viewportBounds:null,width:0,height:0,zvalue:0,scene:null,flags:0,g:null,elementCount:0,drawCount:0,__ctor:function(t=32768,e=32768){this.width=t,this.height=e,this.flags=$165af1ab52f365e7ef649f223d1085b3$export$default.VISIBLE|$165af1ab52f365e7ef649f223d1085b3$export$default.DEPTH_TEST},__dtor:function(){},visible:function(t=null){return null===t?!!(this.flags&$165af1ab52f365e7ef649f223d1085b3$export$default.VISIBLE):(this.flags&=~$165af1ab52f365e7ef649f223d1085b3$export$default.VISIBLE,t&&(this.flags|=$165af1ab52f365e7ef649f223d1085b3$export$default.VISIBLE),this)},depthTest:function(t=null){return null===t?!!(this.flags&$165af1ab52f365e7ef649f223d1085b3$export$default.DEPTH_TEST):(this.flags&=~$165af1ab52f365e7ef649f223d1085b3$export$default.DEPTH_TEST,t&&(this.flags|=$165af1ab52f365e7ef649f223d1085b3$export$default.DEPTH_TEST),this)},setViewportBounds:function(t){return this.viewportBounds=t,this},drawElement:function(t,e){return e.drawCount++,t.draw(e.g)},syncZ:function(t){t.zvalue=this.zvalue+t.bounds.y2},sync:function(t){throw new Error("Container::sync not implemented")},clear:function(){throw new Error("Container::clear not implemented")},reset:function(){throw new Error("Container::reset not implemented")},add:function(t){throw new Error("Container::add not implemented")},remove:function(t){throw new Error("Container::remove not implemented")},draw:function(t){this.visible()&&(t.depthTest(this.flags&$165af1ab52f365e7ef649f223d1085b3$export$default.DEPTH_TEST),t.zvalue=this.zvalue,this.drawCount=0,this.g=t,this._draw())},_draw:function(){throw new Error("Container::draw not implemented")}});$165af1ab52f365e7ef649f223d1085b3$export$default.VISIBLE=1,$165af1ab52f365e7ef649f223d1085b3$export$default.DEPTH_TEST=2;const $77b679f5ef01765d4ffd6be7d74228a2$export$default=$49a0a27d43075b98f896056be628f99a$export$Class.extend({className:"Viewport",width:0,height:0,sx:0,sy:0,x:0,y:0,centerRatioX:0,centerRatioY:0,offset:null,worldX1:0,worldY1:0,worldX2:0,worldY2:0,focusFactorX:0,focusFactorY:0,focusRect:null,focusOffsX:0,focusOffsY:0,flags:0,scale:1,globalScale:1,bounds:null,focusBounds:null,screenBounds:null,__ctor:function(t,e,i,a,n,r,s,c){this.focusFactorX=null==s?.4:s,this.focusFactorY=null==c?.4:c,this.focusRect=null,this.sx=t,this.sy=e,i>n&&(i=n),a>r&&(a=r),this.width=i,this.height=a,n>>=1,r>>=1,this.worldX1=-n,this.worldY1=-r,this.worldX2=+n,this.worldY2=+r,this.bounds=$c1c2b815c89b9264ed0e554223c27659$export$default.alloc(),this.focusBounds=$c1c2b815c89b9264ed0e554223c27659$export$default.alloc(),this.screenBounds=$c1c2b815c89b9264ed0e554223c27659$export$default.alloc(),this.offset=$915b1937740c478df54f3272021d2c1c$export$default.alloc(),this.x=0,this.y=0,this.flags=$77b679f5ef01765d4ffd6be7d74228a2$export$default.ENABLED,this.updateScreenBounds(),this.updateBounds()},__dtor:function(){this.bounds.free(),this.focusBounds.free(),this.screenBounds.free()},enabled:function(t=null){return null===t?!!(this.flags&$77b679f5ef01765d4ffd6be7d74228a2$export$default.ENABLED):(this.flags&=~$77b679f5ef01765d4ffd6be7d74228a2$export$default.ENABLED,t&&(this.flags|=$77b679f5ef01765d4ffd6be7d74228a2$export$default.ENABLED),this)},updateBounds:function(t=!1){let e=this.width>>1,i=this.height>>1,a=e/this.scale,n=i/this.scale,r=this.x-a+this.offset.x,s=this.y-n+this.offset.y,c=this.x+a+this.offset.x,o=this.y+n+this.offset.y;t&&(r<this.worldX1?this.offset.setX(this.worldX1-this.x+a):c>this.worldX2&&this.offset.setX(this.worldX2-this.x-a),s<this.worldY1?this.offset.setY(this.worldY1-this.y+n):o>this.worldY2&&this.offset.setY(this.worldY2-this.y-n),r=this.x-a+this.offset.x,s=this.y-n+this.offset.y,c=this.x+a+this.offset.x,o=this.y+n+this.offset.y),this.bounds.set(r,s,c,o),this.focusBounds.set(this.x-(this.focusFactorX*e+this.centerRatioX*e)/this.scale,this.y-(this.focusFactorY*i+this.centerRatioY*i)/this.scale,this.x+(this.focusFactorX*e+this.centerRatioX*e)/this.scale,this.y+(this.focusFactorY*i+this.centerRatioY*i)/this.scale)},updateScreenBounds:function(){this.screenBounds.set(this.sx,this.sy,this.sx+this.width,this.sy+this.height)},resize:function(t,e){return this.width=t,this.height=e,this.updateScreenBounds(),this.updateBounds(),this},resizeBy:function(t,e){return this.width+=t,this.height+=e,this.updateScreenBounds(),this.updateBounds(),this},setPosition:function(t,e){return this.x=t,this.y=e,this.offset.set(0,0),this.updateBounds(),this},setOffsets:function(t,e){return this.offset.set(t,e),this.updateBounds(),this},setScale:function(t){return this.scale=t,this.updateScreenBounds(),this.updateBounds(),this},setGlobalScale:function(t){return this.globalScale=t,this},setCenter:function(t,e){return this.centerRatioX=t,this.centerRatioY=e,this},translate:function(t,e,i=!1){return this.offset.add(t,e),this.updateBounds(i),this},setScreenPosition:function(t,e){return this.sx=t,this.sy=e,this.updateScreenBounds(),this},getX:function(t=!1){return this.x+(t?0:this.offset.x)},getY:function(t=!1){return this.y+(t?0:this.offset.y)},getOffsetX:function(){return this.offset.x},getOffsetY:function(){return this.offset.y},getWidth:function(){return this.width},getHeight:function(){return this.height},getBounds:function(){return this.bounds},getScreenBounds:function(){return this.screenBounds},getFocusBounds:function(){return this.focusBounds},focusOn:function(t,e,i=null,a=null,n=null,r=null){null===n&&(n=this.focusFactorX),null===r&&(r=this.focusFactorY),null===i&&(i=t),null===a&&(a=e);let s=this.width>>1,c=this.height>>1,o=this.x-int((n*s+this.centerRatioX*s)/this.scale),l=this.x+int((n*s+this.centerRatioX*s)/this.scale),f=this.y-int((r*c+this.centerRatioY*c)/this.scale),u=this.y+int((r*c+this.centerRatioY*c)/this.scale);o==l&&(t=i=t+i>>1),f==u&&(e=a=e+a>>1);let d=this.x,h=this.y;t<o?d+=t-o:i>l&&(d+=i-l),e<f?h+=e-f:a>u&&(h+=a-u),o=d-s,l=d+s,f=h-c,u=h+c,o<this.worldX1&&(d=this.worldX1+s),l>this.worldX2&&(d=this.worldX2-s),f<this.worldY1&&(h=this.worldY1+c),u>this.worldY2&&(h=this.worldY2-c),this.x=d,this.y=h,this.updateBounds()},update:function(t){null!=this.focusRect&&this.focusOn(this.focusRect.x1,this.focusRect.y1,this.focusRect.x2,this.focusRect.y2)},setFocusRect:function(t,e=0,i=0){return this.focusRect=t,this.focusOffsX=e,this.focusOffsY=i,this.update(0),this},setFocusFactor:function(t,e){return this.focusFactorX=t,this.focusFactorY=void 0===e?t:e,this},applyClip:function(t){t.clip(this.screenBounds.x1,this.screenBounds.y1,this.screenBounds.width(),this.screenBounds.height())},applyTransform:function(t){let e=this.screenBounds.x1+(this.screenBounds.width()>>1),i=this.screenBounds.y1+(this.screenBounds.height()>>1);t.translate(e,i),1!=this.scale&&t.scale(this.scale,this.scale),1!=this.globalScale&&t.scale(this.globalScale,this.globalScale),t.translate(-this.getX(),-this.getY()),t.updateTransform()},toWorldSpace:function(t,e,i=!1){let a=this.screenBounds.x1+(this.screenBounds.width()>>1),n=this.screenBounds.y1+(this.screenBounds.height()>>1);return i?(t=(t-int(a))/this.scale+int(this.getX()),e=(e-int(n))/this.scale+int(this.getY())):(t=(t-a)/this.scale+this.getX(),e=(e-n)/this.scale+this.getY()),{x:t,y:e}},toScreenSpace:function(t,e,i=!1){let a=this.screenBounds.x1+(this.screenBounds.width()>>1),n=this.screenBounds.y1+(this.screenBounds.height()>>1);return i?(t=(t-int(this.getX()))*this.scale+int(a),e=(e-int(this.getY()))*this.scale+int(n)):(t=(t-this.getX())*this.scale+a,e=(e-this.getY())*this.scale+n),{x:t,y:e}}});$77b679f5ef01765d4ffd6be7d74228a2$export$default.ENABLED=1;const $ddb647b88709c8dfd67dabab58120e2a$export$default=$7a341878b2625de6871f03e49d9ff35d$export$default.extend({className:"Element",group:null,img:null,debugBounds:!1,__ctor:function(t,e,i=null,a=null,n=null){null===i&&(i=a=0),null===a&&(i=(n=i).width,a=n.height),this._super.GridElement.__ctor(t,e,i,a),this.img=null!==n?n.getDrawable():n},__dtor:function(){null!==this.img&&(dispose(this.img),this.img=null),this._super.GridElement.__dtor()},destroyLater:function(){this.alive()&&(null!==this.container?this.container.scene.disposeLater(this):dispose(this))},draw:function(t){if(null!==this.img&&(t.zvalue=this.zvalue,this.img.draw(t,this.bounds.x1,this.bounds.y1)),$c5794ced0840f4a2f23c1c50dcedc59f$export$default.debugBounds||this.debugBounds){let e=System.displayBuffer2;e.pushMatrix(),e.loadMatrix(t.getMatrix()),e.fillStyle("rgba(0,255,255,0.5)"),e.fillRect(this.bounds.x1,this.bounds.y1,this.bounds.width(),this.bounds.height()),e.popMatrix()}}}),$ddb647b88709c8dfd67dabab58120e2a$var$Pool=$ddb647b88709c8dfd67dabab58120e2a$export$default.extend({className:"Element",__ctor:function(){},init:function(t,e,i=null,a=null,n=null){return this._super.Element.__ctor(t,e,i,a,n),this}});$ccdbbc32fd9f0a412799511487cd91a1$export$default.attachTo($ddb647b88709c8dfd67dabab58120e2a$var$Pool),$ddb647b88709c8dfd67dabab58120e2a$export$default.Pool=$ddb647b88709c8dfd67dabab58120e2a$var$Pool;const $4a2ddd0887254a2e40ee0a31b6575db9$var$tempPoint=$915b1937740c478df54f3272021d2c1c$export$default.calloc(),$4a2ddd0887254a2e40ee0a31b6575db9$export$default=$ddb647b88709c8dfd67dabab58120e2a$export$default.extend({className:"Group",children:null,__ctor:function(t=null){this._super.Element.__ctor(0,0,0,0),this.children=$9331e791bdadeac9afb7e80808da523d$export$default.calloc(),this.bounds.reset(),this.setId(t)},__dtor:function(){this.clear(),this.children.free(),this._super.Element.__dtor()},destroyLater:function(){if(!this.alive())return;let t;for(;null!=(t=this.children.shift());)t.remover.remove(this._remove,this),t.group=null,t.destroyLater();this._super.Element.destroyLater()},clear:function(){let t;for(;null!=(t=this.children.shift());)t.remover.remove(this._remove,this),t.group=null,dispose(t);return this},reset:function(){let t;for(;null!=(t=this.children.shift());)t.remover.remove(this._remove,this),t.group=null;return this},addChild:function(t=null){if(!t)return t;let e=null===this.bounds.x1;return(e||t.bounds.x1<this.bounds.x1)&&this.ltranslate(t.bounds.x1-this.bounds.x1,0),(e||t.bounds.y1<this.bounds.y1)&&this.ltranslate(0,t.bounds.y1-this.bounds.y1),(e||t.bounds.x2>this.bounds.x2)&&this.resizeBy(t.bounds.x2-this.bounds.x2,0),(e||t.bounds.y2>this.bounds.y2)&&this.resizeBy(0,t.bounds.y2-this.bounds.y2),this.children.push(t),null!==t.id&&(this[t.id]=t),t.group=this,t.remover.add(this._remove,this,this.children.bottom),t},_remove:function(t,e,i){return e.children.remove(i),t.group=null,null!==t.id&&(e[t.id]=null),!1},removeChild:function(t){return t&&t.group===this?(t.remover.execf(this._remove,this),t):t},sync:function(){for(let t=this.children.top;t;t=t.next)t.value.sync();return this._super.Element.sync()},ltranslate:function(t,e,i=!1){return this._super.Element.translate(t,e,i)},translate:function(t,e,i=!1){let a=this.bounds.x1,n=this.bounds.y1;this._super.Element.translate(t,e,i),a=this.bounds.x1-a,n=this.bounds.y1-n;for(let t=this.children.top;t;t=t.next)t.value.translate(a,n);return this},getOffsets:function(t,e,i=!1){$4a2ddd0887254a2e40ee0a31b6575db9$var$tempPoint.set(this.bounds.ux1,this.bounds.uy1,!0);let a=$4a2ddd0887254a2e40ee0a31b6575db9$var$tempPoint.x,n=$4a2ddd0887254a2e40ee0a31b6575db9$var$tempPoint.y;return $4a2ddd0887254a2e40ee0a31b6575db9$var$tempPoint.add(t,e,i),a=$4a2ddd0887254a2e40ee0a31b6575db9$var$tempPoint.x-a,n=$4a2ddd0887254a2e40ee0a31b6575db9$var$tempPoint.y-n,$4a2ddd0887254a2e40ee0a31b6575db9$var$tempPoint.set(a,n),$4a2ddd0887254a2e40ee0a31b6575db9$var$tempPoint.x-=t,$4a2ddd0887254a2e40ee0a31b6575db9$var$tempPoint.y-=e,$4a2ddd0887254a2e40ee0a31b6575db9$var$tempPoint},setFlags:function(t){for(let e=this.children.top;e;e=e.next)e.value.setFlags(t);return this._super.Element.setFlags(t)},clearFlags:function(t){for(let e=this.children.top;e;e=e.next)e.value.clearFlags(t);return this._super.Element.clearFlags(t)},draw:function(t){}}),$4a2ddd0887254a2e40ee0a31b6575db9$var$Pool=$4a2ddd0887254a2e40ee0a31b6575db9$export$default.extend({className:"Group",__ctor:function(){},init:function(t=null){return this._super.Group.__ctor(t),this}});$ccdbbc32fd9f0a412799511487cd91a1$export$default.attachTo($4a2ddd0887254a2e40ee0a31b6575db9$var$Pool),$4a2ddd0887254a2e40ee0a31b6575db9$export$default.Pool=$4a2ddd0887254a2e40ee0a31b6575db9$var$Pool;const $c71a3bc6e745875d5097e035813a6806$export$default=$49a0a27d43075b98f896056be628f99a$export$Class.extend({className:"Scene",minWidth:null,minHeight:null,maxWidth:null,maxHeight:null,containers:null,viewports:null,viewportBounds:null,groupList:null,groups:null,disposalQueue:null,fupdater:null,updater:null,synchronizer:null,lupdater:null,destroyer:null,dt:0,flags:0,drawCount:0,scene:null,__ctor:function(){this.containers=[],this.viewports=[],this.viewportBounds=$c1c2b815c89b9264ed0e554223c27659$export$default.alloc(),this.groupList=$9331e791bdadeac9afb7e80808da523d$export$default.calloc(),this.groups={},this.disposalQueue=$9331e791bdadeac9afb7e80808da523d$export$default.calloc(),this.fupdater=$b24b690628e515896a9fe69710f34dc4$export$default.alloc().init(this),this.updater=$b24b690628e515896a9fe69710f34dc4$export$default.alloc().init(this),this.synchronizer=$b24b690628e515896a9fe69710f34dc4$export$default.alloc().init(this),this.lupdater=$b24b690628e515896a9fe69710f34dc4$export$default.alloc().init(this),this.destroyer=$b24b690628e515896a9fe69710f34dc4$export$default.alloc().init(this),this.flags=$c71a3bc6e745875d5097e035813a6806$export$default.VISIBLE,this.scene=this},__dtor:function(){let t;for(this.disposeQueued(),this.disposalQueue.free(),this.destroyer.exec(),this.destroyer.free(),this.fupdater.free(),this.updater.free(),this.synchronizer.free(),this.lupdater.free();null!==(t=this.groupList.shift());)t.remover.remove(this._remove,this),t.container=null,dispose(t);for(t=0;t<this.containers.length;t++)this.containers[t]&&(this.containers[t].scene=null,dispose(this.containers[t]),this.containers[t]=null);for(t=0;t<this.viewports.length;t++)this.viewports[t]&&(dispose(this.viewports[t]),this.viewports[t]=null);this.viewportBounds.free(),this.groupList.free()},visible:function(t=null){return null===t?!!(this.flags&$c71a3bc6e745875d5097e035813a6806$export$default.VISIBLE):(this.flags&=~$c71a3bc6e745875d5097e035813a6806$export$default.VISIBLE,t&&(this.flags|=$c71a3bc6e745875d5097e035813a6806$export$default.VISIBLE),this)},setContainer:function(t,e){if(t<0)return this;if(null===e)return this.containers[t].scene=null,this.containers[t]=null,this;if(!$165af1ab52f365e7ef649f223d1085b3$export$default.isInstance(e))throw new Error("Scene: Unable to set container at index "+t+": argument is not a Container");return(null===this.minWidth||e.width<this.minWidth)&&(this.minWidth=e.width),(null===this.minHeight||e.height<this.minHeight)&&(this.minHeight=e.height),(null===this.maxWidth||e.width>this.maxWidth)&&(this.maxWidth=e.width),(null===this.maxHeight||e.height>this.maxHeight)&&(this.maxHeight=e.height),e.scene=this,e.zvalue=1048576*t,this.containers[t]=e,this},getContainer:function(t){return t<0||t>=this.containers.length?null:this.containers[t]},setViewport:function(t,e){if(t<0)return this;if(null!==e&&!$77b679f5ef01765d4ffd6be7d74228a2$export$default.isInstance(e))throw new Error("Scene: Unable to set viewport at index "+t+": argument is not a Viewport.");return this.viewports[t]=e,this},getViewport:function(t){return t<0||t>=this.viewports.length?null:this.viewports[t]},disposeLater:function(t){t.alive()&&(this.disposalQueue.push(t),t.alive(!1))},disposeQueued:function(){let t;for(;null!==(t=this.disposalQueue.shift());)dispose(t)},addGroup:function(t){if(!$4a2ddd0887254a2e40ee0a31b6575db9$export$default.isInstance(t))throw new Error("argument must be a Group");return this.groupList.push(t),null!==t.id&&(this.groups[t.id]=t),t.container=this,t.remover.add(this._removeGroup,this,this.groupList.bottom),!0},_removeGroup:function(t,e,i){return t.container=null,e.groupList.remove(i),null!==t.id&&(e.groups[t.id]=null),!1},removeGroup:function(t){return t.remover.execf(this._remove,this),t},sync:function(t){return!0},draw:function(t){if(this.visible())if(this.drawCount=0,this.viewports.length)for(let e=0;e<this.viewports.length;e++){let i=this.viewports[e];i&&i.enabled()&&($c5794ced0840f4a2f23c1c50dcedc59f$export$default.viewport=i,t.pushClip(),t.pushMatrix(),i.applyClip(t),i.applyTransform(t),this.viewportBounds.set(i.getBounds()),this.drawContainers(t,this.viewportBounds),t.popMatrix(),t.popClip())}else this.drawContainers(t,null)},drawContainers:function(t,e){try{for(let i=0;i<this.containers.length;i++)this.containers[i]&&(this.containers[i].setViewportBounds(e),this.containers[i].draw(t),this.drawCount+=this.containers[i].drawCount)}catch(t){if("FRAME_END"!==t.message)throw t}},updateViewports:function(){for(let t=0;t<this.viewports.length;t++)this.viewports[t]&&this.viewports[t].update(this.dt)},update:function(t){this.dt=t,this.fupdater.exec(),this.updater.exec(),this.disposeQueued(),this.synchronizer.exec(),this.updateViewports(),this.lupdater.exec()}});$c71a3bc6e745875d5097e035813a6806$export$default.VISIBLE=1;const $90e0b89862e5a9d0c6d6cfe755cfd44f$export$default=$49a0a27d43075b98f896056be628f99a$export$Class.extend({className:"Updater",scene:null,list:null,__update:null,__context:null,__ctor:function(t,e=null,i=null){this.list=$9331e791bdadeac9afb7e80808da523d$export$default.calloc(),this.scene=t,this.__update=e,this.__context=i,this.scene.updater.add(this._update,this),this.scene.synchronizer.add(this._sync,this),this.scene.destroyer.add(this._destroy,this)},__dtor:function(){let t;for(this.scene.updater.remove(this._update,this),this.scene.synchronizer.remove(this._sync,this),this.scene.destroyer.remove(this._destroy,this);null!==(t=this.list.shift());)t.remover.remove(this._remove,this);this.list.free()},_destroy:function(t,e){dispose(e)},add:function(t){if(!$ddb647b88709c8dfd67dabab58120e2a$export$default.isInstance(t))throw new Error("argument must be an Element");return this.list.push(t),t.remover.add(this._remove,this,this.list.bottom),!0},_remove:function(t,e,i){return e.list.remove(i),!1},remove:function(t){return t.remover.execf(this._remove,this),t},_sync:function(t,e){for(let t=e.list.top;t;t=t.next)t.value.sync()},_update:function(t,e){e.update(t.dt)},update:function(t){if(null!==this.__update){let e=null;for(let i=this.list.top;i;i=e)e=i.next,this.__update(i.value,t,this.__context)}}});var $11afb610437a3710eee4c4e987daab23$export$default=$165af1ab52f365e7ef649f223d1085b3$export$default.extend({className:"SimpleContainer",list:null,__ctor:function(t,e){this._super.Container.__ctor(t,e),this.list=$9331e791bdadeac9afb7e80808da523d$export$default.calloc()},__dtor:function(){this.clear(),this.list.free(),this._super.Container.__dtor()},sync:function(t){return this.syncZ(t),!0},clear:function(){let t;for(;null!==(t=this.list.shift());)t.remover.remove(this._remove,this),t.container=null,dispose(t);this.elementCount=0},reset:function(){let t;for(;null!==(t=this.list.shift());)t.remover.remove(this._remove,this),t.container=null;this.elementCount=0},add:function(t){if(!$ddb647b88709c8dfd67dabab58120e2a$export$default.isInstance(t))throw new Error("argument must be an Element");return this.list.push(t),this.elementCount++,t.container=this,t.remover.add(this._remove,this,this.list.bottom),this.syncZ(t),!0},_remove:function(t,e,i){return e.list.remove(i),e.elementCount--,t.container=null,!1},remove:function(t){return t.remover.execf(this._remove,this),t},_draw:function(){let t=$7a341878b2625de6871f03e49d9ff35d$export$default.ALIVE|$7a341878b2625de6871f03e49d9ff35d$export$default.VISIBLE;for(let e=this.list.top;e&&(!e.value.getFlags(t)||!1!==this.drawElement(e.value,this));e=e.next);}}),$3199a6c942a7e5178eebb25dca4aec14$export$default=$165af1ab52f365e7ef649f223d1085b3$export$default.extend({className:"GridContainer",grid:null,debugBounds:!1,__ctor:function(t=32768,e=32768,i=64){this._super.Container.__ctor(t,e),this.grid=new $5455570ea965ce03f28a7753614d671d$export$default(t,e,i)},__dtor:function(){this.clear(),this._super.Container.__dtor()},sync:function(t){return this.syncZ(t),this.grid.sync(t)},clear:function(){this.grid.clear()},reset:function(){this.grid.reset()},add:function(t){if(!$ddb647b88709c8dfd67dabab58120e2a$export$default.isInstance(t))throw new Error("argument must be an Element");return!!this.grid.add(t)&&(t.container=this,this.elementCount=this.grid.count,this.syncZ(t),!0)},remove:function(t){return this.grid.remove(t),this.elementCount=this.grid.count,t},_draw:function(){this.grid.forEachInRegion(this.viewportBounds,$7a341878b2625de6871f03e49d9ff35d$export$default.ALIVE|$7a341878b2625de6871f03e49d9ff35d$export$default.VISIBLE,$7a341878b2625de6871f03e49d9ff35d$export$default.ALIVE|$7a341878b2625de6871f03e49d9ff35d$export$default.VISIBLE,this.drawElement,this);let t=this.g;if(!this.debugBounds||null===this.viewportBounds||null!==t.gl)return;let e=(this.viewportBounds.y1+this.grid.offsy-(1<<this.grid.ky-1)>>this.grid.ky)*this.grid.stride,i=(this.viewportBounds.y2+this.grid.offsy+(1<<this.grid.ky-1)>>this.grid.ky)*this.grid.stride,a=this.viewportBounds.x1+this.grid.offsx-(1<<this.grid.kx-1)>>this.grid.kx,n=this.viewportBounds.x2+this.grid.offsx+(1<<this.grid.kx-1)>>this.grid.kx;e=(int(e/this.grid.stride)<<this.grid.ky)-this.grid.offsy,i=(int(i/this.grid.stride)<<this.grid.ky)-this.grid.offsy+(1<<this.grid.ky),a=(a<<this.grid.kx)-this.grid.offsx,n=(n<<this.grid.kx)-this.grid.offsx+(1<<this.grid.kx),t.fillStyle("rgba(0,0,0,0.2)"),t.fillRect(a,e,n-a+1,i-e+1),e=this.viewportBounds.y1,i=this.viewportBounds.y2,a=this.viewportBounds.x1,n=this.viewportBounds.x2,t.lineWidth(1/$cabc4716fe90fb352f6039743eaed35c$export$default.canvasScaleFactor),t.strokeStyle("#000"),t.strokeRect(a,e,n-a+1,i-e+1),t.lineWidth(1/$cabc4716fe90fb352f6039743eaed35c$export$default.canvasScaleFactor),t.strokeStyle("#00f");for(let e=$c5794ced0840f4a2f23c1c50dcedc59f$export$default.viewport.worldY1+this.grid.offsy;e<$c5794ced0840f4a2f23c1c50dcedc59f$export$default.viewport.worldY2+this.grid.offsy;e+=1<<this.grid.ky)for(let i=$c5794ced0840f4a2f23c1c50dcedc59f$export$default.viewport.worldX1+this.grid.offsx;i<$c5794ced0840f4a2f23c1c50dcedc59f$export$default.viewport.worldX2+this.grid.offsx;i+=1<<this.grid.kx)t.strokeRect(i-this.grid.offsx,e-this.grid.offsy,1<<this.grid.kx,1<<this.grid.ky)},forEachInRegion:function(t,e,i,a,n){this.grid.forEachInRegion(t,e,i,a,n)},selectInRegion:function(t,e,i){return this.grid.selectInRegion(t,e,i)},countInRegion:function(t,e,i){return this.grid.countInRegion(t,e,i)},selectFirst:function(t,e,i){return this.grid.selectFirst(t,e,i)}});const $4af5fc1fc3654d5b7c8a994ec4277c43$export$default=$ddb647b88709c8dfd67dabab58120e2a$export$default.extend({className:"Mask",type:0,__ctor:function(t,e,i,a,n){this._super.Element.__ctor(e,i,a,n,null),this.type=t},draw:function(t){let e=$cabc4716fe90fb352f6039743eaed35c$export$default.displayBuffer2;e.pushMatrix(),e.loadMatrix(t.getMatrix()),e.fillStyle("rgba(255,0,255,0.3)"),e.fillRect(this.bounds.x1,this.bounds.y1,this.bounds.width(),this.bounds.height()),e.popMatrix()}}),$4af5fc1fc3654d5b7c8a994ec4277c43$var$Pool=$4af5fc1fc3654d5b7c8a994ec4277c43$export$default.extend({className:"Mask",__ctor:function(){},init:function(t,e,i,a,n){return this._super.Mask.__ctor(t,e,i,a,n),this}});$ccdbbc32fd9f0a412799511487cd91a1$export$default.attachTo($4af5fc1fc3654d5b7c8a994ec4277c43$var$Pool),$4af5fc1fc3654d5b7c8a994ec4277c43$export$default.Pool=$4af5fc1fc3654d5b7c8a994ec4277c43$var$Pool;const $b664b2e615ac985908f37c542d9ee7e5$export$default=$ddb647b88709c8dfd67dabab58120e2a$export$default.extend({className:"Label",text:null,font:null,_ltext:null,_twidth:null,_theight:null,_align:-1,_valign:-1,_offsx:null,_offsy:null,__ctor:function(t,e,i,a){this._super.Element.__ctor(t,e,4,4),this.text=a,this.font=i},align:function(t){return this._align=t,this._offsx=null,this},valign:function(t){return this._valign=t,this._offsy=null,this},draw:function(t){if(null!==this.font)return this.text!==this._ltext&&(this._twidth=this.font.measureWidth(this.text),this._theight=this.font.measureHeight(this.text),this._ltext=this.text),null===this._offsx&&(this._align<0?this._offsx=0:0===this._align?this._offsx=-this._twidth>>1:this._offsx=-this._twidth),null===this._offsy&&(this._valign<0?this._offsy=0:0===this._valign?this._offsy=-this._theight>>1:this._offsy=-this._theight),void this.font.drawText(t,this.bounds.x1+this._offsx,this.bounds.y1+this._offsy,this.text);null===t.gl&&(t.font("bold 4px monospace"),t.textBaseline("top"),t.fillStyle("#fff"),t.fillText(this.text,this.bounds.x1,this.bounds.y1))}}),$b664b2e615ac985908f37c542d9ee7e5$var$Pool=$b664b2e615ac985908f37c542d9ee7e5$export$default.extend({className:"Label",__ctor:function(){},init:function(t,e,i,a){return this._super.Label.__ctor(t,e,i,a),this}});$ccdbbc32fd9f0a412799511487cd91a1$export$default.attachTo($b664b2e615ac985908f37c542d9ee7e5$var$Pool),$b664b2e615ac985908f37c542d9ee7e5$export$default.Pool=$b664b2e615ac985908f37c542d9ee7e5$var$Pool;var $35ed923298b3cffd909d1e217a705010$export$default=$207b59440723904b38982ddc4272b61b$export$default.Module.create({handlers:null,__ctor:function(){const t=this;this._super.Module.__ctor(),this.handlers=new $3a1f3760b46e848362e1421ba143903d$export$default,this._callOnKeyboardEvent=function(e){return t.callOnKeyboardEvent(e)}},register:function(t){try{this.handlers.add(t),"init"in t&&t.init()}catch(t){throw new Error("KeyboardHandler (register): "+t.message)}return t},unregister:function(t){try{this.handlers.remove(t),this.handlers.cleanup()}catch(t){throw new Error("KeyboardHandler (unregister): "+t.message)}},callOnKeyboardEvent:function(t){return t.onKeyboardEvent(this._action,this._keyCode,this._keyState)},onStartup:function(){$cabc4716fe90fb352f6039743eaed35c$export$default.onKeyboardEvent=(t,e,i)=>{this._action=t,this._keyCode=e,this._keyState=i,this.handlers.forEach(this._callOnKeyboardEvent)}},onShutdown:function(){$cabc4716fe90fb352f6039743eaed35c$export$default.onKeyboardEvent=null}}),$80fe7598813bab8b70bdda84376bf98b$export$default=$207b59440723904b38982ddc4272b61b$export$default.Module.create({handlers:null,__ctor:function(){const t=this;this._super.Module.__ctor(),this.handlers=new $3a1f3760b46e848362e1421ba143903d$export$default,this._callOnPointerEvent=function(e){return t.callOnPointerEvent(e)}},register:function(t){try{this.handlers.add(t),"init"in t&&t.init()}catch(t){throw new Error("PointerHandler (register): "+t.message)}return t},unregister:function(t){try{this.handlers.remove(t),this.handlers.cleanup()}catch(t){throw new Error("PointerHandler (unregister): "+t.message)}},callOnPointerEvent:function(t){return t.onPointerEvent(this._action,this._p,this._pointers)},onStartup:function(){$cabc4716fe90fb352f6039743eaed35c$export$default.onPointerEvent=(t,e,i)=>{this._action=t,this._p=e,this._pointers=i,this.handlers.forEach(this._callOnPointerEvent)}},onShutdown:function(){$cabc4716fe90fb352f6039743eaed35c$export$default.onPointerEvent=null}});const $ed3917ac682376c75cf6afece38cd992$export$default={priority:5,list:[],dummy:{},hoverEnabled:!1,zindexEnabled:!1,lastFrame:0,add:function(t){this.zindexEnabled&&!("zindex"in t)&&(t.zindex=0),-1===this.list.indexOf(t)&&this.list.push(t)},remove:function(t){var e=this.list.indexOf(t);-1!==e&&this.list.splice(e,1)},setHoverEnabled:function(t){this.hoverEnabled=t},setZIndexEnabled:function(t){this.zindexEnabled=t},findTarget:function(t,e,i){if(this.zindexEnabled&&this.lastFrame!=$cabc4716fe90fb352f6039743eaed35c$export$default.frameNumber){let t=this.list[0].zindex;for(let e of this.list){if(e.zindex>t){this.list=this.list.sort(((t,e)=>e.zindex-t.zindex));break}t=e.zindex}this.lastFrame=$cabc4716fe90fb352f6039743eaed35c$export$default.frameNumber}for(let a=0;a<this.list.length;a++)if(this.list[a]&&(null==i||!1!==i(this.list[a]))&&this.list[a].containsPoint(t,e))return this.list[a];return null},filterHover:function(t){return"hover"in t},onPointerEvent:function(t,e,i){let a=!0,n=null;switch(t){case $cabc4716fe90fb352f6039743eaed35c$export$default.EVT_POINTER_DOWN:null!=e._ref&&(n=e._ref,e._ref=null,n.pointerDeactivate(e)),n=this.findTarget(e.x,e.y),null!=n&&((e._ref=n).pointerActivate(e),a=!1);break;case $cabc4716fe90fb352f6039743eaed35c$export$default.EVT_POINTER_DRAG_START:null!=e._ref&&(a=!1);break;case $cabc4716fe90fb352f6039743eaed35c$export$default.EVT_POINTER_DRAG_MOVE:this.hoverEnabled&&(null!=e._refh?e._refh.containsPoint(e.x,e.y)||(n=e._refh,e._refh=null,n.hover(!1,e),n=this.findTarget(e.x,e.y,this.filterHover),null!=n&&(e._refh=n).hover(!0,e)):(n=this.findTarget(e.x,e.y,this.filterHover),null!=n&&(e._refh=n).hover(!0,e))),null!=e._ref?e._ref.containsPoint(e.x,e.y)||1==e._ref.focusLock?(e._ref.pointerUpdate(e.x,e.y,e),a=!1):(n=e._ref,e._ref=null,n.pointerDeactivate(e),n=this.findTarget(e.x,e.y),null!=n&&((e._ref=n).pointerActivate(e),a=!1)):(n=this.findTarget(e.x,e.y),null!=n&&((e._ref=n).pointerActivate(e),a=!1));break;case $cabc4716fe90fb352f6039743eaed35c$export$default.EVT_POINTER_MOVE:if(this.hoverEnabled&&(null!=e._refh?e._refh.containsPoint(e.x,e.y)||(n=e._refh,e._refh=null,n.hover(!1,e),n=this.findTarget(e.x,e.y,this.filterHover),null!=n&&(e._refh=n).hover(!0,e)):(n=this.findTarget(e.x,e.y,this.filterHover),null!=n&&(e._refh=n).hover(!0,e))),null==e._ref)break;e._ref.containsPoint(e.x,e.y)||1==e._ref.focusLock?(e._ref.pointerUpdate(e.x,e.y,e),a=!1):(n=e._ref,e._ref=null,n.pointerDeactivate(e));break;case $cabc4716fe90fb352f6039743eaed35c$export$default.EVT_POINTER_DRAG_STOP:null!=e._ref&&(a=!1);break;case $cabc4716fe90fb352f6039743eaed35c$export$default.EVT_POINTER_UP:null!=e._ref&&(n=e._ref,e._ref=null,n.pointerDeactivate(e),a=!1)}return a},onKeyboardEvent:function(t,e,i){switch(t){case $cabc4716fe90fb352f6039743eaed35c$export$default.EVT_KEY_DOWN:for(let t=0;t<this.list.length&&(!this.list[t]||!this.list[t].keyboardEvents||!1!==this.list[t].keyDown(e,i));t++);break;case $cabc4716fe90fb352f6039743eaed35c$export$default.EVT_KEY_UP:for(let t=0;t<this.list.length&&(!this.list[t]||!this.list[t].keyboardEvents||!1!==this.list[t].keyUp(e,i));t++);}}};$80fe7598813bab8b70bdda84376bf98b$export$default.register($ed3917ac682376c75cf6afece38cd992$export$default),$35ed923298b3cffd909d1e217a705010$export$default.register($ed3917ac682376c75cf6afece38cd992$export$default);var $b16c78d90a5735557317530efb31b314$export$default=$4a2ddd0887254a2e40ee0a31b6575db9$export$default.extend({focusLock:!1,keyboardEvents:!0,isPressed:!1,wasPressed:!1,unpressedImg:null,pressedImg:null,keyCode:null,hitbox:0,__ctor:function(t,e,i,a,n=null){this._super.Group.__ctor(),this.unpressedImg=a,this.pressedImg=n||a,this.hitbox=new $ddb647b88709c8dfd67dabab58120e2a$export$default(e,i,a.width,a.height),this.addChild(this.hitbox),t.add(this.hitbox),t.add(this),$ed3917ac682376c75cf6afece38cd992$export$default.add(this)},__dtor:function(){this._super.Group.__dtor(),$ed3917ac682376c75cf6afece38cd992$export$default.remove(this)},setImage:function(t,e=null){return this.unpressedImg=t,this.pressedImg=e||t,this},setKeyCode:function(t){return this.keyCode=t,this},reset:function(){this.onChange(this.isPressed=!1,this.wasPressed=!1)},draw:function(t){this.isPressed?this.pressedImg.draw(t,this.bounds.x1,this.bounds.y1):this.unpressedImg.draw(t,this.bounds.x1,this.bounds.y1)},pointerUpdate:function(t,e){},updateStatus:function(t=null){return this.wasPressed=this.isPressed,this.isPressed=null===t?this.isPressed:t,this},pointerActivate:function(t){this.updateStatus(!0),this.onChange(this.isPressed,this.wasPressed)},pointerDeactivate:function(t){this.updateStatus(!1),this.onChange(this.isPressed,this.wasPressed)},containsPoint:function(t,e){return!!this.visible()&&this.hitbox.bounds.containsPoint(t,e)},onChange:function(t,e){t!=e&&(t?this.onButtonDown():this.onButtonUp()),!t&&e&&this.onTap()},keyDown:function(t){if(t===this.keyCode)return this.pointerActivate(),!1},keyUp:function(t,e){if(t===this.keyCode)return this.pointerDeactivate(),!1},onButtonDown:function(){},onButtonUp:function(){},onTap:function(){}}),$52910331a2e2e68437e9ccfbb34ae506$export$default=$4a2ddd0887254a2e40ee0a31b6575db9$export$default.extend({focusLock:!0,keyboardEvents:!0,status:0,lstatus:0,unpressedImg:null,pressedImg:null,unpressedImgInner:null,pressedImgInner:null,angleSteps:0,radiusSteps:0,rdirx:0,rdiry:0,dirx:0,diry:0,magnitude:0,angle:0,frdirx:0,frdiry:0,fdirx:0,fdiry:0,fmagnitude:0,fangle:0,dispx:0,dispy:0,radius:0,maxRadius:0,hitbox:0,__ctor:function(t,e,i,a,n,r,s=null,c=null){this._super.Group.__ctor(),this.unpressedImg=n,this.pressedImg=s||n,this.unpressedImgInner=r,this.pressedImgInner=c||r,this.maxRadius=a,this.hitbox=new $ddb647b88709c8dfd67dabab58120e2a$export$default(e,i,n.width,n.height),this.addChild(this.hitbox),t.add(this.hitbox),t.add(this),$ed3917ac682376c75cf6afece38cd992$export$default.add(this)},__dtor:function(){this._super.Group.__dtor(),$ed3917ac682376c75cf6afece38cd992$export$default.remove(this)},setImage:function(t,e=null){return this.unpressedImg=t,this.pressedImg=e||t,this},setImageInner:function(t,e=null){return this.unpressedImgInner=t,this.pressedImgInner=e||t,this},setAngleSteps:function(t){return this.angleSteps=t,this},setRadiusSteps:function(t){return this.radiusSteps=t,this},reset:function(){this.dispx=0,this.dispy=0,this.rdirx=0,this.rdiry=0,this.dirx=0,this.diry=0,this.magnitude=0,this.onChange(this.dirx,this.diry,this.magnitude,this.angle)},draw:function(t){this.status?(this.pressedImg.draw(t,this.bounds.x1,this.bounds.y1),this.pressedImgInner.draw(t,this.bounds.x1+this.dispx,this.bounds.y1+this.dispy)):(this.unpressedImg.draw(t,this.bounds.x1,this.bounds.y1),this.unpressedImgInner.draw(t,this.bounds.x1,this.bounds.y1))},pointerUpdate:function(t,e){let i=t-this.bounds.cx,a=e-this.bounds.cy;if(this.angle=Math.atan2(-a,i),this.radius=Math.sqrt(i*i+a*a),this.radius>this.maxRadius&&(this.radius=this.maxRadius),this.angleSteps){let t=2*Math.PI/this.angleSteps;this.angle=int((this.angle+Math.PI+t/2)/t)*t-Math.PI}if(this.radiusSteps){let t=this.maxRadius/this.radiusSteps;this.radius=int((this.radius+t/2)/t)*t}this.rdirx=Math.min(1,Math.max(i/this.maxRadius,-1)),this.rdiry=Math.min(1,Math.max(a/this.maxRadius,-1)),this.dispx=this.radius*Math.cos(this.angle),this.dispy=this.radius*-Math.sin(this.angle),this.radius>0?(this.dirx=this.dispx/this.radius,this.diry=this.dispy/this.radius,this.magnitude=this.radius/this.maxRadius):(this.dirx=0,this.diry=0,this.magnitude=0),this.onChange(this.dirx,this.diry,this.magnitude,this.angle)},pointerActivate:function(t){this.lstatus=this.status,this.status=1,this.pointerUpdate(t.x,t.y)},pointerDeactivate:function(t){this.lstatus=this.status,this.status=0,this.reset()},containsPoint:function(t,e){return!!this.visible()&&this.hitbox.bounds.containsPoint(t,e)},freezeState:function(t=!1){return this.frdirx=t?0!=this.rdirx?this.rdirx:this.frdirx:this.rdirx,this.frdiry=t?0!=this.rdiry?this.rdiry:this.frdiry:this.rdiry,this.fdirx=t?0!=this.dirx?this.dirx:this.fdirx:this.dirx,this.fdiry=t?0!=this.diry?this.diry:this.fdiry:this.diry,this.fmagnitude=t?0!=this.magnitude?this.magnitude:this.fmagnitude:this.magnitude,this.fangle=t?0!=this.angle?this.angle:this.fangle:this.angle,this},keyDown:function(t,e){let i=0,a=0;if(!0===e[$ecb27258662111bab70dd084a4f71ebf$export$default.UP]&&(a=-this.maxRadius),!0===e[$ecb27258662111bab70dd084a4f71ebf$export$default.LEFT]&&(i=-this.maxRadius),!0===e[$ecb27258662111bab70dd084a4f71ebf$export$default.DOWN]&&(a=this.maxRadius),!0===e[$ecb27258662111bab70dd084a4f71ebf$export$default.RIGHT]&&(i=this.maxRadius),t===$ecb27258662111bab70dd084a4f71ebf$export$default.UP||t===$ecb27258662111bab70dd084a4f71ebf$export$default.LEFT||t===$ecb27258662111bab70dd084a4f71ebf$export$default.DOWN||t===$ecb27258662111bab70dd084a4f71ebf$export$default.RIGHT)return i=this.bounds.cx+i,a=this.bounds.cy+a,this.lstatus=this.status,this.status=1,this.pointerUpdate(i,a),!1},keyUp:function(t,e){let i=0,a=0;if(!0===e[$ecb27258662111bab70dd084a4f71ebf$export$default.UP]&&(a=-this.maxRadius),!0===e[$ecb27258662111bab70dd084a4f71ebf$export$default.LEFT]&&(i=-this.maxRadius),!0===e[$ecb27258662111bab70dd084a4f71ebf$export$default.DOWN]&&(a=this.maxRadius),!0===e[$ecb27258662111bab70dd084a4f71ebf$export$default.RIGHT]&&(i=this.maxRadius),t===$ecb27258662111bab70dd084a4f71ebf$export$default.UP||t===$ecb27258662111bab70dd084a4f71ebf$export$default.LEFT||t===$ecb27258662111bab70dd084a4f71ebf$export$default.DOWN||t===$ecb27258662111bab70dd084a4f71ebf$export$default.RIGHT)return this.pointerUpdate(this.bounds.cx+i,this.bounds.cy+a),0===i&&0===a&&(this.lstatus=this.status,this.status=0,this.reset()),!1},onChange:function(t,e,i,a){}}),$a3dd07e1619eee49527834a2575dfaf7$exports={};const $e5eba4110ff3df72a10d17329c1d81db$export$default={initialized:!1,screenWidth:0,screenHeight:0,canvas:null,time:0,options:{gl:!0,log:!1,antialias:!1,background:"#000",orientation:"automatic",screenWidth:null,screenHeight:null,fps:144,minFps:10},init:function(t){return new Promise(((e,i)=>{if(this.initialized)return e();Object.assign(this.options,t),$8c2ed76c3be599228cd92e613ce51103$export$default.init({pixelated:!this.antialias}),$cabc4716fe90fb352f6039743eaed35c$export$default.init(this.options),$cabc4716fe90fb352f6039743eaed35c$export$default.updateQueueAdd({update:function(t){$e5eba4110ff3df72a10d17329c1d81db$export$default.time=$cabc4716fe90fb352f6039743eaed35c$export$default.frameTime}}),$207b59440723904b38982ddc4272b61b$export$default.startup((function(){$cabc4716fe90fb352f6039743eaed35c$export$default.start(),$e5eba4110ff3df72a10d17329c1d81db$export$default.screenWidth=$cabc4716fe90fb352f6039743eaed35c$export$default.screenWidth,$e5eba4110ff3df72a10d17329c1d81db$export$default.screenHeight=$cabc4716fe90fb352f6039743eaed35c$export$default.screenHeight,$e5eba4110ff3df72a10d17329c1d81db$export$default.canvas=$cabc4716fe90fb352f6039743eaed35c$export$default.displayBuffer,$e5eba4110ff3df72a10d17329c1d81db$export$default.initialized=!0,!0===$e5eba4110ff3df72a10d17329c1d81db$export$default.options.log&&$4ca05bce8e5796b66097460c15da00c9$export$default.enable(),e()}))}))}},$1422277838a45a7c026d466d9d585c16$export$default={SCENE_MAIN:0,SCENE_HUD:1,LAYER_BG0:0,LAYER_BG1:1,LAYER_MAIN:2,LAYER_FG0:3,LAYER_FG1:4,LAYER_MASK:5,LAYER_HUD_BG:0,LAYER_HUD_FG:1,_scenes:[],activeScene:null,_viewports:[],activeViewport:null,activeContainer:null,activeGroup:null,lastGroup:null,bounds:$c1c2b815c89b9264ed0e554223c27659$export$default.calloc(),init:function(t=32768,e=32768,i=null){null===i&&(i=Math.max(t,e)/512),i<32&&(i=32),this.bounds.zero().resize(t,e),this.createScene($1422277838a45a7c026d466d9d585c16$export$default.SCENE_MAIN),this.setContainer($1422277838a45a7c026d466d9d585c16$export$default.LAYER_BG0,new $3199a6c942a7e5178eebb25dca4aec14$export$default(t,e,i)),this.setContainer($1422277838a45a7c026d466d9d585c16$export$default.LAYER_BG1,new $3199a6c942a7e5178eebb25dca4aec14$export$default(t,e,i)),this.setContainer($1422277838a45a7c026d466d9d585c16$export$default.LAYER_MAIN,new $3199a6c942a7e5178eebb25dca4aec14$export$default(t,e,i)),this.setContainer($1422277838a45a7c026d466d9d585c16$export$default.LAYER_FG0,new $3199a6c942a7e5178eebb25dca4aec14$export$default(t,e,i)),this.setContainer($1422277838a45a7c026d466d9d585c16$export$default.LAYER_FG1,new $3199a6c942a7e5178eebb25dca4aec14$export$default(t,e,i)),this.setContainer($1422277838a45a7c026d466d9d585c16$export$default.LAYER_MASK,new $3199a6c942a7e5178eebb25dca4aec14$export$default(t,e,i)),this.getContainer($1422277838a45a7c026d466d9d585c16$export$default.LAYER_MASK).visible(!1),this.createViewport(0),this.createScene($1422277838a45a7c026d466d9d585c16$export$default.SCENE_HUD),this.setContainer($1422277838a45a7c026d466d9d585c16$export$default.LAYER_HUD_BG,new $11afb610437a3710eee4c4e987daab23$export$default($e5eba4110ff3df72a10d17329c1d81db$export$default.screenWidth,$e5eba4110ff3df72a10d17329c1d81db$export$default.screenHeight)),this.setContainer($1422277838a45a7c026d466d9d585c16$export$default.LAYER_HUD_FG,new $11afb610437a3710eee4c4e987daab23$export$default($e5eba4110ff3df72a10d17329c1d81db$export$default.screenWidth,$e5eba4110ff3df72a10d17329c1d81db$export$default.screenHeight))},createScene:function(t){this._scenes[t]&&($cabc4716fe90fb352f6039743eaed35c$export$default.queueRemove(this._scenes[t]),$parcel$global.dispose(this._scenes[t])),this._scenes[t]=new $c71a3bc6e745875d5097e035813a6806$export$default,$cabc4716fe90fb352f6039743eaed35c$export$default.queueAdd(this._scenes[t]),this.selectScene(t)},getScene:function(t=null){return null===t?this.activeScene:t<0||t>=this._scenes.length?null:this._scenes[t]},selectScene:function(t){return!(t<0||t>=this._scenes.length||!this._scenes[t])&&(this.activeScene=this._scenes[t],!0)},createViewport:function(t){if(null===this.activeScene)throw new Error("createViewport: use `selectScene` first to select the active scene.");this._viewports[t]&&($parcel$global.dispose(this._viewports[t]),this.activeScene.setViewport(t,null)),this._viewports[t]=new $77b679f5ef01765d4ffd6be7d74228a2$export$default(0,0,$e5eba4110ff3df72a10d17329c1d81db$export$default.screenWidth,$e5eba4110ff3df72a10d17329c1d81db$export$default.screenHeight,this.activeScene.maxWidth,this.activeScene.maxHeight,0,0),this.activeScene.setViewport(t,this._viewports[t]),this.selectViewport(t)},getViewport:function(t=null){return null===t?this.activeViewport:t<0||t>=this._viewports.length?null:this._viewports[t]},selectViewport:function(t){return!(t<0||t>=this._viewports.length||!this._viewports[t])&&(this.activeViewport=this._viewports[t],!0)},setContainer:function(t,e){if(null===this.activeScene)throw new Error("setContainer: use `selectScene` first to select the active scene.");return this.activeScene.setContainer(t,e),e},getContainer:function(t=null,e=!1){if(null===t){if(null===this.activeContainer&&e)throw new Error("getContainer: container index not specified and default container not set.");return this.activeContainer}if(null===this.activeScene)throw new Error("getContainer: use `selectScene` first to select the active scene.");let i=this.activeScene.getContainer(t);if(null===i&&e)throw new Error("getContainer: container index out of bounds.");return i},selectContainer:function(t){return this.activeContainer=this.getContainer(t,!0),null!==this.activeContainer},createGroup:function(t=null){if(null===this.activeScene)throw new Error("createGroup: use selectScene first to select the active scene.");return this.activeGroup=$4a2ddd0887254a2e40ee0a31b6575db9$export$default.Pool.alloc().init(t),this.activeScene.addGroup(this.activeGroup),this.activeGroup},endGroup:function(t=null,e=null){return null!==t&&this.activeGroup.translate(t,e),this.lastGroup=this.activeGroup,this.activeGroup=null,this.lastGroup.sync()},createElement:function(t,e,i,a=null,n=null){"string"!=typeof t&&(n=a,a=i,i=e,e=t,t=null);let r=this.getContainer(n),s=$ddb647b88709c8dfd67dabab58120e2a$export$default.Pool.alloc().init(e,i,a);return r.add(s.setId(t)),null!==this.activeGroup&&this.activeGroup.addChild(s),s},createMask:function(t,e=null,i=null,a=null,n=null,r=null,s=null){"string"!=typeof t&&(s=r,r=n,n=a,a=i,i=e,e=t,t=null);let c=this.getContainer(s||$1422277838a45a7c026d466d9d585c16$export$default.LAYER_MASK);if(null===i){if(null===this.activeGroup)throw new Error("createMask: create a group first to use automatic masks");i=this.activeGroup.bounds.x1,a=this.activeGroup.bounds.y1,n=this.activeGroup.bounds.width(),r=this.activeGroup.bounds.height()}let o=$4af5fc1fc3654d5b7c8a994ec4277c43$export$default.Pool.alloc().init(e,i,a,n,r);return c.add(o.setId(t)),null!==this.activeGroup&&this.activeGroup.addChild(o),o},createLabel:function(t,e,i,a,n,r=null){"string"!=typeof t&&(r=n,n=i,i=e,e=t,t=null);let s=this.getContainer(r),c=$b664b2e615ac985908f37c542d9ee7e5$export$default.Pool.alloc().init(e,i,a,n);return s.add(c.setId(t)),null!==this.activeGroup&&this.activeGroup.addChild(c),c},createUpdater:function(t=null,e=null){if(null===this.activeScene)throw new Error("createUpdater: use selectScene first to select the active scene.");return new $90e0b89862e5a9d0c6d6cfe755cfd44f$export$default(this.activeScene,t,e)}},$be190108e7e5eded85f0df5fd9569fc6$export$default={r:{},load:function(t=null){return new Promise((function(e,i){$8c2ed76c3be599228cd92e613ce51103$export$default.load($be190108e7e5eded85f0df5fd9569fc6$export$default.r,(function(e,i,a){t&&t(a)}),(function(){e()}))}))},get:function(t){return $be190108e7e5eded85f0df5fd9569fc6$export$default.r[t]},__resIdMustNotExist:function(t){if(t in $be190108e7e5eded85f0df5fd9569fc6$export$default.r)throw new Error("res.res: identifier `"+t+"` is already in use")},placeholder:function(t,e,i,a){return this.__resIdMustNotExist(t),$be190108e7e5eded85f0df5fd9569fc6$export$default.r[t]={type:"object",wrapper:"Placeholder",color:e,width:i,height:a}},image:function(t,e,i=null){return this.__resIdMustNotExist(t),$be190108e7e5eded85f0df5fd9569fc6$export$default.r[t]={type:"image",wrapper:"Drawable",src:e,pixelated:null,...i}},spritesheet:function(t,e,i,a,n=0,r=null,s=null){return this.__resIdMustNotExist(t),$be190108e7e5eded85f0df5fd9569fc6$export$default.r[t]={type:"image",wrapper:"Spritesheet",src:e,pixelated:null,config:{frameWidth:i,frameHeight:a,numFrames:n,...r},...s}},animation:function(t,e,i,a,n=0,r=null,s=null){return this.__resIdMustNotExist(t),$be190108e7e5eded85f0df5fd9569fc6$export$default.r[t]={type:"image",wrapper:"SpritesheetAnimation",src:e,config:{frameWidth:i,frameHeight:a,numFrames:n,...r},anim:{def:null,fps:15,seq:{}},...s,fps:function(t){return this.anim.fps=t,this},seq:function(t,e,i,a=null){return this.anim.seq[t]={loop:e,group:i},null!==a&&(this.anim.seq[t].fps=a),this},def:function(t){return this.anim.def=t,this}}},spritefont:function(t,e,i,a,n,r=null,s=null){return this.__resIdMustNotExist(t),$be190108e7e5eded85f0df5fd9569fc6$export$default.r[t]={type:"image",wrapper:"SpriteFont",src:e,font:{charWidth:i,charHeight:a,charset:n,...r},...s}}},$aacd3558e8e9ca1354b0d1183ba5d855$export$default=$49a0a27d43075b98f896056be628f99a$export$Class.extend({sticks:null,buttons:null,scene:null,container:null,__ctor:function(t,e){this.sticks={},this.buttons={},this.scene=t,this.layer=t.getContainer(e),this.layer.depthTest(!1)},addStick:function(t,e,i,a,n,r=0){0==r&&(r=a.width-n.width);let s=new $52910331a2e2e68437e9ccfbb34ae506$export$default(this.layer,e,i,r,a,n);return this.sticks[t]=s,this[t]=s,s},addButton:function(t,e,i,a,n=null){let r=new $b16c78d90a5735557317530efb31b314$export$default(this.layer,e,i,a,n);return this.buttons[t]=r,this[t]=r,r},debug:function(t){for(let e in this.sticks)this.sticks[e].hitbox.debugBounds=t;for(let e in this.buttons)this.buttons[e].hitbox.debugBounds=t}}),$a4ae765c3dc98a0352a37bbdea65ab3e$export$default={_gamepads:[],activeGamepad:null,createGamepad:function(t,e=null){if(null===$1422277838a45a7c026d466d9d585c16$export$default.activeScene)throw new Error("input.createGamepad: use world.selectScene first to select the active scene.");return this._gamepads[t]=new $aacd3558e8e9ca1354b0d1183ba5d855$export$default($1422277838a45a7c026d466d9d585c16$export$default.activeScene,null!==e?e:$1422277838a45a7c026d466d9d585c16$export$default.LAYER_HUD_FG),this},getGamepad:function(t){return t<0||t>=this._gamepads.length?null:this._gamepads[t]||null},selectGamepad:function(t){return this.activeGamepad=this.getGamepad(t),!0},debugGamepad:function(t,e){if(null!==t)this._gamepads[t].debug(e);else for(let t=0;t<this._gamepads.length;t++)this._gamepads[t]&&this.debugGamepad(t,e)},stick:function(t,e,i,a,n,r=0){if(null===this.activeGamepad)throw new Error("input.addStick: use input.selectGamepad first to select the active gamepad.");return this.activeGamepad.addStick(t,e,i,a,n,r)},button:function(t,e,i,a,n=null){if(null===this.activeGamepad)throw new Error("input.addButton: use input.selectGamepad first to select the active gamepad.");return this.activeGamepad.addButton(t,e,i,a,n)}},$0566a7d2aa90378ab389e9885ad3bbac$export$default={ACTION_TRUNCATE:1,ACTION_CALLBACK:2,FLAG_EXCLUDE:$7a341878b2625de6871f03e49d9ff35d$export$default.allocFlag(),futureBounds:$c1c2b815c89b9264ed0e554223c27659$export$default.calloc(),intersectionRect:$c1c2b815c89b9264ed0e554223c27659$export$default.calloc(),tempRect:$c1c2b815c89b9264ed0e554223c27659$export$default.calloc(),rules:{},scene:null,maskLayer:null,fupdater:null,lupdater:null,flagsAnd:0,flagsValue:0,truncated:!1,flags:0,numFlags:0,group:null,mask:null,collisionItem:null,offs:null,m_dx:0,m_dy:0,dx:0,dy:0,enable:function(t=null){this.scene=$1422277838a45a7c026d466d9d585c16$export$default.getScene(),this.maskLayer=$1422277838a45a7c026d466d9d585c16$export$default.getContainer(t||$1422277838a45a7c026d466d9d585c16$export$default.LAYER_MASK),this.flagsAnd=$7a341878b2625de6871f03e49d9ff35d$export$default.ALIVE|$7a341878b2625de6871f03e49d9ff35d$export$default.VISIBLE|$0566a7d2aa90378ab389e9885ad3bbac$export$default.FLAG_EXCLUDE,this.flagsValue=$7a341878b2625de6871f03e49d9ff35d$export$default.ALIVE|$7a341878b2625de6871f03e49d9ff35d$export$default.VISIBLE,this.scene.fupdater.add(this.update,this),this.fupdater=$b24b690628e515896a9fe69710f34dc4$export$default.alloc().init(this),this.lupdater=$b24b690628e515896a9fe69710f34dc4$export$default.alloc().init(this)},disable:function(){this.scene.fupdater.remove(this.update,this),this.maskLayer=null,this.fupdater.free(),this.lupdater.free()},update:function(t,e){e.fupdater.exec(),e.lupdater.exec()},later:{setVisible:function(t,e){$0566a7d2aa90378ab389e9885ad3bbac$export$default.fupdater.add(this._setVisible,t,e)},setFlags:function(t,e){$0566a7d2aa90378ab389e9885ad3bbac$export$default.fupdater.add(this._setFlags,t,e)},clearFlags:function(t,e){$0566a7d2aa90378ab389e9885ad3bbac$export$default.fupdater.add(this._clearFlags,t,e)},_setVisible:function(t,e,i){return e.visible(i),!1},_setFlags:function(t,e,i){return e.setFlags(i),!1},_clearFlags:function(t,e,i){return e.clearFlags(i),!1}},add:function(t,e,i,a=null,n=null){"function"==typeof i&&(n=a,a=i,i=$0566a7d2aa90378ab389e9885ad3bbac$export$default.ACTION_CALLBACK),t in this.rules||(this.rules[t]={rules:{}}),this.rules[t].rules[e]={action:i,callback:a,context:n}},loadContactFlags:function(t,e){return this.flags=0,this.numFlags=0,t.x1==e.x1&&(this.flags|=1,this.numFlags++),t.x2==e.x2&&(this.flags|=2,this.numFlags++),t.y1==e.y1&&(this.flags|=4,this.numFlags++),t.y2==e.y2&&(this.flags|=8,this.numFlags++),this.flags},truncate:function(){if(1==this.numFlags||0!=this.dx&&0!=this.dy||(0==this.dx?this.flags&=12:this.flags&=3,this.numFlags=1),1!=this.numFlags&&this.intersectionRect.width()!=this.intersectionRect.height()&&(this.intersectionRect.width()>this.intersectionRect.height()?this.flags&=12:this.flags&=3,this.numFlags=1),1!=this.numFlags&&(1&this.flags&&this.dx<=0&&(this.flags&=-2,this.numFlags--),2&this.flags&&this.dx>=0&&(this.flags&=-3,this.numFlags--),4&this.flags&&this.dy<=0&&(this.flags&=-5,this.numFlags--),8&this.flags&&this.dy>=0&&(this.flags&=-9,this.numFlags--)),1!=this.numFlags)if(this.tempRect.set(this.mask.bounds).translate(this.offs.x+this.dx,0),0==this.maskLayer.countInRegion(this.tempRect,this.flagsAnd,this.flagsValue))this.dy=0;else{if(this.tempRect.set(this.mask.bounds).translate(0,this.offs.y+this.dy),0!=this.maskLayer.countInRegion(this.tempRect,this.flagsAnd,this.flagsValue))return void console.log("ISSUE WITH MOVEMENT");this.dx=0}else 1&this.flags?this.dx=this.collisionItem.bounds.x1-this.mask.bounds.x2:2&this.flags&&(this.dx=this.collisionItem.bounds.x2-this.mask.bounds.x1),4&this.flags?this.dy=this.collisionItem.bounds.y1-this.mask.bounds.y2:8&this.flags&&(this.dy=this.collisionItem.bounds.y2-this.mask.bounds.y1);this.truncated=!0},commit:function(t=!1){this.group.alive()&&(0==this.dx&&0==this.dy&&null!==this.m_dx||((null===this.m_dx||Math.abs(this.dx)<Math.abs(this.m_dx))&&(this.m_dx=this.dx),(null===this.m_dy||Math.abs(this.dy)<Math.abs(this.m_dy))&&(this.m_dy=this.dy),this.dx=0,this.dy=0),!0===t&&(0==this.m_dx&&0==this.m_dy||this.group.translate(this.m_dx,this.m_dy),this.group.clearFlags($0566a7d2aa90378ab389e9885ad3bbac$export$default.FLAG_EXCLUDE)))},translate:function(t,e,i,a){if(this.group=t,this.mask=e,this.truncated=!1,this.m_dx=null,this.m_dy=null,this.dx=i=downscalef(upscale(i)),this.dy=a=downscalef(upscale(a)),!this.maskLayer)return this.commit(!0);let n=this.rules[e.type];if(!n)return this.commit(!0);this.offs=t.getOffsets(this.dx,this.dy),this.futureBounds.set(e.bounds).translate(this.offs.x+this.dx,this.offs.y+this.dy),t.setFlags($0566a7d2aa90378ab389e9885ad3bbac$export$default.FLAG_EXCLUDE);let r=this.maskLayer.selectInRegion(this.futureBounds,this.flagsAnd,this.flagsValue);if(0===r.length)return r.free(),this.commit(!0);for(;this.collisionItem=r.shift(),null!==this.collisionItem;){let t=n.rules[this.collisionItem.type];if(t)if(this.intersectionRect.set(this.collisionItem.bounds).setAsIntersection(this.futureBounds),this.loadContactFlags(this.intersectionRect,this.collisionItem.bounds),this.flags){switch(this.dx=i,this.dy=a,t.action){case $0566a7d2aa90378ab389e9885ad3bbac$export$default.ACTION_TRUNCATE:this.truncate();break;case $0566a7d2aa90378ab389e9885ad3bbac$export$default.ACTION_CALLBACK:t.callback(e,this.collisionItem,t.context)}if(!e.alive())break;this.commit()}else console.log("INSIDE "+this.collisionItem.type.toString(16)+" FROM "+e.type.toString(16))}r.free(),this.commit(!0)},check:function(t,e){this.translate(t,e,0,0)}},$a3dd07e1619eee49527834a2575dfaf7$export$sys=$e5eba4110ff3df72a10d17329c1d81db$export$default;$parcel$export($a3dd07e1619eee49527834a2575dfaf7$exports,"sys",(function(){return $a3dd07e1619eee49527834a2575dfaf7$export$sys}));const $a3dd07e1619eee49527834a2575dfaf7$export$world=$1422277838a45a7c026d466d9d585c16$export$default;$parcel$export($a3dd07e1619eee49527834a2575dfaf7$exports,"world",(function(){return $a3dd07e1619eee49527834a2575dfaf7$export$world}));const $a3dd07e1619eee49527834a2575dfaf7$export$res=$be190108e7e5eded85f0df5fd9569fc6$export$default;$parcel$export($a3dd07e1619eee49527834a2575dfaf7$exports,"res",(function(){return $a3dd07e1619eee49527834a2575dfaf7$export$res}));const $a3dd07e1619eee49527834a2575dfaf7$export$input=$a4ae765c3dc98a0352a37bbdea65ab3e$export$default;$parcel$export($a3dd07e1619eee49527834a2575dfaf7$exports,"input",(function(){return $a3dd07e1619eee49527834a2575dfaf7$export$input}));const $a3dd07e1619eee49527834a2575dfaf7$export$collider=$0566a7d2aa90378ab389e9885ad3bbac$export$default;$parcel$export($a3dd07e1619eee49527834a2575dfaf7$exports,"collider",(function(){return $a3dd07e1619eee49527834a2575dfaf7$export$collider}));const $0c9c00c2409eb95b5e4d849b566b4428$export$Class=$49a0a27d43075b98f896056be628f99a$export$Class;$parcel$export($0c9c00c2409eb95b5e4d849b566b4428$exports,"Class",(function(){return $0c9c00c2409eb95b5e4d849b566b4428$export$Class}));const $0c9c00c2409eb95b5e4d849b566b4428$export$globals=$c5794ced0840f4a2f23c1c50dcedc59f$export$default;$parcel$export($0c9c00c2409eb95b5e4d849b566b4428$exports,"globals",(function(){return $0c9c00c2409eb95b5e4d849b566b4428$export$globals}));const $0c9c00c2409eb95b5e4d849b566b4428$export$System=$cabc4716fe90fb352f6039743eaed35c$export$default;$parcel$export($0c9c00c2409eb95b5e4d849b566b4428$exports,"System",(function(){return $0c9c00c2409eb95b5e4d849b566b4428$export$System}));const $0c9c00c2409eb95b5e4d849b566b4428$export$Timer=$b82d452f2e3484b177bea709fd7b4383$export$default;$parcel$export($0c9c00c2409eb95b5e4d849b566b4428$exports,"Timer",(function(){return $0c9c00c2409eb95b5e4d849b566b4428$export$Timer}));const $0c9c00c2409eb95b5e4d849b566b4428$export$Random=$883e395d0b2123d7f53561ada8782bc4$export$default;$parcel$export($0c9c00c2409eb95b5e4d849b566b4428$exports,"Random",(function(){return $0c9c00c2409eb95b5e4d849b566b4428$export$Random}));const $0c9c00c2409eb95b5e4d849b566b4428$export$KeyCodes=$ecb27258662111bab70dd084a4f71ebf$export$default;$parcel$export($0c9c00c2409eb95b5e4d849b566b4428$exports,"KeyCodes",(function(){return $0c9c00c2409eb95b5e4d849b566b4428$export$KeyCodes}));const $0c9c00c2409eb95b5e4d849b566b4428$export$Canvas=$3c56105c2000e8ab7d1a19dceac231fb$export$default;$parcel$export($0c9c00c2409eb95b5e4d849b566b4428$exports,"Canvas",(function(){return $0c9c00c2409eb95b5e4d849b566b4428$export$Canvas}));const $0c9c00c2409eb95b5e4d849b566b4428$export$Perf=$363800ec3de62fddc1d9a5e33a6b17dc$export$default;$parcel$export($0c9c00c2409eb95b5e4d849b566b4428$exports,"Perf",(function(){return $0c9c00c2409eb95b5e4d849b566b4428$export$Perf}));const $0c9c00c2409eb95b5e4d849b566b4428$export$Log=$4ca05bce8e5796b66097460c15da00c9$export$default;$parcel$export($0c9c00c2409eb95b5e4d849b566b4428$exports,"Log",(function(){return $0c9c00c2409eb95b5e4d849b566b4428$export$Log}));const $0c9c00c2409eb95b5e4d849b566b4428$export$Wrappers=$c300508ff8318f231a03f90d08d1052b$exports;$parcel$export($0c9c00c2409eb95b5e4d849b566b4428$exports,"Wrappers",(function(){return $0c9c00c2409eb95b5e4d849b566b4428$export$Wrappers}));const $0c9c00c2409eb95b5e4d849b566b4428$export$Resources=$8c2ed76c3be599228cd92e613ce51103$export$default;$parcel$export($0c9c00c2409eb95b5e4d849b566b4428$exports,"Resources",(function(){return $0c9c00c2409eb95b5e4d849b566b4428$export$Resources}));const $0c9c00c2409eb95b5e4d849b566b4428$export$Recycler=$ccdbbc32fd9f0a412799511487cd91a1$export$default;$parcel$export($0c9c00c2409eb95b5e4d849b566b4428$exports,"Recycler",(function(){return $0c9c00c2409eb95b5e4d849b566b4428$export$Recycler}));const $0c9c00c2409eb95b5e4d849b566b4428$export$Linkable=$8581dd2a4034ebdbe37300f3afba0093$export$default;$parcel$export($0c9c00c2409eb95b5e4d849b566b4428$exports,"Linkable",(function(){return $0c9c00c2409eb95b5e4d849b566b4428$export$Linkable}));const $0c9c00c2409eb95b5e4d849b566b4428$export$List=$9331e791bdadeac9afb7e80808da523d$export$default;$parcel$export($0c9c00c2409eb95b5e4d849b566b4428$exports,"List",(function(){return $0c9c00c2409eb95b5e4d849b566b4428$export$List}));const $0c9c00c2409eb95b5e4d849b566b4428$export$PriorityQueue=$3a1f3760b46e848362e1421ba143903d$export$default;$parcel$export($0c9c00c2409eb95b5e4d849b566b4428$exports,"PriorityQueue",(function(){return $0c9c00c2409eb95b5e4d849b566b4428$export$PriorityQueue}));const $0c9c00c2409eb95b5e4d849b566b4428$export$Handler=$b24b690628e515896a9fe69710f34dc4$export$default;$parcel$export($0c9c00c2409eb95b5e4d849b566b4428$exports,"Handler",(function(){return $0c9c00c2409eb95b5e4d849b566b4428$export$Handler}));const $0c9c00c2409eb95b5e4d849b566b4428$export$Matrix=$3e5498a08e31fe3580cca1707752773a$export$default;$parcel$export($0c9c00c2409eb95b5e4d849b566b4428$exports,"Matrix",(function(){return $0c9c00c2409eb95b5e4d849b566b4428$export$Matrix}));const $0c9c00c2409eb95b5e4d849b566b4428$export$Rect=$cfea91c9ac660d2876bf91c30bd6a9f3$export$default;$parcel$export($0c9c00c2409eb95b5e4d849b566b4428$exports,"Rect",(function(){return $0c9c00c2409eb95b5e4d849b566b4428$export$Rect}));const $0c9c00c2409eb95b5e4d849b566b4428$export$Vec2=$fe31f04e32686e924bb665d33d1abcbf$export$default;$parcel$export($0c9c00c2409eb95b5e4d849b566b4428$exports,"Vec2",(function(){return $0c9c00c2409eb95b5e4d849b566b4428$export$Vec2}));const $0c9c00c2409eb95b5e4d849b566b4428$export$TFunction=$9e7762fe4ba0e2d12cbcd459eadedcb7$export$default;$parcel$export($0c9c00c2409eb95b5e4d849b566b4428$exports,"TFunction",(function(){return $0c9c00c2409eb95b5e4d849b566b4428$export$TFunction}));const $0c9c00c2409eb95b5e4d849b566b4428$export$Bounds2=$c1c2b815c89b9264ed0e554223c27659$export$default;$parcel$export($0c9c00c2409eb95b5e4d849b566b4428$exports,"Bounds2",(function(){return $0c9c00c2409eb95b5e4d849b566b4428$export$Bounds2}));const $0c9c00c2409eb95b5e4d849b566b4428$export$Point2=$915b1937740c478df54f3272021d2c1c$export$default;$parcel$export($0c9c00c2409eb95b5e4d849b566b4428$exports,"Point2",(function(){return $0c9c00c2409eb95b5e4d849b566b4428$export$Point2}));const $0c9c00c2409eb95b5e4d849b566b4428$export$Easing=$18f56a190a3a3ff5c8b7ebba0279c438$export$default;$parcel$export($0c9c00c2409eb95b5e4d849b566b4428$exports,"Easing",(function(){return $0c9c00c2409eb95b5e4d849b566b4428$export$Easing}));const $0c9c00c2409eb95b5e4d849b566b4428$export$Anim=$b3f77e113c0f558ec76d4638522e74c8$export$default;$parcel$export($0c9c00c2409eb95b5e4d849b566b4428$exports,"Anim",(function(){return $0c9c00c2409eb95b5e4d849b566b4428$export$Anim}));const $0c9c00c2409eb95b5e4d849b566b4428$export$Boot=$207b59440723904b38982ddc4272b61b$export$default;$parcel$export($0c9c00c2409eb95b5e4d849b566b4428$exports,"Boot",(function(){return $0c9c00c2409eb95b5e4d849b566b4428$export$Boot}));const $0c9c00c2409eb95b5e4d849b566b4428$export$GridElement=$7a341878b2625de6871f03e49d9ff35d$export$default;$parcel$export($0c9c00c2409eb95b5e4d849b566b4428$exports,"GridElement",(function(){return $0c9c00c2409eb95b5e4d849b566b4428$export$GridElement}));const $0c9c00c2409eb95b5e4d849b566b4428$export$Grid=$5455570ea965ce03f28a7753614d671d$export$default;$parcel$export($0c9c00c2409eb95b5e4d849b566b4428$exports,"Grid",(function(){return $0c9c00c2409eb95b5e4d849b566b4428$export$Grid}));const $0c9c00c2409eb95b5e4d849b566b4428$export$Scene=$c71a3bc6e745875d5097e035813a6806$export$default;$parcel$export($0c9c00c2409eb95b5e4d849b566b4428$exports,"Scene",(function(){return $0c9c00c2409eb95b5e4d849b566b4428$export$Scene}));const $0c9c00c2409eb95b5e4d849b566b4428$export$Viewport=$77b679f5ef01765d4ffd6be7d74228a2$export$default;$parcel$export($0c9c00c2409eb95b5e4d849b566b4428$exports,"Viewport",(function(){return $0c9c00c2409eb95b5e4d849b566b4428$export$Viewport}));const $0c9c00c2409eb95b5e4d849b566b4428$export$Updater=$90e0b89862e5a9d0c6d6cfe755cfd44f$export$default;$parcel$export($0c9c00c2409eb95b5e4d849b566b4428$exports,"Updater",(function(){return $0c9c00c2409eb95b5e4d849b566b4428$export$Updater}));const $0c9c00c2409eb95b5e4d849b566b4428$export$Container=$165af1ab52f365e7ef649f223d1085b3$export$default;$parcel$export($0c9c00c2409eb95b5e4d849b566b4428$exports,"Container",(function(){return $0c9c00c2409eb95b5e4d849b566b4428$export$Container}));const $0c9c00c2409eb95b5e4d849b566b4428$export$SimpleContainer=$11afb610437a3710eee4c4e987daab23$export$default;$parcel$export($0c9c00c2409eb95b5e4d849b566b4428$exports,"SimpleContainer",(function(){return $0c9c00c2409eb95b5e4d849b566b4428$export$SimpleContainer}));const $0c9c00c2409eb95b5e4d849b566b4428$export$GridContainer=$3199a6c942a7e5178eebb25dca4aec14$export$default;$parcel$export($0c9c00c2409eb95b5e4d849b566b4428$exports,"GridContainer",(function(){return $0c9c00c2409eb95b5e4d849b566b4428$export$GridContainer}));const $0c9c00c2409eb95b5e4d849b566b4428$export$Group=$4a2ddd0887254a2e40ee0a31b6575db9$export$default;$parcel$export($0c9c00c2409eb95b5e4d849b566b4428$exports,"Group",(function(){return $0c9c00c2409eb95b5e4d849b566b4428$export$Group}));const $0c9c00c2409eb95b5e4d849b566b4428$export$Element=$ddb647b88709c8dfd67dabab58120e2a$export$default;$parcel$export($0c9c00c2409eb95b5e4d849b566b4428$exports,"Element",(function(){return $0c9c00c2409eb95b5e4d849b566b4428$export$Element}));const $0c9c00c2409eb95b5e4d849b566b4428$export$Mask=$4af5fc1fc3654d5b7c8a994ec4277c43$export$default;$parcel$export($0c9c00c2409eb95b5e4d849b566b4428$exports,"Mask",(function(){return $0c9c00c2409eb95b5e4d849b566b4428$export$Mask}));const $0c9c00c2409eb95b5e4d849b566b4428$export$Label=$b664b2e615ac985908f37c542d9ee7e5$export$default;$parcel$export($0c9c00c2409eb95b5e4d849b566b4428$exports,"Label",(function(){return $0c9c00c2409eb95b5e4d849b566b4428$export$Label}));const $0c9c00c2409eb95b5e4d849b566b4428$export$KeyboardHandler=$35ed923298b3cffd909d1e217a705010$export$default;$parcel$export($0c9c00c2409eb95b5e4d849b566b4428$exports,"KeyboardHandler",(function(){return $0c9c00c2409eb95b5e4d849b566b4428$export$KeyboardHandler}));const $0c9c00c2409eb95b5e4d849b566b4428$export$PointerHandler=$80fe7598813bab8b70bdda84376bf98b$export$default;$parcel$export($0c9c00c2409eb95b5e4d849b566b4428$exports,"PointerHandler",(function(){return $0c9c00c2409eb95b5e4d849b566b4428$export$PointerHandler}));const $0c9c00c2409eb95b5e4d849b566b4428$export$ScreenControls=$ed3917ac682376c75cf6afece38cd992$export$default;$parcel$export($0c9c00c2409eb95b5e4d849b566b4428$exports,"ScreenControls",(function(){return $0c9c00c2409eb95b5e4d849b566b4428$export$ScreenControls}));const $0c9c00c2409eb95b5e4d849b566b4428$export$Button=$b16c78d90a5735557317530efb31b314$export$default;$parcel$export($0c9c00c2409eb95b5e4d849b566b4428$exports,"Button",(function(){return $0c9c00c2409eb95b5e4d849b566b4428$export$Button}));const $0c9c00c2409eb95b5e4d849b566b4428$export$Stick=$52910331a2e2e68437e9ccfbb34ae506$export$default;$parcel$export($0c9c00c2409eb95b5e4d849b566b4428$exports,"Stick",(function(){return $0c9c00c2409eb95b5e4d849b566b4428$export$Stick}));var $0c9c00c2409eb95b5e4d849b566b4428$export$default=$a3dd07e1619eee49527834a2575dfaf7$exports;$parcel$export($0c9c00c2409eb95b5e4d849b566b4428$exports,"default",(function(){return $0c9c00c2409eb95b5e4d849b566b4428$export$default}));var _default=froxel=$0c9c00c2409eb95b5e4d849b566b4428$exports})();